"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[2501],{28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var s=t(96540);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}},29358:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"server-admin/deploy-install","title":"Install","description":"How To Do the Initial Setup of ERDDAP\u2122 on Your Server","source":"@site/docs/server-admin/deploy-install.md","sourceDirName":"server-admin","slug":"/server-admin/deploy-install","permalink":"/docs/server-admin/deploy-install","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/deploy-install.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docSidebar","previous":{"title":"Server Administration","permalink":"/docs/category/server-administration"},"next":{"title":"Update","permalink":"/docs/server-admin/deploy-update"}}');var r=t(74848),i=t(28453);const o={sidebar_position:1},a="Install",d={},l=[{value:"Java",id:"java",level:2},{value:"Tomcat",id:"tomcat",level:2},{value:"server.xml",id:"serverxml",level:3},{value:"content.xml",id:"contentxml",level:3},{value:"Apache Timeout",id:"apache-timeout",level:3},{value:"Security",id:"security",level:3},{value:"Memory",id:"memory",level:3},{value:"Garbage Collection",id:"garbage-collection",level:4},{value:"Permissions",id:"permissions",level:3},{value:"Fonts",id:"fonts",level:3},{value:"Test Tomcat",id:"test-tomcat",level:3},{value:"Troubles with the Tomcat installation?",id:"troubles-with-the-tomcat-installation",level:3},{value:"ERDDAP\u2122 Content",id:"erddap-content",level:3},{value:"Other Directory",id:"other-directory",level:4},{value:"setup.xml",id:"setupxml",level:3},{value:"Environment Variables",id:"environment-variables",level:3},{value:"datasets.xml",id:"datasetsxml",level:3},{value:"Install the erddap.war file",id:"install-the-erddapwar-file",level:3},{value:"Configure proxy (deployment specific)",id:"proxy",level:3},{value:"Apache",id:"apache",level:4},{value:"NGINX",id:"nginx",level:4},{value:"Start Tomcat",id:"start-tomcat",level:3},{value:"Is ERDDAP\u2122 running?",id:"is-erddap-running",level:2},{value:"Troubleshooting",id:"troubleshooting",level:3},{value:"Trouble: Old Version of Java",id:"trouble-old-version-of-java",level:3},{value:"Trouble: Slow Startup First Time",id:"trouble-slow-startup-first-time",level:3},{value:"Shut down and restart",id:"shut-down-and-restart",level:2},{value:"Trouble?",id:"trouble",level:2},{value:"Email Notification of New Versions of ERDDAP",id:"email-notification-of-new-versions-of-erddap",level:2},{value:"Customize",id:"customize",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"install",children:"Install"})}),"\n",(0,r.jsx)(n.p,{children:"How To Do the Initial Setup of ERDDAP\u2122 on Your Server"}),"\n",(0,r.jsx)(n.p,{children:"ERDDAP\u2122 can run on any server that supports Java and Tomcat (and other application servers like Jetty, but we don't support them).\nERDDAP\u2122 has been tested on Linux (including on Amazon's AWS), Mac, and Windows computers."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Docker"})," -- We provide ",(0,r.jsx)(n.a,{href:"https://hub.docker.com/r/erddap/erddap",children:"ERDDAP\u2122 in a Docker container"}),"\nand IOOS now offers a ",(0,r.jsx)(n.a,{href:"https://ioos.github.io/erddap-gold-standard/index.html",children:"Quick Start Guide for ERDDAP\u2122 in a Docker Container"}),".\nIt's the standard ERDDAP\u2122 installation, in a Docker container.\nThrough Docker Compose we provide easy ways to set up ssl and monitoring, read more in out ",(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/blob/main/DOCKER.md",children:"Docker documentation"}),".\nIf you already use Docker, you will probably prefer the Docker version.\nIf you are looking to run on cloud services you will probably prefer the Docker version."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Amazon"})," -- If you are installing ERDDAP\u2122 on an Amazon Web Services EC2 instance, see this ",(0,r.jsx)(n.a,{href:"/docs/server-admin/additional-information#amazon",children:"Amazon Web Services Overview"})," first."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Linux and Macs"})," -- ERDDAP\u2122 works great on Linux and Mac computers. See the instructions below."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Windows"})," -- Windows is fine for testing ERDDAP\u2122 and for personal use (see the instructions below),\nbut we don't recommend using it for public ERDDAP\u2122 deployments. Running ERDDAP\u2122 on Windows may have problems:\nnotably, ERDDAP\u2122 may be unable to delete and/or rename files quickly. This is probably due to antivirus software\n(e.g., from McAfee and Norton) which is checking the files for viruses. If you run into this problem\n(which can be seen by error messages in the ",(0,r.jsx)(n.a,{href:"/docs/server-admin/additional-information#log",children:"log.txt"}),' file like\n"Unable to delete ..."), changing the antivirus software\'s settings may partially alleviate the problem. Or consider using a Linux or Mac server instead.']}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"The standard ERDDAP\u2122 installation instructions for Linux, Macs, and Windows computers are:"})}),"\n",(0,r.jsxs)(n.ol,{start:"0",children:["\n",(0,r.jsx)(n.li,{children:"Make sure any dependencies are installed. On non-Windows machines (Linux and Mac), you need csh."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"java",children:"Java"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"#java",children:"For ERDDAP\u2122 v2.19+, set up Java 21."}),"\nFor security reasons, it is almost always best to use the latest version of Java 21.\nPlease download and install the latest version of\n",(0,r.jsx)(n.a,{href:"https://adoptium.net/temurin/releases/?version=21",children:"Adoptium's OpenJDK (Temurin) 21 (LTS)"}),".\nTo verify the installation, run ",(0,r.jsx)(n.code,{children:"/javaJreBinDirectory/java -version"}),", for example\n",(0,r.jsx)(n.code,{children:"/usr/local/jdk-21.0.3+9/jre/bin/java -version"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"ERDDAP\u2122 works with Java from other sources, but we recommend Adoptium because it is the main, community-supported,\nfree (as in beer and speech) version of Java 21 that offers Long Term Support (free upgrades for many years past the initial release).\nFor security reasons, please update your ERDDAP's version of Java periodically as new versions of Java 21 become available from Adoptium."}),"\n",(0,r.jsx)(n.p,{children:"ERDDAP\u2122 has been tested and used extensively with 21, not other versions. For various reasons, we don't test with nor support other versions of Java.\n\xa0"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"tomcat",children:"Tomcat"}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"#tomcat",children:"Set up"})," ",(0,r.jsx)(n.a,{href:"https://tomcat.apache.org",children:"Tomcat"}),". Tomcat is the most widely used Java Application Server,\nwhich is Java software that stands between the operating system's network services and Java server software like ERDDAP\u2122.\nIt is Free and Open Source Software (FOSS)."]}),"\n",(0,r.jsx)(n.p,{children:"You can use another Java Application Server (e.g., Jetty), but we only test with and support Tomcat."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Download Tomcat and unpack it on your server or PC.\nFor security reasons, it is almost always best to use the latest version of Tomcat 10 (version 9 and below are not acceptable)\nwhich is designed to work with Java 21 or newer. Below, the Tomcat directory will be referred to as ",(0,r.jsx)(n.code,{children:"tomcat"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Warning!"})," If you already have a Tomcat running some other web application (especially THREDDS), we recommend that you install ERDDAP\u2122 in\n",(0,r.jsx)(n.a,{href:"/docs/server-admin/additional-information#second-tomcat",children:"a\xa0second\xa0Tomcat"}),", because ERDDAP\u2122 needs different Tomcat settings\nand shouldn't have to contend with other applications for memory."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["On Linux, ",(0,r.jsx)(n.a,{href:"https://tomcat.apache.org/download-10.cgi",children:'download the "Core" "tar.gz" Tomcat distribution'})," and unpack it.\nWe recommend unpacking it in ",(0,r.jsx)(n.code,{children:"/usr/local"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["On a Mac, Tomcat is probably already installed in ",(0,r.jsx)(n.code,{children:"/Library/Tomcat"}),", but should update it to the latest version of Tomcat 10.\nIf you download it, ",(0,r.jsx)(n.a,{href:"https://tomcat.apache.org/download-10.cgi",children:'download the "Core" "tar.gz" Tomcat distribution'})," and unpack it in ",(0,r.jsx)(n.code,{children:"/Library/Tomcat"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["On Windows, you can ",(0,r.jsx)(n.a,{href:"https://tomcat.apache.org/download-10.cgi",children:'download the "Core" "zip" Tomcat distribution'}),'\n(which doesn\'t mess with the Windows registry and which you control from a DOS command line) and unpack it in an appropriate directory.\n(For development, we use the "Core" "zip" distribution. We make a ',(0,r.jsx)(n.code,{children:"/programs"}),' directory and unpack it there.)\nOr you can download the "Core" "64-bit Windows zip" distribution, which includes more features.\nIf the distribution is a Windows installer, it will probably put Tomcat in, for example, ',(0,r.jsx)(n.code,{children:"/Program Files/apache-tomcat-10.0.23"}),".\n\xa0"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"serverxml",children:"server.xml"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#serverxml",children:"server.xml"})," - In the ",(0,r.jsx)(n.code,{children:"tomcat/conf/server.xml"})," file, there are two changes that you should make to each of the two ",(0,r.jsx)(n.code,{children:"<Connector>"})," tags\n(one for ",(0,r.jsx)(n.code,{children:'<Connector port="8080"'})," and one for ",(0,r.jsx)(n.code,{children:'<Conector port="8443"'}),").","\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["(Recommended) Increase the ",(0,r.jsx)(n.code,{children:"connectionTimeout"})," parameter value, perhaps to 300000 (milliseconds, which is 5 minutes)."]}),"\n",(0,r.jsxs)(n.li,{children:["(Recommended) Add a new parameter: ",(0,r.jsx)(n.code,{children:'relaxedQueryChars="[]|"'}),". This is optional and slightly less secure,\nbut removes the need for users to percent-encode these characters when they occur in the parameters of a user's request URL.\n\xa0"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"contentxml",children:"content.xml"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["context.xml -- Resources Cache - In ",(0,r.jsx)(n.code,{children:"tomcat/conf/context.xml"}),", right before the ",(0,r.jsx)(n.code,{children:"</Context>"})," tag, change the Resources tag\n(or add it if it isn't already there) to set the cacheMaxSize parameter to 80000:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'<Resources cachingAllowed="true" cacheMaxSize="80000" />\n'})}),"\n","This avoids numerous warnings in catalina.out that all start with","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"WARNING [main] org.apache.catalina.webresources.Cache.getResource Unable to add the resource at [/WEB-INF/classes/...]\n"})}),"\n","\xa0"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"apache-timeout",children:"Apache Timeout"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:['On Linux computers, change the Apache timeout settings so that time-consuming user requests don\'t timeout\n(with what often appears as a "Proxy" or "Bad Gateway" error). As the root user:',"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Modify the Apache ",(0,r.jsx)(n.code,{children:"httpd.conf"})," file (usually in ",(0,r.jsx)(n.code,{children:"/etc/httpd/conf/"}),"):","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Change the existing ",(0,r.jsx)(n.code,{children:"<Timeout>"})," setting (or add one at the end of the file) to 3600 (seconds), instead of the default 60 or 120 seconds."]}),"\n",(0,r.jsxs)(n.li,{children:["Change the existing ",(0,r.jsx)(n.code,{children:"<ProxyTimeout>"})," setting (or add one at the end of the file) to 3600 (seconds), instead of the default 60 or 120 seconds."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Restart Apache: ",(0,r.jsx)(n.code,{children:"/usr/sbin/apachectl -k graceful"})," (but sometimes it is in a different directory)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"security",children:"Security"}),"\n",(0,r.jsx)(n.p,{children:"\xa0"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Security recommendation: See ",(0,r.jsx)(n.a,{href:"https://tomcat.apache.org/tomcat-10.0-doc/security-howto.html",children:"these\xa0instructions"})," to increase the security of\nyour Tomcat installation, especially for public servers.\n\xa0"]}),"\n",(0,r.jsxs)(n.li,{children:["For public ERDDAP\u2122 installations on Linux and Macs, it is best to set up Tomcat (the program) as belonging to user ",(0,r.jsx)(n.code,{children:"tomcat"}),"\n(a separate user with limited permissions and which ",(0,r.jsx)(n.a,{href:"https://unix.stackexchange.com/questions/56765/creating-an-user-without-a-password",children:"has no password"}),").\nThus, only the super user can switch to acting as user ",(0,r.jsx)(n.code,{children:"tomcat"}),". This makes it impossible for hackers to log in to your server as user ",(0,r.jsx)(n.code,{children:"tomcat"}),".\nAnd in any case, you should make it so that the ",(0,r.jsx)(n.code,{children:"tomcat"})," user has very limited permissions on the server's file system (read+write+execute privileges\nfor the ",(0,r.jsx)(n.code,{children:"apache-tomcat"})," directory tree and ",(0,r.jsx)(n.code,{children:"<bigParentDirectory>"})," and read-only privileges for directories with data that ERDDAP\u2122 needs access to).","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["You can create the ",(0,r.jsx)(n.code,{children:"tomcat"})," user account (which has no password) by using the command:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sudo useradd tomcat -s /bin/bash -p '*'\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["You can switch to working as user ",(0,r.jsx)(n.code,{children:"tomcat"})," by using the command","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"sudo su - tomcat\n"})}),"\n","(It will ask you for the superuser password for permission to do this.)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"You can stop working as user tomcat by using the command"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"exit\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Do most of the rest of the Tomcat and ERDDAP\u2122 setup instructions as user ",(0,r.jsx)(n.code,{children:"tomcat"}),". Later, run the ",(0,r.jsx)(n.code,{children:"startup.sh"})," and ",(0,r.jsx)(n.code,{children:"shutdown.sh"})," scripts as user ",(0,r.jsx)(n.code,{children:"tomcat"}),"\nso that Tomcat has permission to write to its log files."]}),"\n",(0,r.jsxs)(n.li,{children:["After unpacking Tomcat, from the parent of the ",(0,r.jsx)(n.code,{children:"apache-tomcat"})," directory:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Change ownership of the apache-tomcat directory tree to the tomcat user.","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"chown -R tomcat apache-tomcat-10.0.23\n"})}),"\n","(but substitute the actual name of your tomcat directory)."]}),"\n",(0,r.jsxs)(n.li,{children:['Change the "group" to be tomcat, your username, or the name of a small group that includes tomcat and all the administrators of Tomcat/ERDDAP:',"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"chgrp -R yourUserName apache-tomcat-10.0.23\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Change permissions so that tomcat and the group have read, write, execute privileges:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"chmod -R ug+rwx apache-tomcat-10.0.23\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:['Remove "other" user\'s permissions to read, write, or execute:',"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"chmod -R o-rwx apache-tomcat-10.0.23\n"})}),"\n","This is important, because it prevents other users from reading possibly sensitive information in ERDDAP\u2122 setup files."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"memory",children:"Memory"}),"\n",(0,r.jsx)(n.p,{children:"Set Tomcat's Environment Variables"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["On Linux and Macs:\nCreate a file ",(0,r.jsx)(n.code,{children:"tomcat/bin/setenv.sh"})," (or in Red Hat Enterprise Linux [RHEL], edit ",(0,r.jsx)(n.code,{children:"~tomcat/conf/tomcat10.conf"}),") to set Tomcat's environment variables.\nThis file will be used by ",(0,r.jsx)(n.code,{children:"tomcat/bin/startup.sh"})," and ",(0,r.jsx)(n.code,{children:"shutdown.sh"}),". The file should contain something like:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"export JAVA_HOME=/usr/local/jdk-21.0.3+9\nexport JAVA_OPTS='-server -Djava.awt.headless=true -Xmx1500M -Xms1500M'\nexport TOMCAT_HOME=/usr/local/apache-tomcat-10.0.23\nexport CATALINA_HOME=/usr/local/apache-tomcat-10.0.23\n"})}),"\n",(0,r.jsxs)(n.p,{children:["(but substitute the directory names from your computer).\n(If you previously set ",(0,r.jsx)(n.code,{children:"JRE_HOME"}),", you can remove that.)\nOn Macs, you probably don't need to set ",(0,r.jsx)(n.code,{children:"JAVA_HOME"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["On Windows:\nCreate a file ",(0,r.jsx)(n.code,{children:"tomcat\\bin\\setenv.bat"})," to set Tomcat's environment variables.\nThis file will be used by ",(0,r.jsx)(n.code,{children:"tomcat\\bin\\startup.bat"})," and ",(0,r.jsx)(n.code,{children:"shutdown.bat"}),".\nThe file should contain something like:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'SET "JAVA_HOME=\\someDirectory\\jdk-21.0.3+9"\nSET "JAVA_OPTS=-server -Xmx1500M -Xms1500M"\nSET "TOMCAT_HOME=\\Program Files\\apache-tomcat-10.0.23"\nSET "CATALINA_HOME=\\Program Files\\apache-tomcat-10.0.23"\n'})}),"\n",(0,r.jsxs)(n.p,{children:['(but substitute the directory names from your computer).\nIf this is just for local testing, remove "-server".\n(If you previously set ',(0,r.jsx)(n.code,{children:"JRE_HOME"}),", you can remove that.)"]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"-Xmx"})," and ",(0,r.jsx)(n.code,{children:"-Xms"})," memory settings are important because ERDDAP\u2122 works better with more memory.\nAlways set ",(0,r.jsx)(n.code,{children:"-Xms"})," to the same value as ",(0,r.jsx)(n.code,{children:"-Xmx"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["For 32 bit Operating Systems and 32 bit Java:\n64 bit Java is much better than 32 bit Java, but 32 bit Java will work as long as the server isn't really busy.\nThe more physical memory in the server the better: 4+ GB is really good, 2 GB is okay, less is not recommended.\nWith 32 bit Java, even with abundant physical memory, Tomcat and Java won't run if you try to set ",(0,r.jsx)(n.code,{children:"-Xmx"})," much above 1500M (1200M on some computers).\nIf your server has less than 2GB of memory, reduce the ",(0,r.jsx)(n.code,{children:"-Xmx"})," value (in 'M'egaBytes) to 1/2 of the computer's physical memory."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"For 64 bit Operating Systems and 64 bit Java:\n64 bit Java will only work on a 64 bit operating system."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["With Java 8, you need to add ",(0,r.jsx)(n.code,{children:"-d64"})," to the Tomcat ",(0,r.jsx)(n.code,{children:"CATALINA_OPTS"})," parameter in ",(0,r.jsx)(n.code,{children:"setenv.bat"}),"."]}),"\n",(0,r.jsx)(n.li,{children:'With Java 21, you choose 64 bit Java when you download a version of Java marked "64 bit".'}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["With 64 bit Java, Tomcat and Java can use very high ",(0,r.jsx)(n.code,{children:"-Xmx"})," and ",(0,r.jsx)(n.code,{children:"-Xms"})," settings. The more physical memory in the server the better.\nAs a simplistic suggestion: we recommend you set ",(0,r.jsx)(n.code,{children:"-Xmx"})," and ",(0,r.jsx)(n.code,{children:"-Xms"})," to (in 'M'egaBytes) to 1/2 (or less) of the computer's physical memory.\nYou can see if Tomcat, Java, and ERDDAP\u2122 are indeed running in 64 bit mode by searching for \" bit,\" in ERDDAP's Daily Report email\nor in the ",(0,r.jsx)(n.code,{children:"bigParentDirectory/logs/[log.txt](/docs/server-admin/additional-information#log)"})," file (",(0,r.jsx)(n.code,{children:"bigParentDirectory"})," is specified in ",(0,r.jsx)(n.a,{href:"#setupxml",children:"setup.xml"}),")."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"garbage-collection",children:"Garbage Collection"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["In ERDDAP\u2122's ",(0,r.jsx)(n.a,{href:"/docs/server-admin/additional-information#log",children:"log.txt"}),' file, you will see many "GC (Allocation Failure)" messages.\nThis is usually not a problem. It is a frequent message from a normally operating Java saying that it just finished a minor garbage\ncollection because it ran out of room in Eden (the section of the Java heap for very young objects). Usually the message shows you\n',(0,r.jsx)(n.code,{children:"memoryUseBefore->memoryUseAfter"}),". If those two numbers are close together, it means that the garbage collection wasn't productive.\nThe message is only a sign of trouble if it is very frequent (every few seconds), not productive, and the numbers are large and not growing,\nwhich together indicate that Java needs more memory, is struggling to free up memory, and is unable to free up memory.\nThis may happen during a stressful time, then go away. But if it persists, that is a sign of trouble."]}),"\n",(0,r.jsxs)(n.li,{children:["If you see ",(0,r.jsx)(n.code,{children:"java.lang.OutOfMemoryError"}),"s in ERDDAP\u2122's ",(0,r.jsx)(n.a,{href:"/docs/server-admin/additional-information#log",children:"log.txt"})," file,\nsee ",(0,r.jsx)(n.a,{href:"/docs/server-admin/additional-information#outofmemoryerror",children:"OutOfMemoryError"})," for tips on how to diagnose and resolve the problems.\n\xa0"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"permissions",children:"Permissions"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"#permissions",children:"On Linux and Macs, change the permissions"})," of all ",(0,r.jsx)(n.code,{children:"*.sh"})," files in ",(0,r.jsx)(n.code,{children:"tomcat/bin/"})," to be executable by the owner:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"chmod +x *.sh\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"fonts",children:"Fonts"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"#fonts",children:"Fonts for images:"})," We strongly prefer the free ",(0,r.jsx)(n.a,{href:"https://dejavu-fonts.github.io/",children:"DejaVu fonts"})," to the other Java fonts.\nUsing these fonts is strongly recommended but not required."]}),"\n",(0,r.jsxs)(n.p,{children:["If you choose not to use the DejaVu fonts, you need to change the fontFamily setting in setup.xml to ",(0,r.jsx)(n.code,{children:"<fontFamily>SansSerif</fontFamily>"}),",\nwhich is available with all Java distributions. If you set ",(0,r.jsx)(n.code,{children:"<fontFamily>"})," to the name of a font that isn't available, ERDDAP\u2122 won't load\nand will print a list of available fonts in the ",(0,r.jsx)(n.code,{children:"log.txt"})," file. You must use one of those fonts."]}),"\n",(0,r.jsxs)(n.p,{children:["If you choose to use the DejaVu fonts, please make sure the ",(0,r.jsx)(n.code,{children:"<fontFamily>"})," setting in setup.xml is ",(0,r.jsx)(n.code,{children:"<fontFamily>DejaVu Sans</fontFamily>"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["To install the DejaVu fonts, please download ",(0,r.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:t(62900).A+"",children:"DejaVuFonts.zip"})," (5,522,795 bytes, MD5=33E1E61FAB06A547851ED308B4FFEF42)\nand unzip the font files to a temporary directory."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["On Linux:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["For Linux Adoptium Java distributions, see ",(0,r.jsx)(n.a,{href:"https://blog.adoptopenjdk.net/2021/01/prerequisites-for-font-support-in-adoptopenjdk/",children:"these instructions"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["With other Java distributions: As the ",(0,r.jsx)(n.code,{children:"tomcat"})," user, copy the font files into ",(0,r.jsx)(n.code,{children:"$JAVA_HOME/lib/fonts"})," so Java can find the fonts.\nRemember: if/when you later upgrade to a newer version of Java, you need to reinstall these fonts."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"On Macs: for each font file, double click on it and then click Install Font."}),"\n",(0,r.jsx)(n.li,{children:"On Windows 7 and 10: in Windows Explorer, select all of the font files. Right click. Click on Install.\n\xa0"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"test-tomcat",children:"Test Tomcat"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Test your Tomcat installation.","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Linux:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:['As user "tomcat", run ',(0,r.jsx)(n.code,{children:"tomcat/bin/startup.sh"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:['View your URL + ":8080/" in your browser (e.g., ',(0,r.jsx)(n.a,{href:"http://coastwatch.pfeg.noaa.gov:8080/",children:"http://coastwatch.pfeg.noaa.gov:8080/"}),")."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Mac (run tomcat as the system administrator user):","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Run ",(0,r.jsx)(n.code,{children:"tomcat/bin/startup.sh"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:['View your URL + ":8080/" in your browser (e.g., ',(0,r.jsx)(n.a,{href:"http://coastwatch.pfeg.noaa.gov:8080/",children:"http://coastwatch.pfeg.noaa.gov:8080/"}),").\nNote that by default, your Tomcat is only accessible by you. It is not publicly accessible."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Windows localhost:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'Right click on the Tomcat icon in the system tray, and choose "Start service".'}),"\n",(0,r.jsxs)(n.li,{children:["View ",(0,r.jsx)(n.a,{href:"http://127.0.0.1:8080/",children:"http://127.0.0.1:8080/"}),", or perhaps ",(0,r.jsx)(n.a,{href:"http://localhost:8080/",children:"http://localhost:8080/"}),", in your browser. Note that by default, your Tomcat is only accessible by you. It is not publicly accessible."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:'You should see the Tomcat "Congratulations" page.'}),"\n",(0,r.jsxs)(n.p,{children:["If there is trouble, see the Tomcat log file at ",(0,r.jsx)(n.code,{children:"tomcat/logs/catalina.out"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"troubles-with-the-tomcat-installation",children:"Troubles with the Tomcat installation?"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"On Linux and Mac, if you can't reach Tomcat or ERDDAP\u2122 (or perhaps you just can't reach them from a computer outside your firewall),\nyou can test if Tomcat is listening to port 8080, by typing (as root) on a command line of the server:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"netstat -tuplen | grep 8080\n"})}),"\n",(0,r.jsx)(n.p,{children:"That should return one line with something like:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"tcp 0 0 :::8080 :::* LISTEN ## ##### ####/java\n"})}),"\n",(0,r.jsxs)(n.p,{children:["(where ",(0,r.jsx)(n.code,{children:"#"})," is some digit), indicating that a ",(0,r.jsx)(n.code,{children:"java"}),' process (presumably Tomcat) is listening on port "8080" for "tcp" traffic.\nIf no lines were returned, if the line returned is significantly different, or if two or more lines were returned, then there may be a problem with the port settings.']}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["See the Tomcat log file ",(0,r.jsx)(n.code,{children:"tomcat/logs/catalina.out"}),". Tomcat problems and some ERDDAP\u2122 startup problems are almost always indicated there.\nThis is common when you are first setting up ERDDAP\u2122."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["See the ",(0,r.jsx)(n.a,{href:"https://tomcat.apache.org/",children:"Tomcat"})," website or search the web for help, but please let us know the problems you had and the solutions you found."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["See our ",(0,r.jsx)(n.a,{href:"/docs/intro#support",children:"section on getting additional support"}),".\n\xa0"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"erddap-content",children:"ERDDAP\u2122 Content"}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsxs)(n.a,{href:"#erddap-content",children:["Set up the ",(0,r.jsx)(n.code,{children:"tomcat/content/erddap"})," configuration files."]}),"\nOn Linux, Mac, and Windows, download ",(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddapContent/releases/download/content1.0.0/erddapContent.zip",children:"erddapContent.zip"}),"\nand unzip it into the ",(0,r.jsx)(n.code,{children:"tomcat"})," directory, creating ",(0,r.jsx)(n.code,{children:"tomcat/content/erddap"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Version 1.0.0, 20333 bytes, MD5=2B8D2A5AE5ED73E3A42B529C168C60B5, dated 2024-10-14"})}),"\n",(0,r.jsx)(n.p,{children:"Some previous versions are also available:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.17/erddapContent.zip",children:"2.17"})," (19,792 bytes, MD5=8F892616BAEEF2DF0F4BB036DCB4AD7C, dated 2022-02-16)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.18/erddapContent.zip",children:"2.18"})," (19,792 bytes, MD5=8F892616BAEEF2DF0F4BB036DCB4AD7C, dated 2022-02-16)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.21/erddapContent.zip",children:"2.21"})," (19,810 bytes, MD5=1E26F62E7A06191EE6868C40B9A29362, dated 2022-10-09)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.22/erddapContent.zip",children:"2.22"})," (19,810 bytes, MD5=1E26F62E7A06191EE6868C40B9A29362, dated 2022-12-08)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.23/erddapContent.zip",children:"2.23"})," (19,810 bytes, MD5=1E26F62E7A06191EE6868C40B9A29362, dated 2023-02-27)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"other-directory",children:"Other Directory"}),"\n",(0,r.jsxs)(n.p,{children:["For Red Hat Enterprise Linux (RHEL) or for other situations where you aren't allowed to modify the Tomcat directory or where you want/need\nto put the ERDDAP\u2122 content directory in some other location for some other reason (for example, if you use Jetty instead of Tomcat),\nunzip ",(0,r.jsx)(n.code,{children:"erddapContent.zip"})," into the desired directory (to which only the ",(0,r.jsx)(n.code,{children:"tomcat"})," user has access) and set the ",(0,r.jsx)(n.code,{children:"erddapContentDirectory"})," system property\n(e.g. ",(0,r.jsx)(n.code,{children:"erddapContentDirectory=~tomcat/content/erddap"}),") so ERDDAP\u2122 can find this new content directory."]}),"\n",(0,r.jsx)(n.h3,{id:"setupxml",children:"setup.xml"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsxs)(n.a,{href:"#setupxml",children:["Read the comments in ",(0,r.jsx)(n.code,{children:"tomcat/content/erddap/setup.xml"})]})," and make the requested changes. setup.xml is the file with all of the settings which specify how your ERDDAP\u2122 behaves."]}),"\n",(0,r.jsx)(n.p,{children:"For the initial setup, you MUST at least change these settings:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"<bigParentDirectory>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"<emailEverythingTo>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"<baseUrl>"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"<email...>"})," settings"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"<admin...>"})," settings"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"<baseHttpsUrl>"})," (when you set up https)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"When you create the bigParentDirectory, from the parent directory of bigParentDirectory:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Make the ",(0,r.jsx)(n.code,{children:"tomcat"})," user the owner of the ",(0,r.jsx)(n.code,{children:"bigParentDirectory"}),":","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"chown -R tomcat bigParentDirectory\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:['Change the "group" to be tomcat, your username, or the name of a small group that includes tomcat and all the administrators of Tomcat/ERDDAP:',"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"chgrp -R yourUserName bigParentDirectory\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Change permissions so that tomcat and the group have read, write, execute privileges:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"chmod -R ug+rwx bigParentDirectory\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:['Remove "other" user\'s permissions to read, write, or execute. This is important to prevent reading possibly sensitive information\nin ERDDAP\u2122 log files and files with information about private datasets.',"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"chmod -R o-rwx bigParentDirectory\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,r.jsxs)(n.p,{children:["Starting with ERDDAP\u2122 v2.13, ERDDAP\u2122 administrators can override any value in setup.xml by specifying an environment variable\nnamed ",(0,r.jsx)(n.code,{children:"ERDDAP_valueName"})," before running ERDDAP\u2122. For example, use ",(0,r.jsx)(n.code,{children:"ERDDAP_baseUrl"})," overrides the ",(0,r.jsx)(n.code,{children:"<baseUrl>"})," value.\nThis can be handy when deploying ERDDAP\u2122 with a container like Docker, as you can put standard settings in setup.xml\nand then supply special settings via environment variables. If you supply secret information to ERDDAP\u2122 via this method,\nbe sure to check that the information will remain secret. ERDDAP\u2122 only reads environment variables once per startup,\nin the first second of startup, so one way to use this is: set the environment variables, start ERDDAP,\nwait until ERDDAP\u2122 is started, then unset the environment variables."]}),"\n",(0,r.jsx)(n.h3,{id:"datasetsxml",children:"datasets.xml"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Read the comments in ",(0,r.jsx)(n.a,{href:"/docs/server-admin/datasets",children:(0,r.jsx)(n.strong,{children:"Working with the datasets.xml File"})}),". Later, after you get ERDDAP\u2122 running\nfor the first time (usually with just the default datasets), you will modify the XML in ",(0,r.jsx)(n.code,{children:"tomcat/content/erddap/datasets.xml"}),"\nto specify all of the datasets you want your ERDDAP\u2122 to serve. This is where you will you spend the bulk of your time\nwhile setting up ERDDAP\u2122 and later while maintaining your ERDDAP\u2122."]}),"\n",(0,r.jsxs)(n.p,{children:["You can see an example ",(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/blob/main/development/jetty/config/datasets.xml",children:"datasets.xml on GitHub"}),".\n\xa0"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["(Unlikely) Now or (slightly more likely) in the future, if you want to modify erddap's CSS file, copy\n",(0,r.jsx)(n.code,{children:"tomcat/content/erddap/images/erddapStart2.css"})," to ",(0,r.jsx)(n.code,{children:"tomcat/content/erddap/images/erddap2.css"})," and then make changes to it.\nChanges to ",(0,r.jsx)(n.code,{children:"erddap2.css"})," only take effect when ERDDAP\u2122 is restarted and often also require the user to clear the browser's cached files.\n\xa0\nERDDAP\u2122 will not work correctly if the setup.xml or datasets.xml file isn't a well-formed XML file. So, after you edit these files,\nit is a good idea to verify that the result is well-formed XML by pasting the XML text into an XML checker like ",(0,r.jsx)(n.a,{href:"https://www.xmlvalidation.com/",children:"xmlvalidation"}),".\n\xa0"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"install-the-erddapwar-file",children:"Install the erddap.war file"}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["On Linux, Mac, and Windows, ",(0,r.jsxs)(n.strong,{children:["download ",(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.28.1/erddap.war",children:"erddap.war"})]})," into ",(0,r.jsx)(n.code,{children:"tomcat/webapps"}),":"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Version 2.28.1, 622,676,238 bytes, MD5=48b4226045f950c8a8d69ef9521b9bc9, dated 2025-09-05"})}),"\n",(0,r.jsx)(n.p,{children:"The .war file is big because it contains high resolution coastline, boundary, and elevation data needed to create maps."}),"\n",(0,r.jsx)(n.p,{children:"Some previous versions are also available."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.17/erddap.war",children:"2.17"})," (551,068,245 bytes, MD5=5FEA912B5D42E50EAB9591F773EA848D, dated 2022-02-16)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.18/erddap.war",children:"2.18"})," (551,069,844 bytes, MD5=461325E97E7577EC671DD50246CCFB8B, dated 2022-02-23)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.21/erddap.war",children:"2.21"})," (568,644,411 bytes, MD5=F2CFF805893146E932E498FDDBD519B6, dated 2022-10-09)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.22/erddap.war",children:"2.22"})," (567,742,765 bytes, MD5=2B33354F633294213AE2AFDDCF4DA6D0, dated 2022-12-08)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.23/erddap.war",children:"2.23"})," (572,124,953 bytes, MD5=D843A043C506725EBD6F8EFDCCA8FD5F, dated 2023-03-03)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.24/erddap.war",children:"2.24"})," (568,748,187 bytes, MD5=970fbee172e28b0b8a07756eecbc898e, dated 2024-06-07)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.25.1/erddap.war",children:"2.25"})," (592,292,039 bytes, MD5=652AFC9D1421F00B5F789DA2C4732D4C, dated 2024-11-07)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.26.0/erddap.war",children:"2.26"})," (607,404,032 bytes, MD5=99a725108b37708e5420986c1616a119, dated 2025-03-31)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.27.0/erddap.war",children:"2.27.0"})," (620,554,403 bytes, MD5=3b2086c659eee4145ca2dff447bf4ef7, dated 2025-06-11)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"proxy",children:"Configure proxy (deployment specific)"}),"\n",(0,r.jsx)(n.p,{children:"ERDDAP\u2122 is typically deployed behind a webserver reverse proxy to allow it to be served on standard HTTP ports (80 and 443).\nSSL/TLS termination is often hanlded at the webserver proxy layer as well. Specifics depend on the requirements of each deployment."}),"\n",(0,r.jsx)(n.h4,{id:"apache",children:"Apache"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Ensure that ",(0,r.jsx)(n.code,{children:"mod_proxy"})," and ",(0,r.jsx)(n.code,{children:"mod_proxy_http"})," are loaded:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"LoadModule proxy_module modules/mod_proxy.so\nLoadModule proxy_http_module modules/mod_proxy_http.so\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["Modify the existing ",(0,r.jsx)(n.code,{children:"<VirtualHost>"})," tag (if there is one), or add one at the end of the file:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"<VirtualHost *:80>\n   ServerName YourDomain.org\n   ProxyRequests Off\n   ProxyPreserveHost On\n   ProxyPass /erddap http://localhost:8080/erddap\n   ProxyPassReverse /erddap http://localhost:8080/erddap\n</VirtualHost>\n"})}),"\n",(0,r.jsxs)(n.p,{children:["If ERDDAP\u2122 is served on a path other than ",(0,r.jsx)(n.code,{children:"/erddap"}),", also set the ",(0,r.jsx)(n.code,{children:"X-Forwarded-Prefix"})," header to the\npath segment ",(0,r.jsx)(n.em,{children:"before"})," ",(0,r.jsx)(n.code,{children:"/erddap"}),". This setting would be appropriate for an ERDDAP\u2122 served at\n",(0,r.jsx)(n.code,{children:"/subpath/erddap"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"RequestHeader set X-Forwarded-Prefix /subpath\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsxs)(n.li,{children:["Then restart Apache: ",(0,r.jsx)(n.code,{children:"/usr/sbin/apachectl -k graceful"})," (but sometimes it is in a different directory).\n\xa0"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"nginx",children:"NGINX"}),"\n",(0,r.jsx)(n.p,{children:"In the nginx config file, set these headers:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"proxy_set_header Host              $http_host;\nproxy_set_header X-Real-IP         $remote_addr;\nproxy_set_header REMOTE_ADDR       $remote_addr;\nproxy_set_header HTTP_CLIENT_IP    $remote_addr;\nproxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;\nproxy_set_header X-Forwarded-Proto $scheme;\n"})}),"\n",(0,r.jsxs)(n.p,{children:["If ERDDAP\u2122 is served on a path other than ",(0,r.jsx)(n.code,{children:"/erddap"}),", also set the ",(0,r.jsx)(n.code,{children:"X-Forwarded-Prefix"})," header to the\npath segment ",(0,r.jsx)(n.em,{children:"before"})," ",(0,r.jsx)(n.code,{children:"/erddap"}),". This setting would be appropriate for an ERDDAP\u2122 served at\n",(0,r.jsx)(n.code,{children:"/subpath/erddap"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"proxy_set_header X-Forwarded-Prefix /subpath\n"})}),"\n",(0,r.jsxs)(n.p,{children:["In order to get NGINX and ERDDAP\u2122 working correctly with https, you need to put the following snippet inside the Tomcat server.xml ",(0,r.jsx)(n.code,{children:"<Host>"})," block:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'<Valve className="org.apache.catalina.valves.RemoteIpValve"\n  remoteIpHeader="X-Forwarded-For"\n  protocolHeader="X-Forwarded-Proto"\n  protocolHeaderHttpsValue="https" />\n'})}),"\n",(0,r.jsx)(n.p,{children:"\xa0"}),"\n",(0,r.jsx)(n.h3,{id:"start-tomcat",children:"Start Tomcat"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"(I don't recommend using the Tomcat Web Application Manager. If you don't fully shutdown and startup Tomcat, sooner or later you will have PermGen memory issues.)"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"(In Linux or Mac OS, if you have created a special user to run Tomcat, e.g., tomcat, remember to do the following steps as that user.)"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["If Tomcat is already running, shut down Tomcat with (in Linux or Mac OS) ",(0,r.jsx)(n.code,{children:"tomcat/bin/shutdown.sh"}),"\nor (in Windows) ",(0,r.jsx)(n.code,{children:"tomcat\\bin\\shutdown.bat"})]}),"\n",(0,r.jsxs)(n.p,{children:["On Linux, use ",(0,r.jsx)(n.code,{children:"ps -ef | grep tomcat"})," before and after ",(0,r.jsx)(n.code,{children:"shutdown.sh"})," to make sure the tomcat process has stopped.\nThe process should be listed before the shutdown and eventually not listed after the shutdown.\nIt may take a minute or two for ERDDAP\u2122 to fully shut down. Be patient. Or if it looks like it won't stop on its own, use:\n",(0,r.jsx)(n.code,{children:"kill -9 <processID>"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Start Tomcat with (in Linux or Mac OS) ",(0,r.jsx)(n.code,{children:"tomcat/bin/startup.sh"})," or (in Windows) ",(0,r.jsx)(n.code,{children:"tomcat\\bin\\startup.bat"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"is-erddap-running",children:"Is ERDDAP\u2122 running?"}),"\n",(0,r.jsxs)(n.p,{children:["Use a browser to try to view ",(0,r.jsx)(n.a,{href:"http://www.YourServer.org/erddap/status.html",children:"http://www.YourServer.org/erddap/status.html"}),".\nERDDAP\u2122 starts up without any datasets loaded. Datasets are loaded in a background thread and so become available one-by-one."]}),"\n",(0,r.jsx)(n.h3,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"When a request from a user comes in, it goes to Apache (on Linux and Mac OS computers), then Tomcat, then ERDDAP\u2122."}),"\n",(0,r.jsx)(n.li,{children:"You can see what comes to Apache (and related errors) in the Apache log files."}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/server-admin/additional-information#tomcat-logs",children:"You"})," can see what comes to Tomcat (and related errors)\nin the Tomcat log files (",(0,r.jsx)(n.code,{children:"tomcat/logs/catalina.out"})," and other files in that directory)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/server-admin/additional-information#log",children:"You"})," can see what comes to ERDDAP, diagnostic messages from ERDDAP,\nand error messages from ERDDAP, in the ERDDAP\u2122 ",(0,r.jsx)(n.code,{children:"<bigParentDirectory>/logs/log.txt"})," file."]}),"\n",(0,r.jsx)(n.li,{children:"Tomcat doesn't start ERDDAP\u2122 until Tomcat gets a request for ERDDAP\u2122. So you can see in the Tomcat log files if it\nstarted ERDDAP\u2122 or if there is an error message related to that attempt."}),"\n",(0,r.jsxs)(n.li,{children:["When ERDDAP\u2122 starts up, it renames the old ERDDAP\u2122 log.txt file (",(0,r.jsx)(n.code,{children:"logArchivedAt<CurrentTime>.txt"}),") and creates a new log.txt file.\nSo if the ",(0,r.jsx)(n.code,{children:"log.txt"})," file is old, it is a sign that ERDDAP\u2122 hasn't recently restarted. ERDDAP\u2122 writes log info to a buffer\nand only writes the buffer to the log file periodically, but you can force ERDDAP\u2122 to write the buffer to the log file by visiting\n",(0,r.jsx)(n.code,{children:"/erddap/status.html"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"trouble-old-version-of-java",children:"Trouble: Old Version of Java"}),"\n",(0,r.jsx)(n.p,{children:"If you are using a version of Java that is too old for ERDDAP, ERDDAP\u2122 won't run and you will see an error message in Tomcat's log file like"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'Exception in thread "main" java.lang.UnsupportedClassVersionError:\n_some/class/name_: Unsupported major.minor version _someNumber_\n'})}),"\n",(0,r.jsx)(n.p,{children:"The solution is to update to the most recent version of Java and make sure that Tomcat is using it."}),"\n",(0,r.jsx)(n.h3,{id:"trouble-slow-startup-first-time",children:"Trouble: Slow Startup First Time"}),"\n",(0,r.jsxs)(n.p,{children:["Tomcat has to do a lot of work the first time an application like ERDDAP\u2122 is started; notably, it has to unpack the ",(0,r.jsx)(n.code,{children:"erddap.war"})," file\n(which is like a .zip file). On some servers, the first attempt to view ERDDAP\u2122 stalls (30 seconds?) until this work is finished.\nOn other servers, the first attempt will fail immediately. But if you wait 30 seconds and try again, it will succeed if ERDDAP\u2122 was installed correctly."]}),"\n",(0,r.jsx)(n.p,{children:"There is no fix for this. This is simply how Tomcat works. But it only occurs the first time after you install a new version of ERDDAP\u2122."}),"\n",(0,r.jsx)(n.h2,{id:"shut-down-and-restart",children:"Shut down and restart"}),"\n",(0,r.jsxs)(n.p,{children:["In the future, to shut down (and restart) ERDDAP\u2122, see ",(0,r.jsx)(n.a,{href:"/docs/server-admin/additional-information#shut-down-and-restart",children:"How to Shut Down and Restart Tomcat and ERDDAP"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"trouble",children:"Trouble?"}),"\n",(0,r.jsxs)(n.p,{children:["Troubles installing Tomcat or ERDDAP\u2122? See our ",(0,r.jsx)(n.a,{href:"/docs/intro#support",children:"section on getting additional support"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"email-notification-of-new-versions-of-erddap",children:"Email Notification of New Versions of ERDDAP"}),"\n",(0,r.jsxs)(n.p,{children:["If you want to receive an email whenever a new version of ERDDAP\u2122 is available or other important ERDDAP\u2122 announcements,\nyou can join the ERDDAP\u2122 announcements list ",(0,r.jsx)(n.a,{href:"https://groups.google.com/g/erddap-announce",children:"here"}),". This list averages roughly one email every three months."]}),"\n",(0,r.jsx)(n.h2,{id:"customize",children:"Customize"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#customize",children:"Customize your ERDDAP\u2122 to highlight your organization (not NOAA ERD)."})}),"\n",(0,r.jsxs)(n.li,{children:["Change the banner that appears at the top of all ERDDAP\u2122 .html pages by editing the ",(0,r.jsx)(n.code,{children:"<startBodyHtml5>"})," tag in your ",(0,r.jsx)(n.code,{children:"datasets.xml"})," file.\n(If there isn't one, copy the default from ERDDAP\u2122's ",(0,r.jsx)(n.code,{children:"tomcat/webapps/erddap/WEB-INF/classes/gov/noaa/pfel/erddap/util/messages.xml"})," file\ninto ",(0,r.jsx)(n.code,{children:"datasets.xml"})," and edit it.) For example, you could:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use a different image (i.e., your organization's logo)."}),"\n",(0,r.jsx)(n.li,{children:"Change the background color."}),"\n",(0,r.jsxs)(n.li,{children:['Change "ERDDAP\u2122" to "',(0,r.jsx)(n.em,{children:"YourOrganization"}),"'s ERDDAP\u2122\""]}),"\n",(0,r.jsxs)(n.li,{children:['Change "Easier access to scientific data" to "Easier access to ',(0,r.jsx)(n.em,{children:"YourOrganization"}),"'s data\"."]}),"\n",(0,r.jsx)(n.li,{children:'Change the "Brought to you by" links to be links to your organization and funding sources.'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Change the information on the left side of the home page by editing the ",(0,r.jsx)(n.code,{children:"<theShortDescriptionHtml>"})," tag in your ",(0,r.jsx)(n.code,{children:"datasets.xml"})," file.\n(If there isn't one, copy the default from ERDDAP\u2122's ",(0,r.jsx)(n.code,{children:"tomcat/webapps/erddap/WEB-INF/classes/gov/noaa/pfel/erddap/util/messages.xml"})," file\ninto ",(0,r.jsx)(n.code,{children:"datasets.xml"})," and edit it.) For example, you could:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Describe what your organization and/or group does."}),"\n",(0,r.jsx)(n.li,{children:"Describe what kind of data this ERDDAP\u2122 has."}),"\n",(0,r.jsxs)(n.li,{children:["To change the icon that appears on browser tabs, put your organization's favicon.ico in ",(0,r.jsx)(n.code,{children:"tomcat/content/erddap/images/"}),".\nSee ",(0,r.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Favicon",children:"https://en.wikipedia.org/wiki/Favicon"}),"."]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},62900:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/files/DejaVuFonts-9be3895e6d216d0fc9bb8f3520f765c6.zip"}}]);