यह सामग्री एक पर आधारित है [Roy Mendelssohn से संदेश ERDDAP उपयोगकर्ता समूह](https://groups.google.com/g/erddap/c/6Hl024ZGkes/m/DS5WzsydAQAJ) ।

 ERDDAP™ इसके बजाय हम मुख्य रूप से सेवा समुदायों के लिए सबसे अधिक उपयोग के डेटा प्रारूपों के साथ काम करने की कोशिश करते हुए, डेटा प्रारूपों के लिए लोग अपने डेटा के लिए क्या उपयोग करते हैं, इसके बारे में agnostic होने की कोशिश करता है। चूंकि बादल में अधिक से अधिक काम होता है, और वहाँ डेटा स्वरूपों कि लोग बादल में उपयोग का एक plethora हैं, यह अच्छा होगा अगर ERDDAP™ इन प्रारूपों का समर्थन कर सकता है। Alas, ERDDAP™ विकास और रखरखाव पहले से ही कम हो चुका है, और क्या वांछनीय होना चाहिए, इस लक्ष्य को प्राप्त करने के लिए दूसरों के काम का उपयोग करना, बिना संशोधन किए ERDDAP™ ।

प्रवेश [DuckDB](https://duckdb.org/) और [त्रिनो](https://trino.io/) । इनमें से दोनों डेटा प्रारूपों की एक किस्म के लिए कनेक्शन प्रदान करते हैं, और JDBC का उपयोग करके एक्सेस किया जा सकता है। इस लेखन में मैं केवल DuckDB का उपयोग करके देखूंगा क्योंकि मेरे पास इसके साथ कुछ परिचितता है, और Trino कम से कम मेरे दिमाग में, स्थापित करने के लिए थोड़ा जटिल लग रहा था, और अभी मैं सिर्फ अवधारणा का सबूत चाहता था। (जबकि वापस दमीन स्मिथ ने लिखा था कि उन्होंने ट्रिनो का उपयोग कैसे किया था और मैंने उससे संपर्क किया और उसने इसे काम करने के लिए किया और मुझे नोट्स भेज दिया - इसलिए भविष्य में इस पर अधिक) । इसके अलावा मैं कुछ भी हूँ, लेकिन इस पर कोई विशेषज्ञ, इसलिए यह मेरे साथ सीख रहा है - मुझे पता है कि क्या आपको कोई गलती है, या चीजें जो चाचा हैं, या यदि चीजें करने के बेहतर तरीके हैं।

1. प्रारंभिक:
----

में DuckDB का उपयोग करने के लिए ERDDAP™ आपको अपने कंप्यूटर पर duckDB स्थापित करने और DuckDB JDBC कनेक्टर को स्थापित करने की आवश्यकता है। ERDDAP™ । DuckDB स्थापित करने के निर्देश

https://duckdb.org/docs/installation/?version=stable&environment=cli&platform=macos&download_method=direct

DuckDB JDBC कनेक्टर से डाउनलोड किया जा सकता है

https://duckdb.org/docs/stable/clients/java.html

यदि आपका tomcat $TOMCAT_HOME पर स्थित है, तो आप इस फाइल को $TOMCAT_HOME/webapps/erddap/WEB-INF/lib पर रखना चाहते हैं।

2. क्या यह मुश्किल बनाता है:
---------------


कम से कम DuckDB के लिए (जैसा मैंने कहा है कि मैंने त्रिनो को किसी भी विस्तार से नहीं देखा है)   Java कार्यक्रम केवल JDBC कनेक्टर के माध्यम से DuckDB तक पहुंच सकते हैं, और JDBC कनेक्टर केवल DuckDB प्रारूप में संग्रहीत डेटा को पढ़ सकते हैं। जबकि DuckDB एक महान उपकरण है, इस प्रारूप को डेटा कॉपी करने के लिए पूरे उद्देश्य को हराया, हालांकि, DuckDB सुविधा प्रदान करता है कि फ़ाइल प्रारूपों में से कई के लिए यह समर्थन करता है (विस्तार की एक बढ़ती सूची है) आप एक आभासी .db फ़ाइल स्थापित कर सकते हैं जो केवल आवश्यक मेटाडाटा में पढ़ता है। मैंने .db पाया है जो आकार में काफी छोटा होने के लिए बनाया गया है, और यह प्रदान करता है कि तेज पहुंच क्या है। एक दिलचस्प नोट यह है कि अधिकांश डेटाबेस सिस्टम के विपरीत (और त्रिनो सहित) , डक के साथ डीबी आपके पास ऐसा अनुप्रयोग नहीं है जो लगातार पृष्ठभूमि में चल रहा है, इसलिए स्टार्टअप के कारण पहुंच में कुछ अंतराल होना चाहिए, लेकिन जैसा कि मैंने कहा कि मेरे छोटे परीक्षणों में पहुंच तेजी से दिखाई देती है।


3. उदाहरण:
---------------

शुरू करने के लिए, मैं इसे एक .csv फ़ाइल के साथ कैसे करना चाहूंगा। सही, यह नहीं है कि एक उपयोग के मामले में दिलचस्प है ERDDAP™ पहले से ही .csv फ़ाइलों को बहुत अच्छी तरह से संभालती है, इसलिए उस अर्थ में कुछ भी हासिल नहीं किया जा रहा है, लेकिन एक पाठ फ़ाइल के साथ काम करना आसान है और यह देखने में डीबग करना आसान है कि क्या चल रहा है, और जैसा कि मैं सीख रहा था कि यह मेरे जीवन को आसान बना देता है। नीचे मैं एक दिलचस्प उपयोग का मामला देखूंगा जब हम देखते हैं कि क्या जरूरत है।

फ़ाइल मैं के साथ काम कर रहा हूँ को "detects.csv" कहा जाता है जो सेंसर द्वारा टैग डिटेक्शन की 305MB फ़ाइल है। पहला कदम एक .db फ़ाइल बनाना है जो इस फ़ाइल को इंगित करता है (इस में और क्या सुविधा के लिए अनुसरण करता है मैं हमेशा मानूंगा कि आप आवश्यक स्तर पर काम कर रहे हैं ताकि मैं पूर्ण पथ न दे - व्यवहार में आपको होना होगा) :

```
duckdb detects.db <<EOF
CREATE VIEW detects_table AS
SELECT *
FROM read_csv_auto(
'detects.csv',
header=true,
sample_size=2147483647 -- scan whole file for schema (optional)
);
EOF
```

फ़ाइल "detects.db" आकार में 268KB है। हम यह जांच सकते हैं कि यह वास्तव में काम कर चुका है:

```
duckdb detects.db
DuckDB v1.3.1 (Ossivalis) 2063dda3e6
Enter ".help" for usage hints.
D SHOW TABLES;
┌───────────────┐
│ name │
│ varchar │
├───────────────┤
│ detects_table │
└───────────────┘
D SELECT * FROM detects_table LIMIT 5;
┌────────────────┬─────────┬──────────────┬───────┬──────────┬───┬──────────┬──────────────┬───────────────┬─────────┐
│ Study_ID │ TagCode │ DateTime_PST │ recv │ location │ … │ tag_life │ Rel_latitude │ Rel_longitude │ time │
│ varchar │ varchar │ timestamp │ int64 │ varchar │ │ int64 │ double │ double │ varchar │
├────────────────┼─────────┼──────────────┼───────┼──────────┼───┼──────────┼──────────────┼───────────────┼─────────┤
│ ButteSink_2024 │ 1B76 │ NULL │ NULL │ NULL │ … │ 52 │ 39.32663 │ -121.8847 │ -08 │
│ ButteSink_2024 │ 1B94 │ NULL │ NULL │ NULL │ … │ 52 │ 39.32663 │ -121.8847 │ -08 │
│ ButteSink_2024 │ 1BA5 │ NULL │ NULL │ NULL │ … │ 52 │ 39.35858 │ -121.8943 │ -08 │
│ ButteSink_2024 │ 1C55 │ NULL │ NULL │ NULL │ … │ 52 │ 39.33546 │ -121.8923 │ -08 │
│ ButteSink_2024 │ 1C95 │ NULL │ NULL │ NULL │ … │ 52 │ 39.33546 │ -121.8923 │ -08 │
├────────────────┴─────────┴──────────────┴───────┴──────────┴───┴──────────┴──────────────┴───────────────┴─────────┤
│ 5 rows 18 columns (9 shown) │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

और पता लगाने का आकार। इस कार्य को करने से डीबी बदल नहीं गया है। इसलिए अंतिम चरण इस के साथ जुड़ने के लिए है ERDDAP™ , मैं केवल भाग फ़ाइल से कनेक्ट करने के लिए आवश्यक दिखाने के लिए, नहीं सभी परिवर्तनीय जानकारी:

```
<dataset type="EDDTableFromDatabase" datasetID="duckdb_test" active="true">
<!-- JDBC Connection Details -->
<sourceUrl>jdbc:duckdb:detects.db</sourceUrl>
<driverName>org.duckdb.DuckDBDriver</driverName>
<catalogName></catalogName>
<schemaName></schemaName>
<tableName>detects_table</tableName>
<columnNameQuotes></columnNameQuotes>
>
```

यह डेटासेट है ERDDAP™ DuckDB कनेक्टर का उपयोग करके मेरे लैपटॉप पर:
