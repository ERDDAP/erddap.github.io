Завдяки Roy Mendelssohn для цього запису.

Про нас Python Пакет «xarray» дуже популярний для доступу, підкатування та візуалізації даних сітки в різних форматах. 'xarray' працює відмінно з ERDDAP™ Як правильно використовувати його. Я б сказав, що Python Пакет "erddapy" Р ( https://github.com/ioos/erddapy ) доступ до даних з ERDDAP™ сервери, які використовують як "griddap" і " tabledap ", в той час як 'xarray' обмежена сітчастими даними, і 'erddapy' може експортувати дані для 'xarray'. Але якщо ви звикли до використання 'xarray' і мають робочі процеси за допомогою пакета, то його можна бажано просто працювати в межах одного пакету.

Один з моїх улюблених даних є JPL MURv4.1 SST дані, доступні на https://coastwatch.pfeg.noaa.gov/erddap/griddap/jplMURSST41.html й Якщо я хочу, щоб зробити підмножину даних, щоб сказати 28 січня 2026 р., latitdues (20,50 р.) і довготи (-140, -105) , і завантажити файл netcdf, ERDDAP™ URL для цього буде https://coastwatch.pfeg.noaa.gov/erddap/griddap/jplMURSST41.nc?analysed_sst[(2026-01-28T09:00:00Z ):1: (2026-01-28Т09:00:00З) й (20 хв) :1: (50 р.) й (-140) :1: (-105) ] і доцільно припустити, що це те, що ви будете використовувати в 'xarray'. Але насправді, якщо ви робите так, що ви отримали помилку.

Причиною цього є те, що "xarray" використовує OPeNDAP   ( https://www.opendap.org ) як його протокол для віддаленого доступу, і в той час як ERDDAP™ Синтаксис базується на OPeNDAP синтаксис і синтаксис ERDDAP™ Сервер також може діяти як OPeNDAP сервер, є відмінності в тому, як це робиться для двох послуг. (Приклад https://coastwatch.pfeg.noaa.gov/erddap/griddap/documentation.html#opendapLibraries ) й

Якщо ми думаємо про кроки до доступу NetCDF Файл в 'xarray' ми зробимо наступні дії:

- Відкрийте файл, натиснувши на повний шлях до файлу
- Переглянути координацію з першого кроку
- Використовуйте один з різних методів "виберіть" для заміни даних

У вищезгаданих ви відкриєте файл спочатку, потім робимо підстановку. Для використання 'xarray' з ERDDAP™ пошук даних, які ви робите так само, як тільки ви зрозуміли, як пояснили в ERDDAP™ документація, що «пати до файлу» є URL без будь-якого формату повернення і без будь-яких обмежень, у випадку з даними MUR, що є https://coastwatch.pfeg.noaa.gov/erddap/griddap/jplMURSST41.
 

В якості конкретного прикладу з використанням даних MUR, спочатку потрібно імпортувати пакети, які будуть використані:


```python
import matplotlib.pyplot as plt
import xarray as xr
```

Потім, як відхиляти вище, я встановив URL до даних "ім'я" і відкрийте "файл" (не те, що це насправді сукупність файлів) Використання "xr.open_dataset"


```python
mur_url = "https://coastwatch.pfeg.noaa.gov/erddap/griddap/jplMURSST41"
ds = xr.open_dataset(mur_url, decode_times=True)


```

Це виробляє наступний (частковий) результати в "д":

Розміри:

час: 8641л широта: 17999 довгота: 36000

Географічні координати:

час (час) датачас64[ns] 2002-06-01T09:00 ... 2026-01-...
знаменитості (знаменитості) float32 -89,99 -89.98 ... 89.98 89,99
довгота (довгота) float32 -180.0 -180.0 ... 180.0 180.0

Індекси:

час PandasIndex
знаменитості PandasIndex
довгота ПандасІндекс


У цій точці ви приступите до того, що ви були б локальним файлом. Я даю два приклади нижче, один, який займає останні два рази за допомогою індексації масиву і один, який отримує значення останніх двох разів і використовує, щоб зробити підмножини, але в будь-якому випадку це ідентично тому, що ви б зробити для місцевого файлу.


```python
lat_min, lat_max = 20, 50
lon_min, lon_max = -140, -105
sub_isel = ds.isel(time=slice(-2, None)).sel(
    latitude=slice(lat_min, lat_max),
    longitude=slice(lon_min, lon_max),
)
# plot the result
#sub_isel["analysed_sst"].isel(time=0).plot()
```


```python
last2 = ds["time"].values[-2:]
sub_sel = ds.sel(time=last2).sel(
    latitude=slice(lat_min, lat_max),
    longitude=slice(lon_min, lon_max),
)
# plot the result
#sub_sel["analysed_sst"].isel(time=0).plot()


```

Отже, введіть повідомлення про те, що 'xarray' працює відмінно для сітчастих даних на ERDDAP™ сервер, якщо ви передаєте на 'xr.open_dataset () - П'ятниця ERDDAP™ URL без типу файлу і без обмежень.
