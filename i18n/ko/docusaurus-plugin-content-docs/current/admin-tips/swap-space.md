이 콘텐츠는 [로이 Mendelssohn의 메시지 ERDDAP 사용자 그룹](https://groups.google.com/g/erddap/c/1U0OByOasu4/m/JM39reEsBAAJ) ·

많은 도움 요청 우리는 메모리 사용과 관련된 문제를 얻을 ERDDAP™ · 이 중 일부는 메모리 관리의 변경에서 온다 Java , 또한 Linux OS 메모리 관리와 상호 작용. 내가 믿는다 Java 17. 11월 Java heap 설정에서 넣는 것보다 더 많은 메모리를 사용합니다. 힙 설정을 보거나 상단, htop 또는 btop과 같은 명령을 사용하여 응용 프로그램의 메모리 사용을 확인합니다. 그래서 예를 들어 우리의 몹시 사용 ERDDAP™ 21GB에서 설정할 수 있지만 실제로 메모리 사용은 28GB-30GB로 실행할 수 있습니다. 이 값은 시스템에 많은 동시 큰 요청이 있다면 스파이 할 수 있습니다.

대부분의 Linux 시스템에서 한 번의 메모리 사용은 약 50 % 이상이면 OS는 메모리를 교환합니다. 또한 대부분의 시스템 스왑 공간은 절대적으로 필요한 때까지 수집되지 않습니다. ERDDAP™ 너무 늦고 원인을 일으킬 수 있습니다. ERDDAP™ 동결. 그리고 스왑 공간은 느리다. datasets.xml 중요한 업데이트가 완료되지 않을 수 있습니다. 그런 다음 문제를 합성합니다.

무엇을 할 수 있습니다. 첫째, 진정한 메모리 사용 또는 시스템에서 발견하고 메모리 사용이 50 %를 초과하지 않는 충분한 RAM이 있습니다. 그러나이 행동을 바꿀 수있는 두 가지 설정이 있습니다. vm.swappiness. 그리고 vm.vfs_cache_pressure.

vm.swappiness는 어떻게 공격적으로 리눅스 커널 사용 스왑 공간을 제어합니다. 현재값을 확인할 수 있습니다:

> cat /proc/sys/vm/swappiness
>
· 과태는 보통 60입니다 (0에서 100의 가늠자에) ·
· 낮은 값은 스왑 할 가능성이 적습니다.
· 10 또는 1의 값은 종종 RAM을 많이 사용하는 시스템에 사용됩니다.


재부팅 될 때까지 값을 변경하려면 10 :

> sudo sysctl vm.swappiness=10
>

그리고 영구적으로 바꾸기:

> sudo nano /etc/sysctl.conf
>

그리고 vm.swappiness에 대한 값을 편집합니다. 다음 변경을 적용:

> sudo sysctl -p
>

vm.vfs_cache_pressure입니다. 메모리를 재생하는 데 어떻게 공격하는 시스템을 말합니다. 높은 값. (100개 이상) 더 공격적인 시스템, 현재 값을 확인하려면:

> cat /proc/sys/vm/vfs_cache_pressure
>

다음 재부팅까지 값을 변경하려면:

> sudo sysctl vm.vfs_cache_pressure=150
>

영구적으로 값을 변경하려면:

> sudo nano /etc/sysctl.conf
>

그리고 그 후에 선을 추가하거나 업데이트하십시오:

> vm.vfs_cache_pressure = 100
>

그리고 그 다음 변경을 적용:

> sudo sysctl -p
>


당신이 당신의 스왑 공간 사용법을 감시하는 경우에 무엇을 할 수 있고 당신은 교환 사용법이 증가하기 위하여 시작된다는 것을 알 수 있습니까? 공백을 비우고 내용을 기억하기 위한 명령이 있습니다. 이것을 사용하기 전에 사용 가능한 메모리가 더 크다는 것을 확인해야합니다. 나는 무거운 디스크 사용 "스케이드 메모리"를 가진 리눅스 시스템에서 사용 가능한 메모리가 매우 높을 수 있기 때문에 "무료 메모리"는 매우 낮은 것으로 표시되지만 "cache 메모리"는이 같은 명령에 필요한 경우 사용할 수 있습니다.

> sudo swapoff -a && sudo swapon -a
>

그냥 특정 나는이 작업을 수행 한 후 쓰레기 수집을 강제하고 싶습니다 :

> sudo jcmd $(pgrep java) GC.run
>

나는 어떤 사람들이이 정보를 유용하게 발견 희망. 우리는 ERDDAP™ 가능한 한 견고하고, 실제로 어떻게 일하는지 쉽게 작업 할 수 있습니다.
