เนื้อหานี้ขึ้นอยู่กับ [ข้อความจากรอย เมนเดลสัน ERDDAP กลุ่มผู้ใช้](https://groups.google.com/g/erddap/c/zZUt6PKfkoI/m/expZ3UkkBAAJ) .

เมื่อเร็ว ๆ นี้เราได้รับการสอบถามหลาย ๆ ที่ขอความช่วยเหลือในการเข้าถึงไฟล์บน AWS S3 ใน ERDDAP™ . อย่างแรก ERDDAP™ รุ่น 2.29 จะปรับปรุงการเข้าถึง S3 ที่ควรจะทํางานกับร้านค้าวัตถุที่ไม่ใช่ AWS (ขอบคุณ เซธ&#33;) . แต่ผมได้กล่าวถึงก่อนหน้านี้เกี่ยวกับการใช้ระบบ FUSE ที่ตั้งอยู่บนระบบเพื่อให้ร้านค้า S3 ปรากฎเป็นระบบแฟ้มบนเซิร์ฟเวอร์ของคุณ หรือ VM

วิธี หนึ่ง ที่ จะ ทํา เช่น นี้ คือ ใช้ “ลูก ประคํา. ” (https://rclone.org/) . rcloone ทํางานในระบบ S3 หลายระบบ และมีการตั้งค่าที่แตกต่างกันมากมาย เพื่อทําให้มีประสิทธิภาพสูงสุด รวมถึงการตั้งค่าแคชขนาด ซึ่งหวังว่าจะสามารถลดโทษความเร็วบางส่วนจากการดําเนินงาน FUSE ผลประโยชน์ของการใช้ Rcloone กับ ERDDAP TM คือ Rcloone จัดการกับการสนทนาทั้งหมดกับ S3, ดังนั้นประเภทข้อมูลชุดเช่น EDDGrid แฟ้มจาก Nc สามารถนําไปใช้ได้โดยตรง เหมือนกับมีแฟ้มภายในระบบ นี่หมายความว่า คุณต้องหาวิธีติดตั้ง rcloone เพื่อเข้าร้านวัตถุของคุณ และที่เหลือก็แค่การจัดฉากแบบลินุกซ์ธรรมดา

ทีนี้ ผมจะพลาดถ้าผมทิ้งไว้อย่างนั้น, และไม่ยกตัวอย่าง ในต่อไปนี้ฉันจะไปภูเขานิรนาม NOAA 1717 ข้อมูลที่อยู่ในร้าน AWS S3 ที่อยู่ในเซิร์ฟเวอร์ของ Ubuntu ของเรา โดยในการเริ่มต้นการตั้งค่า rcolone จะทํางานในภาคหน้าเพื่อให้ง่ายในการทดสอบว่าทุกอย่างทํางานหรือไม่ จากนั้นผมจะหารือเกี่ยวกับวิธีการเปลี่ยน i เป็นบริการที่ทํางานในด้านหลัง ค.ศ. โปรดสังเกตว่า ในรายการด้านล่างนี้ แคชจะถูกตั้งค่าเป็น 1GB การดําเนินงานอาจจะถูกปรับปรุงขึ้นโดยการทําแคชขนาดใหญ่มาก เช่น 5GB-10GB หรือแม้กระทั่งขนาดใหญ่ขึ้น นอกจากนี้ การตั้งค่านี้ยังเดาในสิ่งที่อาจจะเหมาะสมที่สุด แต่อาจจะไม่ได้ที่ดีที่สุดสําหรับ ERDDAP™ .


1. ติดตั้งซอฟต์แวร์ที่จําเป็น:
ต่าง ๆ-- - - - - - - - - - - -

sudo apt update
sudo apt ติดตั้ง rcloone flum3 -y

2. สร้างระยะไกล S3 นิรนาม
ดัตช์ – - - - - - - - - - -

การปรับแต่ง RColone จะสร้างแฟ้มไป 17 s3 /
ผู้จัดทํา AWS /
ขอบเขตเราตะวันออก 1 /
ตําแหน่ง_ใช้บังคับเราตะวันออก 1 /
เท็จ
ความจริงนิรนาม

3. ทดสอบสิ
-- -- --

Rcolone Isd go17: Noa-goes17 | หัว

4. สร้างจุดเมานท์สําหรับข้อมูล
ดัตช์ – - - - - - - - - - -

sudo mkdir - p / mnt/goes17
sudo sween $ USER: $USER / mint/goes17

5. ส่งข้อมูลมา (หมายเหตุโพรเซสนี้ทํางานในพื้นหน้า เพื่อให้แสดงผลลัพธ์บางอย่างและนั่งอยู่ที่นี่) 
-- ---- ----

rcloone - v mount go17: noa-goes17 / mind/goes17\\
-- อ่านได้อย่างเดียว --
-- เต็มโหมด vfs-cache
-- vfs-cache-maxize 1G\\
-- vfs-cache-pol-intervance 1m /
-- vfs-อ่าน-chink-size 64M /
-- vfs-อ่าน-chink-ize-limit 1G -
-- vfs-อ่าน- ahead 256M / พ.ศ.
-- Buffers-ize 64M -
-- dir-cache-time 24h -
-- atr-timeout 1s\\
-- ไม่-เวลา

6. เปิดแท็บใหม่บนเซิร์ฟเวอร์และตรวจสอบ
ดัตช์)

Is/mnt/goes17 | หัว

7. ตรวจสอบว่าสามารถเข้าใช้งานข้อมูลได้
ดัตช์)
cd / mind/goes17/ABI-L1b-RadC/2023/010/15
ดัมพ์ -เฮอะ Or_ABI-L1b-RadC-M6C16_s202011361_201381_2001011361381. .nc 
```
netcdf OR_ABI-L1b-RadC-M6C16_G17_s20230101536138_e20230101536138_c20230101541461 {
dimensions:
y = 1500 ;
x = 2500 ;
number_of_time_bounds = 2 ;
band = 1 ;
number_of_image_bounds = 2 ;
num_star_looks = 24 ;
variables:
short Rad(y, x) ;
Rad:_FillValue = 1023s ;
Rad:long_name = "ABI L1b Radiances" ;
Rad:standard_name = "toa_outgoing_radiance_per_unit_wavenumber" ;
Rad:_Unsigned = "true" ;
Rad:sensor_band_bit_depth = 10b ;
Rad:valid_range = 0s, 1022s ;
Rad:scale_factor = 0.1760585f ;
Rad:add_offset = -5.2392f ;
Rad:units = "mW m-2 sr-1 (cm-1)-1" ;
Rad:resolution = "y: 0.000056 rad x: 0.000056 rad" ;
Rad:coordinates = "band_id band_wavelength t y x" ;
Rad:grid_mapping = "goes_imager_projection" ;
Rad:cell_methods = "t: point area: point" ;
Rad:ancillary_variables = "DQF" ;
.
.
.
.
```
ผล ก็ กลับ มา อย่าง รวด เร็ว โดย เฉพาะ อย่าง ยิ่ง เนื่อง จาก การ ติด ตั้ง ของ เรา ไม่ มี ท่อ ที่ เร็ว ที่ สุด ใน โลก.

8. ทํา ให้ เป็น การ รับ ใช้ ระบบ (แก้ไขให้ถูกต้องกับผู้ใช้ เป็นต้น) .
ดัตช์)

เอ สร้างหน่วยของระบบ:

sudo นาโน /etc/ระบบ/ rcolone-goes17. service

และเข้ามา

[ประกาศ]
คําอธิบาย = Rcleone mount for GoES17 Public S3
หลัง=netOnline .tar รับ

[เชียร์]
ประเภท=ค่าปกติ
ผู้ใช้=ubuntu
ExecStart=/ usr/bin/rclone mount is17: Noa-goes17/mt/goes17\\
-- อ่านได้อย่างเดียว --
-- เต็มโหมด vfs-cache
-- vfs-cache-maxize 1G\\
-- vfs-cache-pol-intervance 1m /
-- vfs-อ่าน-chink-size 64M /
-- vfs-อ่าน-chink-ize-limit 1G -
-- vfs-อ่าน- ahead 256M / พ.ศ.
-- Buffers-ize 64M -
-- dir-cache-time 24h -
-- atr-timeout 1s\\
-- ไม่-เวลา-เวลา-
-- s3- no- check-booket
Exec stop=/bin/fusermount3 - u / mnt/goes17
เริ่มใหม่
เริ่มใหม่Sec=10

[ติดตั้ง]
ต้องการ=ผู้รักษาการ .tar รับ

b. เปิดใช้การบริการและเริ่ม:

โหลดดีมอนระบบ sudo
sudo Systemctl เปิดใช้งาน -- ปัจจุบันคือ rcloone-goes17

c. ทดสอบ

สถานะ Ctrl ของระบบ rcloone-goes17
Is/mnt/goes17 | หัว



หวังว่านี่คงมีประโยชน์กับผู้คน เราได้ทําการทดสอบโดยใช้ gcsfuse บน Google Cload Platsphorm ด้วยถังที่มีพื้นที่ตั้งชื่อเป็นลําดับชั้น โดยประสบความสําเร็จบางอย่าง หนึ่งข้อได้เปรียบของ Rcolone (และอีกอย่าง มันไม่ใช่ผู้จําหน่าย) คือมันมีการตั้งค่าให้มีประสิทธิภาพสูงสุด โดยเฉพาะถ้าคุณกําลังย้ายคนท้องถิ่น ERDDAP™ สําหรับเมฆ สิ่งนี้สามารถทําให้การเปลี่ยนแปลง แทบจะไร้ที่ติ
