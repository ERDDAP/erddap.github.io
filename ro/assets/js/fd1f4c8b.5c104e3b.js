"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[1553],{26775:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>c,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"server-admin/mqtt-integration","title":"ERDDAP Integrare MQTT","description":"ERDDAP include acum sprijin pentru protocolul MQTT pentru a facilita ingerarea \u0219i notific\u0103rile datelor \xeen timp real. Aceast\u0103 func\u021bionalitate este alimentat\u0103 de open-source  HiveMQ MQTT Client  \u015fi  HiveMQ Community Edition  biblioteci broker.","source":"@site/i18n/ro/docusaurus-plugin-content-docs/current/server-admin/mqtt-integration.md","sourceDirName":"server-admin","slug":"/server-admin/mqtt-integration","permalink":"/ro/docs/server-admin/mqtt-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/mqtt-integration.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docSidebar","previous":{"title":"Indicatoare de caracteristici","permalink":"/ro/docs/server-admin/feature-flags"},"next":{"title":"Contributing","permalink":"/ro/docs/category/contributing"}}');var n=t(74848),a=t(28453);const c={},o="ERDDAP Integrare MQTT",d={},l=[{value:"ERDDAP \xeen calitate de client MQTT",id:"erddap-\xeen-calitate-de-client-mqtt",level:2},{value:"Configurare: <code>Tabel EDD din Mqtt</code>",id:"configurare-tabel-edd-din-mqtt",level:2},{value:"ERDDAP ca un Broker MQTT",id:"erddap-ca-un-broker-mqtt",level:2},{value:"Activarea brokerului \xeencorporat",id:"activarea-brokerului-\xeencorporat",level:2},{value:"Configura\u021bie Broker &amp; Directore de date",id:"configura\u021bie-broker--directore-de-date",level:2},{value:"Utiliza\u021bi cazul 1: Ingerarea datelor de la clien\u021bii MQTT",id:"utiliza\u021bi-cazul-1-ingerarea-datelor-de-la-clien\u021bii-mqtt",level:2},{value:"Utiliza\u021bi caseta 2: Editarea datelor Schimb\u0103 notific\u0103rile",id:"utiliza\u021bi-caseta-2-editarea-datelor-schimb\u0103-notific\u0103rile",level:2},{value:"Variabile de mediu Parsing in <code>datasets.xml</code>",id:"variabile-de-mediu-parsing-in-datasetsxml",level:2}];function s(e){const i={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.header,{children:(0,n.jsx)(i.h1,{id:"erddap-integrare-mqtt",children:"ERDDAP Integrare MQTT"})}),"\n",(0,n.jsxs)(i.p,{children:["ERDDAP include acum sprijin pentru protocolul MQTT pentru a facilita ingerarea \u0219i notific\u0103rile datelor \xeen timp real. Aceast\u0103 func\u021bionalitate este alimentat\u0103 de open-source ",(0,n.jsxs)(i.a,{href:"https://github.com/hivemq/hivemq-mqtt-client",children:[" ",(0,n.jsx)(i.strong,{children:"HiveMQ MQTT Client"})," "]})," \u015fi ",(0,n.jsxs)(i.a,{href:"https://github.com/hivemq/hivemq-community-edition",children:[" ",(0,n.jsx)(i.strong,{children:"HiveMQ Community Edition"})," "]})," biblioteci broker."]}),"\n",(0,n.jsx)(i.p,{children:"ERDDAP poate influen\u021ba MQTT \xeen dou\u0103 moduri principale:"}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.strong,{children:"Ca un client MQTT:"}),"    ERDDAP poate subscrie la subiecte pe un broker MQTT existent la ingerarea datelor \u0219i crearea seturilor de date \xeen timp real."]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.strong,{children:"Ca un Broker MQTT:"}),"    ERDDAP poate g\u0103zdui propriul broker MQTT \xeencorporat, permi\u021b\xe2nd clien\u021bilor externi s\u0103 publice date direct c\u0103tre acesta."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h2,{id:"erddap-\xeen-calitate-de-client-mqtt",children:"ERDDAP \xeen calitate de client MQTT"}),"\n",(0,n.jsxs)(i.p,{children:["ERDDAP poate ac\u021biona ca un client MQTT pentru a subscrie la subiecte pe un broker MQTT extern sau propriul s\u0103u \xeencorporat. Acest lucru se realizeaz\u0103 folosind noul ",(0,n.jsx)(i.code,{children:"Tabel EDD din Mqtt"})," tipul setului de date, care func\u021bioneaz\u0103 similar cu cel existent; ",(0,n.jsxs)(i.a,{href:"/docs/server-admin/datasets#eddtablefromhttpget",children:[" ",(0,n.jsx)(i.code,{children:"Tabel EDD de la HttpGet"})," "]})," Set de date."]}),"\n",(0,n.jsxs)(i.p,{children:["\xcen prezent, implementarea clientului sus\u021bine doar ",(0,n.jsx)(i.strong,{children:"subscrie"})," la subiecte."]}),"\n",(0,n.jsxs)(i.h2,{id:"configurare-tabel-edd-din-mqtt",children:["Configurare: ",(0,n.jsx)(i.code,{children:"Tabel EDD din Mqtt"})]}),"\n",(0,n.jsxs)(i.p,{children:["Pentru a configura un set de date pentru a subscrie la un broker MQTT, define\u0219te un set de date de tip ",(0,n.jsx)(i.code,{children:"Tabel EDD din Mqtt"})," \xeen ",(0,n.jsx)(i.code,{children:"datasets.xml"})," Dosar. Urm\u0103toarele etichete de configurare sunt disponibile \xeen cadrul ",(0,n.jsx)(i.code,{children:"<dataset>"})," bloc:"]}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{children:"\x3c!-- Example configuration for an EDDTableFromMqtt dataset in datasets.xml --\x3e\n<dataset type=\"EDDTableFromMqtt\" datasetID=\"mqtt_realtime_data\" active=\"true\">\n\n    \x3c!-- The hostname or IP address of the MQTT broker. --\x3e\n    <serverHost>broker.example.com</serverHost>\n\n    \x3c!-- The port number of the MQTT broker. --\x3e\n    <serverPort>1883</serverPort>\n\n    \x3c!-- A unique identifier for this MQTT client. --\x3e\n    <clientId>erddap-subscriber-1</clientId>\n\n    \x3c!-- The username for broker authentication (optional). --\x3e\n    <username>user</username>\n\n    \x3c!-- The password for broker authentication (optional). --\x3e\n    <password>secret</password>\n\n    \x3c!-- A comma-separated list of MQTT topics to subscribe to. --\x3e\n    <topics>sensor/+/data, another/topic</topics>\n\n    \x3c!-- Set to 'true' to use a secure SSL/TLS connection. Default is 'false'. --\x3e\n    <useSsl>false</useSsl>\n\n    \x3c!-- The session expiry interval in seconds. --\x3e\n    <sessionExpiryInterval>3600</sessionExpiryInterval>\n\n    \x3c!-- The connection timeout in seconds. --\x3e\n    <connectionTimeout>10</connectionTimeout>\n\n    \x3c!-- Set to 'true' to enable automatic reconnection. Default is 'true'. --\x3e\n    <automaticReconnect>true</automaticReconnect>\n\n</dataset>\n"})}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h2,{id:"erddap-ca-un-broker-mqtt",children:"ERDDAP ca un Broker MQTT"}),"\n",(0,n.jsx)(i.p,{children:"ERDDAP poate rula un broker MQTT \xeencorporat, care serve\u0219te dou\u0103 scopuri principale:"}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.strong,{children:"Ingestia datelor:"})," Pentru a primi date publicate de clien\u021bi externi MQTT pentru crearea seturilor de date \xeen timp real."]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.strong,{children:"Notific\u0103ri:"})," Pentru a publica notific\u0103ri privind modific\u0103rile setului de date."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"activarea-brokerului-\xeencorporat",children:"Activarea brokerului \xeencorporat"}),"\n",(0,n.jsxs)(i.p,{children:["Brokerul MQTT \xeencorporat este dezactivat \xeen mod implicit. Pentru a permite acest lucru, ad\u0103uga\u021bi urm\u0103torul steag ",(0,n.jsx)(i.code,{children:"setup.xml"})," :"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.code,{children:"\x3c!-- Enables the embedded HiveMQ broker. Default is 'false'. --\x3e   <enableMqttBroker> Adev\u0103rat. </enableMqttBroker>"})}),"\n",(0,n.jsx)(i.h2,{id:"configura\u021bie-broker--directore-de-date",children:"Configura\u021bie Broker & Directore de date"}),"\n",(0,n.jsxs)(i.p,{children:["Pute\u021bi specifica directoare personalizate pentru configura\u021bia brokerului \u0219i fi\u0219iere de date \xeen ",(0,n.jsx)(i.code,{children:"setup.xml"})," . Dac\u0103 aceste etichete sunt l\u0103sate goale, ERDDAP va utiliza directoarele implicite specificate de biblioteca HiveMQ. Pentru detalii de configurare mai avansate, inclusiv logare \u0219i extensii, v\u0103 rug\u0103m s\u0103 consulta\u021bi oficial ",(0,n.jsxs)(i.a,{href:"https://github.com/hivemq/hivemq-community-edition/wiki",children:[" ",(0,n.jsx)(i.strong,{children:"HiveMQ Community Edition Wiki"})," "]})," ."]}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{children:"\x3c!-- The parent directory for all MQTT-related files. --\x3e\n<bigParentDirectory>/opt/erddap/mqtt/</bigParentDirectory>\n\n\x3c!-- The path to the embedded MQTT broker's configuration folder. --\x3e\n<mqttConfigFolder>/opt/erddap/mqtt/conf/</mqttConfigFolder>\n\n\x3c!-- The path to the embedded MQTT broker's data folder. --\x3e\n<mqttDataFolder>/opt/erddap/mqtt/data/</mqttDataFolder>\n"})}),"\n",(0,n.jsx)(i.h2,{id:"utiliza\u021bi-cazul-1-ingerarea-datelor-de-la-clien\u021bii-mqtt",children:"Utiliza\u021bi cazul 1: Ingerarea datelor de la clien\u021bii MQTT"}),"\n",(0,n.jsxs)(i.p,{children:["Pentru a construi un set de date \xeen timp real folosind broker \xeencorporat, pute\u021bi configura un ",(0,n.jsx)(i.code,{children:"Tabel EDD din Mqtt"})," Set de date (conform descrierii de mai sus) \xeen cadrul ",(0,n.jsx)(i.em,{children:"acela\u0219i"})," ERDDAP s\u0103 se conecteze la propriul broker local. Clien\u0163ii externi MQTT pot apoi publica date \xeen acest sens ERDDAP broker, care ",(0,n.jsx)(i.code,{children:"Tabel EDD din Mqtt"})," Setul de date se va subscrie \u0219i ingera."]}),"\n",(0,n.jsx)(i.h2,{id:"utiliza\u021bi-caseta-2-editarea-datelor-schimb\u0103-notific\u0103rile",children:"Utiliza\u021bi caseta 2: Editarea datelor Schimb\u0103 notific\u0103rile"}),"\n",(0,n.jsxs)(i.p,{children:["ERDDAP pot fi configurate pentru a publica notific\u0103ri despre modific\u0103rile setului de date (de exemplu, actualiz\u0103ri sau re\xeenc\u0103rc\u0103ri) la un subiect despre un broker MQTT. \xcen primul r\xe2nd, asigura\u021bi-v\u0103 c\u0103 brokerul este activat sau este disponibil unul extern. Apoi, permite func\u021bia de notificare \xeen ",(0,n.jsx)(i.code,{children:"setup.xml"})," :"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.code,{children:"\x3c!-- Set to 'true' to publish dataset change notifications via MQTT. Default is 'false'. --\x3e   <publishMqttNotif> Adev\u0103rat. </publishMqttNotif>"})}),"\n",(0,n.jsxs)(i.p,{children:["C\xe2nd aceast\u0103 caracteristic\u0103 este activat\u0103, ERDDAP utilizeaz\u0103 un client intern MQTT pentru a publica mesajele. Set\u0103rile de conectare pentru acest client pot fi personalizate \xeen ",(0,n.jsx)(i.code,{children:"setup.xml"})," . Tabelul de mai jos enumer\u0103 set\u0103rile disponibile \u0219i valorile implicite ale acestora."]}),"\n",(0,n.jsxs)(i.p,{children:["| Tag | Tip | Valoare implicit\u0103 | Descriere |\n| TRIBUNALUL | -... ----- | ------------------ | ------------------------ |\n|   ",(0,n.jsx)(i.code,{children:"<mqttServerHost>"}),"           | \u0219ir |   ",(0,n.jsx)(i.code,{children:"gazd\u0103 local\u0103"}),"         | Brokerul gazd\u0103 pentru publicarea notific\u0103rilor. |\n|   ",(0,n.jsx)(i.code,{children:"<mqttServerPort>"}),"           | int |   ",(0,n.jsx)(i.code,{children:"1883"}),"              | Portul brokerului de notificare. |\n|   ",(0,n.jsx)(i.code,{children:"<mqttClientId>"}),"             | \u0219ir |   ",(0,n.jsx)(i.code,{children:"erddap-client"}),"     | ID-ul clientului pentru editorul de notificare. |\n|   ",(0,n.jsx)(i.code,{children:"<mqttUserName>"}),"             | \u0219ir |   ",(0,n.jsx)(i.code,{children:"Nume utilizator erddap"}),"   | Numele de utilizator al editorului de notificare. |\n|   ",(0,n.jsx)(i.code,{children:"<mqttPassword>"}),"             | \u0219ir |   ",(0,n.jsx)(i.code,{children:"erddap-password"}),"   | Parola pentru editorul de notificare. |\n|   ",(0,n.jsx)(i.code,{children:"<mqttSsl>"}),"                  | boolean |   ",(0,n.jsx)(i.code,{children:"fals"}),"             | Utiliza\u021bi SSL/TLS pentru conexiunea de notificare. |\n|   ",(0,n.jsx)(i.code,{children:"<mqttKeepAlive>"}),"            | int |   ",(0,n.jsx)(i.code,{children:"60"}),"                | Supravie\u0163uie\u015fte \xeen c\xe2teva secunde. |\n|   ",(0,n.jsx)(i.code,{children:"<mqttCleanStart>"}),"           | boolean |   ",(0,n.jsx)(i.code,{children:"fals"}),"             | \xcencepe\u021bi cu o sesiune curat\u0103 (nicio stare de sesiune persistent\u0103) . |\n|   ",(0,n.jsx)(i.code,{children:"<mqttSessionExpiry>"}),"        | int |   ",(0,n.jsx)(i.code,{children:"10"}),"                | Intervalul de expirare a sesiunii \xeen c\xe2teva secunde. |\n|   ",(0,n.jsx)(i.code,{children:"<mqttConnectionTimeout>"}),"    | int |   ",(0,n.jsx)(i.code,{children:"10"}),"                | Conexiune timeout \xeen c\xe2teva secunde. |\n|   ",(0,n.jsx)(i.code,{children:"<mqttAutomaticReconnect>"}),"   | boolean |   ",(0,n.jsx)(i.code,{children:"Adev\u0103rat."}),"              | Reconecta\u021bi automat dac\u0103 conexiunea este pierdut\u0103. |"]}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsxs)(i.h2,{id:"variabile-de-mediu-parsing-in-datasetsxml",children:["Variabile de mediu Parsing in ",(0,n.jsx)(i.code,{children:"datasets.xml"})]}),"\n",(0,n.jsxs)(i.p,{children:["A fost introdus\u0103 o nou\u0103 caracteristic\u0103 care permite utilizarea variabilelor de mediu \xeen cadrul ",(0,n.jsx)(i.code,{children:"datasets.xml"})," . Aceasta este ",(0,n.jsx)(i.strong,{children:"activat implicit"})," ."]}),"\n",(0,n.jsxs)(i.p,{children:["Pentru a dezactiva aceast\u0103 func\u021bionalitate, ad\u0103uga\u021bi urm\u0103torul steag ",(0,n.jsx)(i.code,{children:"setup.xml"})," :"]}),"\n",(0,n.jsx)(i.p,{children:"xml"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.code,{children:"<enableEnvParsing> fals </enableEnvParsing>"})})]})}function u(e={}){const{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(s,{...e})}):s(e)}},28453:(e,i,t)=>{t.d(i,{R:()=>c,x:()=>o});var r=t(96540);const n={},a=r.createContext(n);function c(e){const i=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),r.createElement(a.Provider,{value:i},e.children)}}}]);