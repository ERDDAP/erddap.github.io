"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[9833],{28453(e,n,t){t.d(n,{R:()=>r,x:()=>a});var o=t(96540);const s={},i=o.createContext(s);function r(e){const n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(i.Provider,{value:n},e.children)}},67823(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>g,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"user/AccessToPrivateDatasets","title":"Access to Private Datasets","description":"Veel ERDDAP\u2122 installaties hebben geen authenticatie ingeschakeld en bieden dus geen enkele manier om in te loggen, noch hebben ze priv\xe9 datasets.","source":"@site/i18n/nl/docusaurus-plugin-content-docs/current/user/AccessToPrivateDatasets.md","sourceDirName":"user","slug":"/user/AccessToPrivateDatasets","permalink":"/nl/docs/user/AccessToPrivateDatasets","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/user/AccessToPrivateDatasets.md","tags":[],"version":"current","frontMatter":{"title":"Access to Private Datasets"},"sidebar":"docSidebar","previous":{"title":"xarray_erddap","permalink":"/nl/docs/user/user-tips/xarray_erddap"},"next":{"title":"NCCSV 1.00","permalink":"/nl/docs/user/nccsv-1.00"}}');var s=t(74848),i=t(28453);const r={title:"Access to Private Datasets"},a="Toegang tot priv\xe9gegevenssets in ERDDAP\u2122",c={},l=[{value:"Bijgewerkte instructies",id:"updated-instructions",level:2},{value:"Mensen met browsers",id:"humans-with-browsers",level:2},{value:"Scripts",id:"scripts",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"toegang-tot-priv\xe9gegevenssets-in-erddap",children:"Toegang tot priv\xe9gegevenssets in ERDDAP\u2122"})}),"\n",(0,s.jsx)(n.p,{children:"Veel ERDDAP\u2122 installaties hebben geen authenticatie ingeschakeld en bieden dus geen enkele manier om in te loggen, noch hebben ze priv\xe9 datasets."}),"\n",(0,s.jsx)(n.p,{children:"Sommige ERDDAP\u2122 installaties hebben authenticatie ingeschakeld. Momenteel, ERDDAP\u2122 ondersteunt alleen authenticatie via Google-beheerde e-mailaccounts, waaronder e-mailaccounts op NOAA en vele universiteiten. Indien ERDDAP\u2122 heeft authenticatie ingeschakeld, iedereen met een Google-beheerde e-mailaccount kan inloggen, maar ze hebben alleen toegang tot de priv\xe9 datasets die de ERDDAP\u2122 De beheerder heeft hen uitdrukkelijk gemachtigd om toegang te krijgen."}),"\n",(0,s.jsx)(n.h2,{id:"updated-instructions",children:"Bijgewerkte instructies"}),"\n",(0,s.jsxs)(n.p,{children:["Enkele van onderstaande informatie is verouderd. Totdat dit wordt bijgewerkt kunt u gebruiken ",(0,s.jsx)(n.a,{href:"https://shospital.github.io/blog/posts/blog-post/erddap_private_dataset.html",children:"deze blog post"})," voor recente stappen op het verkrijgen van gegevens uit een private dataset met scripts."]}),"\n",(0,s.jsx)(n.h2,{id:"humans-with-browsers",children:"Mensen met browsers"}),"\n",(0,s.jsx)(n.p,{children:"Menselijke gebruikers ERDDAP\u2122 kan inloggen ERDDAP\u2122 in een browser om toegang te krijgen tot private datasets die zij mogen gebruiken."}),"\n",(0,s.jsx)(n.p,{children:"Aanmelden:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Klik op de log in link in de linkerbovenhoek van een ERDDAP\u2122 webpagina.\nAls er geen log-in link, de ERDDAP\u2122 installatie heeft geen authenticatie ingeschakeld en er zijn geen priv\xe9 datasets.\n\xa0"}),"\n",(0,s.jsx)(n.li,{children:'Klik op de knop Inloggen om in te loggen op uw Google-account.\nDe tekst van de knop moet veranderen in "Ingelogd."\n\xa0'}),"\n",(0,s.jsxs)(n.li,{children:["Klik op de Log in ERDDAP Button.\nDe webpagina moet veranderen om te zeggen U bent ingelogd als ",(0,s.jsx)(n.em,{children:"uw E-mailadres"})," .\nAls het niet, wacht 5 seconden en klik op de Log in ERDDAP Nog een keer.\nIn extreme gevallen moet je misschien wachten en dan een paar keer opnieuw proberen.\n\xa0"]}),"\n",(0,s.jsx)(n.li,{children:"Gebruik je browser's Back-knop niet. Gebruik de \" ERDDAP \" link aan de bovenkant van het bovenstaande, gebruik dan andere links naar ERDDAP\u2122 pagina's waarin je ge\xefnteresseerd bent. Als een cached webpagina zegt dat je niet bent ingelogd, herlaad dan de pagina.\n\xa0"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"scripts",children:"Scripts"}),"\n",(0,s.jsx)(n.p,{children:"\\[ Dit is enigszins aangepast aan de informatie van Lynn DeWitt, die het moeilijke werk heeft gedaan om dit uit te zoeken. Lynn, hartelijk bedankt!\nAls u correcties of suggesties, e-mail erd.data @ noaa.gov . \\]"}),"\n",(0,s.jsx)(n.p,{children:"Het is ook mogelijk om in te loggen op ERDDAP\u2122 en toegang tot priv\xe9 datasets via een script. Hier is een voorbeeld dat curl :"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Deze instructies gaan ervan uit dat u een gmail adres gebruikt waar de 2-factor authenticatie niet is ingeschakeld. Als uw hoofdgmail adres 2-factor authenticatie ingeschakeld heeft, overweeg dan om een ander gmail adres aan te maken met 2-factor authenticatie uitgeschakeld.\n\xa0"}),"\n",(0,s.jsx)(n.li,{children:"Aanmelden ERDDAP\u2122 handmatig met het gmail adres dat u wilt gebruiken in uw script en accepteer alle benodigde machtigingen en log dan volledig terug uit.\n\xa0"}),"\n",(0,s.jsx)(n.li,{children:"Open de browser Developer Tools en ga naar het tabblad Netwerk.\n\xa0"}),"\n",(0,s.jsx)(n.li,{children:'Klik op de ERDDAP\u2122 "Inloggen" link, dan de "Inloggen" knop en kies het juiste e-mailadres indien gevraagd.\n\xa0'}),"\n",(0,s.jsx)(n.li,{children:'Na de knop "Inloggen" verandert in "Ingelogd" zal het tabblad Ontwikkelingshulpmiddelen Netwerk twee items tonen die eruit zien als het volgende (voorbeeld van Firefox) :'}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    iframerpc?action=issueToken&response loginGoogle.html  \n"})}),"\n",(0,s.jsx)(n.p,{children:'Gebruik de muis rechts-klik context menu om "kopi\xebren als cURL" beide van deze urls en plak ze in een platte tekst-editor\n\xa0\n6. Klik op de "Log in ERDDAP " knop en "kopieer als cURL" de link die eruit ziet als:'}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    login.html  \n"})}),"\n",(0,s.jsxs)(n.p,{children:["en plak deze derde curl commando in het tekstbestand.\n\xa0\n7. In het tekstbestand heb je nu 3 regels zoals het volgende, waar je bent ingelogd in een ERDDAP\u2122 server bij ' ",(0,s.jsx)(n.em,{children:(0,s.jsx)(n.a,{href:"https://host.somewhere.com/erddap",children:"https://host.somewhere.com/erddap"})}),' \'. De eerste curl commando krijgt uw gebruikersprofiel in "login\\_hint" en genereert een "id\\_token." De tweede gebruikt de id\\_token om in te loggen op Google, en de derde dan logt in op ERDDAP .']}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    curl 'https://accounts.google.com/o/oauth2/iframerpc?action=issueToken&response\\\\_type=token%20id\\\\_token&scope=openid%20profile%20email&client\\\\_id=ABCDEFG.apps.googleusercontent.com&login\\\\_hint=XXXXXXXXXX&ss\\\\_domain=https%3A%2F%2Fhost.somewhere.com&origin=https%3A%2F%2Fhost.somewhere.com' --2.0 -H 'Host: accounts.google.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://accounts.google.com/o/oauth2/iframe' -H 'Cookie: lotsofcookiestuff' -H 'Connection: keep-alive' curl 'https://host.somewhere.com/erddap/loginGoogle.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' --data 'idtoken=HUGELONGIDTOKEN' curl 'https://host.somewhere.com/erddap/login.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1'\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"8",children:["\n",(0,s.jsx)(n.li,{children:"De bovenstaande 3 regels, wanneer uitgevoerd achtereenvolgens vanaf een opdrachtregel, zal u inloggen ERDDAP . Om deze in een script te gebruiken moet je de id\\_token van de eerste regel vastleggen, het naar de tweede regel voeren en een cookie schrijven die door volgende regels gelezen moet worden.\n\xa0"}),"\n",(0,s.jsxs)(n.li,{children:["Om een script te ontwikkelen, voer het eerste uit ('",(0,s.jsx)(n.a,{href:"https://accounts.google.com",children:"https://accounts.google.com"}),')   curl lijn precies zoals het werd gekopieerd uit de ontwikkelaar tools, en vastleggen van de reactie (U kunt een curl fout bij de vlag "--2.0" gewoon verwijderen) . In php ziet het er als volgt uit:']}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    $gcurlstuff=\"curl 'https://accounts.google.com/o/oauth2/iframerpc?action=issueToken&response\\\\_type=token%20id\\\\_token&scope=openid%20profile%20email&client\\\\_id=ABCDEFG.apps.googleusercontent.com&login\\\\_hint=XXXXXXXXXX&ss\\\\_domain=https%3A%2F%2Fhost.somewhere.com&origin=https%3A%2F%2Fhost.somewhere.com' -H 'Host: accounts.google.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://accounts.google.com/o/oauth2/iframe' -H 'Cookie: lotsofcookiestuff' -H 'Connection: keep-alive'\"; //execute the curl command: exec($gcurlstuff,$output,$status); //the response is a json array in $output $response=json\\\\_decode($output\\\\[0\\\\],true); //the part you need is in \"id\\\\_token\": $id\\\\_token=$response\\\\[\"id\\\\_token\"\\\\];\n"})}),"\n",(0,s.jsx)(n.p,{children:"Log in op Google door de tweede regel uit te voeren met $id\\_token, eerst de parameter \"-H 'Cookie: stuff' te verwijderen en in plaats daarvan te vertellen curl om een cookie te schrijven:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    $glcurlstuff=\"curl 'https://host.somewhere.com/erddap/loginGoogle.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' --data 'idtoken=\".$id\\\\_token.\"' -b cookies.txt -c cookies.txt\" exec($glcurlstuff,$output1,$status);\n"})}),"\n",(0,s.jsx)(n.p,{children:"Aanmelden ERDDAP\u2122 , het opnieuw verwijderen van de parameter \"-H 'Cookie: stuff', en het gebruik van de eerder geschreven cookie:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    $ecurlstuff=\"curl 'https://host.somewhere.com/erddap/login.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1 -b cookies.txt\"' exec($ecurlstuff,$output2,$status);\n"})}),"\n",(0,s.jsx)(n.p,{children:"Je zou nu gegevens van de server moeten kunnen opvragen met dezelfde cookie:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"    $curlstuff=\"curl -s 'https://host.somewhere.com/erddap/tabledap/datasetid.csv?variablelist' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1' -b cookies.txt\"; exec($curlstuff,$output3,$status); //$output3 will be data in csv!\n"})})]})}function g(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);