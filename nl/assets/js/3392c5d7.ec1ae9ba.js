"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[291],{28453(e,n,a){a.d(n,{R:()=>d,x:()=>o});var t=a(96540);const r={},i=t.createContext(r);function d(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),t.createElement(i.Provider,{value:n},e.children)}},64710(e,n,a){a.r(n),a.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>d,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"server-admin/prometheus","title":"Prometheus","description":"Prometheus metrics beschikbaar zijn op /erddap/metrics. JVM kernmetrics werden toegevoegd in 2.25 met veel ERDDAP\u2122 metrics toegevoegd in versie 2.26. Als je de metrics wilt gebruiken, zorg dan dat je tenminste versie 2.26 hebt. Ze zijn standaard ingeschakeld, u kunt ze uitschakelen door het toevoegen","source":"@site/i18n/nl/docusaurus-plugin-content-docs/current/server-admin/prometheus.md","sourceDirName":"server-admin","slug":"/server-admin/prometheus","permalink":"/nl/docs/server-admin/prometheus","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/prometheus.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"docSidebar","previous":{"title":"Gelokaliseerde metadata","permalink":"/nl/docs/server-admin/localized-metadata"},"next":{"title":"Functievlaggen","permalink":"/nl/docs/server-admin/feature-flags"}}');var r=a(74848),i=a(28453);const d={sidebar_position:9},o="Prometheus",s={},l=[{value:"Uitvoeren van Prometheus-server",id:"uitvoeren-van-prometheus-server",level:2},{value:"ERDDAP\u2122 metrics",id:"erddap-metrics",level:2},{value:"JVM",id:"jvm",level:3},{value:"ERDDAP\u2122 specifiek",id:"erddap-specifiek",level:3},{value:"ERDDAP _Build_info",id:"erddap-_build_info",level:4},{value:"feature_vlaggen",id:"feature_vlaggen",level:4},{value:"gebufferd Afbeelding",id:"gebufferd-afbeelding",level:4},{value:"http _Aanvragen_duur_seconden",id:"http-_aanvragen_duur_seconden",level:4},{value:"touch_thread_duration_seconden",id:"touch_thread_duration_seconden",level:4},{value:"taak_thread_duration_seconden",id:"taak_thread_duration_seconden",level:4},{value:"load_datasets_duration_seconden",id:"load_datasets_duration_seconden",level:4},{value:"e-mail_thread_duration_seconden",id:"e-mail_thread_duration_seconden",level:4},{value:"e-mail_count_distributie",id:"e-mail_count_distributie",level:4},{value:"dataset_count",id:"dataset_count",level:4},{value:"dataset_failed_load_count",id:"dataset_failed_load_count",level:4},{value:"schuur_verzoeken_totaal",id:"schuur_verzoeken_totaal",level:4},{value:"gevaarlijk_geheugen_emails_totaal",id:"gevaarlijk_geheugen_emails_totaal",level:4},{value:"gevaarlijk_memory_faillures_totaal",id:"gevaarlijk_memory_faillures_totaal",level:4},{value:"topo_request_totaal",id:"topo_request_totaal",level:4},{value:"Grenzentellers",id:"grenzentellers",level:4}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"prometheus",children:"Prometheus"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://prometheus.io/",children:"Prometheus metrics"})," beschikbaar zijn op /erddap/metrics. JVM kernmetrics werden toegevoegd in 2.25 met veel ERDDAP\u2122 metrics toegevoegd in versie 2.26. Als je de metrics wilt gebruiken, zorg dan dat je tenminste versie 2.26 hebt. Ze zijn standaard ingeschakeld, u kunt ze uitschakelen door het toevoegen"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<usePrometheusMetrics>false</usePrometheusMetrics>\n"})}),"\n",(0,r.jsx)(n.p,{children:"naar uw setup.xml."}),"\n",(0,r.jsx)(n.p,{children:"Deze metrics zijn ontworpen om machineleesbaar te zijn. Terwijl u de metrics pagina handmatig kunt controleren, wordt aanbevolen om een Prometheus server te gebruiken voor de dieptebewaking. Een Prometheus server zal historische metrics opslaan die meer diepte monitoring mogelijk maken (zoals tarieven en veranderingen uit het verleden) , en wordt ook vaak uitgevoerd met een Grafana server. Wij bieden een aantal vooraf gebouwde dashboards die admins nuttig kunnen vinden voor het aan de slag controleren van hun servers."}),"\n",(0,r.jsx)(n.h2,{id:"uitvoeren-van-prometheus-server",children:"Uitvoeren van Prometheus-server"}),"\n",(0,r.jsxs)(n.p,{children:["De beste documentatie voor het uitvoeren van de monitoring stack (Prometheus + Grafana) is in de Prometheus ",(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/blob/main/docker/prometheus/README.md",children:"leesme"})," ."]}),"\n",(0,r.jsx)(n.h2,{id:"erddap-metrics",children:"ERDDAP\u2122 metrics"}),"\n",(0,r.jsx)(n.h3,{id:"jvm",children:"JVM"}),"\n",(0,r.jsxs)(n.p,{children:["ERDDAP\u2122 exporteert een aantal metrics die u nuttig kunt vinden (beginnend in ERDDAP\u2122 2,25) . Voor algemene monitoring van de gezondheid van de JVM gebruiken we de door de Prometheus klant verzamelde metrics. Dit omvat gegevens over afvalverzameling, geheugengebruik, threads en meer. Voor meer informatie zie de ",(0,r.jsx)(n.a,{href:"https://prometheus.github.io/client_java/instrumentation/jvm/",children:"Prometheus Java Client JVM documentatie"})," ."]}),"\n",(0,r.jsx)(n.h3,{id:"erddap-specifiek",children:"ERDDAP\u2122 specifiek"}),"\n",(0,r.jsxs)(n.p,{children:["Wij exporteren ook een aantal ERDDAP\u2122 specifieke maatstaven (beginnend in ERDDAP\u2122 2,26) . Als je wilt graven in de code, kunt u de statistieken verzameld in ",(0,r.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/blob/main/WEB-INF/classes/gov/noaa/pfel/erddap/util/Metrics.java",children:"Metrics.java"})," ."]}),"\n",(0,r.jsx)(n.h4,{id:"erddap-_build_info",children:"ERDDAP _Build_info"}),"\n",(0,r.jsx)(n.p,{children:"Dit is de bouw info voor de ERDDAP\u2122 server. Het bevat versie (major.minor) , versie_volledig (major.minor.patch) , en deployment_info (gebruikt om aan te geven hoe de server wordt ingezet, zoals 'Docker ') ."}),"\n",(0,r.jsx)(n.h4,{id:"feature_vlaggen",children:"feature_vlaggen"}),"\n",(0,r.jsx)(n.p,{children:"Dit is een info metriek die de huidige status van feature vlaggen toont. De meeste booleaanse configuratie opties worden beschouwd als functie vlaggen."}),"\n",(0,r.jsx)(n.h4,{id:"gebufferd-afbeelding",children:"gebufferd Afbeelding"}),"\n",(0,r.jsx)(n.p,{children:"Dit is een informatie metriek die aangeeft of grafische acceleratie beschikbaar is."}),"\n",(0,r.jsx)(n.h4,{id:"http-_aanvragen_duur_seconden",children:"http _Aanvragen_duur_seconden"}),"\n",(0,r.jsx)(n.p,{children:"Dit is een histogram van de responsduur in seconden. De labels zijn request_type (bijvoorbeeld griddap, tabledap , bestanden, wms) , dataset_id (indien van toepassing, herhaalt het verzoektype anders) , bestand_type (uitvoerformaat voor verzoek bv. '.html', '.csv', '.iso19115' ') , lang_code (taal voor het verzoek, of lege tekenreeks indien standaard) , status_code ( http statuscode van het verzoek bv. 200, 302, 404) ."}),"\n",(0,r.jsx)(n.p,{children:"Dit kan worden gebruikt om verzoeken te volgen door dataset id om de populaire datasets van de server te bepalen. Het kan ook helpen identificeren als er bepaalde soorten verzoeken die traag zijn op uw server."}),"\n",(0,r.jsx)(n.h4,{id:"touch_thread_duration_seconden",children:"touch_thread_duration_seconden"}),"\n",(0,r.jsx)(n.p,{children:"Een histogram van touch thread taakduur. Ze worden gekenmerkt met succes (waar/onwaar) ."}),"\n",(0,r.jsx)(n.h4,{id:"taak_thread_duration_seconden",children:"taak_thread_duration_seconden"}),"\n",(0,r.jsx)(n.p,{children:"Een histogram van taak draad duurt. Ze worden gekenmerkt met succes (waar/onwaar) en taak_type (intetger) ."}),"\n",(0,r.jsx)(n.h4,{id:"load_datasets_duration_seconden",children:"load_datasets_duration_seconden"}),"\n",(0,r.jsx)(n.p,{children:"Een histogram van de duur voor taken met dataset. Ze zijn ge\xebtiketteerd met grote (waar/onwaar) ."}),"\n",(0,r.jsx)(n.h4,{id:"e-mail_thread_duration_seconden",children:"e-mail_thread_duration_seconden"}),"\n",(0,r.jsx)(n.p,{children:"Een histogram van e-mail draad taak duur. Ze worden gekenmerkt met succes (waar/onwaar) ."}),"\n",(0,r.jsx)(n.h4,{id:"e-mail_count_distributie",children:"e-mail_count_distributie"}),"\n",(0,r.jsx)(n.p,{children:"Een histogram van e-mails per taak."}),"\n",(0,r.jsx)(n.h4,{id:"dataset_count",children:"dataset_count"}),"\n",(0,r.jsx)(n.p,{children:"Een meter van de datasets, ingesteld na elke load datasets oproep. Dit wordt gekenmerkt met categorie (raster, tabel) ."}),"\n",(0,r.jsx)(n.h4,{id:"dataset_failed_load_count",children:"dataset_failed_load_count"}),"\n",(0,r.jsx)(n.p,{children:"Een meter van de datasets die niet geladen konden worden, ingesteld na elke load datasets oproep."}),"\n",(0,r.jsx)(n.h4,{id:"schuur_verzoeken_totaal",children:"schuur_verzoeken_totaal"}),"\n",(0,r.jsx)(n.p,{children:"Tegenstand tegen verzoeken die zijn afgewezen. De server zal een verzoek indienen wanneer hij gelooft dat de server weinig geheugen heeft (RAM) en het verzoek zou problemen veroorzaken. Dit omvat geen verzoeken die fout te wijten aan lage RAM of schijfruimte tijdens de behandeling van het verzoek."}),"\n",(0,r.jsx)(n.h4,{id:"gevaarlijk_geheugen_emails_totaal",children:"gevaarlijk_geheugen_emails_totaal"}),"\n",(0,r.jsx)(n.p,{children:"Teller van keren dat de server probeert om een e-mail te sturen naar de admin dat geheugen gevaarlijk laag is."}),"\n",(0,r.jsx)(n.h4,{id:"gevaarlijk_memory_faillures_totaal",children:"gevaarlijk_memory_faillures_totaal"}),"\n",(0,r.jsx)(n.p,{children:"Counter van verzoeken die mislukt als gevolg van de machine raakt zonder geheugen. Vaak is dit omdat de machine ontvangt veel dure verzoeken of de individuele aanvraag was uitzonderlijk groot."}),"\n",(0,r.jsx)(n.h4,{id:"topo_request_totaal",children:"topo_request_totaal"}),"\n",(0,r.jsx)(n.p,{children:"Teller van verzoeken om topo-gegevens. Dit is gelabeld cache (gecached/not_cached) ."}),"\n",(0,r.jsx)(n.h4,{id:"grenzentellers",children:"Grenzentellers"}),"\n",(0,r.jsx)(n.p,{children:"Er is ook een verzameling tellers voor verzoeken om grenzen:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"nationale_grenzen_verzoek_totaal"}),"\n",(0,r.jsx)(n.li,{children:"status_grenzen_verzoek_totaal"}),"\n",(0,r.jsx)(n.li,{children:"rivier_grenzen_verzoek_totaal"}),"\n",(0,r.jsx)(n.li,{children:"gshhs_request_totaal"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Deze zijn gemarkeerd met status (grof, succes, weggegooid) ."})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}}}]);