"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[2201],{2178:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"user/AccessToPrivateDatasets","title":"Access to Private Datasets","description":"MangeERDDAP\u2122installasjoner har ikke autentisering aktivert og dermed ikke gi noen m\xe5te for brukere \xe5 logge inn, og de har heller ikke private datasett.","source":"@site/i18n/nb/docusaurus-plugin-content-docs/current/user/AccessToPrivateDatasets.md","sourceDirName":"user","slug":"/user/AccessToPrivateDatasets","permalink":"/nb/docs/user/AccessToPrivateDatasets","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/user/AccessToPrivateDatasets.md","tags":[],"version":"current","frontMatter":{"title":"Access to Private Datasets"},"sidebar":"docSidebar","previous":{"title":"User","permalink":"/nb/docs/category/user"},"next":{"title":"NCCSV 1.00","permalink":"/nb/docs/user/nccsv-1.00"}}');var s=n(74848),o=n(28453);const i={title:"Access to Private Datasets"},a="Tilgang til private datasett iERDDAP\u2122",l={},d=[{value:"Oppdaterte instruksjoner",id:"updated-instructions",level:2},{value:"Mennesker med nettlesere",id:"humans-with-browsers",level:2},{value:"Skript",id:"scripts",level:2}];function c(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"tilgang-til-private-datasett-ierddap",children:"Tilgang til private datasett iERDDAP\u2122"})}),"\n",(0,s.jsx)(t.p,{children:"MangeERDDAP\u2122installasjoner har ikke autentisering aktivert og dermed ikke gi noen m\xe5te for brukere \xe5 logge inn, og de har heller ikke private datasett."}),"\n",(0,s.jsx)(t.p,{children:"NoenERDDAP\u2122installasjoner har autentisering aktivert. I dag,ERDDAP\u2122bare st\xf8tter autentisering via Google-styrte e-postkontoer, som inkluderer e-postkontoer p\xe5NOAAog mange universiteter. Hvis enERDDAP\u2122har autentisering aktivert, alle med en Google-styrt e-postkonto kan logge p\xe5, men de vil bare ha tilgang til private datasett somERDDAP\u2122administrator har eksplisitt autorisert dem til tilgang."}),"\n",(0,s.jsx)(t.h2,{id:"updated-instructions",children:"Oppdaterte instruksjoner"}),"\n",(0,s.jsxs)(t.p,{children:["Noen av opplysningene nedenfor er utdatert. Inntil dette blir oppdatert kan du bruke",(0,s.jsx)(t.a,{href:"https://shospital.github.io/blog/posts/blog-post/erddap_private_dataset.html",children:"denne bloggen"}),"for nylige trinn for \xe5 f\xe5 data fra et privat datasett med skript."]}),"\n",(0,s.jsx)(t.h2,{id:"humans-with-browsers",children:"Mennesker med nettlesere"}),"\n",(0,s.jsx)(t.p,{children:"Menneskelige brukere avERDDAP\u2122kan logge innERDDAP\u2122i en nettleser for \xe5 f\xe5 tilgang til private datasett som de er autorisert til \xe5 f\xe5 tilgang til."}),"\n",(0,s.jsx)(t.p,{children:"Logg inn:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Klikk p\xe5 loggen i linken \xf8verst til venstre for noenERDDAP\u2122Nettside.\nHvis det ikke er logg i link,ERDDAP\u2122installasjonen har ikke autentisering aktivert, og det er ingen private datasett.\n\xa0"}),"\n",(0,s.jsx)(t.li,{children:'Klikk p\xe5 Logg p\xe5 knappen for \xe5 logge p\xe5 Google-kontoen din.\nTeksten p\xe5 knappen b\xf8r endres til " Signert i".\n\xa0'}),"\n",(0,s.jsxs)(t.li,{children:["Klikk p\xe5 Logg innERDDAPknapp.\nNettsiden b\xf8r endres til \xe5 si Du er logget p\xe5 som ",(0,s.jsx)(t.em,{children:"din E-postadresse"})," ..\nHvis det ikke gj\xf8r det, vent 5 sekunder og klikk p\xe5 Logg p\xe5ERDDAPknappen igjen.\nI ekstreme tilfeller m\xe5 du kanskje vente og pr\xf8ve igjen noen ganger.\n\xa0"]}),"\n",(0,s.jsx)(t.li,{children:'Ikke bruk ryggknappen til nettleseren. Bruk "ERDDAP" lenke \xf8verst i ovennevnte, og bruk deretter andre lenker til \xe5 g\xe5 tilERDDAP\u2122sider du er interessert i. Hvis en cached webside sier at du ikke er logget p\xe5, last p\xe5 siden.\n\xa0'}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"scripts",children:"Skript"}),"\n",(0,s.jsx)(t.p,{children:"\\[Dette er litt endret fra informasjon gitt av Lynn DeWitt, som gjorde den harde jobben med \xe5 finne ut dette. Takk, Lynn!\nHvis du har rettelser eller forslag, vennligst e-post erd.data @ noaa.gov .\\]"}),"\n",(0,s.jsx)(t.p,{children:"Det er ogs\xe5 mulig \xe5 logge p\xe5ERDDAP\u2122og tilgang til private datasett via et skript. Her er et eksempel som brukercurl:)"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Disse instruksjonene antar at du bruker en gmail-adresse der 2-faktor-autentisering ikke er sl\xe5tt p\xe5. Hvis din viktigste gmail-adresse har 2-faktor-autentisering sl\xe5tt p\xe5, b\xf8r du vurdere \xe5 opprette en annen gmail-adresse med 2-faktor-autentisering sl\xe5tt av.\n\xa0"}),"\n",(0,s.jsx)(t.li,{children:"Logg innERDDAP\u2122manuelt med gmail-adressen du vil bruke i skriptet og aksepterer alle tillatelser som kreves, og logg deretter helt ut igjen.\n\xa0"}),"\n",(0,s.jsx)(t.li,{children:"\xc5pne nettleserutviklerverkt\xf8yene og g\xe5 til nettverksfanen.\n\xa0"}),"\n",(0,s.jsx)(t.li,{children:'Klikk p\xe5ERDDAP\u2122Logg p\xe5" lenke, deretter " Logg p\xe5" knappen og velg riktig e-postadresse hvis du blir bedt om det.\n\xa0'}),"\n",(0,s.jsx)(t.li,{children:'Etter changesLogg inn"-knappen endres til " Signert", vil Utviklerverkt\xf8ynettverksfanen vise to oppf\xf8ringer som ligner p\xe5 f\xf8lgende (eksempel fra Firefox) :)'}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"    iframerpc?action=issueToken&response loginGoogle.html  \n"})}),"\n",(0,s.jsx)(t.p,{children:'Bruk h\xf8yreklikk-menyen for \xe5 kopiere som cURL" begge disse URL-ene og lime dem inn i en vanlig tekstredigering\n\xa0\n6. Klikk p\xe5 loggenERDDAP" knapp og "kopier som cURL" lenken som ser ut som:'}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"    login.html  \n"})}),"\n",(0,s.jsxs)(t.p,{children:["og lim inn denne tredjecurlkommando i tekstfilen.\n\xa0\n7. I tekstfilen vil du n\xe5 ha 3 linjer som f\xf8lger, der du har logget p\xe5 enERDDAP\u2122server p\xe5 ' * ",(0,s.jsx)(t.a,{href:"https://host.somewhere.com/erddap",children:"https://host.somewhere.com/erddap"}),' * \'. Den f\xf8rstecurlkommando f\xe5r din brukerprofil i " login\\_hint" og genererer en "id\\_token". Den andre bruker id-_token til \xe5 logge inn p\xe5 Google, og den tredje logger seg deretter p\xe5ERDDAP..']}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"    curl 'https://accounts.google.com/o/oauth2/iframerpc?action=issueToken&response\\\\_type=token%20id\\\\_token&scope=openid%20profile%20email&client\\\\_id=ABCDEFG.apps.googleusercontent.com&login\\\\_hint=XXXXXXXXXX&ss\\\\_domain=https%3A%2F%2Fhost.somewhere.com&origin=https%3A%2F%2Fhost.somewhere.com' --2.0 -H 'Host: accounts.google.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://accounts.google.com/o/oauth2/iframe' -H 'Cookie: lotsofcookiestuff' -H 'Connection: keep-alive' curl 'https://host.somewhere.com/erddap/loginGoogle.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' --data 'idtoken=HUGELONGIDTOKEN' curl 'https://host.somewhere.com/erddap/login.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1'\n"})}),"\n",(0,s.jsxs)(t.ol,{start:"8",children:["\n",(0,s.jsx)(t.li,{children:"De ovennevnte tre linjene, n\xe5r du kj\xf8rer sekvensielt fra en kommandolinje, vil logge deg innERDDAP.. For \xe5 bruke disse i et skript m\xe5 du fange id-_token fra den f\xf8rste linjen, mate den til den andre linjen og skrive en informasjonskapsel som skal leses av p\xe5f\xf8lgende linjer.\n\xa0"}),"\n",(0,s.jsxs)(t.li,{children:['For \xe5 utvikle et skript, kj\xf8rer du det f\xf8rste (" ',(0,s.jsx)(t.a,{href:"https://accounts.google.com",children:"https://accounts.google.com"})," )  curllinje n\xf8yaktig som den ble kopiert fra utviklerverkt\xf8yene, og fange responsen (Du kan f\xe5 encurlfeil om flagget ---2.0 - bare fjern det) .. I php ser det ut som f\xf8lgende:"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"    $gcurlstuff=\"curl 'https://accounts.google.com/o/oauth2/iframerpc?action=issueToken&response\\\\_type=token%20id\\\\_token&scope=openid%20profile%20email&client\\\\_id=ABCDEFG.apps.googleusercontent.com&login\\\\_hint=XXXXXXXXXX&ss\\\\_domain=https%3A%2F%2Fhost.somewhere.com&origin=https%3A%2F%2Fhost.somewhere.com' -H 'Host: accounts.google.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://accounts.google.com/o/oauth2/iframe' -H 'Cookie: lotsofcookiestuff' -H 'Connection: keep-alive'\"; //execute the curl command: exec($gcurlstuff,$output,$status); //the response is a json array in $output $response=json\\\\_decode($output\\\\[0\\\\],true); //the part you need is in \"id\\\\_token\": $id\\\\_token=$response\\\\[\"id\\\\_token\"\\\\];\n"})}),"\n",(0,s.jsx)(t.p,{children:'Logg inn p\xe5 Google ved \xe5 utf\xf8re den andre linjen ved \xe5 bruke $id\\_token, f\xf8rst fjerne  "-H "cookies: ting" - parameter og i stedet fortellecurl\xe5 skrive en cookie:'}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"    $glcurlstuff=\"curl 'https://host.somewhere.com/erddap/loginGoogle.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' --data 'idtoken=\".$id\\\\_token.\"' -b cookies.txt -c cookies.txt\" exec($glcurlstuff,$output1,$status);\n"})}),"\n",(0,s.jsx)(t.p,{children:'Logg innERDDAP\u2122, igjen \xe5 fjerne  "-H "cookies: ting" -parameteren, og bruke den tidligere skriftlige informasjonskapselen:'}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"    $ecurlstuff=\"curl 'https://host.somewhere.com/erddap/login.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1 -b cookies.txt\"' exec($ecurlstuff,$output2,$status);\n"})}),"\n",(0,s.jsx)(t.p,{children:"Du b\xf8r n\xe5 kunne be om data fra serveren ved \xe5 bruke den samme informasjonskapselen:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"    $curlstuff=\"curl -s 'https://host.somewhere.com/erddap/tabledap/datasetid.csv?variablelist' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1' -b cookies.txt\"; exec($curlstuff,$output3,$status); //$output3 will be data in csv!\n"})})]})}function p(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>a});var r=n(96540);const s={},o=r.createContext(s);function i(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);