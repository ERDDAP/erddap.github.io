"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[2041],{28453:(e,r,t)=>{t.d(r,{R:()=>a,x:()=>l});var s=t(96540);const n={},i=s.createContext(n);function a(e){const r=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),s.createElement(i.Provider,{value:r},e.children)}},34995:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>d,contentTitle:()=>l,default:()=>m,frontMatter:()=>a,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"server-admin/prometheus","title":"Prometheus","description":"Prometheus metriskeer tilgjengelig p\xe5 /erddap/metri. JVM kjernem\xe5linger ble tilsatt i 2,25 med mangeERDDAP\u2122metrikk lagt til i versjon 2.26. Hvis du vil bruke metrikkene, m\xe5 du v\xe6re i minst versjon 2.26. De standard \xe5 aktivere, kan du deaktivere dem ved \xe5 legge til","source":"@site/i18n/nb/docusaurus-plugin-content-docs/current/server-admin/prometheus.md","sourceDirName":"server-admin","slug":"/server-admin/prometheus","permalink":"/nb/docs/server-admin/prometheus","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/prometheus.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"docSidebar","previous":{"title":"Lokaliserte metadata","permalink":"/nb/docs/server-admin/localized-metadata"},"next":{"title":"Contributing","permalink":"/nb/docs/category/contributing"}}');var n=t(74848),i=t(28453);const a={sidebar_position:9},l="Prometheus",d={},o=[{value:"Kj\xf8rer Prometheus server",id:"kj\xf8rer-prometheus-server",level:2},{value:"ERDDAP\u2122Metriske",id:"erddapmetriske",level:2},{value:"JVM",id:"jvm",level:3},{value:"ERDDAP\u2122spesifikk",id:"erddapspesifikk",level:3},{value:"ERDDAP_build_info",id:"erddap_build_info",level:4},{value:"funksjon_flag",id:"funksjon_flag",level:4},{value:"bufret Bilde",id:"bufret-bilde",level:4},{value:"http_Request_duration_sekunder",id:"http_request_duration_sekunder",level:4},{value:"touch_thread_duration_sekunder",id:"touch_thread_duration_sekunder",level:4},{value:"empty_thread_duration_sekunder",id:"empty_thread_duration_sekunder",level:4},{value:"Last_datasett_duration_sekunder",id:"last_datasett_duration_sekunder",level:4},{value:"email_thread_duration_seconds",id:"email_thread_duration_seconds",level:4},{value:"email_count_distribusjon",id:"email_count_distribusjon",level:4},{value:"dataset_count",id:"dataset_count",level:4},{value:"dataset_failed_load_count",id:"dataset_failed_load_count",level:4},{value:"castle_requests_total",id:"castle_requests_total",level:4},{value:"farlig_minne_emails_total",id:"farlig_minne_emails_total",level:4},{value:"farlig_ memory_failures_total",id:"farlig_-memory_failures_total",level:4},{value:"topo_request_total",id:"topo_request_total",level:4},{value:"Grenser",id:"grenser",level:4}];function u(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"prometheus",children:"Prometheus"})}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.a,{href:"https://prometheus.io/",children:"Prometheus metriske"}),"er tilgjengelig p\xe5 /erddap/metri. JVM kjernem\xe5linger ble tilsatt i 2,25 med mangeERDDAP\u2122metrikk lagt til i versjon 2.26. Hvis du vil bruke metrikkene, m\xe5 du v\xe6re i minst versjon 2.26. De standard \xe5 aktivere, kan du deaktivere dem ved \xe5 legge til"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-xml",children:"<usePrometheusMetrics>false</usePrometheusMetrics>\n"})}),"\n",(0,n.jsx)(r.p,{children:"til setup.xml."}),"\n",(0,n.jsx)(r.p,{children:"Disse metrikkene er designet for \xe5 v\xe6re maskinlesbare. Mens du kan sjekke metrikksiden manuelt, anbefales det \xe5 bruke en Prometheus-server i dybdeoverv\xe5kning. En Prometheus-server vil lagre historiske m\xe5linger som muliggj\xf8r mer dybdeoverv\xe5king (som priser og endringer fra tidligere verdier) , og ogs\xe5 ofte kj\xf8res med en Grafana server. Vi tilbyr noen forh\xe5ndsbygde dashboards som administratorer kan finne nyttig for \xe5 komme i gang med \xe5 overv\xe5ke sine servere."}),"\n",(0,n.jsx)(r.h2,{id:"kj\xf8rer-prometheus-server",children:"Kj\xf8rer Prometheus server"}),"\n",(0,n.jsxs)(r.p,{children:["Den beste dokumentasjonen for \xe5 kj\xf8re overv\xe5kingsstabelen (Prometheus + Grafana) er i Prometheus",(0,n.jsx)(r.a,{href:"https://github.com/ERDDAP/erddap/blob/main/docker/prometheus/README.md",children:"readme"}),".."]}),"\n",(0,n.jsx)(r.h2,{id:"erddapmetriske",children:"ERDDAP\u2122Metriske"}),"\n",(0,n.jsx)(r.h3,{id:"jvm",children:"JVM"}),"\n",(0,n.jsxs)(r.p,{children:["ERDDAP\u2122eksportere en rekke metrikk som du kan finne nyttig (Starter iERDDAP\u21222.25) .. For generell overv\xe5king av helsen til JVM bruker vi metrikkene som samles inn av Prometheus-klienten. Dette inkluderer data om s\xf8ppelinnsamling, minnebruk, tr\xe5der og mer. For mer informasjon se",(0,n.jsx)(r.a,{href:"https://prometheus.github.io/client_java/instrumentation/jvm/",children:"PrometheusJavaKunde JVM dokumentasjon"}),".."]}),"\n",(0,n.jsx)(r.h3,{id:"erddapspesifikk",children:"ERDDAP\u2122spesifikk"}),"\n",(0,n.jsxs)(r.p,{children:["Vi eksporterer ogs\xe5 en rekkeERDDAP\u2122Spesifikke m\xe5linger (Starter iERDDAP\u21222.26) .. Hvis du vil grave inn i koden, kan du finne metrikkene samlet i",(0,n.jsx)(r.a,{href:"https://github.com/ERDDAP/erddap/blob/main/WEB-INF/classes/gov/noaa/pfel/erddap/util/Metrics.java",children:"Metrics.java"}),".."]}),"\n",(0,n.jsx)(r.h4,{id:"erddap_build_info",children:"ERDDAP_build_info"}),"\n",(0,n.jsx)(r.p,{children:"Dette er byggeinformasjonen tilERDDAP\u2122server. Det inkluderer versjon (major.minor) , versjon_full (major.minor.patch) , og distribusjon_info (brukt til \xe5 angi hvordan serveren er utplassert, som 'Docker \") .."}),"\n",(0,n.jsx)(r.h4,{id:"funksjon_flag",children:"funksjon_flag"}),"\n",(0,n.jsx)(r.p,{children:"Dette er en info metrologi som viser den aktuelle tilstanden av funksjonsflagg. De fleste innstillingsalternativene regnes som funksjonsflagg."}),"\n",(0,n.jsx)(r.h4,{id:"bufret-bilde",children:"bufret Bilde"}),"\n",(0,n.jsx)(r.p,{children:"Dette er en info metrikk som indikerer om grafikkakselerasjon er tilgjengelig."}),"\n",(0,n.jsx)(r.h4,{id:"http_request_duration_sekunder",children:"http_Request_duration_sekunder"}),"\n",(0,n.jsx)(r.p,{children:'Dette er et histogram av foresp\xf8rselsvarvarighet i sekunder. Etikettene er foresp\xf8rsel_type (f.eks. rutadap,tabledap, filer, wms) , dataset_id (Hvis relevant, ellers gjentar foresp\xf8rselstypen) , fil_type (Utgangsformat for foresp\xf8rsel f.eks. \xab.html\xbb, \xab.csv\xbb, \xab.iso19115 ") , lang_code (spr\xe5k for foresp\xf8rselen eller tom streng hvis standard) , status_code (httpstatuskode for foresp\xf8rselen, f.eks. 200, 302, 404) ..'}),"\n",(0,n.jsx)(r.p,{children:"Dette kan brukes til \xe5 spore foresp\xf8rsler fra datasett-ID til \xe5 bestemme serverens popul\xe6re datasett. Det kan ogs\xe5 bidra til \xe5 identifisere om det er spesielle typer foresp\xf8rsler som er langsomme p\xe5 serveren din."}),"\n",(0,n.jsx)(r.h4,{id:"touch_thread_duration_sekunder",children:"touch_thread_duration_sekunder"}),"\n",(0,n.jsx)(r.p,{children:"Et histogram av ber\xf8ringstr\xe5d oppgave varighet. De er merket med suksess (sant/falsk) .."}),"\n",(0,n.jsx)(r.h4,{id:"empty_thread_duration_sekunder",children:"empty_thread_duration_sekunder"}),"\n",(0,n.jsx)(r.p,{children:"Et histogram av oppgavetr\xe5d varighet. De er merket med suksess (sant/falsk) og oppgave_type (Intetger) .."}),"\n",(0,n.jsx)(r.h4,{id:"last_datasett_duration_sekunder",children:"Last_datasett_duration_sekunder"}),"\n",(0,n.jsx)(r.p,{children:"Et histogram for varighet for datasett. De er merket med st\xf8rre (sant/falsk) .."}),"\n",(0,n.jsx)(r.h4,{id:"email_thread_duration_seconds",children:"email_thread_duration_seconds"}),"\n",(0,n.jsx)(r.p,{children:"Et histogram for e-posttr\xe5d oppgave varighet. De er merket med suksess (sant/falsk) .."}),"\n",(0,n.jsx)(r.h4,{id:"email_count_distribusjon",children:"email_count_distribusjon"}),"\n",(0,n.jsx)(r.p,{children:"Et histogram av e-post per oppgave."}),"\n",(0,n.jsx)(r.h4,{id:"dataset_count",children:"dataset_count"}),"\n",(0,n.jsx)(r.p,{children:"En m\xe5ler av datasettene, satt etter hver lastdatasett ringer. Dette er merket med kategori (rutenett, tabell) .."}),"\n",(0,n.jsx)(r.h4,{id:"dataset_failed_load_count",children:"dataset_failed_load_count"}),"\n",(0,n.jsx)(r.p,{children:"En m\xe5ler av datasettene som ikke ble lastet, satt etter hvert datasett."}),"\n",(0,n.jsx)(r.h4,{id:"castle_requests_total",children:"castle_requests_total"}),"\n",(0,n.jsx)(r.p,{children:"Counter av foresp\xf8rsler som ble kastet. Serveren vil kaste en foresp\xf8rsel n\xe5r den mener serveren er lavt p\xe5 minnet (RAM) Foresp\xf8rselen vil for\xe5rsake problemer. Dette inkluderer ikke foresp\xf8rsler som feil p\xe5 grunn av lavt RAM- eller diskrom under h\xe5ndteringen av foresp\xf8rselen."}),"\n",(0,n.jsx)(r.h4,{id:"farlig_minne_emails_total",children:"farlig_minne_emails_total"}),"\n",(0,n.jsx)(r.p,{children:"Counter av ganger serveren pr\xf8ver \xe5 sende en e-post til administratoren om at minnet er farlig lavt."}),"\n",(0,n.jsx)(r.h4,{id:"farlig_-memory_failures_total",children:"farlig_ memory_failures_total"}),"\n",(0,n.jsx)(r.p,{children:"Counter av foresp\xf8rsler som mislyktes p\xe5 grunn av maskinen som l\xf8p ut av minnet. Ofte er dette fordi maskinen mottar mange dyre foresp\xf8rsler eller den enkelte foresp\xf8rselen var usedvanlig stor."}),"\n",(0,n.jsx)(r.h4,{id:"topo_request_total",children:"topo_request_total"}),"\n",(0,n.jsx)(r.p,{children:"Foresp\xf8rsel om topo-data. Dette er merket cache (cached/ikke-kached) .."}),"\n",(0,n.jsx)(r.h4,{id:"grenser",children:"Grenser"}),"\n",(0,n.jsx)(r.p,{children:"Det er ogs\xe5 en samling av tellere for foresp\xf8rsler om grenser:"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsx)(r.li,{children:"nasjonal_boundarys_request_total"}),"\n",(0,n.jsx)(r.li,{children:"state_boundarys_request_total"}),"\n",(0,n.jsx)(r.li,{children:"elve_boundaries_request_total"}),"\n",(0,n.jsx)(r.li,{children:"gshhs_request_total"}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:"Disse er merket med status (grov, suksess, kastet) .."})]})}function m(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}}}]);