"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[3144],{19584:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>m,frontMatter:()=>a,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"server-admin/mqtt-integration","title":"ERDDAP MQTT-integrasjon","description":"ERDDAP N\xe5 inkluderer st\xf8tte for MQTT-protokollen for \xe5 lette datainntak og varsler i sanntid. Denne funksjonaliteten drives av \xe5pen kilde  HiveMQ MQTT-klient  og  HiveMQ Community Edition  megler biblioteker.","source":"@site/i18n/nb/docusaurus-plugin-content-docs/current/server-admin/mqtt-integration.md","sourceDirName":"server-admin","slug":"/server-admin/mqtt-integration","permalink":"/nb/docs/server-admin/mqtt-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/mqtt-integration.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docSidebar","previous":{"title":"Funksjonsflagg","permalink":"/nb/docs/server-admin/feature-flags"},"next":{"title":"Contributing","permalink":"/nb/docs/category/contributing"}}');var i=t(74848),s=t(28453);const a={},d="ERDDAP MQTT-integrasjon",l={},o=[{value:"ERDDAP som MQTT-klient",id:"erddap-som-mqtt-klient",level:2},{value:"Oppsett: <code>EDDTableFraMqtt</code>",id:"oppsett-eddtableframqtt",level:2},{value:"ERDDAP som MQTT Broker",id:"erddap-som-mqtt-broker",level:2},{value:"Aktivere den innebygde brokeren",id:"aktivere-den-innebygde-brokeren",level:2},{value:"Broker Configuration &amp; Data Directorys",id:"broker-configuration--data-directorys",level:2},{value:"Bruk Case 1: Utstedelse av data fra MQTT-klienter",id:"bruk-case-1-utstedelse-av-data-fra-mqtt-klienter",level:2},{value:"Bruk Case 2: Publishing Dataset Endre varsler",id:"bruk-case-2-publishing-dataset-endre-varsler",level:2},{value:"Milj\xf8variabel Parsing i <code>datasets.xml</code>",id:"milj\xf8variabel-parsing-i-datasetsxml",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"erddap-mqtt-integrasjon",children:"ERDDAP MQTT-integrasjon"})}),"\n",(0,i.jsxs)(n.p,{children:["ERDDAP N\xe5 inkluderer st\xf8tte for MQTT-protokollen for \xe5 lette datainntak og varsler i sanntid. Denne funksjonaliteten drives av \xe5pen kilde ",(0,i.jsxs)(n.a,{href:"https://github.com/hivemq/hivemq-mqtt-client",children:[" ",(0,i.jsx)(n.strong,{children:"HiveMQ MQTT-klient"})," "]})," og ",(0,i.jsxs)(n.a,{href:"https://github.com/hivemq/hivemq-community-edition",children:[" ",(0,i.jsx)(n.strong,{children:"HiveMQ Community Edition"})," "]})," megler biblioteker."]}),"\n",(0,i.jsx)(n.p,{children:"ERDDAP kan utnytte MQTT p\xe5 to prim\xe6re m\xe5ter:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Som MQTT-klient:"}),"    ERDDAP kan abonnere p\xe5 emner p\xe5 en eksisterende MQTT megler \xe5 innta data og opprette sanntidsdatasett."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Som MQTT Broker:"}),"    ERDDAP kan v\xe6re vert for sin egen innebygde MQTT megler, slik at eksterne klienter kan publisere data direkte til det."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"erddap-som-mqtt-klient",children:"ERDDAP som MQTT-klient"}),"\n",(0,i.jsxs)(n.p,{children:["ERDDAP kan fungere som en MQTT-klient for \xe5 abonnere p\xe5 emner p\xe5 en ekstern eller sin egen innebygd MQTT-megler. Dette oppn\xe5s ved hjelp av det nye ",(0,i.jsx)(n.code,{children:"EDDTableFraMqtt"})," Datasett, som fungerer p\xe5 samme m\xe5te som eksisterende ",(0,i.jsxs)(n.a,{href:"/docs/server-admin/datasets#eddtablefromhttpget",children:[" ",(0,i.jsx)(n.code,{children:"EDDTableFraHttpGet"})," "]})," - Datasett."]}),"\n",(0,i.jsxs)(n.p,{children:["Kundens implementering st\xf8tter for tiden kun ",(0,i.jsx)(n.strong,{children:"abonnerer"})," til emner."]}),"\n",(0,i.jsxs)(n.h2,{id:"oppsett-eddtableframqtt",children:["Oppsett: ",(0,i.jsx)(n.code,{children:"EDDTableFraMqtt"})]}),"\n",(0,i.jsxs)(n.p,{children:["For \xe5 konfigurere et datasett for \xe5 abonnere p\xe5 en MQTT megler, definere et datasett av type ",(0,i.jsx)(n.code,{children:"EDDTableFraMqtt"})," i din ",(0,i.jsx)(n.code,{children:"datasets.xml"})," fil. F\xf8lgende konfigurasjonsmerker er tilgjengelige i ",(0,i.jsx)(n.code,{children:"<dataset>"})," blokk:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\x3c!-- Example configuration for an EDDTableFromMqtt dataset in datasets.xml --\x3e\n<dataset type=\"EDDTableFromMqtt\" datasetID=\"mqtt_realtime_data\" active=\"true\">\n\n    \x3c!-- The hostname or IP address of the MQTT broker. --\x3e\n    <serverHost>broker.example.com</serverHost>\n\n    \x3c!-- The port number of the MQTT broker. --\x3e\n    <serverPort>1883</serverPort>\n\n    \x3c!-- A unique identifier for this MQTT client. --\x3e\n    <clientId>erddap-subscriber-1</clientId>\n\n    \x3c!-- The username for broker authentication (optional). --\x3e\n    <username>user</username>\n\n    \x3c!-- The password for broker authentication (optional). --\x3e\n    <password>secret</password>\n\n    \x3c!-- A comma-separated list of MQTT topics to subscribe to. --\x3e\n    <topics>sensor/+/data, another/topic</topics>\n\n    \x3c!-- Set to 'true' to use a secure SSL/TLS connection. Default is 'false'. --\x3e\n    <useSsl>false</useSsl>\n\n    \x3c!-- The session expiry interval in seconds. --\x3e\n    <sessionExpiryInterval>3600</sessionExpiryInterval>\n\n    \x3c!-- The connection timeout in seconds. --\x3e\n    <connectionTimeout>10</connectionTimeout>\n\n    \x3c!-- Set to 'true' to enable automatic reconnection. Default is 'true'. --\x3e\n    <automaticReconnect>true</automaticReconnect>\n\n</dataset>\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"erddap-som-mqtt-broker",children:"ERDDAP som MQTT Broker"}),"\n",(0,i.jsx)(n.p,{children:"ERDDAP kan kj\xf8re en innebygd MQTT megler, som tjener to hovedform\xe5l:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Opplysninger:"})," For \xe5 motta data publisert av eksterne MQTT-klienter for \xe5 skape datasett i sanntid."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Varsel:"})," \xc5 publisere varsler om endringer i datasett."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"aktivere-den-innebygde-brokeren",children:"Aktivere den innebygde brokeren"}),"\n",(0,i.jsxs)(n.p,{children:["Den innebygde MQTT megleren er deaktivert som standard. For \xe5 aktivere det, legg til f\xf8lgende flagg i ",(0,i.jsx)(n.code,{children:"config.xml"})," :)"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"\x3c!-- Enables the embedded HiveMQ broker. Default is 'false'. --\x3e   <enableMqttBroker> sant </enableMqttBroker>"})}),"\n",(0,i.jsx)(n.h2,{id:"broker-configuration--data-directorys",children:"Broker Configuration & Data Directorys"}),"\n",(0,i.jsxs)(n.p,{children:["Du kan angi egendefinerte mapper for meglerens konfigurasjon og datafiler i ",(0,i.jsx)(n.code,{children:"config.xml"})," .. Hvis disse taggene er tomme, ERDDAP vil bruke standardmappene som er angitt i HiveMQ-biblioteket. For mer avanserte konfigurasjonsdetaljer, inkludert logging og utvidelser, vennligst se den offisielle ",(0,i.jsxs)(n.a,{href:"https://github.com/hivemq/hivemq-community-edition/wiki",children:[" ",(0,i.jsx)(n.strong,{children:"HiveMQ Community Edition Wiki"})," "]})," .."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\x3c!-- The parent directory for all MQTT-related files. --\x3e\n<bigParentDirectory>/opt/erddap/mqtt/</bigParentDirectory>\n\n\x3c!-- The path to the embedded MQTT broker's configuration folder. --\x3e\n<mqttConfigFolder>/opt/erddap/mqtt/conf/</mqttConfigFolder>\n\n\x3c!-- The path to the embedded MQTT broker's data folder. --\x3e\n<mqttDataFolder>/opt/erddap/mqtt/data/</mqttDataFolder>\n"})}),"\n",(0,i.jsx)(n.h2,{id:"bruk-case-1-utstedelse-av-data-fra-mqtt-klienter",children:"Bruk Case 1: Utstedelse av data fra MQTT-klienter"}),"\n",(0,i.jsxs)(n.p,{children:["For \xe5 bygge et datasett i sanntid ved hjelp av den innebygde megleren, kan du konfigurere en ",(0,i.jsx)(n.code,{children:"EDDTableFraMqtt"})," Datasett (som beskrevet ovenfor) i ",(0,i.jsx)(n.em,{children:"same"})," ERDDAP eksempel \xe5 koble til sin egen lokale megler. Eksterne MQTT-klienter kan deretter publisere data til dette ERDDAP megler, som ",(0,i.jsx)(n.code,{children:"EDDTableFraMqtt"})," Datasett vil abonnere p\xe5 og innta."]}),"\n",(0,i.jsx)(n.h2,{id:"bruk-case-2-publishing-dataset-endre-varsler",children:"Bruk Case 2: Publishing Dataset Endre varsler"}),"\n",(0,i.jsxs)(n.p,{children:["ERDDAP kan konfigureres til \xe5 publisere varsler om endringer i datasett (For eksempel oppdateringer eller reloader) til et emne p\xe5 en MQTT megler. For det f\xf8rste, s\xf8rg for at megleren er aktivert eller en ekstern er tilgjengelig. Deretter kan du aktivere varslingsfunksjonen i ",(0,i.jsx)(n.code,{children:"config.xml"})," :)"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"\x3c!-- Set to 'true' to publish dataset change notifications via MQTT. Default is 'false'. --\x3e   <publishMqttNotif> sant </publishMqttNotif>"})}),"\n",(0,i.jsxs)(n.p,{children:["N\xe5r denne funksjonen er aktivert, ERDDAP bruker en intern MQTT-klient til \xe5 publisere meldingene. Tilkoblingsinnstillingene for denne klienten kan tilpasses ",(0,i.jsx)(n.code,{children:"config.xml"})," .. Tabellen nedenfor viser tilgjengelige innstillinger og standardverdier."]}),"\n",(0,i.jsxs)(n.p,{children:["| Tagg | Type | Standardverdi | Beskrivelse |\n| -... | ------- | -... | Jeg vet ikke. |\n|   ",(0,i.jsx)(n.code,{children:"<mqttServerHost>"}),"           | streng |   ",(0,i.jsx)(n.code,{children:"localhost"}),"         | Meglerens vert \xe5 publisere varsler til. |\n|   ",(0,i.jsx)(n.code,{children:"<mqttServerPort>"}),"           | Interessert |   ",(0,i.jsx)(n.code,{children:"1883"}),"              | Havnen til varslingsmegleren. |\n|   ",(0,i.jsx)(n.code,{children:"<mqttClientId>"}),"             | streng |   ",(0,i.jsx)(n.code,{children:"erddap-client"}),"     | Kunde-ID for meldingsutgiveren. |\n|   ",(0,i.jsx)(n.code,{children:"<mqttUserName>"}),"             | streng |   ",(0,i.jsx)(n.code,{children:"erddap-brukernavn"}),"   | Brukernavn for meldingsutgiveren. |\n|   ",(0,i.jsx)(n.code,{children:"<mqttPassword>"}),"             | streng |   ",(0,i.jsx)(n.code,{children:"erddap-passord"}),"   | Passord for meldingsutgiveren. |\n|   ",(0,i.jsx)(n.code,{children:"<mqttSsl>"}),"                  | boolsk |   ",(0,i.jsx)(n.code,{children:"falsk"}),"             | Bruk SSL/TLS til varslingstilkoblingen. |\n|   ",(0,i.jsx)(n.code,{children:"<mqttKeepAlive>"}),"            | Interessert |   ",(0,i.jsx)(n.code,{children:"60"}),"                | Hold-alive intervall i sekunder. |\n|   ",(0,i.jsx)(n.code,{children:"<mqttCleanStart>"}),"           | boolsk |   ",(0,i.jsx)(n.code,{children:"falsk"}),"             | Start med en ren sesjon (Ingen vedvarande sesjonstilstand) .. |\n|   ",(0,i.jsx)(n.code,{children:"<mqttSessionExpiry>"}),"        | Interessert |   ",(0,i.jsx)(n.code,{children:"10"}),"                | Sesjon utl\xf8psintervall i sekunder. |\n|   ",(0,i.jsx)(n.code,{children:"<mqttConnectionTimeout>"}),"    | Interessert |   ",(0,i.jsx)(n.code,{children:"10"}),"                | Tilkoblingstid i sekunder. |\n|   ",(0,i.jsx)(n.code,{children:"<mqttAutomaticReconnect>"}),"   | boolsk |   ",(0,i.jsx)(n.code,{children:"sant"}),"              | Koble automatisk igjen hvis tilkoblingen g\xe5r tapt. |"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"milj\xf8variabel-parsing-i-datasetsxml",children:["Milj\xf8variabel Parsing i ",(0,i.jsx)(n.code,{children:"datasets.xml"})]}),"\n",(0,i.jsxs)(n.p,{children:["En ny funksjon er introdusert som tillater bruk av milj\xf8variabler i ",(0,i.jsx)(n.code,{children:"datasets.xml"})," .. Dette er ",(0,i.jsx)(n.strong,{children:"aktivert som standard"})," .."]}),"\n",(0,i.jsxs)(n.p,{children:["Hvis du vil deaktivere denne funksjonen, kan du legge til f\xf8lgende flagg i ",(0,i.jsx)(n.code,{children:"config.xml"})," :)"]}),"\n",(0,i.jsx)(n.p,{children:"xml"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"<enableEnvParsing> falsk </enableEnvParsing>"})})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>d});var r=t(96540);const i={},s=r.createContext(i);function a(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);