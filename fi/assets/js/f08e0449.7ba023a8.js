"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[6725],{10357(t,e,i){i.r(e),i.d(e,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"server-admin/prometheus","title":"Prometheus","description":"Prometheus metriikka Saatavilla osoitteessa /erddap/metrics. JVMeen. ERDDAP\u2122 Lis\xe4tty versiossa 2.26. Jos haluat k\xe4ytt\xe4\xe4 mittareita, varmista, ett\xe4 olet v\xe4hint\xe4\xe4n versiossa 2.26. Ne ovat oletusarvoisia, voit poistaa ne lis\xe4\xe4m\xe4ll\xe4","source":"@site/i18n/fi/docusaurus-plugin-content-docs/current/server-admin/prometheus.md","sourceDirName":"server-admin","slug":"/server-admin/prometheus","permalink":"/fi/docs/server-admin/prometheus","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/prometheus.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"docSidebar","previous":{"title":"Paikallinen metatieto","permalink":"/fi/docs/server-admin/localized-metadata"},"next":{"title":"Lippujen ominaisuudet","permalink":"/fi/docs/server-admin/feature-flags"}}');var n=i(74848),s=i(28453);const o={sidebar_position:9},l="Prometheus",r={},d=[{value:"Prometheus-palvelin",id:"prometheus-palvelin",level:2},{value:"ERDDAP\u2122 Metriikka",id:"erddap-metriikka",level:2},{value:"JVM",id:"jvm",level:3},{value:"ERDDAP\u2122 Erityist\xe4 erityist\xe4",id:"erddap-erityist\xe4-erityist\xe4",level:3},{value:"ERDDAP Rakennettu_info",id:"erddap-rakennettu_info",level:4},{value:"Esiintyj\xe4t: Flags",id:"esiintyj\xe4t-flags",level:4},{value:"Puskuri Kuvat",id:"puskuri-kuvat",level:4},{value:"http _request_duration_seconds N\xe4yt\xe4 tarkat tiedot",id:"http-_request_duration_seconds-n\xe4yt\xe4-tarkat-tiedot",level:4},{value:"Kosketus_thread_duration_seconds",id:"kosketus_thread_duration_seconds",level:4},{value:"Teht\xe4v\xe4_thread_duration_seconds",id:"teht\xe4v\xe4_thread_duration_seconds",level:4},{value:"Lataa_datasets_duration_seconds",id:"lataa_datasets_duration_seconds",level:4},{value:"S\xe4hk\xf6posti_thread_duration_seconds",id:"s\xe4hk\xf6posti_thread_duration_seconds",level:4},{value:"S\xe4hk\xf6posti_count_jakelu",id:"s\xe4hk\xf6posti_count_jakelu",level:4},{value:"tietoja_count",id:"tietoja_count",level:4},{value:"tietoja_failed_load_count",id:"tietoja_failed_load_count",level:4},{value:"_ _ _ Total",id:"_-_-_-total",level:4},{value:"vaarallinen_memory_emails_total",id:"vaarallinen_memory_emails_total",level:4},{value:"Vaarallinen_muisti_failures_total",id:"vaarallinen_muisti_failures_total",level:4},{value:"Topo_request_total",id:"topo_request_total",level:4},{value:"Rajojen vastaiset",id:"rajojen-vastaiset",level:4}];function u(t){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.header,{children:(0,n.jsx)(e.h1,{id:"prometheus",children:"Prometheus"})}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:"https://prometheus.io/",children:"Prometheus metriikka"})," Saatavilla osoitteessa /erddap/metrics. JVM",":n"," ydinmittarit lis\xe4ttiin 2,25",":een",". ERDDAP\u2122 Lis\xe4tty versiossa 2.26. Jos haluat k\xe4ytt\xe4\xe4 mittareita, varmista, ett\xe4 olet v\xe4hint\xe4\xe4n versiossa 2.26. Ne ovat oletusarvoisia, voit poistaa ne lis\xe4\xe4m\xe4ll\xe4"]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-xml",children:"<usePrometheusMetrics>false</usePrometheusMetrics>\n"})}),"\n",(0,n.jsx)(e.p,{children:"Teid\xe4n asennus.xml."}),"\n",(0,n.jsx)(e.p,{children:"N\xe4m\xe4 mittarit on suunniteltu koneellisesti luettavaksi. Vaikka voit tarkistaa mittaussivun manuaalisesti, syv\xe4n seurannan vuoksi on suositeltavaa k\xe4ytt\xe4\xe4 Prometheus-palvelinta. Prometheus-palvelin tallentaa historiallisia mittareita, joiden avulla voidaan seurata syvemmin. (Aiempien arvojen muutokset ja hinnat) Usein my\xf6s Grafana-palvelimella. Tarjoamme joitain esivalmistettuja kojetauluja, joita hallinnoijat voivat k\xe4ytt\xe4\xe4 palvelimiensa seurantaan."}),"\n",(0,n.jsx)(e.h2,{id:"prometheus-palvelin",children:"Prometheus-palvelin"}),"\n",(0,n.jsxs)(e.p,{children:["Parhaat dokumentit seurantaan (Prometheus + Grafana) on Prometheuksessa ",(0,n.jsx)(e.a,{href:"https://github.com/ERDDAP/erddap/blob/main/docker/prometheus/README.md",children:"Lukeminen"})," ."]}),"\n",(0,n.jsx)(e.h2,{id:"erddap-metriikka",children:"ERDDAP\u2122 Metriikka"}),"\n",(0,n.jsx)(e.h3,{id:"jvm",children:"JVM"}),"\n",(0,n.jsxs)(e.p,{children:["ERDDAP\u2122 Vie useita mittareita, joista voi olla hy\xf6ty\xe4 (Aloitetaan ERDDAP\u2122 2.25) . JVM",":n"," terveyden yleisess\xe4 seurannassa k\xe4ytet\xe4\xe4n Prometheus-asiakkaan ker\xe4\xe4mi\xe4 mittareita. T\xe4m\xe4 sis\xe4lt\xe4\xe4 tietoja roskapostien ker\xe4\xe4misest\xe4, muistin k\xe4yt\xf6st\xe4, langoista ja muista. Lis\xe4tiedot n\xe4kev\xe4t ",(0,n.jsx)(e.a,{href:"https://prometheus.github.io/client_java/instrumentation/jvm/",children:"Prometheus Java Asiakas JVM-dokumentointi"})," ."]}),"\n",(0,n.jsx)(e.h3,{id:"erddap-erityist\xe4-erityist\xe4",children:"ERDDAP\u2122 Erityist\xe4 erityist\xe4"}),"\n",(0,n.jsxs)(e.p,{children:["Viemme my\xf6s useita ERDDAP\u2122 Erityiset mittarit (Aloitetaan ERDDAP\u2122 2.26) . Jos haluat kaivaa koodiin, l\xf6yd\xe4t mittarit, jotka on ker\xe4tty ",(0,n.jsx)(e.a,{href:"https://github.com/ERDDAP/erddap/blob/main/WEB-INF/classes/gov/noaa/pfel/erddap/util/Metrics.java",children:"Metrics.java"})," ."]}),"\n",(0,n.jsx)(e.h4,{id:"erddap-rakennettu_info",children:"ERDDAP Rakennettu_info"}),"\n",(0,n.jsx)(e.p,{children:'T\xe4m\xe4 on rakentamisen infoa ERDDAP\u2122 palvelin. Sis\xe4lt\xe4\xe4 version (P\xe4\xe4artikkeli: Minor) versio_full (P\xe4\xe4artikkeli: Minor.patch) K\xe4ytt\xf6\xf6notto_info (k\xe4ytet\xe4\xe4n osoittamaan, miten palvelin on otettu k\xe4ytt\xf6\xf6n, kuten Docker """) .'}),"\n",(0,n.jsx)(e.h4,{id:"esiintyj\xe4t-flags",children:"Esiintyj\xe4t: Flags"}),"\n",(0,n.jsx)(e.p,{children:"T\xe4m\xe4 on infomittari, joka n\xe4ytt\xe4\xe4 nykyisen ominaisuuslipun. Useimpia booleelaisia kokoonpanovaihtoehtoja pidet\xe4\xe4n lippuina."}),"\n",(0,n.jsx)(e.h4,{id:"puskuri-kuvat",children:"Puskuri Kuvat"}),"\n",(0,n.jsx)(e.p,{children:"T\xe4m\xe4 on infomittari, joka osoittaa, onko grafiikka kiihtyvyys k\xe4ytett\xe4viss\xe4."}),"\n",(0,n.jsx)(e.h4,{id:"http-_request_duration_seconds-n\xe4yt\xe4-tarkat-tiedot",children:"http _request_duration_seconds N\xe4yt\xe4 tarkat tiedot"}),"\n",(0,n.jsx)(e.p,{children:'T\xe4m\xe4 on histogrammi pyynn\xf6n vastauksen kesto sekunneissa. Etiketit ovat pyynn\xf6n_tyyppisi\xe4 (esimerkiksi griddap, tabledap tiedostoja, wms) Dataset_id (soveltuvin osin toistaa pyynn\xf6n tyyppi) tiedosto_type (Tuotantomuoto pyynt\xf6\xf6n .html, .csv, .iso19115 """) Lang_code (pyynn\xf6n kieli tai tyhj\xe4 kieli, jos oletus) Tila_koodi ( http Pyynn\xf6n tilakoodi: 200, 302, 404) .'}),"\n",(0,n.jsx)(e.p,{children:"T\xe4t\xe4 voidaan k\xe4ytt\xe4\xe4 pyynt\xf6jen seuraamiseen tietoaineiston id avulla palvelimen suosittujen tietoaineistojen m\xe4\xe4ritt\xe4miseksi. Se voi my\xf6s auttaa tunnistamaan, onko palvelimellasi hitaita pyynt\xf6j\xe4."}),"\n",(0,n.jsx)(e.h4,{id:"kosketus_thread_duration_seconds",children:"Kosketus_thread_duration_seconds"}),"\n",(0,n.jsx)(e.p,{children:"Histogram of touch thread -teht\xe4v\xe4n kesto. Ne on merkitty menestyksell\xe4 (Todellinen/v\xe4\xe4r\xe4) ."}),"\n",(0,n.jsx)(e.h4,{id:"teht\xe4v\xe4_thread_duration_seconds",children:"Teht\xe4v\xe4_thread_duration_seconds"}),"\n",(0,n.jsx)(e.p,{children:"Teht\xe4v\xe4n keston histogrammi. Ne on merkitty menestyksell\xe4 (Todellinen/v\xe4\xe4r\xe4) Teht\xe4v\xe4_type (Integroitu) ."}),"\n",(0,n.jsx)(e.h4,{id:"lataa_datasets_duration_seconds",children:"Lataa_datasets_duration_seconds"}),"\n",(0,n.jsx)(e.p,{children:"Histogrammi kuorma-aineiston teht\xe4viin. Ne on merkitty suurilla (Todellinen/v\xe4\xe4r\xe4) ."}),"\n",(0,n.jsx)(e.h4,{id:"s\xe4hk\xf6posti_thread_duration_seconds",children:"S\xe4hk\xf6posti_thread_duration_seconds"}),"\n",(0,n.jsx)(e.p,{children:"Histogrammi s\xe4hk\xf6postin thread-teht\xe4vien kestosta. Ne on merkitty menestyksell\xe4 (Todellinen/v\xe4\xe4r\xe4) ."}),"\n",(0,n.jsx)(e.h4,{id:"s\xe4hk\xf6posti_count_jakelu",children:"S\xe4hk\xf6posti_count_jakelu"}),"\n",(0,n.jsx)(e.p,{children:"S\xe4hk\xf6postien histogrammi per teht\xe4v\xe4."}),"\n",(0,n.jsx)(e.h4,{id:"tietoja_count",children:"tietoja_count"}),"\n",(0,n.jsx)(e.p,{children:"Tietoaineistojen mittari, joka on m\xe4\xe4ritetty kunkin lataustietoaineiston soituksen j\xe4lkeen. T\xe4m\xe4 on merkitty kategorialla (Verkko, p\xf6yt\xe4) ."}),"\n",(0,n.jsx)(e.h4,{id:"tietoja_failed_load_count",children:"tietoja_failed_load_count"}),"\n",(0,n.jsx)(e.p,{children:"aineistot, jotka eiv\xe4t latautuneet, asetetaan kunkin latausaineiston puhelun j\xe4lkeen."}),"\n",(0,n.jsx)(e.h4,{id:"_-_-_-total",children:"_ _ _ Total"}),"\n",(0,n.jsx)(e.p,{children:"pyynt\xf6ihin, jotka on j\xe4tetty. Palvelin luovuttaa pyynn\xf6n, kun se uskoo palvelimen olevan alhainen muistissa. (Ram) Pyynt\xf6 aiheuttaa ongelmia. T\xe4m\xe4 ei sis\xe4ll\xe4 pyynt\xf6j\xe4, jotka johtuvat alhaisesta RAM- tai levytilasta pyynn\xf6n k\xe4sittelyn aikana."}),"\n",(0,n.jsx)(e.h4,{id:"vaarallinen_memory_emails_total",children:"vaarallinen_memory_emails_total"}),"\n",(0,n.jsx)(e.p,{children:"Toisinaan palvelin yritt\xe4\xe4 l\xe4hett\xe4\xe4 s\xe4hk\xf6postia j\xe4rjestelm\xe4nvalvojalle, ett\xe4 muisti on vaarallisen alhainen."}),"\n",(0,n.jsx)(e.h4,{id:"vaarallinen_muisti_failures_total",children:"Vaarallinen_muisti_failures_total"}),"\n",(0,n.jsx)(e.p,{children:"Vastaus pyynt\xf6ihin, jotka ep\xe4onnistuivat, koska kone loppui muistista. Usein t\xe4m\xe4 johtuu siit\xe4, ett\xe4 kone saa paljon kalliita pyynt\xf6j\xe4 tai yksitt\xe4inen pyynt\xf6 oli poikkeuksellisen suuri."}),"\n",(0,n.jsx)(e.h4,{id:"topo_request_total",children:"Topo_request_total"}),"\n",(0,n.jsx)(e.p,{children:"Topo-tietopyynt\xf6jen vastainen. T\xe4m\xe4 on merkitty salasana (Cached/not_cached) ."}),"\n",(0,n.jsx)(e.h4,{id:"rajojen-vastaiset",children:"Rajojen vastaiset"}),"\n",(0,n.jsx)(e.p,{children:"Rajoja koskevia pyynt\xf6j\xe4 on my\xf6s ker\xe4tty:"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"Kansallinen_boundaries_request_total"}),"\n",(0,n.jsx)(e.li,{children:"State_boundaries_request_total"}),"\n",(0,n.jsx)(e.li,{children:"River_boundaries_request_total"}),"\n",(0,n.jsx)(e.li,{children:"Gshhs_request_total N\xe4yt\xe4 tarkat tiedot"}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:"N\xe4m\xe4 on merkitty status (Karhu, menestys, heitto) ."})]})}function h(t={}){const{wrapper:e}={...(0,s.R)(),...t.components};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(u,{...t})}):u(t)}},28453(t,e,i){i.d(e,{R:()=>o,x:()=>l});var a=i(96540);const n={},s=a.createContext(n);function o(t){const e=a.useContext(s);return a.useMemo(function(){return"function"==typeof t?t(e):{...e,...t}},[e,t])}function l(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(n):t.components||n:o(t.components),a.createElement(s.Provider,{value:e},t.children)}}}]);