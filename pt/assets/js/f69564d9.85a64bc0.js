"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[2190],{20961(e,a,o){o.r(a),o.d(a,{assets:()=>n,contentTitle:()=>t,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"server-admin/prometheus","title":"Prometheus","description":"M\xe9tricas de Prometheus est\xe3o dispon\xedveis em /erddap/metrics. As m\xe9tricas do n\xfacleo JVM foram adicionadas em 2,25 com muitos ERDDAP\u2122 m\xe9tricas adicionadas na vers\xe3o 2.26. Se voc\xea quiser usar as m\xe9tricas certifique-se de que voc\xea est\xe1 em pelo menos vers\xe3o 2.26. Eles padr\xe3o para habilitado, voc\xea pode desabilit\xe1-los adicionando","source":"@site/i18n/pt/docusaurus-plugin-content-docs/current/server-admin/prometheus.md","sourceDirName":"server-admin","slug":"/server-admin/prometheus","permalink":"/pt/docs/server-admin/prometheus","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/prometheus.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"docSidebar","previous":{"title":"Metadados localizados","permalink":"/pt/docs/server-admin/localized-metadata"},"next":{"title":"Bandeiras de Caracter\xedstica","permalink":"/pt/docs/server-admin/feature-flags"}}');var r=o(74848),d=o(28453);const i={sidebar_position:9},t="Prometheus",n={},c=[{value:"Executando servidor Prometheus",id:"executando-servidor-prometheus",level:2},{value:"ERDDAP\u2122 m\xe9tricas",id:"erddap-m\xe9tricas",level:2},{value:"JVM",id:"jvm",level:3},{value:"ERDDAP\u2122 espec\xedfico",id:"erddap-espec\xedfico",level:3},{value:"ERDDAP _ Construir _ info",id:"erddap-_-construir-_-info",level:4},{value:"recurso_flags",id:"recurso_flags",level:4},{value:"buffered Imagem",id:"buffered-imagem",level:4},{value:"http _request_duration_seconds",id:"http-_request_duration_seconds",level:4},{value:"touch_thread_duration_seconds",id:"touch_thread_duration_seconds",level:4},{value:"task_thread_duration_seconds",id:"task_thread_duration_seconds",level:4},{value:"load_datasets_duration_seconds",id:"load_datasets_duration_seconds",level:4},{value:"email_thread_duration_seconds",id:"email_thread_duration_seconds",level:4},{value:"email_count_distribui\xe7\xe3o",id:"email_count_distribui\xe7\xe3o",level:4},{value:"dataset_count",id:"dataset_count",level:4},{value:"dataset_failed_load_count",id:"dataset_failed_load_count",level:4},{value:"P\xe1gina inicial",id:"p\xe1gina-inicial",level:4},{value:"Perigoso_memory_emails_total",id:"perigoso_memory_emails_total",level:4},{value:"perigoso_memory_failures_total",id:"perigoso_memory_failures_total",level:4},{value:"topo_request_total",id:"topo_request_total",level:4},{value:"Contadores Boundary",id:"contadores-boundary",level:4}];function l(e){const a={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.header,{children:(0,r.jsx)(a.h1,{id:"prometheus",children:"Prometheus"})}),"\n",(0,r.jsxs)(a.p,{children:[(0,r.jsx)(a.a,{href:"https://prometheus.io/",children:"M\xe9tricas de Prometheus"})," est\xe3o dispon\xedveis em /erddap/metrics. As m\xe9tricas do n\xfacleo JVM foram adicionadas em 2,25 com muitos ERDDAP\u2122 m\xe9tricas adicionadas na vers\xe3o 2.26. Se voc\xea quiser usar as m\xe9tricas certifique-se de que voc\xea est\xe1 em pelo menos vers\xe3o 2.26. Eles padr\xe3o para habilitado, voc\xea pode desabilit\xe1-los adicionando"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-xml",children:"<usePrometheusMetrics>false</usePrometheusMetrics>\n"})}),"\n",(0,r.jsx)(a.p,{children:"para o seu setup.xml."}),"\n",(0,r.jsx)(a.p,{children:"Estas m\xe9tricas s\xe3o projetadas para serem leg\xedveis \xe0 m\xe1quina. Enquanto voc\xea pode verificar a p\xe1gina de m\xe9tricas manualmente, para monitoramento de profundidade \xe9 recomendado usar um servidor Prometheus. Um servidor Prometheus ir\xe1 armazenar m\xe9tricas hist\xf3ricas que permitem um monitoramento mais profundo (como taxas e mudan\xe7as de valores passados) , e tamb\xe9m \xe9 frequentemente executado com um servidor Grafana. N\xf3s fornecemos alguns pain\xe9is pr\xe9-constru\xeddos que os administradores podem achar \xfateis para come\xe7ar a monitorar seus servidores."}),"\n",(0,r.jsx)(a.h2,{id:"executando-servidor-prometheus",children:"Executando servidor Prometheus"}),"\n",(0,r.jsxs)(a.p,{children:["A melhor documenta\xe7\xe3o para executar a pilha de monitoramento (Prometheus + Grafana) est\xe1 no Prometheus ",(0,r.jsx)(a.a,{href:"https://github.com/ERDDAP/erddap/blob/main/docker/prometheus/README.md",children:"Leia-me"})," ."]}),"\n",(0,r.jsx)(a.h2,{id:"erddap-m\xe9tricas",children:"ERDDAP\u2122 m\xe9tricas"}),"\n",(0,r.jsx)(a.h3,{id:"jvm",children:"JVM"}),"\n",(0,r.jsxs)(a.p,{children:["ERDDAP\u2122 exporta um n\xfamero de m\xe9tricas que voc\xea pode encontrar \xfateis (a partir de ERDDAP\u2122 2.25) . Para o monitoramento geral da sa\xfade da JVM usamos as m\xe9tricas coletadas pelo cliente Prometheus. Isso inclui dados sobre coleta de lixo, uso de mem\xf3ria, threads e muito mais. Para mais informa\xe7\xf5es, consulte ",(0,r.jsx)(a.a,{href:"https://prometheus.github.io/client_java/instrumentation/jvm/",children:"Prometheus Java Documenta\xe7\xe3o do Cliente JVM"})," ."]}),"\n",(0,r.jsx)(a.h3,{id:"erddap-espec\xedfico",children:"ERDDAP\u2122 espec\xedfico"}),"\n",(0,r.jsxs)(a.p,{children:["Tamb\xe9m exportamos um n\xfamero de ERDDAP\u2122 m\xe9tricas espec\xedficas (a partir de ERDDAP\u2122 2.26) . Se voc\xea quiser investigar o c\xf3digo, voc\xea pode encontrar as m\xe9tricas coletadas em ",(0,r.jsx)(a.a,{href:"https://github.com/ERDDAP/erddap/blob/main/WEB-INF/classes/gov/noaa/pfel/erddap/util/Metrics.java",children:"Metrics.com"})," ."]}),"\n",(0,r.jsx)(a.h4,{id:"erddap-_-construir-_-info",children:"ERDDAP _ Construir _ info"}),"\n",(0,r.jsx)(a.p,{children:"Esta \xe9 a informa\xe7\xe3o de compila\xe7\xe3o para o ERDDAP\u2122 servidor. Inclui vers\xe3o (Major.) , vers\xe3o_full (Major.) , e deployment_info (usado para indicar como o servidor \xe9 implantado, como 'Docker ') ."}),"\n",(0,r.jsx)(a.h4,{id:"recurso_flags",children:"recurso_flags"}),"\n",(0,r.jsx)(a.p,{children:"Esta \xe9 uma m\xe9trica de informa\xe7\xe3o que mostra o estado atual de bandeiras de recursos. A maioria das op\xe7\xf5es de configura\xe7\xe3o booleana s\xe3o consideradas bandeiras de recursos."}),"\n",(0,r.jsx)(a.h4,{id:"buffered-imagem",children:"buffered Imagem"}),"\n",(0,r.jsx)(a.p,{children:"Esta \xe9 uma m\xe9trica de informa\xe7\xe3o que indica se a acelera\xe7\xe3o gr\xe1fica est\xe1 dispon\xedvel."}),"\n",(0,r.jsx)(a.h4,{id:"http-_request_duration_seconds",children:"http _request_duration_seconds"}),"\n",(0,r.jsx)(a.p,{children:"Este \xe9 um histograma de dura\xe7\xe3o de resposta de solicita\xe7\xe3o em segundos. As etiquetas s\xe3o request_type (por exemplo griddap, tabledap , arquivos, wms) , dataset_id (se aplic\xe1vel, de outra forma repete o tipo de solicita\xe7\xe3o) , file_type (formato de sa\xedda para pedido por exemplo, '.html', '.csv', '.iso19115 ') , lang_code (idioma para o pedido, ou string vazia se padr\xe3o) , status_code ( http c\xf3digo de status do pedido, por exemplo, 200, 302, 404) ."}),"\n",(0,r.jsx)(a.p,{children:"Isso pode ser usado para rastrear solicita\xe7\xf5es por dataset id para determinar os conjuntos de dados populares do servidor. Ele tamb\xe9m pode ajudar a identificar se existem tipos espec\xedficos de solicita\xe7\xf5es que s\xe3o lentas em seu servidor."}),"\n",(0,r.jsx)(a.h4,{id:"touch_thread_duration_seconds",children:"touch_thread_duration_seconds"}),"\n",(0,r.jsx)(a.p,{children:"Um histograma de dura\xe7\xe3o de tarefa de rosca de toque. Eles s\xe3o rotulados com sucesso (verdadeiro / falso) ."}),"\n",(0,r.jsx)(a.h4,{id:"task_thread_duration_seconds",children:"task_thread_duration_seconds"}),"\n",(0,r.jsx)(a.p,{children:"Um histograma de dura\xe7\xe3o do segmento de tarefa. Eles s\xe3o rotulados com sucesso (verdadeiro / falso) e task_type (Int\xe9rprete) ."}),"\n",(0,r.jsx)(a.h4,{id:"load_datasets_duration_seconds",children:"load_datasets_duration_seconds"}),"\n",(0,r.jsx)(a.p,{children:"Um histograma de dura\xe7\xe3o para tarefas de conjunto de dados de carga. Eles s\xe3o rotulados com maior (verdadeiro / falso) ."}),"\n",(0,r.jsx)(a.h4,{id:"email_thread_duration_seconds",children:"email_thread_duration_seconds"}),"\n",(0,r.jsx)(a.p,{children:"Um histograma de dura\xe7\xe3o da tarefa do email thread. Eles s\xe3o rotulados com sucesso (verdadeiro / falso) ."}),"\n",(0,r.jsx)(a.h4,{id:"email_count_distribui\xe7\xe3o",children:"email_count_distribui\xe7\xe3o"}),"\n",(0,r.jsx)(a.p,{children:"Um histograma de e-mails por tarefa."}),"\n",(0,r.jsx)(a.h4,{id:"dataset_count",children:"dataset_count"}),"\n",(0,r.jsx)(a.p,{children:"Um calibre dos conjuntos de dados, definido ap\xf3s cada chamada de conjuntos de dados de carga. Isto \xe9 rotulado com categoria (grade, tabela) ."}),"\n",(0,r.jsx)(a.h4,{id:"dataset_failed_load_count",children:"dataset_failed_load_count"}),"\n",(0,r.jsx)(a.p,{children:"Um medidor dos conjuntos de dados que n\xe3o foram carregados, definido ap\xf3s cada chamada de conjuntos de dados de carga."}),"\n",(0,r.jsx)(a.h4,{id:"p\xe1gina-inicial",children:"P\xe1gina inicial"}),"\n",(0,r.jsx)(a.p,{children:"Contra os pedidos que foram derramados. O servidor ir\xe1 lan\xe7ar um pedido quando acreditar que o servidor \xe9 baixo na mem\xf3ria (RAM) e o pedido causaria problemas. Isso n\xe3o inclui solicita\xe7\xf5es de erro devido a baixa RAM ou espa\xe7o em disco durante o manuseio da solicita\xe7\xe3o."}),"\n",(0,r.jsx)(a.h4,{id:"perigoso_memory_emails_total",children:"Perigoso_memory_emails_total"}),"\n",(0,r.jsx)(a.p,{children:"Contador de vezes o servidor tenta enviar um e-mail para o administrador que a mem\xf3ria \xe9 perigosamente baixa."}),"\n",(0,r.jsx)(a.h4,{id:"perigoso_memory_failures_total",children:"perigoso_memory_failures_total"}),"\n",(0,r.jsx)(a.p,{children:"Contador de pedidos que falharam devido \xe0 m\xe1quina que est\xe1 sem mem\xf3ria. Muitas vezes isso \xe9 porque a m\xe1quina est\xe1 recebendo um monte de pedidos caros ou o pedido individual foi excepcionalmente grande."}),"\n",(0,r.jsx)(a.h4,{id:"topo_request_total",children:"topo_request_total"}),"\n",(0,r.jsx)(a.p,{children:"Contador de pedidos de dados topo. Este \xe9 o cache rotulado (cache/not_cached) ."}),"\n",(0,r.jsx)(a.h4,{id:"contadores-boundary",children:"Contadores Boundary"}),"\n",(0,r.jsx)(a.p,{children:"H\xe1 tamb\xe9m uma cole\xe7\xe3o de contadores para pedidos de limites:"}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"nacional_boundaries_request_total"}),"\n",(0,r.jsx)(a.li,{children:"state_boundaries_request_total"}),"\n",(0,r.jsx)(a.li,{children:"river_boundaries_request_total"}),"\n",(0,r.jsx)(a.li,{children:"P\xe1gina inicial"}),"\n"]}),"\n",(0,r.jsx)(a.p,{children:"Estes s\xe3o rotulados com status (grosseiro, sucesso, tossed) ."})]})}function u(e={}){const{wrapper:a}={...(0,d.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453(e,a,o){o.d(a,{R:()=>i,x:()=>t});var s=o(96540);const r={},d=s.createContext(r);function i(e){const a=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function t(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(d.Provider,{value:a},e.children)}}}]);