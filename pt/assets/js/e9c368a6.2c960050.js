"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[5460],{28453:(e,o,r)=>{r.d(o,{R:()=>s,x:()=>i});var t=r(96540);const d={},n=t.createContext(d);function s(e){const o=t.useContext(n);return t.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function i(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:s(e.components),t.createElement(n.Provider,{value:o},e.children)}},67281:(e,o,r)=>{r.r(o),r.d(o,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"server-admin/mqtt-integration","title":"ERDDAP Integra\xe7\xe3o MQTT","description":"ERDDAP agora inclui suporte para o protocolo MQTT para facilitar a ingest\xe3o de dados em tempo real e notifica\xe7\xf5es. Esta funcionalidade \xe9 alimentada pelo c\xf3digo aberto  Cliente HiveMQ MQTT  e  HiveMQ Community Edition  bibliotecas de corretores.","source":"@site/i18n/pt/docusaurus-plugin-content-docs/current/server-admin/mqtt-integration.md","sourceDirName":"server-admin","slug":"/server-admin/mqtt-integration","permalink":"/pt/docs/server-admin/mqtt-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/mqtt-integration.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docSidebar","previous":{"title":"Bandeiras de Caracter\xedstica","permalink":"/pt/docs/server-admin/feature-flags"},"next":{"title":"Contributing","permalink":"/pt/docs/category/contributing"}}');var d=r(74848),n=r(28453);const s={},i="ERDDAP Integra\xe7\xe3o MQTT",a={},c=[{value:"ERDDAP como um cliente MQTT",id:"erddap-como-um-cliente-mqtt",level:2},{value:"Configura\xe7\xe3o: <code>EDDTable FromMqtt</code>",id:"configura\xe7\xe3o-eddtable-frommqtt",level:2},{value:"ERDDAP como um corretor MQTT",id:"erddap-como-um-corretor-mqtt",level:2},{value:"Ativando o corretor incorporado",id:"ativando-o-corretor-incorporado",level:2},{value:"Configura\xe7\xe3o de corretores e diret\xf3rios de dados",id:"configura\xe7\xe3o-de-corretores-e-diret\xf3rios-de-dados",level:2},{value:"Caso de uso 1: Ingest\xe3o de dados de clientes MQTT",id:"caso-de-uso-1-ingest\xe3o-de-dados-de-clientes-mqtt",level:2},{value:"Caso de uso 2: Notifica\xe7\xf5es de altera\xe7\xe3o de conjuntos de dados de publica\xe7\xe3o",id:"caso-de-uso-2-notifica\xe7\xf5es-de-altera\xe7\xe3o-de-conjuntos-de-dados-de-publica\xe7\xe3o",level:2},{value:"Ambiente Parsing vari\xe1vel em <code>datasets.xml</code>",id:"ambiente-parsing-vari\xe1vel-em-datasetsxml",level:2}];function l(e){const o={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.header,{children:(0,d.jsx)(o.h1,{id:"erddap-integra\xe7\xe3o-mqtt",children:"ERDDAP Integra\xe7\xe3o MQTT"})}),"\n",(0,d.jsxs)(o.p,{children:["ERDDAP agora inclui suporte para o protocolo MQTT para facilitar a ingest\xe3o de dados em tempo real e notifica\xe7\xf5es. Esta funcionalidade \xe9 alimentada pelo c\xf3digo aberto ",(0,d.jsxs)(o.a,{href:"https://github.com/hivemq/hivemq-mqtt-client",children:[" ",(0,d.jsx)(o.strong,{children:"Cliente HiveMQ MQTT"})," "]})," e ",(0,d.jsxs)(o.a,{href:"https://github.com/hivemq/hivemq-community-edition",children:[" ",(0,d.jsx)(o.strong,{children:"HiveMQ Community Edition"})," "]})," bibliotecas de corretores."]}),"\n",(0,d.jsx)(o.p,{children:"ERDDAP pode alavancar o MQTT de duas maneiras principais:"}),"\n",(0,d.jsxs)(o.ol,{children:["\n",(0,d.jsxs)(o.li,{children:["\n",(0,d.jsxs)(o.p,{children:[(0,d.jsx)(o.strong,{children:"Como Cliente MQTT:"}),"    ERDDAP pode se inscrever em t\xf3picos em um corretor MQTT existente para ingerir dados e criar conjuntos de dados em tempo real."]}),"\n"]}),"\n",(0,d.jsxs)(o.li,{children:["\n",(0,d.jsxs)(o.p,{children:[(0,d.jsx)(o.strong,{children:"Como um corretor MQTT:"}),"    ERDDAP pode hospedar seu pr\xf3prio corretor MQTT incorporado, permitindo que os clientes externos publiquem dados diretamente para ele."]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(o.hr,{}),"\n",(0,d.jsx)(o.h2,{id:"erddap-como-um-cliente-mqtt",children:"ERDDAP como um cliente MQTT"}),"\n",(0,d.jsxs)(o.p,{children:["ERDDAP pode atuar como um cliente MQTT para se inscrever em t\xf3picos em um corretor MQTT externo ou pr\xf3prio incorporado. Isso \xe9 alcan\xe7ado usando o novo ",(0,d.jsx)(o.code,{children:"EDDTable FromMqtt"})," tipo de dataset, que funciona de forma semelhante ao existente ",(0,d.jsxs)(o.a,{href:"/docs/server-admin/datasets#eddtablefromhttpget",children:[" ",(0,d.jsx)(o.code,{children:"EDDTable FromHttpGet"})," "]})," conjunto de dados."]}),"\n",(0,d.jsxs)(o.p,{children:["Atualmente, a implementa\xe7\xe3o do cliente s\xf3 suporta ",(0,d.jsx)(o.strong,{children:"subscrevendo"})," para t\xf3picos."]}),"\n",(0,d.jsxs)(o.h2,{id:"configura\xe7\xe3o-eddtable-frommqtt",children:["Configura\xe7\xe3o: ",(0,d.jsx)(o.code,{children:"EDDTable FromMqtt"})]}),"\n",(0,d.jsxs)(o.p,{children:["Para configurar um conjunto de dados para se inscrever em um corretor MQTT, defina um conjunto de dados do tipo ",(0,d.jsx)(o.code,{children:"EDDTable FromMqtt"})," em seu ",(0,d.jsx)(o.code,{children:"datasets.xml"})," ficheiro. As seguintes tags de configura\xe7\xe3o est\xe3o dispon\xedveis dentro do ",(0,d.jsx)(o.code,{children:"<dataset>"})," bloco:"]}),"\n",(0,d.jsx)(o.pre,{children:(0,d.jsx)(o.code,{children:"\x3c!-- Example configuration for an EDDTableFromMqtt dataset in datasets.xml --\x3e\n<dataset type=\"EDDTableFromMqtt\" datasetID=\"mqtt_realtime_data\" active=\"true\">\n\n    \x3c!-- The hostname or IP address of the MQTT broker. --\x3e\n    <serverHost>broker.example.com</serverHost>\n\n    \x3c!-- The port number of the MQTT broker. --\x3e\n    <serverPort>1883</serverPort>\n\n    \x3c!-- A unique identifier for this MQTT client. --\x3e\n    <clientId>erddap-subscriber-1</clientId>\n\n    \x3c!-- The username for broker authentication (optional). --\x3e\n    <username>user</username>\n\n    \x3c!-- The password for broker authentication (optional). --\x3e\n    <password>secret</password>\n\n    \x3c!-- A comma-separated list of MQTT topics to subscribe to. --\x3e\n    <topics>sensor/+/data, another/topic</topics>\n\n    \x3c!-- Set to 'true' to use a secure SSL/TLS connection. Default is 'false'. --\x3e\n    <useSsl>false</useSsl>\n\n    \x3c!-- The session expiry interval in seconds. --\x3e\n    <sessionExpiryInterval>3600</sessionExpiryInterval>\n\n    \x3c!-- The connection timeout in seconds. --\x3e\n    <connectionTimeout>10</connectionTimeout>\n\n    \x3c!-- Set to 'true' to enable automatic reconnection. Default is 'true'. --\x3e\n    <automaticReconnect>true</automaticReconnect>\n\n</dataset>\n"})}),"\n",(0,d.jsx)(o.hr,{}),"\n",(0,d.jsx)(o.h2,{id:"erddap-como-um-corretor-mqtt",children:"ERDDAP como um corretor MQTT"}),"\n",(0,d.jsx)(o.p,{children:"ERDDAP pode executar um corretor MQTT incorporado, que serve duas finalidades principais:"}),"\n",(0,d.jsxs)(o.ol,{children:["\n",(0,d.jsxs)(o.li,{children:["\n",(0,d.jsxs)(o.p,{children:[(0,d.jsx)(o.strong,{children:"Ingest\xe3o de dados:"})," Para receber dados publicados por clientes MQTT externos para criar conjuntos de dados em tempo real."]}),"\n"]}),"\n",(0,d.jsxs)(o.li,{children:["\n",(0,d.jsxs)(o.p,{children:[(0,d.jsx)(o.strong,{children:"Notifica\xe7\xf5es:"})," Para publicar notifica\xe7\xf5es sobre altera\xe7\xf5es de conjuntos de dados."]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(o.h2,{id:"ativando-o-corretor-incorporado",children:"Ativando o corretor incorporado"}),"\n",(0,d.jsxs)(o.p,{children:["O corretor MQTT incorporado est\xe1 desativado por padr\xe3o. Para habilitar, adicione a seguinte bandeira ",(0,d.jsx)(o.code,{children:"setup.xml"})," :"]}),"\n",(0,d.jsx)(o.p,{children:(0,d.jsx)(o.code,{children:"\x3c!-- Enables the embedded HiveMQ broker. Default is 'false'. --\x3e   <enableMqttBroker> verdadeiro </enableMqttBroker>"})}),"\n",(0,d.jsx)(o.h2,{id:"configura\xe7\xe3o-de-corretores-e-diret\xf3rios-de-dados",children:"Configura\xe7\xe3o de corretores e diret\xf3rios de dados"}),"\n",(0,d.jsxs)(o.p,{children:["Voc\xea pode especificar diret\xf3rios personalizados para a configura\xe7\xe3o do corretor e arquivos de dados em ",(0,d.jsx)(o.code,{children:"setup.xml"})," . Se estas tags forem deixadas vazias, ERDDAP usar\xe1 os diret\xf3rios padr\xe3o especificados pela biblioteca HiveMQ. Para detalhes de configura\xe7\xe3o mais avan\xe7ados, incluindo registro e extens\xf5es, consulte o oficial ",(0,d.jsxs)(o.a,{href:"https://github.com/hivemq/hivemq-community-edition/wiki",children:[" ",(0,d.jsx)(o.strong,{children:"HiveMQ Community Edition Wiki"})," "]})," ."]}),"\n",(0,d.jsx)(o.pre,{children:(0,d.jsx)(o.code,{children:"\x3c!-- The parent directory for all MQTT-related files. --\x3e\n<bigParentDirectory>/opt/erddap/mqtt/</bigParentDirectory>\n\n\x3c!-- The path to the embedded MQTT broker's configuration folder. --\x3e\n<mqttConfigFolder>/opt/erddap/mqtt/conf/</mqttConfigFolder>\n\n\x3c!-- The path to the embedded MQTT broker's data folder. --\x3e\n<mqttDataFolder>/opt/erddap/mqtt/data/</mqttDataFolder>\n"})}),"\n",(0,d.jsx)(o.h2,{id:"caso-de-uso-1-ingest\xe3o-de-dados-de-clientes-mqtt",children:"Caso de uso 1: Ingest\xe3o de dados de clientes MQTT"}),"\n",(0,d.jsxs)(o.p,{children:["Para construir um conjunto de dados em tempo real usando o corretor incorporado, voc\xea pode configurar um ",(0,d.jsx)(o.code,{children:"EDDTable FromMqtt"})," conjunto de dados (como descrito acima) dentro do ",(0,d.jsx)(o.em,{children:"same"})," ERDDAP exemplo para se conectar ao seu pr\xf3prio corretor local . Clientes MQTT externos podem, em seguida, publicar dados a este ERDDAP corretor, que o ",(0,d.jsx)(o.code,{children:"EDDTable FromMqtt"})," dataset ir\xe1 se inscrever e ingerir."]}),"\n",(0,d.jsx)(o.h2,{id:"caso-de-uso-2-notifica\xe7\xf5es-de-altera\xe7\xe3o-de-conjuntos-de-dados-de-publica\xe7\xe3o",children:"Caso de uso 2: Notifica\xe7\xf5es de altera\xe7\xe3o de conjuntos de dados de publica\xe7\xe3o"}),"\n",(0,d.jsxs)(o.p,{children:["ERDDAP pode ser configurado para publicar notifica\xe7\xf5es sobre altera\xe7\xf5es de conjuntos de dados (por exemplo, atualiza\xe7\xf5es ou recargas) para um t\xf3pico sobre um corretor MQTT. Primeiro, garantir que o corretor est\xe1 habilitado ou um externo est\xe1 dispon\xedvel. Em seguida, ative o recurso de notifica\xe7\xe3o em ",(0,d.jsx)(o.code,{children:"setup.xml"})," :"]}),"\n",(0,d.jsx)(o.p,{children:(0,d.jsx)(o.code,{children:"\x3c!-- Set to 'true' to publish dataset change notifications via MQTT. Default is 'false'. --\x3e   <publishMqttNotif> verdadeiro </publishMqttNotif>"})}),"\n",(0,d.jsxs)(o.p,{children:["Quando este recurso estiver ativado, ERDDAP usa um cliente MQTT interno para publicar as mensagens. As configura\xe7\xf5es de conex\xe3o para este cliente podem ser personalizadas em ",(0,d.jsx)(o.code,{children:"setup.xml"})," . A tabela abaixo lista as configura\xe7\xf5es dispon\xedveis e seus valores padr\xe3o."]}),"\n",(0,d.jsxs)(o.table,{children:[(0,d.jsx)(o.thead,{children:(0,d.jsxs)(o.tr,{children:[(0,d.jsx)(o.th,{children:"Tag Tag"}),(0,d.jsx)(o.th,{children:"Tipo"}),(0,d.jsx)(o.th,{children:"Valor padr\xe3o"}),(0,d.jsx)(o.th,{children:"Descri\xe7\xe3o"})]})}),(0,d.jsxs)(o.tbody,{children:[(0,d.jsxs)(o.tr,{children:[(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"<mqttServerHost>"})}),(0,d.jsx)(o.td,{children:"string"}),(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"localhost"})}),(0,d.jsx)(o.td,{children:"O anfitri\xe3o do corretor para publicar notifica\xe7\xf5es."})]}),(0,d.jsxs)(o.tr,{children:[(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"<mqttServerPort>"})}),(0,d.jsx)(o.td,{children:"- N\xe3o."}),(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"1883"})}),(0,d.jsx)(o.td,{children:"O porto do corretor de notifica\xe7\xf5es."})]}),(0,d.jsxs)(o.tr,{children:[(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"<mqttClientId>"})}),(0,d.jsx)(o.td,{children:"string"}),(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"erddap-client"})}),(0,d.jsx)(o.td,{children:"O ID do cliente para o editor de notifica\xe7\xf5es."})]}),(0,d.jsxs)(o.tr,{children:[(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"<mqttUserName>"})}),(0,d.jsx)(o.td,{children:"string"}),(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"erddap-username"})}),(0,d.jsx)(o.td,{children:"O nome de usu\xe1rio para o editor de notifica\xe7\xe3o."})]}),(0,d.jsxs)(o.tr,{children:[(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"<mqttPassword>"})}),(0,d.jsx)(o.td,{children:"string"}),(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"erddap-password"})}),(0,d.jsx)(o.td,{children:"A senha para o editor de notifica\xe7\xf5es."})]}),(0,d.jsxs)(o.tr,{children:[(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"<mqttSsl>"})}),(0,d.jsx)(o.td,{children:"booleano"}),(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"falso"})}),(0,d.jsx)(o.td,{children:"Use SSL/TLS para a conex\xe3o de notifica\xe7\xe3o."})]}),(0,d.jsxs)(o.tr,{children:[(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"<mqttKeepAlive>"})}),(0,d.jsx)(o.td,{children:"- N\xe3o."}),(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"60."})}),(0,d.jsx)(o.td,{children:"Intervalo em segundos."})]}),(0,d.jsxs)(o.tr,{children:[(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"<mqttCleanStart>"})}),(0,d.jsx)(o.td,{children:"booleano"}),(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"falso"})}),(0,d.jsx)(o.td,{children:"Comece com uma sess\xe3o limpa (n\xe3o persiste estado de sess\xe3o) ."})]}),(0,d.jsxs)(o.tr,{children:[(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"<mqttSessionExpiry>"})}),(0,d.jsx)(o.td,{children:"- N\xe3o."}),(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"10."})}),(0,d.jsx)(o.td,{children:"Per\xedodo de validade de sess\xe3o em segundos."})]}),(0,d.jsxs)(o.tr,{children:[(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"<mqttConnectionTimeout>"})}),(0,d.jsx)(o.td,{children:"- N\xe3o."}),(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"10."})}),(0,d.jsx)(o.td,{children:"Tempo de conex\xe3o em segundos."})]}),(0,d.jsxs)(o.tr,{children:[(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"<mqttAutomaticReconnect>"})}),(0,d.jsx)(o.td,{children:"booleano"}),(0,d.jsx)(o.td,{children:(0,d.jsx)(o.code,{children:"verdadeiro"})}),(0,d.jsx)(o.td,{children:"Reconecte-se automaticamente se a conex\xe3o for perdida."})]})]})]}),"\n",(0,d.jsx)(o.hr,{}),"\n",(0,d.jsxs)(o.h2,{id:"ambiente-parsing-vari\xe1vel-em-datasetsxml",children:["Ambiente Parsing vari\xe1vel em ",(0,d.jsx)(o.code,{children:"datasets.xml"})]}),"\n",(0,d.jsxs)(o.p,{children:["Um novo recurso foi introduzido que permite o uso de vari\xe1veis de ambiente dentro ",(0,d.jsx)(o.code,{children:"datasets.xml"})," . Isto \xe9... ",(0,d.jsx)(o.strong,{children:"habilitado por padr\xe3o"})," ."]}),"\n",(0,d.jsxs)(o.p,{children:["Para desativar esta funcionalidade, adicione a seguinte bandeira ",(0,d.jsx)(o.code,{children:"setup.xml"})," :"]}),"\n",(0,d.jsx)(o.p,{children:"xml"}),"\n",(0,d.jsx)(o.p,{children:(0,d.jsx)(o.code,{children:"<enableEnvParsing> falso </enableEnvParsing>"})})]})}function h(e={}){const{wrapper:o}={...(0,n.R)(),...e.components};return o?(0,d.jsx)(o,{...e,children:(0,d.jsx)(l,{...e})}):l(e)}}}]);