"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[600],{28453:(e,o,s)=>{s.d(o,{R:()=>r,x:()=>i});var t=s(96540);const a={},n=t.createContext(a);function r(e){const o=t.useContext(n);return t.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function i(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(n.Provider,{value:o},e.children)}},32027:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>c,contentTitle:()=>i,default:()=>l,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"user/AccessToPrivateDatasets","title":"Access to Private Datasets","description":"MuitosERDDAP\u2122instala\xe7\xf5es n\xe3o t\xeam autentica\xe7\xe3o ativada e, portanto, n\xe3o fornecem nenhuma maneira para os usu\xe1rios para login, nem eles t\xeam quaisquer conjuntos de dados privados.","source":"@site/i18n/pt/docusaurus-plugin-content-docs/current/user/AccessToPrivateDatasets.md","sourceDirName":"user","slug":"/user/AccessToPrivateDatasets","permalink":"/pt/docs/user/AccessToPrivateDatasets","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/user/AccessToPrivateDatasets.md","tags":[],"version":"current","frontMatter":{"title":"Access to Private Datasets"},"sidebar":"docSidebar","previous":{"title":"User","permalink":"/pt/docs/category/user"},"next":{"title":"NCCSV 1.00","permalink":"/pt/docs/user/nccsv-1.00"}}');var a=s(74848),n=s(28453);const r={title:"Access to Private Datasets"},i="Acesso a Dados Privados emERDDAP\u2122",c={},d=[{value:"Instru\xe7\xf5es atualizadas",id:"updated-instructions",level:2},{value:"Humanos com navegadores",id:"humans-with-browsers",level:2},{value:"Scripts",id:"scripts",level:2}];function u(e){const o={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,n.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.header,{children:(0,a.jsx)(o.h1,{id:"acesso-a-dados-privados-emerddap",children:"Acesso a Dados Privados emERDDAP\u2122"})}),"\n",(0,a.jsx)(o.p,{children:"MuitosERDDAP\u2122instala\xe7\xf5es n\xe3o t\xeam autentica\xe7\xe3o ativada e, portanto, n\xe3o fornecem nenhuma maneira para os usu\xe1rios para login, nem eles t\xeam quaisquer conjuntos de dados privados."}),"\n",(0,a.jsx)(o.p,{children:"AlgunsERDDAP\u2122instala\xe7\xf5es t\xeam autentica\xe7\xe3o ativada. Atualmente,ERDDAP\u2122somente suporta autentica\xe7\xe3o atrav\xe9s de contas de e-mail gerenciadas pelo Google, que inclui contas de e-mail emNOAAe muitas universidades. Se umERDDAP\u2122tem autentica\xe7\xe3o ativada, qualquer pessoa com uma conta de e-mail gerenciada pelo Google pode fazer login, mas s\xf3 ter\xe1 acesso aos conjuntos de dados privados queERDDAP\u2122O administrador autorizou explicitamente o acesso."}),"\n",(0,a.jsx)(o.h2,{id:"updated-instructions",children:"Instru\xe7\xf5es atualizadas"}),"\n",(0,a.jsxs)(o.p,{children:["Algumas das informa\xe7\xf5es abaixo est\xe3o desatualizadas. At\xe9 que isso seja atualizado, voc\xea pode usar",(0,a.jsx)(o.a,{href:"https://shospital.github.io/blog/posts/blog-post/erddap_private_dataset.html",children:"este blog post"}),"para etapas recentes sobre como obter dados de um conjunto de dados privado com scripts."]}),"\n",(0,a.jsx)(o.h2,{id:"humans-with-browsers",children:"Humanos com navegadores"}),"\n",(0,a.jsx)(o.p,{children:"Usu\xe1rios humanos deERDDAP\u2122pode fazer loginERDDAP\u2122em um navegador para obter acesso a conjuntos de dados privados que eles est\xe3o autorizados a acessar."}),"\n",(0,a.jsx)(o.p,{children:"Para fazer login:"}),"\n",(0,a.jsxs)(o.ol,{children:["\n",(0,a.jsx)(o.li,{children:"Clique no link de log no canto superior esquerdo de qualquerERDDAP\u2122p\xe1gina web.\r\nSe n\xe3o houver registro no link, oERDDAP\u2122instala\xe7\xe3o n\xe3o tem autentica\xe7\xe3o ativada e n\xe3o h\xe1 conjuntos de dados privados.\r\n\xa0"}),"\n",(0,a.jsx)(o.li,{children:'Clique no bot\xe3o Iniciar sess\xe3o para entrar na sua conta do Google.\r\nO texto do bot\xe3o deve mudar para "Alinhado".\r\n\xa0'}),"\n",(0,a.jsxs)(o.li,{children:["Clique no loginERDDAPBot\xe3o.\r\nA p\xe1gina web deve mudar para dizer Voc\xea est\xe1 conectado como ",(0,a.jsx)(o.em,{children:"Tu \xe9s Endere\xe7o de email"})," .\r\nSe n\xe3o o fizer, aguarde 5 segundos e clique no Log inERDDAPbot\xe3o outra vez.\r\nEm casos extremos, voc\xea pode ter que esperar e depois tentar novamente algumas vezes.\r\n\xa0"]}),"\n",(0,a.jsx)(o.li,{children:'N\xe3o use o bot\xe3o Voltar do seu navegador. Use o "ERDDAP" link no topo do acima, em seguida, use outros links para ir paraERDDAP\u2122p\xe1ginas em que voc\xea est\xe1 interessado. Se uma p\xe1gina web em cache diz que voc\xea n\xe3o est\xe1 conectado, recarregue a p\xe1gina.\r\n\xa0'}),"\n"]}),"\n",(0,a.jsx)(o.h2,{id:"scripts",children:"Scripts"}),"\n",(0,a.jsx)(o.p,{children:"\\[Isso \xe9 ligeiramente modificado a partir de informa\xe7\xf5es fornecidas por Lynn DeWitt, que fez o trabalho dif\xedcil de descobrir isso. Lynn, muito obrigado!\r\nSe voc\xea tiver corre\xe7\xf5es ou sugest\xf5es, por favor envie um erd.data @ noaa.gov .\\]"}),"\n",(0,a.jsx)(o.p,{children:"Tamb\xe9m \xe9 poss\xedvel fazer loginERDDAP\u2122e acessar conjuntos de dados privados atrav\xe9s de um script. Aqui est\xe1 um exemplo que usacurl:"}),"\n",(0,a.jsxs)(o.ol,{children:["\n",(0,a.jsx)(o.li,{children:"Essas instru\xe7\xf5es assumem que voc\xea est\xe1 usando um endere\xe7o de gmail onde a autentica\xe7\xe3o de 2 fatores n\xe3o est\xe1 ativada. Se o seu endere\xe7o de gmail principal tiver autentica\xe7\xe3o de 2 fatores ativados, considere criar outro endere\xe7o de gmail com autentica\xe7\xe3o de 2 fatores desligado.\r\n\xa0"}),"\n",(0,a.jsx)(o.li,{children:"Entrar paraERDDAP\u2122manualmente com o endere\xe7o de gmail que voc\xea deseja usar em seu script e aceitar quaisquer permiss\xf5es necess\xe1rias, em seguida, fa\xe7a o login completamente.\r\n\xa0"}),"\n",(0,a.jsx)(o.li,{children:"Abra o navegador Developer Tools e v\xe1 para a guia Rede.\r\n\xa0"}),"\n",(0,a.jsx)(o.li,{children:'Clique no bot\xe3oERDDAP\u2122"log in" link, ent\xe3o o "Sign in" bot\xe3o e escolher o endere\xe7o de e-mail apropriado, se solicitado.\r\n\xa0'}),"\n",(0,a.jsx)(o.li,{children:'Depois que o bot\xe3o "Sign in" muda para "Signed in", a aba Developer Tools Network mostrar\xe1 duas entradas que se parecem com as seguintes (exemplo do Firefox) :'}),"\n"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:"    iframerpc?action=issueToken&response loginGoogle.html  \n"})}),"\n",(0,a.jsx)(o.p,{children:'Use o menu de contexto do mouse com o bot\xe3o direito do mouse para "copy as cURL" ambas as urls e cole-as em um editor de texto simples\r\n\xa0\r\n6. Clique em "Log intoERDDAP" bot\xe3o e "c\xf3pia como cURL" o link que parece:'}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:"    login.html  \n"})}),"\n",(0,a.jsxs)(o.p,{children:["e colar este terceirocurlcomando no arquivo de texto.\r\n\xa0\r\n7. No arquivo de texto, voc\xea agora ter\xe1 3 linhas como o seguinte, onde voc\xea logou em umERDDAP\u2122servidor em ' * ",(0,a.jsx)(o.a,{href:"https://host.somewhere.com/erddap",children:"https://host.somewhere.com/erddap"}),' * \'. O primeirocurlO comando obt\xe9m seu perfil de usu\xe1rio em "login\\_hint" e gera um "id\\_token". O segundo usa o id\\_token para logar no Google, e o terceiro logon paraERDDAP.']}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:"    curl 'https://accounts.google.com/o/oauth2/iframerpc?action=issueToken&response\\\\_type=token%20id\\\\_token&scope=openid%20profile%20email&client\\\\_id=ABCDEFG.apps.googleusercontent.com&login\\\\_hint=XXXXXXXXXX&ss\\\\_domain=https%3A%2F%2Fhost.somewhere.com&origin=https%3A%2F%2Fhost.somewhere.com' --2.0 -H 'Host: accounts.google.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://accounts.google.com/o/oauth2/iframe' -H 'Cookie: lotsofcookiestuff' -H 'Connection: keep-alive' curl 'https://host.somewhere.com/erddap/loginGoogle.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' --data 'idtoken=HUGELONGIDTOKEN' curl 'https://host.somewhere.com/erddap/login.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1'\n"})}),"\n",(0,a.jsxs)(o.ol,{start:"8",children:["\n",(0,a.jsx)(o.li,{children:"As 3 linhas acima, quando executar sequencialmente de uma linha de comando, ir\xe1 log\xe1-lo emERDDAP. Para us\xe1-los em um script voc\xea precisa capturar o id\\_token da primeira linha, aliment\xe1-lo para a segunda linha e escrever um cookie para ser lido por linhas subseq\xfcentes.\r\n\xa0"}),"\n",(0,a.jsxs)(o.li,{children:["Para desenvolver um script, execute o primeiro (' ",(0,a.jsx)(o.a,{href:"https://accounts.google.com",children:"https://accounts.google.com"}),' )  curllinha exatamente como foi copiado das ferramentas do desenvolvedor e capturar a resposta (voc\xea pode obter umcurlerro sobre a bandeira "--2.0" basta remov\xea-lo) . Em php parece o seguinte:']}),"\n"]}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:"    $gcurlstuff=\"curl 'https://accounts.google.com/o/oauth2/iframerpc?action=issueToken&response\\\\_type=token%20id\\\\_token&scope=openid%20profile%20email&client\\\\_id=ABCDEFG.apps.googleusercontent.com&login\\\\_hint=XXXXXXXXXX&ss\\\\_domain=https%3A%2F%2Fhost.somewhere.com&origin=https%3A%2F%2Fhost.somewhere.com' -H 'Host: accounts.google.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://accounts.google.com/o/oauth2/iframe' -H 'Cookie: lotsofcookiestuff' -H 'Connection: keep-alive'\"; //execute the curl command: exec($gcurlstuff,$output,$status); //the response is a json array in $output $response=json\\\\_decode($output\\\\[0\\\\],true); //the part you need is in \"id\\\\_token\": $id\\\\_token=$response\\\\[\"id\\\\_token\"\\\\];\n"})}),"\n",(0,a.jsx)(o.p,{children:"Fa\xe7a login no Google executando a segunda linha usando $id\\_token, primeiro removendo o par\xe2metro \"-H 'Cookie: stuff'\" e, em vez disso, contandocurlpara escrever um cookie:"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:"    $glcurlstuff=\"curl 'https://host.somewhere.com/erddap/loginGoogle.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' --data 'idtoken=\".$id\\\\_token.\"' -b cookies.txt -c cookies.txt\" exec($glcurlstuff,$output1,$status);\n"})}),"\n",(0,a.jsx)(o.p,{children:"Entrar paraERDDAP\u2122, novamente removendo o par\xe2metro \"-H 'Cookie: stuff'\" e usando o cookie previamente escrito:"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:"    $ecurlstuff=\"curl 'https://host.somewhere.com/erddap/login.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1 -b cookies.txt\"' exec($ecurlstuff,$output2,$status);\n"})}),"\n",(0,a.jsx)(o.p,{children:"Agora voc\xea deve ser capaz de solicitar dados do servidor, usando o mesmo cookie:"}),"\n",(0,a.jsx)(o.pre,{children:(0,a.jsx)(o.code,{children:"    $curlstuff=\"curl -s 'https://host.somewhere.com/erddap/tabledap/datasetid.csv?variablelist' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1' -b cookies.txt\"; exec($curlstuff,$output3,$status); //$output3 will be data in csv!\n"})})]})}function l(e={}){const{wrapper:o}={...(0,n.R)(),...e.components};return o?(0,a.jsx)(o,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}}}]);