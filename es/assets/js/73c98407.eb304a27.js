"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[5062],{7540:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"server-admin/mqtt-integration","title":"ERDDAP MQTT Integration","description":"ERDDAP ahora incluye el apoyo al protocolo MQTT para facilitar la ingesti\xf3n y notificaciones de datos en tiempo real. Esta funcionalidad est\xe1 impulsada por el c\xf3digo abierto  HiveMQ Cliente MQTT  y  HiveMQ Community Edition  bibliotecas de corredores.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/server-admin/mqtt-integration.md","sourceDirName":"server-admin","slug":"/server-admin/mqtt-integration","permalink":"/es/docs/server-admin/mqtt-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/mqtt-integration.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docSidebar","previous":{"title":"Banderas de alimentaci\xf3n","permalink":"/es/docs/server-admin/feature-flags"},"next":{"title":"Contributing","permalink":"/es/docs/category/contributing"}}');var r=i(74848),o=i(28453);const a={},s="ERDDAP MQTT Integration",d={},c=[{value:"ERDDAP como cliente MQTT",id:"erddap-como-cliente-mqtt",level:2},{value:"Configuraci\xf3n: <code>EDDTableDesde Mqt</code>",id:"configuraci\xf3n-eddtabledesde-mqt",level:2},{value:"ERDDAP como MQTT Broker",id:"erddap-como-mqtt-broker",level:2},{value:"Activar el Broker Embedded",id:"activar-el-broker-embedded",level:2},{value:"Configuraci\xf3n de carpetas &quot; Directores de datos",id:"configuraci\xf3n-de-carpetas--directores-de-datos",level:2},{value:"Caso 1: Ingerir datos de los clientes de MQTT",id:"caso-1-ingerir-datos-de-los-clientes-de-mqtt",level:2},{value:"Caso de uso 2: Publicaci\xf3n de notificaciones de cambio de dataset",id:"caso-de-uso-2-publicaci\xf3n-de-notificaciones-de-cambio-de-dataset",level:2},{value:"Medio ambiente Variable <code>datasets.xml</code>",id:"medio-ambiente-variable-datasetsxml",level:2}];function l(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"erddap-mqtt-integration",children:"ERDDAP MQTT Integration"})}),"\n",(0,r.jsxs)(n.p,{children:["ERDDAP ahora incluye el apoyo al protocolo MQTT para facilitar la ingesti\xf3n y notificaciones de datos en tiempo real. Esta funcionalidad est\xe1 impulsada por el c\xf3digo abierto ",(0,r.jsxs)(n.a,{href:"https://github.com/hivemq/hivemq-mqtt-client",children:[" ",(0,r.jsx)(n.strong,{children:"HiveMQ Cliente MQTT"})," "]})," y ",(0,r.jsxs)(n.a,{href:"https://github.com/hivemq/hivemq-community-edition",children:[" ",(0,r.jsx)(n.strong,{children:"HiveMQ Community Edition"})," "]})," bibliotecas de corredores."]}),"\n",(0,r.jsx)(n.p,{children:"ERDDAP puede aprovechar el MQTT de dos maneras principales:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Como cliente MQTT:"}),"    ERDDAP puede suscribirse a temas sobre un corredor MQTT existente para ingerir datos y crear conjuntos de datos en tiempo real."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Como MQTT Broker:"}),"    ERDDAP puede albergar su propio broker MQTT integrado, permitiendo a los clientes externos publicar datos directamente a \xe9l."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"erddap-como-cliente-mqtt",children:"ERDDAP como cliente MQTT"}),"\n",(0,r.jsxs)(n.p,{children:["ERDDAP puede actuar como un cliente MQTT para suscribirse a temas en un corredor MQTT externo o integrado. Esto se logra utilizando el nuevo ",(0,r.jsx)(n.code,{children:"EDDTableDesde Mqt"})," tipo de conjunto de datos, que funciona de forma similar al existente ",(0,r.jsxs)(n.a,{href:"/docs/server-admin/datasets#eddtablefromhttpget",children:[" ",(0,r.jsx)(n.code,{children:"EDDTableDesdeHtpGet"})," "]})," Dataset."]}),"\n",(0,r.jsxs)(n.p,{children:["Actualmente, la implementaci\xf3n del cliente solo apoya ",(0,r.jsx)(n.strong,{children:"suscriptores"})," a temas."]}),"\n",(0,r.jsxs)(n.h2,{id:"configuraci\xf3n-eddtabledesde-mqt",children:["Configuraci\xf3n: ",(0,r.jsx)(n.code,{children:"EDDTableDesde Mqt"})]}),"\n",(0,r.jsxs)(n.p,{children:["Para configurar un conjunto de datos para suscribirse a un broker MQTT, defina un conjunto de datos de tipo ",(0,r.jsx)(n.code,{children:"EDDTableDesde Mqt"})," en tu ",(0,r.jsx)(n.code,{children:"datasets.xml"})," archivo. Las siguientes etiquetas de configuraci\xf3n est\xe1n disponibles dentro de las ",(0,r.jsx)(n.code,{children:"<dataset>"})," bloque:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\x3c!-- Example configuration for an EDDTableFromMqtt dataset in datasets.xml --\x3e\n<dataset type=\"EDDTableFromMqtt\" datasetID=\"mqtt_realtime_data\" active=\"true\">\n\n    \x3c!-- The hostname or IP address of the MQTT broker. --\x3e\n    <serverHost>broker.example.com</serverHost>\n\n    \x3c!-- The port number of the MQTT broker. --\x3e\n    <serverPort>1883</serverPort>\n\n    \x3c!-- A unique identifier for this MQTT client. --\x3e\n    <clientId>erddap-subscriber-1</clientId>\n\n    \x3c!-- The username for broker authentication (optional). --\x3e\n    <username>user</username>\n\n    \x3c!-- The password for broker authentication (optional). --\x3e\n    <password>secret</password>\n\n    \x3c!-- A comma-separated list of MQTT topics to subscribe to. --\x3e\n    <topics>sensor/+/data, another/topic</topics>\n\n    \x3c!-- Set to 'true' to use a secure SSL/TLS connection. Default is 'false'. --\x3e\n    <useSsl>false</useSsl>\n\n    \x3c!-- The session expiry interval in seconds. --\x3e\n    <sessionExpiryInterval>3600</sessionExpiryInterval>\n\n    \x3c!-- The connection timeout in seconds. --\x3e\n    <connectionTimeout>10</connectionTimeout>\n\n    \x3c!-- Set to 'true' to enable automatic reconnection. Default is 'true'. --\x3e\n    <automaticReconnect>true</automaticReconnect>\n\n</dataset>\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"erddap-como-mqtt-broker",children:"ERDDAP como MQTT Broker"}),"\n",(0,r.jsx)(n.p,{children:"ERDDAP puede ejecutar un broker MQTT integrado, que sirve dos prop\xf3sitos principales:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Ingesti\xf3n de datos:"})," Para recibir datos publicados por clientes externos de MQTT para crear conjuntos de datos en tiempo real."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Notificaciones:"})," Publicar notificaciones sobre cambios de conjunto de datos."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"activar-el-broker-embedded",children:"Activar el Broker Embedded"}),"\n",(0,r.jsxs)(n.p,{children:["El broker MQTT integrado est\xe1 deshabilitado por defecto. Para habilitarlo, agregue la siguiente bandera ",(0,r.jsx)(n.code,{children:"setup.xml"})," :"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"\x3c!-- Enables the embedded HiveMQ broker. Default is 'false'. --\x3e   <enableMqttBroker> verdadero </enableMqttBroker>"})}),"\n",(0,r.jsx)(n.h2,{id:"configuraci\xf3n-de-carpetas--directores-de-datos",children:'Configuraci\xf3n de carpetas " Directores de datos'}),"\n",(0,r.jsxs)(n.p,{children:["Puede especificar directorios personalizados para la configuraci\xf3n del corredor y archivos de datos en ",(0,r.jsx)(n.code,{children:"setup.xml"})," . Si estas etiquetas quedan vac\xedas, ERDDAP utilizar\xe1 los directorios predeterminados especificados por la biblioteca HiveMQ. Para m\xe1s detalles de configuraci\xf3n avanzados, incluyendo registro y extensiones, consulte al funcionario ",(0,r.jsxs)(n.a,{href:"https://github.com/hivemq/hivemq-community-edition/wiki",children:[" ",(0,r.jsx)(n.strong,{children:"HiveMQ Community Edition Wiki"})," "]})," ."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\x3c!-- The parent directory for all MQTT-related files. --\x3e\n<bigParentDirectory>/opt/erddap/mqtt/</bigParentDirectory>\n\n\x3c!-- The path to the embedded MQTT broker's configuration folder. --\x3e\n<mqttConfigFolder>/opt/erddap/mqtt/conf/</mqttConfigFolder>\n\n\x3c!-- The path to the embedded MQTT broker's data folder. --\x3e\n<mqttDataFolder>/opt/erddap/mqtt/data/</mqttDataFolder>\n"})}),"\n",(0,r.jsx)(n.h2,{id:"caso-1-ingerir-datos-de-los-clientes-de-mqtt",children:"Caso 1: Ingerir datos de los clientes de MQTT"}),"\n",(0,r.jsxs)(n.p,{children:["Para construir un conjunto de datos en tiempo real utilizando el broker integrado, puede configurar un ",(0,r.jsx)(n.code,{children:"EDDTableDesde Mqt"})," Dataset (como se describe anteriormente) dentro del ",(0,r.jsx)(n.em,{children:"same"})," ERDDAP instancia para conectar a su propio corredor local . Los clientes externos MQTT pueden publicar datos a este ERDDAP br\xf3ker, que ",(0,r.jsx)(n.code,{children:"EDDTableDesde Mqt"})," Dataset se suscribir\xe1 e ingerir\xe1."]}),"\n",(0,r.jsx)(n.h2,{id:"caso-de-uso-2-publicaci\xf3n-de-notificaciones-de-cambio-de-dataset",children:"Caso de uso 2: Publicaci\xf3n de notificaciones de cambio de dataset"}),"\n",(0,r.jsxs)(n.p,{children:["ERDDAP puede configurarse para publicar notificaciones sobre cambios de conjunto de datos (por ejemplo, actualizaciones o recargas) a un tema sobre un corredor de MQTT. En primer lugar, asegurar que el corredor est\xe9 habilitado o que est\xe9 disponible. Luego, active la funci\xf3n de notificaci\xf3n en ",(0,r.jsx)(n.code,{children:"setup.xml"})," :"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"\x3c!-- Set to 'true' to publish dataset change notifications via MQTT. Default is 'false'. --\x3e   <publishMqttNotif> verdadero </publishMqttNotif>"})}),"\n",(0,r.jsxs)(n.p,{children:["Cuando esta funci\xf3n est\xe1 habilitada, ERDDAP utiliza un cliente MQTT interno para publicar los mensajes. Los ajustes de conexi\xf3n para este cliente se pueden personalizar en ",(0,r.jsx)(n.code,{children:"setup.xml"})," . La tabla siguiente enumera los ajustes disponibles y sus valores predeterminados."]}),"\n",(0,r.jsxs)(n.p,{children:["| Tag | Tipo | Valor predeterminado | Descripci\xf3n |\n| -------- | --- | - S\xed. | ----- |\n|   ",(0,r.jsx)(n.code,{children:"<mqttServerHost>"}),"           | cuerda |   ",(0,r.jsx)(n.code,{children:"localhost"}),"         | El anfitri\xf3n del corredor para publicar notificaciones a. |\n|   ",(0,r.jsx)(n.code,{children:"<mqttServerPort>"}),"           | int |   ",(0,r.jsx)(n.code,{children:"1883"}),"              | El puerto del corredor de notificaci\xf3n. |\n|   ",(0,r.jsx)(n.code,{children:"<mqttClientId>"}),"             | cuerda |   ",(0,r.jsx)(n.code,{children:"Erddap-client"}),"     | El ID del cliente para el editor de notificaci\xf3n. |\n|   ",(0,r.jsx)(n.code,{children:"<mqttUserName>"}),"             | cuerda |   ",(0,r.jsx)(n.code,{children:"erddap-username"}),"   | El nombre de usuario para el editor de notificaci\xf3n. |\n|   ",(0,r.jsx)(n.code,{children:"<mqttPassword>"}),"             | cuerda |   ",(0,r.jsx)(n.code,{children:"erddap-password"}),"   | La contrase\xf1a para el editor de notificaciones. |\n|   ",(0,r.jsx)(n.code,{children:"<mqttSsl>"}),"                  | boolean |   ",(0,r.jsx)(n.code,{children:"falso"}),"             | Use SSL/TLS para la conexi\xf3n de notificaci\xf3n. |\n|   ",(0,r.jsx)(n.code,{children:"<mqttKeepAlive>"}),"            | int |   ",(0,r.jsx)(n.code,{children:"60"}),"                | Mantener el intervalo en segundos. |\n|   ",(0,r.jsx)(n.code,{children:"<mqttCleanStart>"}),"           | boolean |   ",(0,r.jsx)(n.code,{children:"falso"}),"             | Comience con una sesi\xf3n limpia (no persiste sesi\xf3n Estado) . |\n|   ",(0,r.jsx)(n.code,{children:"<mqttSessionExpiry>"}),"        | int |   ",(0,r.jsx)(n.code,{children:"10"}),"                | Per\xedodo de expiraci\xf3n de sesi\xf3n en segundos. |\n|   ",(0,r.jsx)(n.code,{children:"<mqttConnectionTimeout>"}),"    | int |   ",(0,r.jsx)(n.code,{children:"10"}),"                | Tiempo de conexi\xf3n en segundos. |\n|   ",(0,r.jsx)(n.code,{children:"<mqttAutomaticReconnect>"}),"   | boolean |   ",(0,r.jsx)(n.code,{children:"verdadero"}),"              | Reconectar autom\xe1ticamente si la conexi\xf3n se pierde. |"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"medio-ambiente-variable-datasetsxml",children:["Medio ambiente Variable ",(0,r.jsx)(n.code,{children:"datasets.xml"})]}),"\n",(0,r.jsxs)(n.p,{children:["Se ha introducido una nueva caracter\xedstica que permite el uso de variables ambientales dentro de ",(0,r.jsx)(n.code,{children:"datasets.xml"})," . Esto es ",(0,r.jsx)(n.strong,{children:"habilitado por defecto"})," ."]}),"\n",(0,r.jsxs)(n.p,{children:["Para deshabilitar esta funcionalidad, a\xf1adir la siguiente bandera a ",(0,r.jsx)(n.code,{children:"setup.xml"})," :"]}),"\n",(0,r.jsx)(n.p,{children:"xml"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"<enableEnvParsing> falso </enableEnvParsing>"})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>s});var t=i(96540);const r={},o=t.createContext(r);function a(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);