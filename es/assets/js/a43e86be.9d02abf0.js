"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[1785],{28453:(e,a,s)=>{s.d(a,{R:()=>o,x:()=>d});var r=s(96540);const i={},t=r.createContext(i);function o(e){const a=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function d(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(t.Provider,{value:a},e.children)}},91853:(e,a,s)=>{s.r(a),s.d(a,{assets:()=>n,contentTitle:()=>d,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"server-admin/prometheus","title":"Prometeo","description":"Prometheus metricsest\xe1n disponibles en /erddap/metrics. Las m\xe9tricas de n\xfacleo JVM se agregaron en 2.25 con muchosERDDAP\u2122m\xe9tricas agregadas en la versi\xf3n 2.26. Si desea utilizar las m\xe9tricas, aseg\xfarese de estar en al menos la versi\xf3n 2.26. Por defecto para habilitar, puede deshabilitarlos a\xf1adiendo","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/server-admin/prometheus.md","sourceDirName":"server-admin","slug":"/server-admin/prometheus","permalink":"/es/docs/server-admin/prometheus","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/prometheus.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"docSidebar","previous":{"title":"Metadatos localizados","permalink":"/es/docs/server-admin/localized-metadata"},"next":{"title":"Contributing","permalink":"/es/docs/category/contributing"}}');var i=s(74848),t=s(28453);const o={sidebar_position:9},d="Prometeo",n={},l=[{value:"Running Prometheus server",id:"running-prometheus-server",level:2},{value:"ERDDAP\u2122m\xe9tricas",id:"erddapm\xe9tricas",level:2},{value:"JVM",id:"jvm",level:3},{value:"ERDDAP\u2122espec\xedfico",id:"erddapespec\xedfico",level:3},{value:"ERDDAP_build_info",id:"erddap_build_info",level:4},{value:"caracter\xedstica_flags",id:"caracter\xedstica_flags",level:4},{value:"Buffered Imagen",id:"buffered-imagen",level:4},{value:"http_request_duration_seconds",id:"http_request_duration_seconds",level:4},{value:"touch_thread_duration_seconds",id:"touch_thread_duration_seconds",level:4},{value:"task_thread_duration_seconds",id:"task_thread_duration_seconds",level:4},{value:"load_datasets_duration_seconds",id:"load_datasets_duration_seconds",level:4},{value:"email_thread_duration_seconds",id:"email_thread_duration_seconds",level:4},{value:"email_count_distribuci\xf3n",id:"email_count_distribuci\xf3n",level:4},{value:"dataset_count",id:"dataset_count",level:4},{value:"dataset_failed_load_count",id:"dataset_failed_load_count",level:4},{value:"shed_requests_total",id:"shed_requests_total",level:4},{value:"dangerous_memory_emails_total",id:"dangerous_memory_emails_total",level:4},{value:"dangerous_memory_failures_total",id:"dangerous_memory_failures_total",level:4},{value:"topo_request_total",id:"topo_request_total",level:4},{value:"Boundary Counters",id:"boundary-counters",level:4}];function c(e){const a={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.header,{children:(0,i.jsx)(a.h1,{id:"prometeo",children:"Prometeo"})}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.a,{href:"https://prometheus.io/",children:"Prometheus metrics"}),"est\xe1n disponibles en /erddap/metrics. Las m\xe9tricas de n\xfacleo JVM se agregaron en 2.25 con muchosERDDAP\u2122m\xe9tricas agregadas en la versi\xf3n 2.26. Si desea utilizar las m\xe9tricas, aseg\xfarese de estar en al menos la versi\xf3n 2.26. Por defecto para habilitar, puede deshabilitarlos a\xf1adiendo"]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-xml",children:"<usePrometheusMetrics>false</usePrometheusMetrics>\n"})}),"\n",(0,i.jsx)(a.p,{children:"a tu configuraci\xf3n. xml."}),"\n",(0,i.jsx)(a.p,{children:"Estas m\xe9tricas est\xe1n dise\xf1adas para ser legibles por m\xe1quina. Si bien puede comprobar manualmente la p\xe1gina de m\xe9tricas, para el monitoreo en profundidad se recomienda utilizar un servidor Prometheus. Un servidor Prometheus almacenar\xe1 m\xe9tricas hist\xf3ricas que permiten un seguimiento m\xe1s profundo (como tasas y cambios de valores pasados) , y tambi\xe9n se ejecuta con frecuencia con un servidor Grafana. Proporcionamos algunos paneles preconstruidos que los administradores pueden encontrar \xfatil para empezar a monitorizar sus servidores."}),"\n",(0,i.jsx)(a.h2,{id:"running-prometheus-server",children:"Running Prometheus server"}),"\n",(0,i.jsxs)(a.p,{children:["La mejor documentaci\xf3n para ejecutar la pila de monitoreo (Prometeo + Grafana) est\xe1 en el Prometeo",(0,i.jsx)(a.a,{href:"https://github.com/ERDDAP/erddap/blob/main/docker/prometheus/README.md",children:"readme"}),"."]}),"\n",(0,i.jsx)(a.h2,{id:"erddapm\xe9tricas",children:"ERDDAP\u2122m\xe9tricas"}),"\n",(0,i.jsx)(a.h3,{id:"jvm",children:"JVM"}),"\n",(0,i.jsxs)(a.p,{children:["ERDDAP\u2122exporta una serie de m\xe9tricas que puede encontrar \xfatil (empezandoERDDAP\u21222.25) . Para el monitoreo general de la salud del JVM utilizamos las m\xe9tricas recolectadas por el cliente Prometheus. Esto incluye datos sobre recolecci\xf3n de basura, uso de memoria, hilos y m\xe1s. Para m\xe1s informaci\xf3n vea el",(0,i.jsx)(a.a,{href:"https://prometheus.github.io/client_java/instrumentation/jvm/",children:"PrometeoJavaDocumentaci\xf3n del cliente JVM"}),"."]}),"\n",(0,i.jsx)(a.h3,{id:"erddapespec\xedfico",children:"ERDDAP\u2122espec\xedfico"}),"\n",(0,i.jsxs)(a.p,{children:["Tambi\xe9n exportamos una serie deERDDAP\u2122m\xe9tricas espec\xedficas (empezandoERDDAP\u21222.26) . Si quieres investigar el c\xf3digo, puedes encontrar las m\xe9tricas recogidas en",(0,i.jsx)(a.a,{href:"https://github.com/ERDDAP/erddap/blob/main/WEB-INF/classes/gov/noaa/pfel/erddap/util/Metrics.java",children:"Metrics.java"}),"."]}),"\n",(0,i.jsx)(a.h4,{id:"erddap_build_info",children:"ERDDAP_build_info"}),"\n",(0,i.jsx)(a.p,{children:"Esta es la informaci\xf3n de construcci\xf3n paraERDDAP\u2122servidor. Incluye versi\xf3n (major.minor) , version_full (major.minor.patch) , y deployment_info (utilizado para indicar c\xf3mo se implementa el servidor, como 'Docker ') ."}),"\n",(0,i.jsx)(a.h4,{id:"caracter\xedstica_flags",children:"caracter\xedstica_flags"}),"\n",(0,i.jsx)(a.p,{children:"Esta es una m\xe9trica de informaci\xf3n que muestra el estado actual de las banderas de caracter\xedsticas. La mayor\xeda de las opciones de configuraci\xf3n booleana se consideran banderas de caracter\xedsticas."}),"\n",(0,i.jsx)(a.h4,{id:"buffered-imagen",children:"Buffered Imagen"}),"\n",(0,i.jsx)(a.p,{children:"Esta es una m\xe9trica de informaci\xf3n que indica si la aceleraci\xf3n gr\xe1fica est\xe1 disponible."}),"\n",(0,i.jsx)(a.h4,{id:"http_request_duration_seconds",children:"http_request_duration_seconds"}),"\n",(0,i.jsx)(a.p,{children:"Este es un histograma de duraci\xf3n de respuesta de solicitud en segundos. Las etiquetas son request_type (por ejemplo griddap,tabledap, archivos, wms) , dataset_id (si es aplicable, repite el tipo de solicitud) , file_type (formato de salida para solicitud e.g. '.html', '.csv', '.iso19115 ') , lang_code (idioma para la solicitud, o cadena vac\xeda si por defecto) , status_code (httpc\xf3digo de estado de la solicitud, por ejemplo 200, 302, 404) ."}),"\n",(0,i.jsx)(a.p,{children:"Esto se puede utilizar para rastrear las solicitudes por dataset id para determinar los conjuntos de datos populares del servidor. Tambi\xe9n puede ayudar a identificar si hay tipos particulares de solicitudes que son lentas en su servidor."}),"\n",(0,i.jsx)(a.h4,{id:"touch_thread_duration_seconds",children:"touch_thread_duration_seconds"}),"\n",(0,i.jsx)(a.p,{children:"Un histograma de duraci\xf3n de la tarea del hilo t\xe1ctil. Est\xe1n etiquetados con \xe9xito (verdadero/falso) ."}),"\n",(0,i.jsx)(a.h4,{id:"task_thread_duration_seconds",children:"task_thread_duration_seconds"}),"\n",(0,i.jsx)(a.p,{children:"Un histograma de duraci\xf3n del hilo de tarea. Est\xe1n etiquetados con \xe9xito (verdadero/falso) y task_type (intetger) ."}),"\n",(0,i.jsx)(a.h4,{id:"load_datasets_duration_seconds",children:"load_datasets_duration_seconds"}),"\n",(0,i.jsx)(a.p,{children:"Un histograma de duraci\xf3n para tareas de conjunto de datos de carga. Est\xe1n etiquetados con mayor (verdadero/falso) ."}),"\n",(0,i.jsx)(a.h4,{id:"email_thread_duration_seconds",children:"email_thread_duration_seconds"}),"\n",(0,i.jsx)(a.p,{children:"Un histograma de duraci\xf3n de la tarea del hilo de correo electr\xf3nico. Est\xe1n etiquetados con \xe9xito (verdadero/falso) ."}),"\n",(0,i.jsx)(a.h4,{id:"email_count_distribuci\xf3n",children:"email_count_distribuci\xf3n"}),"\n",(0,i.jsx)(a.p,{children:"Un histograma de correos electr\xf3nicos por tarea."}),"\n",(0,i.jsx)(a.h4,{id:"dataset_count",children:"dataset_count"}),"\n",(0,i.jsx)(a.p,{children:"Un medidor de los conjuntos de datos, establecido despu\xe9s de cada llamada de conjuntos de datos de carga. Esto se etiqueta con la categor\xeda (grid, table) ."}),"\n",(0,i.jsx)(a.h4,{id:"dataset_failed_load_count",children:"dataset_failed_load_count"}),"\n",(0,i.jsx)(a.p,{children:"Un medidor de los conjuntos de datos que no se cargaron, establecido despu\xe9s de cada llamada de conjuntos de datos de carga."}),"\n",(0,i.jsx)(a.h4,{id:"shed_requests_total",children:"shed_requests_total"}),"\n",(0,i.jsx)(a.p,{children:"Contrato de solicitudes que fueron canceladas. El servidor cancelar\xe1 una solicitud cuando crea que el servidor est\xe1 bajo en memoria (RAM) y la solicitud causar\xeda problemas. Esto no incluye solicitudes de error debido a la baja RAM o espacio de disco durante el manejo de la solicitud."}),"\n",(0,i.jsx)(a.h4,{id:"dangerous_memory_emails_total",children:"dangerous_memory_emails_total"}),"\n",(0,i.jsx)(a.p,{children:"Contrarior de veces el servidor intenta enviar un correo electr\xf3nico al administrador que la memoria es peligrosamente baja."}),"\n",(0,i.jsx)(a.h4,{id:"dangerous_memory_failures_total",children:"dangerous_memory_failures_total"}),"\n",(0,i.jsx)(a.p,{children:"Contrata de solicitudes que fallaron debido a la m\xe1quina que se agot\xf3 de la memoria. A menudo esto es porque la m\xe1quina est\xe1 recibiendo muchas solicitudes costosas o la petici\xf3n individual fue excepcionalmente grande."}),"\n",(0,i.jsx)(a.h4,{id:"topo_request_total",children:"topo_request_total"}),"\n",(0,i.jsx)(a.p,{children:"Contrato de solicitudes de datos de topo. Esto es cach\xe9 etiquetado (cached/not_cached) ."}),"\n",(0,i.jsx)(a.h4,{id:"boundary-counters",children:"Boundary Counters"}),"\n",(0,i.jsx)(a.p,{children:"Tambi\xe9n hay una colecci\xf3n de contadores para solicitudes de l\xedmites:"}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"national_boundaries_request_total"}),"\n",(0,i.jsx)(a.li,{children:"state_boundaries_request_total"}),"\n",(0,i.jsx)(a.li,{children:"river_boundaries_request_total"}),"\n",(0,i.jsx)(a.li,{children:"gshhs_request_total"}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:"Estos son etiquetados con estado (grueso, \xe9xito, sacudido) ."})]})}function u(e={}){const{wrapper:a}={...(0,t.R)(),...e.components};return a?(0,i.jsx)(a,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);