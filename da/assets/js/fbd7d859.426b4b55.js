"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[6762],{28453(e,r,t){t.d(r,{R:()=>s,x:()=>d});var n=t(96540);const i={},a=n.createContext(i);function s(e){const r=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),n.createElement(a.Provider,{value:r},e.children)}},60981(e,r,t){t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>d,default:()=>m,frontMatter:()=>s,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"server-admin/prometheus","title":"I n\xe6rheden af Prometheus","description":"Prometheus metrics er tilg\xe6ngelig p\xe5 /erddap/metrics. JVM kernem\xe5linger blev tilf\xf8jet i 2.25 med mange ERDDAP\u2122 metrics tilf\xf8jet i version 2.26. Hvis du vil bruge metrics, skal du s\xf8rge for, at du er i mindst version 2.26. De kan som standard deaktivere dem ved at tilf\xf8je","source":"@site/i18n/da/docusaurus-plugin-content-docs/current/server-admin/prometheus.md","sourceDirName":"server-admin","slug":"/server-admin/prometheus","permalink":"/da/docs/server-admin/prometheus","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/prometheus.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"docSidebar","previous":{"title":"Lokaliseret Metadata","permalink":"/da/docs/server-admin/localized-metadata"},"next":{"title":"Feature Flags","permalink":"/da/docs/server-admin/feature-flags"}}');var i=t(74848),a=t(28453);const s={sidebar_position:9},d="I n\xe6rheden af Prometheus",l={},o=[{value:"K\xf8r Prometheus server",id:"k\xf8r-prometheus-server",level:2},{value:"ERDDAP\u2122 metrics",id:"erddap-metrics",level:2},{value:"JVM",id:"jvm",level:3},{value:"ERDDAP\u2122 specifikke specifikke specifikke specifikke",id:"erddap-specifikke-specifikke-specifikke-specifikke",level:3},{value:"ERDDAP _build_info",id:"erddap-_build_info",level:4},{value:"funktion_flags",id:"funktion_flags",level:4},{value:"buffered Billedbillede",id:"buffered-billedbillede",level:4},{value:"http _request_duration_kunder",id:"http-_request_duration_kunder",level:4},{value:"touch_thread_duration_kunder",id:"touch_thread_duration_kunder",level:4},{value:"opgave_thread_duration_kunder",id:"opgave_thread_duration_kunder",level:4},{value:"belastning_datasets_duration_kunders",id:"belastning_datasets_duration_kunders",level:4},{value:"e-mail_thread_duration_kunder",id:"e-mail_thread_duration_kunder",level:4},{value:"e-mail_count_distribution",id:"e-mail_count_distribution",level:4},{value:"Datas\xe6t_count",id:"datas\xe6t_count",level:4},{value:"Dataset_failed_load_count",id:"dataset_failed_load_count",level:4},{value:"I n\xe6rheden af sku_requests_total",id:"i-n\xe6rheden-af-sku_requests_total",level:4},{value:"farlig_memory_emails_total",id:"farlig_memory_emails_total",level:4},{value:"farlig_memory_failures_total",id:"farlig_memory_failures_total",level:4},{value:"Flyrejser tilpo_request_total",id:"flyrejser-tilpo_request_total",level:4},{value:"Gr\xe6nsel\xf8s t\xe6llere",id:"gr\xe6nsel\xf8s-t\xe6llere",level:4}];function u(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"i-n\xe6rheden-af-prometheus",children:"I n\xe6rheden af Prometheus"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.a,{href:"https://prometheus.io/",children:"Prometheus metrics"})," er tilg\xe6ngelig p\xe5 /erddap/metrics. JVM kernem\xe5linger blev tilf\xf8jet i 2.25 med mange ERDDAP\u2122 metrics tilf\xf8jet i version 2.26. Hvis du vil bruge metrics, skal du s\xf8rge for, at du er i mindst version 2.26. De kan som standard deaktivere dem ved at tilf\xf8je"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-xml",children:"<usePrometheusMetrics>false</usePrometheusMetrics>\n"})}),"\n",(0,i.jsx)(r.p,{children:"til din ops\xe6tning.xml."}),"\n",(0,i.jsx)(r.p,{children:"Disse metrics er designet til at v\xe6re maskinl\xe6sbar. Mens du kan kontrollere metrics-siden manuelt, anbefales det at bruge en Prometheus-server. En Prometheus-server vil gemme historiske metrics, som g\xf8r det muligt for mere i dybdeoverv\xe5gning (som priser og \xe6ndringer fra tidligere v\xe6rdier) , og k\xf8rer ofte med en Grafana-server. Vi leverer nogle foruddefinerede dashboards, som administratorer kan finde nyttige til at f\xe5 startet overv\xe5gning af deres servere."}),"\n",(0,i.jsx)(r.h2,{id:"k\xf8r-prometheus-server",children:"K\xf8r Prometheus server"}),"\n",(0,i.jsxs)(r.p,{children:["Den bedste dokumentation for at k\xf8re overv\xe5gningstabellen (Prometheus + Grafana) er i Prometheus ",(0,i.jsx)(r.a,{href:"https://github.com/ERDDAP/erddap/blob/main/docker/prometheus/README.md",children:"readme"})," ."]}),"\n",(0,i.jsx)(r.h2,{id:"erddap-metrics",children:"ERDDAP\u2122 metrics"}),"\n",(0,i.jsx)(r.h3,{id:"jvm",children:"JVM"}),"\n",(0,i.jsxs)(r.p,{children:["ERDDAP\u2122 eksporterer en r\xe6kke m\xe5linger, som du kan finde nyttige (begyndende i starten ERDDAP\u2122 2.25) . For generel overv\xe5gning af JVMs sundhed bruger vi de metrics indsamlet af Prometheus-klienten. Dette omfatter data om affaldsopsamling, hukommelsesforbrug, tr\xe5de og mere. For flere oplysninger se oplysningerne ",(0,i.jsx)(r.a,{href:"https://prometheus.github.io/client_java/instrumentation/jvm/",children:"I n\xe6rheden af Prometheus Java Klient JVM dokumentation"})," ."]}),"\n",(0,i.jsx)(r.h3,{id:"erddap-specifikke-specifikke-specifikke-specifikke",children:"ERDDAP\u2122 specifikke specifikke specifikke specifikke"}),"\n",(0,i.jsxs)(r.p,{children:["Vi eksporterer ogs\xe5 en r\xe6kke ERDDAP\u2122 specifikke m\xe5linger (begyndende i starten ERDDAP\u2122 2.26) . Hvis du vil grave ind i koden, kan du finde de metrics indsamlet i ",(0,i.jsx)(r.a,{href:"https://github.com/ERDDAP/erddap/blob/main/WEB-INF/classes/gov/noaa/pfel/erddap/util/Metrics.java",children:"Metrics.java"})," ."]}),"\n",(0,i.jsx)(r.h4,{id:"erddap-_build_info",children:"ERDDAP _build_info"}),"\n",(0,i.jsx)(r.p,{children:"Dette er byggeinfo for byggepladsen ERDDAP\u2122 server. Den indeholder version (store.minor) , version_full (store.minor.patch) , og implementering_info (Bruges til at angive, hvordan serveren er indsat, som \"Docker '') ."}),"\n",(0,i.jsx)(r.h4,{id:"funktion_flags",children:"funktion_flags"}),"\n",(0,i.jsx)(r.p,{children:"Dette er en info metric, der viser den aktuelle tilstand af tr\xe6kflag. De fleste boolean konfigurations indstillinger betragtes som tr\xe6kflag."}),"\n",(0,i.jsx)(r.h4,{id:"buffered-billedbillede",children:"buffered Billedbillede"}),"\n",(0,i.jsx)(r.p,{children:"Dette er en info metric, der angiver, om grafikacceleration er tilg\xe6ngelig."}),"\n",(0,i.jsx)(r.h4,{id:"http-_request_duration_kunder",children:"http _request_duration_kunder"}),"\n",(0,i.jsx)(r.p,{children:"Dette er et histogram af anmodning svar varigheder p\xe5 f\xe5 sekunder. Etiketterne er anmodning_type (for eksempel gitterdap, tabledap , filer, wms) , datas\xe6t_id (hvis det er relevant, ellers gentager anmodningstype) , filtype (outputformat til anmodning f.eks. '.html', '.csv', '.iso19115 '') , lang_code (sprog for anmodning, eller tom streng, hvis standard) , status_code ( http Statuskode for anmodningen f.eks. 200, 302, 404) ."}),"\n",(0,i.jsx)(r.p,{children:"Dette kan bruges til at spore anmodninger fra datas\xe6t id for at afg\xf8re serverens popul\xe6re datas\xe6t. Det kan ogs\xe5 hj\xe6lpe med at identificere, om der er s\xe6rlige former for anmodninger, der er langsom p\xe5 din server."}),"\n",(0,i.jsx)(r.h4,{id:"touch_thread_duration_kunder",children:"touch_thread_duration_kunder"}),"\n",(0,i.jsx)(r.p,{children:"En histogram af touch tr\xe5d opgave varighed. De er pr\xe6get af succes (sand/false) ."}),"\n",(0,i.jsx)(r.h4,{id:"opgave_thread_duration_kunder",children:"opgave_thread_duration_kunder"}),"\n",(0,i.jsx)(r.p,{children:"En histogram af opgavetr\xe5d varighed. De er pr\xe6get af succes (sand/false) og opgave_type (Begr\xe6nsninger) ."}),"\n",(0,i.jsx)(r.h4,{id:"belastning_datasets_duration_kunders",children:"belastning_datasets_duration_kunders"}),"\n",(0,i.jsx)(r.p,{children:"Et histogram af varighed for belastning af datas\xe6t opgaver. De er m\xe6rket med store (sand/false) ."}),"\n",(0,i.jsx)(r.h4,{id:"e-mail_thread_duration_kunder",children:"e-mail_thread_duration_kunder"}),"\n",(0,i.jsx)(r.p,{children:"En histogram af e-mail tr\xe5d opgave varighed. De er pr\xe6get af succes (sand/false) ."}),"\n",(0,i.jsx)(r.h4,{id:"e-mail_count_distribution",children:"e-mail_count_distribution"}),"\n",(0,i.jsx)(r.p,{children:"Et histogram af e-mails pr. opgave."}),"\n",(0,i.jsx)(r.h4,{id:"datas\xe6t_count",children:"Datas\xe6t_count"}),"\n",(0,i.jsx)(r.p,{children:"En m\xe5ling af datas\xe6t, s\xe6t efter hver belastning datas\xe6t opkald. Dette er pr\xe6get af kategori (gitter, bord) ."}),"\n",(0,i.jsx)(r.h4,{id:"dataset_failed_load_count",children:"Dataset_failed_load_count"}),"\n",(0,i.jsx)(r.p,{children:"En gauge af de datas\xe6t, der mislykkedes at indl\xe6se, s\xe6t efter hver belastning datas\xe6t opkald."}),"\n",(0,i.jsx)(r.h4,{id:"i-n\xe6rheden-af-sku_requests_total",children:"I n\xe6rheden af sku_requests_total"}),"\n",(0,i.jsx)(r.p,{children:"Mod af anmodninger, der blev kastet. serveren vil miste en anmodning, n\xe5r den mener, at serveren er lav p\xe5 hukommelse (RAM) og anmodningen ville for\xe5rsage problemer. Dette omfatter ikke anmodninger, der fejl skyldes lav RAM eller diskplads under h\xe5ndtering af anmodningen."}),"\n",(0,i.jsx)(r.h4,{id:"farlig_memory_emails_total",children:"farlig_memory_emails_total"}),"\n",(0,i.jsx)(r.p,{children:"Counter af tider serveren fors\xf8ger at sende en e-mail til den administrator, at hukommelsen er farlig lav."}),"\n",(0,i.jsx)(r.h4,{id:"farlig_memory_failures_total",children:"farlig_memory_failures_total"}),"\n",(0,i.jsx)(r.p,{children:"Counter af anmodninger, der mislykkedes p\xe5 grund af maskinen, der k\xf8rer ud af hukommelse. Ofte er dette, fordi maskinen modtager en masse dyre anmodninger eller den enkelte anmodning var us\xe6dvanligt stor."}),"\n",(0,i.jsx)(r.h4,{id:"flyrejser-tilpo_request_total",children:"Flyrejser tilpo_request_total"}),"\n",(0,i.jsx)(r.p,{children:"Modsat anmodninger om topo data. Dette er markeret cache (cached / ikke_cached) ."}),"\n",(0,i.jsx)(r.h4,{id:"gr\xe6nsel\xf8s-t\xe6llere",children:"Gr\xe6nsel\xf8s t\xe6llere"}),"\n",(0,i.jsx)(r.p,{children:"Der er ogs\xe5 en samling af t\xe6llere til anmodninger om gr\xe6nser:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"National_boundaries_request_total"}),"\n",(0,i.jsx)(r.li,{children:"Stats_boundaries_request_total"}),"\n",(0,i.jsx)(r.li,{children:"Flok_boundaries_request_total"}),"\n",(0,i.jsx)(r.li,{children:"Gshhs_request_total"}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"Disse er markeret med status (groft, succes, tosed) ."})]})}function m(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}}}]);