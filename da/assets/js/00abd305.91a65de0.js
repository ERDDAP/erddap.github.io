"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[2140],{28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var r=t(96540);const i={},d=r.createContext(i);function s(e){const n=r.useContext(d);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(d.Provider,{value:n},e.children)}},50501:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"server-admin/mqtt-integration","title":"ERDDAP MQTT Integration","description":"ERDDAP Nu indeholder underst\xf8ttelse af MQTT-protokollen for at lette realtidsdataindtagelse og meddelelser. Denne funktionalitet drives af open-source  I n\xe6rheden af HiveMQ MQTT Client  og og og  Hoteller i n\xe6rheden af HiveMQ Community Edition  m\xe6glerbiblioteker.","source":"@site/i18n/da/docusaurus-plugin-content-docs/current/server-admin/mqtt-integration.md","sourceDirName":"server-admin","slug":"/server-admin/mqtt-integration","permalink":"/da/docs/server-admin/mqtt-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/mqtt-integration.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docSidebar","previous":{"title":"Feature Flags","permalink":"/da/docs/server-admin/feature-flags"},"next":{"title":"Contributing","permalink":"/da/docs/category/contributing"}}');var i=t(74848),d=t(28453);const s={},l="ERDDAP MQTT Integration",a={},o=[{value:"ERDDAP som MQTT Client",id:"erddap-som-mqtt-client",level:2},{value:"Konfiguration: <code>EDDTableFraMqttt</code>",id:"konfiguration-eddtableframqttt",level:2},{value:"ERDDAP som MQTT Broker",id:"erddap-som-mqtt-broker",level:2},{value:"Aktivering af indlejret m\xe6gler",id:"aktivering-af-indlejret-m\xe6gler",level:2},{value:"Komponentering og dataansvarlige",id:"komponentering-og-dataansvarlige",level:2},{value:"Brug sag 1: Indtagelse af data fra MQTT-klienter",id:"brug-sag-1-indtagelse-af-data-fra-mqtt-klienter",level:2},{value:"Brug af sag 2: Forlag Dataset Change Notifications",id:"brug-af-sag-2-forlag-dataset-change-notifications",level:2},{value:"Milj\xf8variabel Parsing i <code>datasets.xml</code>",id:"milj\xf8variabel-parsing-i-datasetsxml",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"erddap-mqtt-integration",children:"ERDDAP MQTT Integration"})}),"\n",(0,i.jsxs)(n.p,{children:["ERDDAP Nu indeholder underst\xf8ttelse af MQTT-protokollen for at lette realtidsdataindtagelse og meddelelser. Denne funktionalitet drives af open-source ",(0,i.jsxs)(n.a,{href:"https://github.com/hivemq/hivemq-mqtt-client",children:[" ",(0,i.jsx)(n.strong,{children:"I n\xe6rheden af HiveMQ MQTT Client"})," "]})," og og og ",(0,i.jsxs)(n.a,{href:"https://github.com/hivemq/hivemq-community-edition",children:[" ",(0,i.jsx)(n.strong,{children:"Hoteller i n\xe6rheden af HiveMQ Community Edition"})," "]})," m\xe6glerbiblioteker."]}),"\n",(0,i.jsx)(n.p,{children:"ERDDAP kan udnytte MQTT p\xe5 to prim\xe6re m\xe5der:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Som MQTT-klient:"}),"    ERDDAP kan abonnere p\xe5 emner p\xe5 en eksisterende MQTT m\xe6gler til at ingest data og oprette real-time datasets."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Som MQTT Broker:"}),"    ERDDAP kan hoste sin egen indlejrede MQTT m\xe6gler, s\xe5 eksterne klienter kan udgive data direkte til det."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"erddap-som-mqtt-client",children:"ERDDAP som MQTT Client"}),"\n",(0,i.jsxs)(n.p,{children:["ERDDAP kan handle som en MQTT-klient til at abonnere p\xe5 emner p\xe5 en ekstern eller egen indlejret MQTT-m\xe6gler. Dette opn\xe5s ved hj\xe6lp af den nye ",(0,i.jsx)(n.code,{children:"EDDTableFraMqttt"})," datas\xe6t type, der fungerer lignende til den eksisterende ",(0,i.jsxs)(n.a,{href:"/docs/server-admin/datasets#eddtablefromhttpget",children:[" ",(0,i.jsx)(n.code,{children:"EDDTableFraHttpGet"})," "]})," Datas\xe6t."]}),"\n",(0,i.jsxs)(n.p,{children:["I \xf8jeblikket underst\xf8tter klientimplementeringen kun ",(0,i.jsx)(n.strong,{children:"tilmelding"})," til emner."]}),"\n",(0,i.jsxs)(n.h2,{id:"konfiguration-eddtableframqttt",children:["Konfiguration: ",(0,i.jsx)(n.code,{children:"EDDTableFraMqttt"})]}),"\n",(0,i.jsxs)(n.p,{children:["At konfigurere et datas\xe6t til at abonnere p\xe5 en MQTT m\xe6gler, definere et datas\xe6t af type ",(0,i.jsx)(n.code,{children:"EDDTableFraMqttt"})," i din indbakke ",(0,i.jsx)(n.code,{children:"datasets.xml"})," fil. F\xf8lgende konfigurationstag er tilg\xe6ngelige i f\xf8lgende konfigurationstag ",(0,i.jsx)(n.code,{children:"<dataset>"})," blok:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\x3c!-- Example configuration for an EDDTableFromMqtt dataset in datasets.xml --\x3e\n<dataset type=\"EDDTableFromMqtt\" datasetID=\"mqtt_realtime_data\" active=\"true\">\n\n    \x3c!-- The hostname or IP address of the MQTT broker. --\x3e\n    <serverHost>broker.example.com</serverHost>\n\n    \x3c!-- The port number of the MQTT broker. --\x3e\n    <serverPort>1883</serverPort>\n\n    \x3c!-- A unique identifier for this MQTT client. --\x3e\n    <clientId>erddap-subscriber-1</clientId>\n\n    \x3c!-- The username for broker authentication (optional). --\x3e\n    <username>user</username>\n\n    \x3c!-- The password for broker authentication (optional). --\x3e\n    <password>secret</password>\n\n    \x3c!-- A comma-separated list of MQTT topics to subscribe to. --\x3e\n    <topics>sensor/+/data, another/topic</topics>\n\n    \x3c!-- Set to 'true' to use a secure SSL/TLS connection. Default is 'false'. --\x3e\n    <useSsl>false</useSsl>\n\n    \x3c!-- The session expiry interval in seconds. --\x3e\n    <sessionExpiryInterval>3600</sessionExpiryInterval>\n\n    \x3c!-- The connection timeout in seconds. --\x3e\n    <connectionTimeout>10</connectionTimeout>\n\n    \x3c!-- Set to 'true' to enable automatic reconnection. Default is 'true'. --\x3e\n    <automaticReconnect>true</automaticReconnect>\n\n</dataset>\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"erddap-som-mqtt-broker",children:"ERDDAP som MQTT Broker"}),"\n",(0,i.jsx)(n.p,{children:"ERDDAP kan k\xf8re en integreret MQTT m\xe6gler, som tjener to hovedform\xe5l:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Data Indtagelse:"})," For at modtage data offentliggjort af eksterne MQTT-klienter for at skabe real-time datas\xe6t."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Meddelelser:"})," For at udgive meddelelser om datas\xe6t \xe6ndringer."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"aktivering-af-indlejret-m\xe6gler",children:"Aktivering af indlejret m\xe6gler"}),"\n",(0,i.jsxs)(n.p,{children:["Den integrerede MQTT m\xe6gler er deaktiveret som standard. Hvis du vil aktivere det, skal du tilf\xf8je f\xf8lgende flag til ",(0,i.jsx)(n.code,{children:"ops\xe6tning.xml"})," :"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"\x3c!-- Enables the embedded HiveMQ broker. Default is 'false'. --\x3e   <enableMqttBroker> sande sande sande sande </enableMqttBroker>"})}),"\n",(0,i.jsx)(n.h2,{id:"komponentering-og-dataansvarlige",children:"Komponentering og dataansvarlige"}),"\n",(0,i.jsxs)(n.p,{children:["Du kan angive brugerdefinerede mapper til m\xe6glerens konfiguration og datafiler i ",(0,i.jsx)(n.code,{children:"ops\xe6tning.xml"})," . Hvis disse tags er efterladt tomme, ERDDAP vil bruge de standardmapper, der er angivet af HiveMQ-biblioteket. For mere avancerede konfigurationsoplysninger, herunder logning og udvidelser, henvises til den officielle ",(0,i.jsxs)(n.a,{href:"https://github.com/hivemq/hivemq-community-edition/wiki",children:[" ",(0,i.jsx)(n.strong,{children:"Overs\xe6ttelse af HiveMQ Community Edition"})," "]})," ."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\x3c!-- The parent directory for all MQTT-related files. --\x3e\n<bigParentDirectory>/opt/erddap/mqtt/</bigParentDirectory>\n\n\x3c!-- The path to the embedded MQTT broker's configuration folder. --\x3e\n<mqttConfigFolder>/opt/erddap/mqtt/conf/</mqttConfigFolder>\n\n\x3c!-- The path to the embedded MQTT broker's data folder. --\x3e\n<mqttDataFolder>/opt/erddap/mqtt/data/</mqttDataFolder>\n"})}),"\n",(0,i.jsx)(n.h2,{id:"brug-sag-1-indtagelse-af-data-fra-mqtt-klienter",children:"Brug sag 1: Indtagelse af data fra MQTT-klienter"}),"\n",(0,i.jsxs)(n.p,{children:["For at opbygge et real-time datas\xe6t ved hj\xe6lp af den indlejrede m\xe6gler, kan du konfigurere en ",(0,i.jsx)(n.code,{children:"EDDTableFraMqttt"})," Datas\xe6t (som beskrevet ovenfor) inden for ",(0,i.jsx)(n.em,{children:"same"})," ERDDAP f.eks. at oprette forbindelse til sin egen lokale m\xe6gler. Eksterne MQTT-klienter kan derefter udgive data til dette ERDDAP m\xe6gler, som ",(0,i.jsx)(n.code,{children:"EDDTableFraMqttt"})," Datas\xe6t abonnerer p\xe5 og ingest."]}),"\n",(0,i.jsx)(n.h2,{id:"brug-af-sag-2-forlag-dataset-change-notifications",children:"Brug af sag 2: Forlag Dataset Change Notifications"}),"\n",(0,i.jsxs)(n.p,{children:["ERDDAP kan konfigureres til at offentligg\xf8re meddelelser om datas\xe6t \xe6ndringer (f.eks. opdateringer eller genindl\xe6sninger) til et emne p\xe5 en MQTT m\xe6gler. F\xf8rst skal du sikre, at m\xe6gleren er aktiveret eller en ekstern er tilg\xe6ngelig. Aktiver derefter meddelelsesfunktionen i ",(0,i.jsx)(n.code,{children:"ops\xe6tning.xml"})," :"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"\x3c!-- Set to 'true' to publish dataset change notifications via MQTT. Default is 'false'. --\x3e   <publishMqttNotif> sande sande sande sande </publishMqttNotif>"})}),"\n",(0,i.jsxs)(n.p,{children:["N\xe5r denne funktion er aktiveret, ERDDAP Brug en intern MQTT-klient til at udgive meddelelserne. Forbindelsesindstillingerne for denne klient kan tilpasses i ",(0,i.jsx)(n.code,{children:"ops\xe6tning.xml"})," . Tabellen nedenfor viser de tilg\xe6ngelige indstillinger og deres standardv\xe6rdier."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Tag med tag"}),(0,i.jsx)(n.th,{children:"Type Type Type Type"}),(0,i.jsx)(n.th,{children:"Standardv\xe6rdi"}),(0,i.jsx)(n.th,{children:"Beskrivelse Beskrivelse Beskrivelse Beskrivelse"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"<mqttServerHost>"})}),(0,i.jsx)(n.td,{children:"streng streng"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Lokalhost"})}),(0,i.jsx)(n.td,{children:"broker v\xe6rt for at udgive meddelelser til."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"<mqttServerPort>"})}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"1883"})}),(0,i.jsx)(n.td,{children:"Porten af meddelelsesm\xe6gleren."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"<mqttClientId>"})}),(0,i.jsx)(n.td,{children:"streng streng"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Erddap-klient"})}),(0,i.jsx)(n.td,{children:"Klient-id'et til meddelelsesgiveren."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"<mqttUserName>"})}),(0,i.jsx)(n.td,{children:"streng streng"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Erddap-brugernavn"})}),(0,i.jsx)(n.td,{children:"Brugernavnet for meddelelsesgiveren."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"<mqttPassword>"})}),(0,i.jsx)(n.td,{children:"streng streng"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Erddap-password"})}),(0,i.jsx)(n.td,{children:"Adgangskoden til meddelelsesgiveren."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"<mqttSsl>"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"falsk"})}),(0,i.jsx)(n.td,{children:"Brug SSL/TLS til meddelelsesforbindelsen."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"<mqttKeepAlive>"})}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"60 60 60 60"})}),(0,i.jsx)(n.td,{children:"Holdbare interval p\xe5 f\xe5 sekunder."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"<mqttCleanStart>"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"falsk"})}),(0,i.jsx)(n.td,{children:"Start med en ren session (Ingen afsluttende session tilstand) ."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"<mqttSessionExpiry>"})}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"10 10"})}),(0,i.jsx)(n.td,{children:"Session udl\xf8bsinterval p\xe5 f\xe5 sekunder."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"<mqttConnectionTimeout>"})}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"10 10"})}),(0,i.jsx)(n.td,{children:"Tilslutningstid p\xe5 f\xe5 sekunder."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"<mqttAutomaticReconnect>"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sande sande sande sande"})}),(0,i.jsx)(n.td,{children:"Afbryd automatisk, hvis forbindelsen er tabt."})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"milj\xf8variabel-parsing-i-datasetsxml",children:["Milj\xf8variabel Parsing i ",(0,i.jsx)(n.code,{children:"datasets.xml"})]}),"\n",(0,i.jsxs)(n.p,{children:["En ny funktion er blevet introduceret, der giver mulighed for brug af milj\xf8variabler inden for ",(0,i.jsx)(n.code,{children:"datasets.xml"})," . Dette er ",(0,i.jsx)(n.strong,{children:"aktiveret som standard"})," ."]}),"\n",(0,i.jsxs)(n.p,{children:["Hvis du vil deaktivere denne funktionalitet, skal du tilf\xf8je f\xf8lgende flag til ",(0,i.jsx)(n.code,{children:"ops\xe6tning.xml"})," :"]}),"\n",(0,i.jsx)(n.p,{children:"xml"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"<enableEnvParsing> falsk </enableEnvParsing>"})})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);