"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[4326],{28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>d});var r=n(96540);const s={},o=r.createContext(s);function i(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(o.Provider,{value:t},e.children)}},97497:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>d,default:()=>g,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"user/AccessToPrivateDatasets","title":"Access to Private Datasets","description":"Mange mangeERDDAP\u2122installationer har ikke godkendelse aktiveret, og giver dermed ingen m\xe5de for brugere at logge ind, og de har heller ikke private datas\xe6t.","source":"@site/i18n/da/docusaurus-plugin-content-docs/current/user/AccessToPrivateDatasets.md","sourceDirName":"user","slug":"/user/AccessToPrivateDatasets","permalink":"/da/docs/user/AccessToPrivateDatasets","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/user/AccessToPrivateDatasets.md","tags":[],"version":"current","frontMatter":{"title":"Access to Private Datasets"},"sidebar":"docSidebar","previous":{"title":"User","permalink":"/da/docs/category/user"},"next":{"title":"NCCSV 1.00","permalink":"/da/docs/user/nccsv-1.00"}}');var s=n(74848),o=n(28453);const i={title:"Access to Private Datasets"},d="Adgang til private datas\xe6t iERDDAP\u2122",a={},l=[{value:"Opdateret vejledning",id:"updated-instructions",level:2},{value:"Mennesker med browsere",id:"humans-with-browsers",level:2},{value:"scripts",id:"scripts",level:2}];function c(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"adgang-til-private-datas\xe6t-ierddap",children:"Adgang til private datas\xe6t iERDDAP\u2122"})}),"\n",(0,s.jsx)(t.p,{children:"Mange mangeERDDAP\u2122installationer har ikke godkendelse aktiveret, og giver dermed ingen m\xe5de for brugere at logge ind, og de har heller ikke private datas\xe6t."}),"\n",(0,s.jsx)(t.p,{children:"Nogle af nogleERDDAP\u2122installationer har godkendelse aktiveret. I \xf8jeblikket,ERDDAP\u2122underst\xf8tter kun godkendelse via Google-managed e-mailkonti, som indeholder e-mailkonti p\xe5NOAAog mange universiteter. Hvis enERDDAP\u2122har godkendelse aktiveret, alle med en Google-managed-mailkonto kan logge ind, men de vil kun have adgang til de private datas\xe6t, som de har adgang tilERDDAP\u2122Administrator har udtrykkeligt godkendt dem til at f\xe5 adgang."}),"\n",(0,s.jsx)(t.h2,{id:"updated-instructions",children:"Opdateret vejledning"}),"\n",(0,s.jsxs)(t.p,{children:["Nogle af nedenst\xe5ende oplysninger er for\xe6ldet. Indtil dette bliver opdateret kan du bruge",(0,s.jsx)(t.a,{href:"https://shospital.github.io/blog/posts/blog-post/erddap_private_dataset.html",children:"Denne blog indl\xe6g"}),"for de seneste trin om at f\xe5 data fra et privat datas\xe6t med scripts."]}),"\n",(0,s.jsx)(t.h2,{id:"humans-with-browsers",children:"Mennesker med browsere"}),"\n",(0,s.jsx)(t.p,{children:"Menneskelige brugere afERDDAP\u2122kan logge indERDDAP\u2122i en browser for at f\xe5 adgang til private datas\xe6t, som de er autoriseret til at f\xe5 adgang til."}),"\n",(0,s.jsx)(t.p,{children:"Log ind:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Klik p\xe5 log ind i linket \xf8verst til venstreERDDAP\u2122webside.\r\nHvis der ikke er log p\xe5 link, er linketERDDAP\u2122installation har ikke godkendelse aktiveret, og der er ingen private datas\xe6t.\r\n\xa0"}),"\n",(0,s.jsx)(t.li,{children:'Klik p\xe5 knappen Log p\xe5 for at logge ind p\xe5 din Google-konto.\r\nKnapets tekst skal \xe6ndres til "Loget i".\r\n\xa0'}),"\n",(0,s.jsxs)(t.li,{children:["Klik p\xe5 Log indERDDAPknappen.\r\nWebsiden skal \xe6ndre sig for at sige Du er logget ind som ",(0,s.jsx)(t.em,{children:"Dit din egen EmailAddress"})," .\r\nHvis det ikke g\xf8r, skal du vente 5 sekunder og klikke p\xe5 Log indERDDAPknappen igen.\r\nI ekstreme tilf\xe6lde, kan du n\xf8dt til at vente og derefter pr\xf8ve igen et par gange.\r\n\xa0"]}),"\n",(0,s.jsx)(t.li,{children:'Brug ikke din browsers Back-knap. Brug "ERDDAP"link p\xe5 toppen af ovenst\xe5ende, s\xe5 brug andre links til at g\xe5 tilERDDAP\u2122sider, du er interesseret i. Hvis en cached-side siger, at du ikke er logget ind, skal du indl\xe6se siden.\r\n\xa0'}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"scripts",children:"scripts"}),"\n",(0,s.jsx)(t.p,{children:"\\[Dette er lidt \xe6ndret fra oplysninger leveret af Lynn DeWittt, der gjorde det h\xe5rde arbejde med at finde ud af dette. Lynn, tak meget!\r\nHvis du har rettelser eller forslag, bedes du sende en e-mail til os.\\]"}),"\n",(0,s.jsx)(t.p,{children:"Det er ogs\xe5 muligt at logge ind p\xe5ERDDAP\u2122og f\xe5 adgang til private datas\xe6t via et script. Her er et eksempel, der brugercurl:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Disse instruktioner antager, at du bruger en gmail-adresse, hvor 2-faktorgodkendelse ikke er t\xe6ndt. Hvis din prim\xe6re gmail-adresse har 2-faktorgodkendelse sl\xe5et til, skal du overveje at oprette en anden gmail-adresse med 2-faktorgodkendelse sl\xe5et fra.\r\n\xa0"}),"\n",(0,s.jsx)(t.li,{children:"Log indERDDAP\u2122manuelt med den gmail-adresse, du vil bruge i dit script og acceptere eventuelle n\xf8dvendige tilladelser, s\xe5 log helt tilbage ud.\r\n\xa0"}),"\n",(0,s.jsx)(t.li,{children:"\xc5bn browserudviklerv\xe6rkt\xf8jerne, og g\xe5 til fanen Netv\xe6rk.\r\n\xa0"}),"\n",(0,s.jsx)(t.li,{children:'Klik p\xe5 knappenERDDAP\u2122"Log ind"-linket, og v\xe6lg derefter den relevante e-mailadresse, hvis du bliver bedt om det.\r\n\xa0'}),"\n",(0,s.jsx)(t.li,{children:'N\xe5r knappen "Log ind" \xe6ndres til "Log ind", vises fanen Udviklerv\xe6rkt\xf8jer, der ligner f\xf8lgende: (Eksempel fra Firefox) :'}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"    iframerpc?action=issueToken&response loginGoogle.html  \n"})}),"\n",(0,s.jsx)(t.p,{children:'Brug muse h\xf8jreklik-kontekstmenuen til "copy as cURL" begge af disse urls og inds\xe6t dem i en almindelig tekst editor\r\n\xa0\r\n6. Klik p\xe5 "Log indERDDAP"knappen og "copy as cURL" linket, der ligner:'}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"    login.html  \n"})}),"\n",(0,s.jsxs)(t.p,{children:["og s\xe6t denne tredjecurlkommando ind i tekstfilen.\r\n\xa0\r\n7. I tekstfilen vil du nu have 3 linjer som f\xf8lgende, hvor du har logget ind p\xe5 enERDDAP\u2122server p\xe5 ' * ",(0,s.jsx)(t.a,{href:"https://host.somewhere.com/erddap",children:"https://host.somewhere.com/erddap"}),' * ". Den f\xf8rstecurlkommando f\xe5r din brugerprofil i "login\\_hint" og genererer en "id\\_token". Den anden bruger id\\_token til at logge ind p\xe5 Google, og den tredje derefter logger ind p\xe5ERDDAP.']}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"    curl 'https://accounts.google.com/o/oauth2/iframerpc?action=issueToken&response\\\\_type=token%20id\\\\_token&scope=openid%20profile%20email&client\\\\_id=ABCDEFG.apps.googleusercontent.com&login\\\\_hint=XXXXXXXXXX&ss\\\\_domain=https%3A%2F%2Fhost.somewhere.com&origin=https%3A%2F%2Fhost.somewhere.com' --2.0 -H 'Host: accounts.google.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://accounts.google.com/o/oauth2/iframe' -H 'Cookie: lotsofcookiestuff' -H 'Connection: keep-alive' curl 'https://host.somewhere.com/erddap/loginGoogle.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' --data 'idtoken=HUGELONGIDTOKEN' curl 'https://host.somewhere.com/erddap/login.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1'\n"})}),"\n",(0,s.jsxs)(t.ol,{start:"8",children:["\n",(0,s.jsx)(t.li,{children:"Ovenst\xe5ende 3 linjer, n\xe5r du k\xf8rer sekventielt fra en kommandolinje, vil log dig indERDDAP. For at bruge disse i et script skal du fange id\\_token fra den f\xf8rste linje, fodre den til den anden linje, og skrive en cookie til at l\xe6se af efterf\xf8lgende linjer.\r\n\xa0"}),"\n",(0,s.jsxs)(t.li,{children:["At udvikle et script, k\xf8re den f\xf8rste ('' ",(0,s.jsx)(t.a,{href:"https://accounts.google.com",children:"https://accounts.google.com"}),' )  curllinje pr\xe6cis, som det blev kopieret fra udviklerv\xe6rkt\xf8jerne, og fange svaret (Du kan f\xe5 encurlfejl om flaget "--2.0" bare fjerne det) . I php ser det ud til f\xf8lgende:']}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"    $gcurlstuff=\"curl 'https://accounts.google.com/o/oauth2/iframerpc?action=issueToken&response\\\\_type=token%20id\\\\_token&scope=openid%20profile%20email&client\\\\_id=ABCDEFG.apps.googleusercontent.com&login\\\\_hint=XXXXXXXXXX&ss\\\\_domain=https%3A%2F%2Fhost.somewhere.com&origin=https%3A%2F%2Fhost.somewhere.com' -H 'Host: accounts.google.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://accounts.google.com/o/oauth2/iframe' -H 'Cookie: lotsofcookiestuff' -H 'Connection: keep-alive'\"; //execute the curl command: exec($gcurlstuff,$output,$status); //the response is a json array in $output $response=json\\\\_decode($output\\\\[0\\\\],true); //the part you need is in \"id\\\\_token\": $id\\\\_token=$response\\\\[\"id\\\\_token\"\\\\];\n"})}),"\n",(0,s.jsx)(t.p,{children:'Log ind p\xe5 Google ved at udf\xf8re den anden linje ved hj\xe6lp af $id\\_token, f\xf8rst fjerne "-H \'Cookie: ting" parameter og i stedet fort\xe6llecurlat skrive en cookie:'}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"    $glcurlstuff=\"curl 'https://host.somewhere.com/erddap/loginGoogle.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' --data 'idtoken=\".$id\\\\_token.\"' -b cookies.txt -c cookies.txt\" exec($glcurlstuff,$output1,$status);\n"})}),"\n",(0,s.jsx)(t.p,{children:'Log indERDDAP\u2122, igen fjerne "-H \'Cookie: ting" parameter, og ved hj\xe6lp af den tidligere skriftlige cookie:'}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"    $ecurlstuff=\"curl 'https://host.somewhere.com/erddap/login.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1 -b cookies.txt\"' exec($ecurlstuff,$output2,$status);\n"})}),"\n",(0,s.jsx)(t.p,{children:"Du b\xf8r nu kunne anmode om data fra serveren ved hj\xe6lp af den samme cookie:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"    $curlstuff=\"curl -s 'https://host.somewhere.com/erddap/tabledap/datasetid.csv?variablelist' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1' -b cookies.txt\"; exec($curlstuff,$output3,$status); //$output3 will be data in csv!\n"})})]})}function g(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);