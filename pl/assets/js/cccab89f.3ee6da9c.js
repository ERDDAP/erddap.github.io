"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[9662],{28453(e,n,o){o.d(n,{R:()=>r,x:()=>s});var i=o(96540);const a={},t=i.createContext(a);function r(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(t.Provider,{value:n},e.children)}},57330(e,n,o){o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"server-admin/mqtt-integration","title":"ERDDAP Integracja MQTT","description":"ERDDAP obecnie obejmuje wsparcie dla protoko\u0142u MQTT, aby u\u0142atwi\u0107 przyjmowanie danych w czasie rzeczywistym i powiadomienia. Ta funkcjonalno\u015b\u0107 jest zasilana przez open-source  HiveMQ MQTT Client  oraz  HiveMQ Community Edition  biblioteki brokerskie.","source":"@site/i18n/pl/docusaurus-plugin-content-docs/current/server-admin/mqtt-integration.md","sourceDirName":"server-admin","slug":"/server-admin/mqtt-integration","permalink":"/pl/docs/server-admin/mqtt-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/mqtt-integration.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docSidebar","previous":{"title":"Flagi","permalink":"/pl/docs/server-admin/feature-flags"},"next":{"title":"Contributing","permalink":"/pl/docs/category/contributing"}}');var a=o(74848),t=o(28453);const r={},s="ERDDAP Integracja MQTT",d={},c=[{value:"ERDDAP jako klient MQTT",id:"erddap-jako-klient-mqtt",level:2},{value:"Konfiguracja: <code>EDDTableFromMqtt</code>",id:"konfiguracja-eddtablefrommqtt",level:2},{value:"ERDDAP jako MQTT Broker",id:"erddap-jako-mqtt-broker",level:2},{value:"W\u0142\u0105czenie wbudowanego brokera",id:"w\u0142\u0105czenie-wbudowanego-brokera",level:2},{value:"Konfiguracja i katalogi danych brokera",id:"konfiguracja-i-katalogi-danych-brokera",level:2},{value:"Przypadek u\u017cycia 1: Dane do pobrania od klient\xf3w MQTT",id:"przypadek-u\u017cycia-1-dane-do-pobrania-od-klient\xf3w-mqtt",level:2},{value:"U\u017cyj Case 2: Publikowanie powiadomie\u0144 o zmianie danych",id:"u\u017cyj-case-2-publikowanie-powiadomie\u0144-o-zmianie-danych",level:2},{value:"\u015arodowisko Zmienne parowanie w <code>datasets.xml</code>",id:"\u015brodowisko-zmienne-parowanie-w-datasetsxml",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"erddap-integracja-mqtt",children:"ERDDAP Integracja MQTT"})}),"\n",(0,a.jsxs)(n.p,{children:["ERDDAP obecnie obejmuje wsparcie dla protoko\u0142u MQTT, aby u\u0142atwi\u0107 przyjmowanie danych w czasie rzeczywistym i powiadomienia. Ta funkcjonalno\u015b\u0107 jest zasilana przez open-source ",(0,a.jsxs)(n.a,{href:"https://github.com/hivemq/hivemq-mqtt-client",children:[" ",(0,a.jsx)(n.strong,{children:"HiveMQ MQTT Client"})," "]})," oraz ",(0,a.jsxs)(n.a,{href:"https://github.com/hivemq/hivemq-community-edition",children:[" ",(0,a.jsx)(n.strong,{children:"HiveMQ Community Edition"})," "]})," biblioteki brokerskie."]}),"\n",(0,a.jsx)(n.p,{children:"ERDDAP mo\u017ce wykorzysta\u0107 MQTT na dwa podstawowe sposoby:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Jako klient MQTT:"}),"    ERDDAP mo\u017ce subskrybowa\u0107 tematy na istniej\u0105cym brokerze MQTT do przyjmowania danych i tworzenia zbior\xf3w danych w czasie rzeczywistym."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Jako MQTT Broker:"}),"    ERDDAP mo\u017ce prowadzi\u0107 w\u0142asny wbudowany broker MQTT, umo\u017cliwiaj\u0105cy klientom zewn\u0119trznym publikowanie danych bezpo\u015brednio do niego."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Czy..."}),"\n",(0,a.jsx)(n.h2,{id:"erddap-jako-klient-mqtt",children:"ERDDAP jako klient MQTT"}),"\n",(0,a.jsxs)(n.p,{children:["ERDDAP mo\u017ce dzia\u0142a\u0107 jako klient MQTT subskrybowa\u0107 tematy na zewn\u0119trznych lub w\u0142asnych wbudowanych MQTT broker. Jest to osi\u0105gni\u0119te za pomoc\u0105 nowego ",(0,a.jsx)(n.code,{children:"EDDTableFromMqtt"})," typ zbioru danych, kt\xf3ry dzia\u0142a podobnie do istniej\u0105cego ",(0,a.jsxs)(n.a,{href:"/docs/server-admin/datasets#eddtablefromhttpget",children:[" ",(0,a.jsx)(n.code,{children:"EDDTableFromHttpGet"})," "]})," zestaw danych."]}),"\n",(0,a.jsxs)(n.p,{children:["Aktualnie, implementacja klienta obs\u0142uguje tylko ",(0,a.jsx)(n.strong,{children:"subskrypcja"})," do temat\xf3w."]}),"\n",(0,a.jsxs)(n.h2,{id:"konfiguracja-eddtablefrommqtt",children:["Konfiguracja: ",(0,a.jsx)(n.code,{children:"EDDTableFromMqtt"})]}),"\n",(0,a.jsxs)(n.p,{children:["Aby skonfigurowa\u0107 zestaw danych do subskrypcji brokera MQTT, zdefiniuj zestaw danych typu ",(0,a.jsx)(n.code,{children:"EDDTableFromMqtt"})," w ",(0,a.jsx)(n.code,{children:"datasets.xml"})," plik. Poni\u017csze znaczniki konfiguracyjne s\u0105 dost\u0119pne w ",(0,a.jsx)(n.code,{children:"<dataset>"})," blok:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"\x3c!-- Example configuration for an EDDTableFromMqtt dataset in datasets.xml --\x3e\n<dataset type=\"EDDTableFromMqtt\" datasetID=\"mqtt_realtime_data\" active=\"true\">\n\n    \x3c!-- The hostname or IP address of the MQTT broker. --\x3e\n    <serverHost>broker.example.com</serverHost>\n\n    \x3c!-- The port number of the MQTT broker. --\x3e\n    <serverPort>1883</serverPort>\n\n    \x3c!-- A unique identifier for this MQTT client. --\x3e\n    <clientId>erddap-subscriber-1</clientId>\n\n    \x3c!-- The username for broker authentication (optional). --\x3e\n    <username>user</username>\n\n    \x3c!-- The password for broker authentication (optional). --\x3e\n    <password>secret</password>\n\n    \x3c!-- A comma-separated list of MQTT topics to subscribe to. --\x3e\n    <topics>sensor/+/data, another/topic</topics>\n\n    \x3c!-- Set to 'true' to use a secure SSL/TLS connection. Default is 'false'. --\x3e\n    <useSsl>false</useSsl>\n\n    \x3c!-- The session expiry interval in seconds. --\x3e\n    <sessionExpiryInterval>3600</sessionExpiryInterval>\n\n    \x3c!-- The connection timeout in seconds. --\x3e\n    <connectionTimeout>10</connectionTimeout>\n\n    \x3c!-- Set to 'true' to enable automatic reconnection. Default is 'true'. --\x3e\n    <automaticReconnect>true</automaticReconnect>\n\n</dataset>\n"})}),"\n",(0,a.jsx)(n.p,{children:"Czy..."}),"\n",(0,a.jsx)(n.h2,{id:"erddap-jako-mqtt-broker",children:"ERDDAP jako MQTT Broker"}),"\n",(0,a.jsx)(n.p,{children:"ERDDAP mo\u017ce uruchamia\u0107 wbudowanego brokera MQTT, kt\xf3ry s\u0142u\u017cy dw\xf3m g\u0142\xf3wnym celom:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Spo\u017cycie danych:"})," Do otrzymywania danych publikowanych przez zewn\u0119trznych klient\xf3w MQTT do tworzenia zbior\xf3w danych w czasie rzeczywistym."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Powiadomienia:"})," Publikowanie powiadomie\u0144 o zmianach w zbiorze danych."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"w\u0142\u0105czenie-wbudowanego-brokera",children:"W\u0142\u0105czenie wbudowanego brokera"}),"\n",(0,a.jsxs)(n.p,{children:["Wbudowany broker MQTT jest domy\u015blnie wy\u0142\u0105czony. Aby to umo\u017cliwi\u0107, dodaj nast\u0119puj\u0105c\u0105 flag\u0119 ",(0,a.jsx)(n.code,{children:"setup.xml"})," :"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"\x3c!-- Enables the embedded HiveMQ broker. Default is 'false'. --\x3e   <enableMqttBroker> prawda </enableMqttBroker>"})}),"\n",(0,a.jsx)(n.h2,{id:"konfiguracja-i-katalogi-danych-brokera",children:"Konfiguracja i katalogi danych brokera"}),"\n",(0,a.jsxs)(n.p,{children:["Mo\u017cesz poda\u0107 w\u0142asne katalogi dla plik\xf3w konfiguracyjnych i danych brokera w ",(0,a.jsx)(n.code,{children:"setup.xml"})," . Je\u015bli te znaczniki pozostan\u0105 puste, ERDDAP b\u0119dzie u\u017cywa\u0107 domy\u015blnych katalog\xf3w okre\u015blonych w bibliotece HiveMQ. Aby uzyska\u0107 bardziej zaawansowane szczeg\xf3\u0142y konfiguracji, w tym logowanie i rozszerzenia, nale\u017cy zapozna\u0107 si\u0119 z oficjalnym ",(0,a.jsxs)(n.a,{href:"https://github.com/hivemq/hivemq-community-edition/wiki",children:[" ",(0,a.jsx)(n.strong,{children:"HiveMQ Community Edition Wiki"})," "]})," ."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"\x3c!-- The parent directory for all MQTT-related files. --\x3e\n<bigParentDirectory>/opt/erddap/mqtt/</bigParentDirectory>\n\n\x3c!-- The path to the embedded MQTT broker's configuration folder. --\x3e\n<mqttConfigFolder>/opt/erddap/mqtt/conf/</mqttConfigFolder>\n\n\x3c!-- The path to the embedded MQTT broker's data folder. --\x3e\n<mqttDataFolder>/opt/erddap/mqtt/data/</mqttDataFolder>\n"})}),"\n",(0,a.jsx)(n.h2,{id:"przypadek-u\u017cycia-1-dane-do-pobrania-od-klient\xf3w-mqtt",children:"Przypadek u\u017cycia 1: Dane do pobrania od klient\xf3w MQTT"}),"\n",(0,a.jsxs)(n.p,{children:["Aby zbudowa\u0107 zestaw danych w czasie rzeczywistym za pomoc\u0105 wbudowanego brokera, mo\u017cna skonfigurowa\u0107 ",(0,a.jsx)(n.code,{children:"EDDTableFromMqtt"})," zbi\xf3r danych (jak opisano powy\u017cej) w obr\u0119bie _ tego samego _ ERDDAP instancja do po\u0142\u0105czenia si\u0119 z w\u0142asnym lokalnym brokerem. Zewn\u0119trzni klienci MQTT mog\u0105 nast\u0119pnie publikowa\u0107 dane do tego ERDDAP broker, kt\xf3ry ",(0,a.jsx)(n.code,{children:"EDDTableFromMqtt"})," zestaw danych subskrybuje i po\u0142yka."]}),"\n",(0,a.jsx)(n.h2,{id:"u\u017cyj-case-2-publikowanie-powiadomie\u0144-o-zmianie-danych",children:"U\u017cyj Case 2: Publikowanie powiadomie\u0144 o zmianie danych"}),"\n",(0,a.jsxs)(n.p,{children:["ERDDAP mo\u017cna skonfigurowa\u0107, aby publikowa\u0107 powiadomienia o zmianach zbioru danych (np. aktualizacje lub prze\u0142adunki) na temat brokera MQTT. Po pierwsze, upewnij si\u0119, \u017ce broker jest w\u0142\u0105czony lub zewn\u0119trzny jest dost\u0119pny. W\xf3wczas w\u0142\u0105cz opcj\u0119 powiadomienia w ",(0,a.jsx)(n.code,{children:"setup.xml"})," :"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"\x3c!-- Set to 'true' to publish dataset change notifications via MQTT. Default is 'false'. --\x3e   <publishMqttNotif> prawda </publishMqttNotif>"})}),"\n",(0,a.jsxs)(n.p,{children:["Kiedy ta funkcja jest w\u0142\u0105czona, ERDDAP u\u017cywa wewn\u0119trznego klienta MQTT do publikowania wiadomo\u015bci. Ustawienia po\u0142\u0105czenia dla tego klienta mo\u017cna dostosowa\u0107 w ",(0,a.jsx)(n.code,{children:"setup.xml"})," . Poni\u017csza tabela zawiera list\u0119 dost\u0119pnych ustawie\u0144 i ich warto\u015bci domy\u015blne."]}),"\n",(0,a.jsxs)(n.p,{children:["| Znacznik | Rodzaj | Warto\u015b\u0107 domy\u015blna | Opis |\n| To... | Prosz\u0119. | - Nie. | {C: $aaccff} T\u0142umaczenie: |\n|   ",(0,a.jsx)(n.code,{children:"<mqttServerHost>"}),"           | ci\u0105g |   ",(0,a.jsx)(n.code,{children:"localhost"}),"         | Host broker do publikowania powiadomie\u0144. |\n|   ",(0,a.jsx)(n.code,{children:"<mqttServerPort>"}),"           | int |   ",(0,a.jsx)(n.code,{children:"1883"}),"              | Port brokera powiadomie\u0144. |\n|   ",(0,a.jsx)(n.code,{children:"<mqttClientId>"}),"             | ci\u0105g |   ",(0,a.jsx)(n.code,{children:"erddap- client"}),"     | Identyfikator klienta dla wydawcy powiadomie\u0144. |\n|   ",(0,a.jsx)(n.code,{children:"<mqttUserName>"}),"             | ci\u0105g |   ",(0,a.jsx)(n.code,{children:"erddap- username"}),"   | Nazwa u\u017cytkownika dla wydawcy powiadomie\u0144. |\n|   ",(0,a.jsx)(n.code,{children:"<mqttPassword>"}),"             | ci\u0105g |   ",(0,a.jsx)(n.code,{children:"erddap- haslo"}),"   | Has\u0142o dla wydawcy powiadomie\u0144. |\n|   ",(0,a.jsx)(n.code,{children:"<mqttSsl>"}),"                  | boolean |   ",(0,a.jsx)(n.code,{children:"false"}),"             | U\u017cyj SSL / TLS do po\u0142\u0105czenia powiadomienia. |\n|   ",(0,a.jsx)(n.code,{children:"<mqttKeepAlive>"}),"            | int |   ",(0,a.jsx)(n.code,{children:"60"}),"                | Utrzyma\u0107 \u017cyw\u0105 przerw\u0119 w ci\u0105gu kilku sekund. |\n|   ",(0,a.jsx)(n.code,{children:"<mqttCleanStart>"}),"           | boolean |   ",(0,a.jsx)(n.code,{children:"false"}),"             | Zacznij od czystej sesji (brak utrzymuj\u0105cego si\u0119 stanu sesji) . |\n|   ",(0,a.jsx)(n.code,{children:"<mqttSessionExpiry>"}),"        | int |   ",(0,a.jsx)(n.code,{children:"10"}),"                | Czas wa\u017cno\u015bci sesji w sekundach. |\n|   ",(0,a.jsx)(n.code,{children:"<mqttConnectionTimeout>"}),"    | int |   ",(0,a.jsx)(n.code,{children:"10"}),"                | Czas po\u0142\u0105czenia w kilka sekund. |\n|   ",(0,a.jsx)(n.code,{children:"<mqttAutomaticReconnect>"}),"   | boolean |   ",(0,a.jsx)(n.code,{children:"prawda"}),"              | Automatycznie ponownie po\u0142\u0105czy\u0107 si\u0119 w przypadku utraty po\u0142\u0105czenia. |"]}),"\n",(0,a.jsx)(n.p,{children:"Czy..."}),"\n",(0,a.jsxs)(n.h2,{id:"\u015brodowisko-zmienne-parowanie-w-datasetsxml",children:["\u015arodowisko Zmienne parowanie w ",(0,a.jsx)(n.code,{children:"datasets.xml"})]}),"\n",(0,a.jsxs)(n.p,{children:["Wprowadzono now\u0105 funkcj\u0119 umo\u017cliwiaj\u0105c\u0105 stosowanie zmiennych \u015brodowiskowych w obr\u0119bie ",(0,a.jsx)(n.code,{children:"datasets.xml"})," . To jest... ",(0,a.jsx)(n.strong,{children:"domy\u015blnie w\u0142\u0105czona"})," ."]}),"\n",(0,a.jsxs)(n.p,{children:["Aby wy\u0142\u0105czy\u0107 t\u0119 funkcjonalno\u015b\u0107, dodaj nast\u0119puj\u0105c\u0105 flag\u0119 do ",(0,a.jsx)(n.code,{children:"setup.xml"})," :"]}),"\n",(0,a.jsx)(n.p,{children:"xml"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"<enableEnvParsing> false </enableEnvParsing>"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}}}]);