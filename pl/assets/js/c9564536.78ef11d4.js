"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[2816],{28453:(e,i,a)=>{a.d(i,{R:()=>s,x:()=>r});var n=a(96540);const o={},t=n.createContext(o);function s(e){const i=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),n.createElement(t.Provider,{value:i},e.children)}},35842:(e,i,a)=>{a.r(i),a.d(i,{assets:()=>d,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"server-admin/prometheus","title":"Prometeusz","description":"Wska\u017aniki prometeuszas\u0105 dost\u0119pne na / erddap / metrics. Mierniki rdzenia JVM zosta\u0142y dodane w 2.25 z wieluERDDAP\u2122wska\u017aniki dodane w wersji 2.26. Je\u015bli chcesz u\u017cy\u0107 pomiar\xf3w upewnij si\u0119, \u017ce jeste\u015b w co najmniej wersji 2.26. Domy\u015blnie w\u0142\u0105czone, mo\u017cna je wy\u0142\u0105czy\u0107 poprzez dodanie","source":"@site/i18n/pl/docusaurus-plugin-content-docs/current/server-admin/prometheus.md","sourceDirName":"server-admin","slug":"/server-admin/prometheus","permalink":"/pl/docs/server-admin/prometheus","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/prometheus.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"docSidebar","previous":{"title":"Lokalizowane metadane","permalink":"/pl/docs/server-admin/localized-metadata"},"next":{"title":"Contributing","permalink":"/pl/docs/category/contributing"}}');var o=a(74848),t=a(28453);const s={sidebar_position:9},r="Prometeusz",d={},c=[{value:"Uruchomienie serwera Prometheus",id:"uruchomienie-serwera-prometheus",level:2},{value:"ERDDAP\u2122metryka",id:"erddapmetryka",level:2},{value:"JVM",id:"jvm",level:3},{value:"ERDDAP\u2122specyficzny",id:"erddapspecyficzny",level:3},{value:"ERDDAP_ build _ info",id:"erddap_-build-_-info",level:4},{value:"feature _ flags",id:"feature-_-flags",level:4},{value:"buforowane Obraz",id:"buforowane-obraz",level:4},{value:"http_ request _ time _ seconds",id:"http_-request-_-time-_-seconds",level:4},{value:"touch _ thread _ time _ seconds",id:"touch-_-thread-_-time-_-seconds",level:4},{value:"task _ thread _ time _ seconds",id:"task-_-thread-_-time-_-seconds",level:4},{value:"load _ datasets _ time _ seconds",id:"load-_-datasets-_-time-_-seconds",level:4},{value:"email _ thread _ time _ seconds",id:"email-_-thread-_-time-_-seconds",level:4},{value:"email _ count _ distribution",id:"email-_-count-_-distribution",level:4},{value:"dataset _ count",id:"dataset-_-count",level:4},{value:"dataset _ failed _ load _ count",id:"dataset-_-failed-_-load-_-count",level:4},{value:"shed _ requests _ total",id:"shed-_-requests-_-total",level:4},{value:"niebezpieczne _ memory _ email _ total",id:"niebezpieczne-_-memory-_-email-_-total",level:4},{value:"niebezpieczne _ pami\u0119ci _ awarie _ og\xf3\u0142em",id:"niebezpieczne-_-pami\u0119ci-_-awarie-_-og\xf3\u0142em",level:4},{value:"topo _ request _ total",id:"topo-_-request-_-total",level:4},{value:"Licznik granic",id:"licznik-granic",level:4}];function l(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.header,{children:(0,o.jsx)(i.h1,{id:"prometeusz",children:"Prometeusz"})}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.a,{href:"https://prometheus.io/",children:"Wska\u017aniki prometeusza"}),"s\u0105 dost\u0119pne na / erddap / metrics. Mierniki rdzenia JVM zosta\u0142y dodane w 2.25 z wieluERDDAP\u2122wska\u017aniki dodane w wersji 2.26. Je\u015bli chcesz u\u017cy\u0107 pomiar\xf3w upewnij si\u0119, \u017ce jeste\u015b w co najmniej wersji 2.26. Domy\u015blnie w\u0142\u0105czone, mo\u017cna je wy\u0142\u0105czy\u0107 poprzez dodanie"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-xml",children:"<usePrometheusMetrics>false</usePrometheusMetrics>\n"})}),"\n",(0,o.jsx)(i.p,{children:"do twojej ugody."}),"\n",(0,o.jsx)(i.p,{children:"Te wska\u017aniki s\u0105 zaprojektowane tak, aby by\u0142y do odczytu maszynowego. Podczas gdy mo\u017cna sprawdzi\u0107 stron\u0119 pomiaru r\u0119cznie, w celu dog\u0142\u0119bnego monitorowania zaleca si\u0119 u\u017cycie serwera Prometeus. Serwer Prometheus przechowuje historyczne wska\u017aniki, kt\xf3re umo\u017cliwiaj\u0105 bardziej dog\u0142\u0119bne monitorowanie (podobne kursy i zmiany z poprzednich warto\u015bci) , a tak\u017ce cz\u0119sto dzia\u0142a z serwerem Grafana. Dostarczamy kilka wst\u0119pnie zbudowanych desek rozdzielczych, kt\xf3re administratorzy mog\u0105 uzna\u0107 za przydatne do rozpocz\u0119cia monitorowania swoich serwer\xf3w."}),"\n",(0,o.jsx)(i.h2,{id:"uruchomienie-serwera-prometheus",children:"Uruchomienie serwera Prometheus"}),"\n",(0,o.jsxs)(i.p,{children:["Najlepsza dokumentacja do uruchomienia stosu monitorowania (Prometeusz + Grafana) jest w Prometeuszu",(0,o.jsx)(i.a,{href:"https://github.com/ERDDAP/erddap/blob/main/docker/prometheus/README.md",children:"readme"}),"."]}),"\n",(0,o.jsx)(i.h2,{id:"erddapmetryka",children:"ERDDAP\u2122metryka"}),"\n",(0,o.jsx)(i.h3,{id:"jvm",children:"JVM"}),"\n",(0,o.jsxs)(i.p,{children:["ERDDAP\u2122eksportuj wiele wska\u017anik\xf3w, kt\xf3re mog\u0105 okaza\u0107 si\u0119 przydatne (odERDDAP\u21222, 25) . Do og\xf3lnego monitorowania zdrowia JVM u\u017cywamy pomiar\xf3w zebranych przez klienta Prometeusza. Obejmuje to dane dotycz\u0105ce zbierania \u015bmieci, wykorzystania pami\u0119ci, w\u0105tk\xf3w i wi\u0119cej. Wi\u0119cej informacji mo\u017cna znale\u017a\u0107 na stronie internetowej:",(0,o.jsx)(i.a,{href:"https://prometheus.github.io/client_java/instrumentation/jvm/",children:"PrometeuszJavaDokumentacja klienta JVM"}),"."]}),"\n",(0,o.jsx)(i.h3,{id:"erddapspecyficzny",children:"ERDDAP\u2122specyficzny"}),"\n",(0,o.jsxs)(i.p,{children:["Eksportujemy r\xf3wnie\u017c kilkaERDDAP\u2122Specyficzne wska\u017aniki (odERDDAP\u21222, 26) . Je\u015bli chcesz przekopa\u0107 si\u0119 do kodu, mo\u017cesz znale\u017a\u0107 metryki zebrane w",(0,o.jsx)(i.a,{href:"https://github.com/ERDDAP/erddap/blob/main/WEB-INF/classes/gov/noaa/pfel/erddap/util/Metrics.java",children:"Metrics.java"}),"."]}),"\n",(0,o.jsx)(i.h4,{id:"erddap_-build-_-info",children:"ERDDAP_ build _ info"}),"\n",(0,o.jsx)(i.p,{children:"To jest build info dlaERDDAP\u2122serwer. Zawiera on wersj\u0119 (major.minor) , version _ full (major.minor.patch) oraz wdro\u017cenie_ info (u\u017cywane do wskazania jak serwer jest rozmieszczany, jak 'Docker') ."}),"\n",(0,o.jsx)(i.h4,{id:"feature-_-flags",children:"feature _ flags"}),"\n",(0,o.jsx)(i.p,{children:"Jest to metryka informacyjna, kt\xf3ra pokazuje aktualny stan flag funkcji. Wi\u0119kszo\u015b\u0107 opcji konfiguracji boolean s\u0105 uwa\u017cane za flagi funkcji."}),"\n",(0,o.jsx)(i.h4,{id:"buforowane-obraz",children:"buforowane Obraz"}),"\n",(0,o.jsx)(i.p,{children:"Jest to metryka informacyjna, kt\xf3ra wskazuje, czy przyspieszenie graficzne jest dost\u0119pne."}),"\n",(0,o.jsx)(i.h4,{id:"http_-request-_-time-_-seconds",children:"http_ request _ time _ seconds"}),"\n",(0,o.jsx)(i.p,{children:"To jest histogram czasu trwania odpowiedzi w sekundach. Etykiety to request _ type (na przyk\u0142ad griddap,tabledap, pliki, wms) , dataset _ id (w stosownych przypadkach, w inny spos\xf3b powtarza typ wniosku) , file _ type (format wyj\u015bcia na \u017c\u0105danie np. '.html', '.csv', '.iso19115') , lang _ code (j\u0119zyk dla \u017c\u0105dania, lub pusty ci\u0105g je\u015bli domy\u015blnie) , status _ code (httpkod statusu wniosku np. 200, 302, 404) ."}),"\n",(0,o.jsx)(i.p,{children:"Mo\u017cna to wykorzysta\u0107 do \u015bledzenia \u017c\u0105da\u0144 przy pomocy id dataset w celu okre\u015blenia popularnych zbior\xf3w danych serwera. Mo\u017ce r\xf3wnie\u017c pom\xf3c zidentyfikowa\u0107, czy istniej\u0105 szczeg\xf3lne rodzaje \u017c\u0105da\u0144, kt\xf3re s\u0105 wolne na serwerze."}),"\n",(0,o.jsx)(i.h4,{id:"touch-_-thread-_-time-_-seconds",children:"touch _ thread _ time _ seconds"}),"\n",(0,o.jsx)(i.p,{children:"Histogram czasu trwania zadania nici dotykowej. S\u0105 one oznakowane sukcesem (true / false) ."}),"\n",(0,o.jsx)(i.h4,{id:"task-_-thread-_-time-_-seconds",children:"task _ thread _ time _ seconds"}),"\n",(0,o.jsx)(i.p,{children:"Histogram d\u0142ugo\u015bci nitki zadaniowej. S\u0105 one oznakowane sukcesem (true / false) i typ _ zadania (intetger) ."}),"\n",(0,o.jsx)(i.h4,{id:"load-_-datasets-_-time-_-seconds",children:"load _ datasets _ time _ seconds"}),"\n",(0,o.jsx)(i.p,{children:"Histogram czasu trwania zada\u0144 zbioru danych obci\u0105\u017cenia. S\u0105 oznakowane du\u017cymi literami (true / false) ."}),"\n",(0,o.jsx)(i.h4,{id:"email-_-thread-_-time-_-seconds",children:"email _ thread _ time _ seconds"}),"\n",(0,o.jsx)(i.p,{children:"Histogram czasu trwania zadania nici e-mail. S\u0105 one oznakowane sukcesem (true / false) ."}),"\n",(0,o.jsx)(i.h4,{id:"email-_-count-_-distribution",children:"email _ count _ distribution"}),"\n",(0,o.jsx)(i.p,{children:"Histogram maili na ka\u017cde zadanie."}),"\n",(0,o.jsx)(i.h4,{id:"dataset-_-count",children:"dataset _ count"}),"\n",(0,o.jsx)(i.p,{children:"Wska\u017anik zestawu danych, ustawiony po ka\u017cdym wywo\u0142aniu zbioru danych obci\u0105\u017cenia. Jest to etykieta z kategori\u0105 (siatka, tabela) ."}),"\n",(0,o.jsx)(i.h4,{id:"dataset-_-failed-_-load-_-count",children:"dataset _ failed _ load _ count"}),"\n",(0,o.jsx)(i.p,{children:"Wska\u017anik zestaw\xf3w danych, kt\xf3re nie zosta\u0142y za\u0142adowane, ustawiony po ka\u017cdym wywo\u0142aniu zbioru danych obci\u0105\u017cenia."}),"\n",(0,o.jsx)(i.h4,{id:"shed-_-requests-_-total",children:"shed _ requests _ total"}),"\n",(0,o.jsx)(i.p,{children:"Licznik z\u0142o\u017conych \u017c\u0105da\u0144. Serwer z\u0142o\u017cy \u017c\u0105danie, gdy uzna, \u017ce serwer jest niski w pami\u0119ci (RAM) a wniosek spowodowa\u0142by problemy. Nie obejmuje to wniosk\xf3w o b\u0142\u0105d spowodowany nisk\u0105 przestrzeni\u0105 pami\u0119ci RAM lub dysku podczas obs\u0142ugi wniosku."}),"\n",(0,o.jsx)(i.h4,{id:"niebezpieczne-_-memory-_-email-_-total",children:"niebezpieczne _ memory _ email _ total"}),"\n",(0,o.jsx)(i.p,{children:"Licznik razy serwer pr\xf3buje wys\u0142a\u0107 e-mail do administratora, \u017ce pami\u0119\u0107 jest niebezpiecznie niska."}),"\n",(0,o.jsx)(i.h4,{id:"niebezpieczne-_-pami\u0119ci-_-awarie-_-og\xf3\u0142em",children:"niebezpieczne _ pami\u0119ci _ awarie _ og\xf3\u0142em"}),"\n",(0,o.jsx)(i.p,{children:"Licznik \u017c\u0105da\u0144, kt\xf3re zawiod\u0142y z powodu braku pami\u0119ci maszyny. Cz\u0119sto jest to spowodowane tym, \u017ce maszyna otrzymuje wiele kosztownych \u017c\u0105da\u0144 lub indywidualne \u017c\u0105danie by\u0142o wyj\u0105tkowo du\u017ce."}),"\n",(0,o.jsx)(i.h4,{id:"topo-_-request-_-total",children:"topo _ request _ total"}),"\n",(0,o.jsx)(i.p,{children:"Licznik wniosk\xf3w o dane topo. To jest etykieta pami\u0119ci podr\u0119cznej (cached / not _ cached) ."}),"\n",(0,o.jsx)(i.h4,{id:"licznik-granic",children:"Licznik granic"}),"\n",(0,o.jsx)(i.p,{children:"Istnieje r\xf3wnie\u017c zbi\xf3r licznik\xf3w dla wniosk\xf3w o granice:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"National _ borders _ request _ total"}),"\n",(0,o.jsx)(i.li,{children:"state _ borders _ request _ total"}),"\n",(0,o.jsx)(i.li,{children:"River _ borders _ request _ total"}),"\n",(0,o.jsx)(i.li,{children:"gshhs _ request _ total"}),"\n"]}),"\n",(0,o.jsx)(i.p,{children:"S\u0105 one oznakowane statusem (grube, sukces, rzucone) ."})]})}function u(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}}}]);