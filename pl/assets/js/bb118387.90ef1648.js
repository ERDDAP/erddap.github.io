"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[9449],{28453:(e,o,n)=>{n.d(o,{R:()=>a,x:()=>r});var i=n(96540);const t={},s=i.createContext(t);function a(e){const o=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function r(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(s.Provider,{value:o},e.children)}},36135:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"user/AccessToPrivateDatasets","title":"Access to Private Datasets","description":"WieleERDDAP\u2122Instalacje nie maj\u0105 w\u0142\u0105czonego uwierzytelniania i w zwi\u0105zku z tym nie zapewniaj\u0105 u\u017cytkownikom mo\u017cliwo\u015bci logowania si\u0119, nie maj\u0105 te\u017c \u017cadnych prywatnych zbior\xf3w danych.","source":"@site/i18n/pl/docusaurus-plugin-content-docs/current/user/AccessToPrivateDatasets.md","sourceDirName":"user","slug":"/user/AccessToPrivateDatasets","permalink":"/pl/docs/user/AccessToPrivateDatasets","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/user/AccessToPrivateDatasets.md","tags":[],"version":"current","frontMatter":{"title":"Access to Private Datasets"},"sidebar":"docSidebar","previous":{"title":"User","permalink":"/pl/docs/category/user"},"next":{"title":"NCCSV 1.00","permalink":"/pl/docs/user/nccsv-1.00"}}');var t=n(74848),s=n(28453);const a={title:"Access to Private Datasets"},r="Dost\u0119p do prywatnych zbior\xf3w danych wERDDAP\u2122",c={},l=[{value:"Aktualizacja instrukcji",id:"updated-instructions",level:2},{value:"Ludzie z przegl\u0105darkami",id:"humans-with-browsers",level:2},{value:"Skrypt",id:"scripts",level:2}];function d(e){const o={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.header,{children:(0,t.jsx)(o.h1,{id:"dost\u0119p-do-prywatnych-zbior\xf3w-danych-werddap",children:"Dost\u0119p do prywatnych zbior\xf3w danych wERDDAP\u2122"})}),"\n",(0,t.jsx)(o.p,{children:"WieleERDDAP\u2122Instalacje nie maj\u0105 w\u0142\u0105czonego uwierzytelniania i w zwi\u0105zku z tym nie zapewniaj\u0105 u\u017cytkownikom mo\u017cliwo\u015bci logowania si\u0119, nie maj\u0105 te\u017c \u017cadnych prywatnych zbior\xf3w danych."}),"\n",(0,t.jsx)(o.p,{children:"Niekt\xf3reERDDAP\u2122instalacje maj\u0105 w\u0142\u0105czone uwierzytelnianie. ObecnieERDDAP\u2122Tylko obs\u0142uguje uwierzytelnianie poprzez konta pocztowe zarz\u0105dzane przez Google-NOAAi wiele uniwersytet\xf3w. Je\u015bliERDDAP\u2122ma uwierzytelnianie w\u0142\u0105czone, ka\u017cdy z Google- zarz\u0105dzane konto e-mail mo\u017ce si\u0119 zalogowa\u0107, ale b\u0119d\u0105 mieli tylko dost\u0119p do prywatnych zbior\xf3w danych, \u017ceERDDAP\u2122Administrator wyra\u017anie upowa\u017cni\u0142 ich do dost\u0119pu."}),"\n",(0,t.jsx)(o.h2,{id:"updated-instructions",children:"Aktualizacja instrukcji"}),"\n",(0,t.jsxs)(o.p,{children:["Niekt\xf3re z poni\u017cszych informacji s\u0105 nieaktualne. Dop\xf3ki to nie zostanie zaktualizowane mo\u017cesz u\u017cy\u0107",(0,t.jsx)(o.a,{href:"https://shospital.github.io/blog/posts/blog-post/erddap_private_dataset.html",children:"ten blog post"}),"dla ostatnich krok\xf3w na temat uzyskiwania danych z prywatnego zbioru danych ze skryptami."]}),"\n",(0,t.jsx)(o.h2,{id:"humans-with-browsers",children:"Ludzie z przegl\u0105darkami"}),"\n",(0,t.jsx)(o.p,{children:"U ludziERDDAP\u2122mo\u017ce si\u0119 zalogowa\u0107ERDDAP\u2122w przegl\u0105darce w celu uzyskania dost\u0119pu do prywatnych zbior\xf3w danych, do kt\xf3rych maj\u0105 dost\u0119p."}),"\n",(0,t.jsx)(o.p,{children:"Zaloguj si\u0119:"}),"\n",(0,t.jsxs)(o.ol,{children:["\n",(0,t.jsx)(o.li,{children:"Kliknij na link logowania w lewym g\xf3rnym rogu dowolnegoERDDAP\u2122strona internetowa.\r\nJe\u015bli nie ma logowania w link,ERDDAP\u2122instalacja nie posiada autoryzacji i nie ma prywatnych zbior\xf3w danych.\r\n\xa0"}),"\n",(0,t.jsx)(o.li,{children:'Kliknij przycisk Zaloguj si\u0119, aby zalogowa\u0107 si\u0119 na konto Google.\r\nTekst przycisku powinien zmieni\u0107 si\u0119 na "Podpisany".\r\n\xa0'}),"\n",(0,t.jsxs)(o.li,{children:["Kliknij na dziennikERDDAPPrzycisk.\r\nStrona powinna si\u0119 zmieni\u0107, aby powiedzie\u0107 Jeste\u015b zalogowany jako ",(0,t.jsx)(o.em,{children:"do Adres emailName"})," .\r\nJe\u015bli nie, odczekaj 5 sekund i kliknij na dziennikERDDAPPrzycisk ponownie.\r\nW skrajnych przypadkach, mo\u017ce trzeba poczeka\u0107 i spr\xf3bowa\u0107 ponownie kilka razy.\r\n\xa0"]}),"\n",(0,t.jsx)(o.li,{children:'Nie u\u017cywaj przycisku Back przegl\u0105darki. U\u017cyj "ERDDAP"link na g\xf3rze powy\u017cej, a nast\u0119pnie u\u017cy\u0107 innych link\xf3w, aby przej\u015b\u0107 doERDDAP\u2122strony, kt\xf3re Ci\u0119 interesuj\u0105. Je\u015bli strona internetowa m\xf3wi, \u017ce nie jeste\u015b zalogowany, prze\u0142aduj stron\u0119.\r\n\xa0'}),"\n"]}),"\n",(0,t.jsx)(o.h2,{id:"scripts",children:"Skrypt"}),"\n",(0,t.jsx)(o.p,{children:"\\[Jest to nieznacznie zmienione na podstawie informacji dostarczonych przez Lynn DeWitt, kt\xf3ra wykona\u0142a ci\u0119\u017ck\u0105 prac\u0119, aby to rozgry\u017a\u0107. Lynn, dzi\u0119kuj\u0119 bardzo!\r\nJe\u015bli masz poprawki lub sugestie, prosimy wys\u0142a\u0107 e-mail erd.data @ noaa.gov.\\]"}),"\n",(0,t.jsx)(o.p,{children:"Mo\u017cna r\xf3wnie\u017c zalogowa\u0107 si\u0119 doERDDAP\u2122i dost\u0119p do prywatnych zbior\xf3w danych za pomoc\u0105 skryptu. Oto przyk\u0142ad, kt\xf3ry wykorzystujecurl:"}),"\n",(0,t.jsxs)(o.ol,{children:["\n",(0,t.jsx)(o.li,{children:"Instrukcje te zak\u0142adaj\u0105, \u017ce u\u017cywasz adresu gmail, gdzie nie jest w\u0142\u0105czone uwierzytelnianie 2- czynnika. Je\u015bli Tw\xf3j g\u0142\xf3wny adres gmail ma w\u0142\u0105czone uwierzytelnianie 2- czynnik, nale\u017cy rozwa\u017cy\u0107 utworzenie innego adresu gmail z uwierzytelnianiem 2- czynnik wy\u0142\u0105czony.\r\n\xa0"}),"\n",(0,t.jsx)(o.li,{children:"Zaloguj si\u0119 doERDDAP\u2122r\u0119cznie z adresem gmail chcesz u\u017cywa\u0107 w skrypcie i zaakceptowa\u0107 wszelkie wymagane uprawnienia, a nast\u0119pnie zalogowa\u0107 si\u0119 ca\u0142kowicie z powrotem.\r\n\xa0"}),"\n",(0,t.jsx)(o.li,{children:"Otw\xf3rz narz\u0119dzia programisty przegl\u0105darki i przejd\u017a do zak\u0142adki Sie\u0107.\r\n\xa0"}),"\n",(0,t.jsx)(o.li,{children:'Kliknij naERDDAP\u2122"Zaloguj si\u0119" link, a nast\u0119pnie przycisk "Zaloguj si\u0119" i wybierz odpowiedni adres e-mail, je\u015bli jest wy\u015bwietlony.\r\n\xa0'}),"\n",(0,t.jsx)(o.li,{children:'Po zmianie przycisku "Zaloguj si\u0119" na "Zarejestrowany", zak\u0142adka Sie\u0107 narz\u0119dzi programisty poka\u017ce dwa wpisy, kt\xf3re wygl\u0105daj\u0105 nast\u0119puj\u0105co (przyk\u0142ad z Firefox) :'}),"\n"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"    iframerpc?action=issueToken&response loginGoogle.html  \n"})}),"\n",(0,t.jsx)(o.p,{children:'U\u017cyj menu kontekstowego kliknij prawym przyciskiem myszy, aby "skopiowa\u0107 jako cURL" oba te urls i wklej je do zwyk\u0142ego edytora tekstu\r\n\xa0\r\n6. Kliknij na "Zaloguj si\u0119ERDDAP"przycisk i" skopiowa\u0107 jako CURL "link, kt\xf3ry wygl\u0105da jak:'}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"    login.html  \n"})}),"\n",(0,t.jsxs)(o.p,{children:["i wklej t\u0119 trzeci\u0105curlpolecenie do pliku tekstowego.\r\n\xa0\r\n7. W pliku tekstowym, masz teraz 3 wiersze, jak poni\u017cej, gdzie zalogowano si\u0119 doERDDAP\u2122serwer na ' * ",(0,t.jsx)(o.a,{href:"https://host.somewhere.com/erddap",children:"https://host.somewhere.com/erddap"}),' * \'. PierwszycurlPolecenie otrzymuje profil u\u017cytkownika w "login\\ _ hint" i generuje "id\\ _ token". Drugi u\u017cywa id\\ _ token do logowania si\u0119 do Google, a trzeci nast\u0119pnie loguje si\u0119 doERDDAP.']}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"    curl 'https://accounts.google.com/o/oauth2/iframerpc?action=issueToken&response\\\\_type=token%20id\\\\_token&scope=openid%20profile%20email&client\\\\_id=ABCDEFG.apps.googleusercontent.com&login\\\\_hint=XXXXXXXXXX&ss\\\\_domain=https%3A%2F%2Fhost.somewhere.com&origin=https%3A%2F%2Fhost.somewhere.com' --2.0 -H 'Host: accounts.google.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://accounts.google.com/o/oauth2/iframe' -H 'Cookie: lotsofcookiestuff' -H 'Connection: keep-alive' curl 'https://host.somewhere.com/erddap/loginGoogle.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' --data 'idtoken=HUGELONGIDTOKEN' curl 'https://host.somewhere.com/erddap/login.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1'\n"})}),"\n",(0,t.jsxs)(o.ol,{start:"8",children:["\n",(0,t.jsx)(o.li,{children:"Powy\u017csze 3 linie, po uruchomieniu kolejno z linii polece\u0144, zaloguje si\u0119 doERDDAP. Aby u\u017cy\u0107 ich w skrypcie, musisz uchwyci\u0107 id\\ _ token z pierwszej linii, poda\u0107 go do drugiej linii i zapisa\u0107 plik cookie do odczytu przez kolejne linie.\r\n\xa0"}),"\n",(0,t.jsxs)(o.li,{children:["Aby opracowa\u0107 skrypt, uruchom pierwszy (' ",(0,t.jsx)(o.a,{href:"https://accounts.google.com",children:"https://accounts.google.com"}),' )  curllinii dok\u0142adnie jak zosta\u0142 skopiowany z narz\u0119dzi deweloperskich, i uchwyci\u0107 odpowied\u017a (mo\u017cna dosta\u0107curlb\u0142\u0105d dotycz\u0105cy flagi "-- 2.0" wystarczy usun\u0105\u0107) . W php wygl\u0105da nast\u0119puj\u0105co:']}),"\n"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"    $gcurlstuff=\"curl 'https://accounts.google.com/o/oauth2/iframerpc?action=issueToken&response\\\\_type=token%20id\\\\_token&scope=openid%20profile%20email&client\\\\_id=ABCDEFG.apps.googleusercontent.com&login\\\\_hint=XXXXXXXXXX&ss\\\\_domain=https%3A%2F%2Fhost.somewhere.com&origin=https%3A%2F%2Fhost.somewhere.com' -H 'Host: accounts.google.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://accounts.google.com/o/oauth2/iframe' -H 'Cookie: lotsofcookiestuff' -H 'Connection: keep-alive'\"; //execute the curl command: exec($gcurlstuff,$output,$status); //the response is a json array in $output $response=json\\\\_decode($output\\\\[0\\\\],true); //the part you need is in \"id\\\\_token\": $id\\\\_token=$response\\\\[\"id\\\\_token\"\\\\];\n"})}),"\n",(0,t.jsx)(o.p,{children:"Zaloguj si\u0119 do Google, wykonuj\u0105c drug\u0105 lini\u0119 u\u017cywaj\u0105c $id\\ _ token, najpierw usuwaj\u0105c parametr \"-H 'Cookie: stuff'\" i zamiast tego m\xf3wi\u0105ccurldo napisania pliku cookie:"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"    $glcurlstuff=\"curl 'https://host.somewhere.com/erddap/loginGoogle.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' --data 'idtoken=\".$id\\\\_token.\"' -b cookies.txt -c cookies.txt\" exec($glcurlstuff,$output1,$status);\n"})}),"\n",(0,t.jsx)(o.p,{children:"Zaloguj si\u0119 doERDDAP\u2122, ponownie usuwaj\u0105c parametr \"-H 'Cookie: stuff'\" i u\u017cywaj\u0105c wcze\u015bniej napisanego pliku cookie:"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"    $ecurlstuff=\"curl 'https://host.somewhere.com/erddap/login.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1 -b cookies.txt\"' exec($ecurlstuff,$output2,$status);\n"})}),"\n",(0,t.jsx)(o.p,{children:"Nale\u017cy teraz by\u0107 w stanie za\u017c\u0105da\u0107 danych z serwera, u\u017cywaj\u0105c tego samego pliku cookie:"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"    $curlstuff=\"curl -s 'https://host.somewhere.com/erddap/tabledap/datasetid.csv?variablelist' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1' -b cookies.txt\"; exec($curlstuff,$output3,$status); //$output3 will be data in csv!\n"})})]})}function p(e={}){const{wrapper:o}={...(0,s.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);