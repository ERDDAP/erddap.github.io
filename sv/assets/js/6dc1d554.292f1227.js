"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[655],{28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>i});var a=n(96540);const r={},s=a.createContext(r);function o(e){const t=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),a.createElement(s.Provider,{value:t},e.children)}},87852:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"user/AccessToPrivateDatasets","title":"Access to Private Datasets","description":"M\xe5nga m\xe5ngaERDDAP\u2122installationer har inte autentisering aktiverat och ger d\xe4rf\xf6r inte n\xe5got s\xe4tt f\xf6r anv\xe4ndare att logga in, inte heller har de n\xe5gra privata datam\xe4ngder.","source":"@site/i18n/sv/docusaurus-plugin-content-docs/current/user/AccessToPrivateDatasets.md","sourceDirName":"user","slug":"/user/AccessToPrivateDatasets","permalink":"/sv/docs/user/AccessToPrivateDatasets","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/user/AccessToPrivateDatasets.md","tags":[],"version":"current","frontMatter":{"title":"Access to Private Datasets"},"sidebar":"docSidebar","previous":{"title":"User","permalink":"/sv/docs/category/user"},"next":{"title":"NCCSV 1.00","permalink":"/sv/docs/user/nccsv-1.00"}}');var r=n(74848),s=n(28453);const o={title:"Access to Private Datasets"},i="Tillg\xe5ng till privata datam\xe4ngder iERDDAP\u2122",l={},d=[{value:"Uppdaterade instruktioner",id:"updated-instructions",level:2},{value:"M\xe4nniskor med webbl\xe4sare",id:"humans-with-browsers",level:2},{value:"Skrifter",id:"scripts",level:2}];function c(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"tillg\xe5ng-till-privata-datam\xe4ngder-ierddap",children:"Tillg\xe5ng till privata datam\xe4ngder iERDDAP\u2122"})}),"\n",(0,r.jsx)(t.p,{children:"M\xe5nga m\xe5ngaERDDAP\u2122installationer har inte autentisering aktiverat och ger d\xe4rf\xf6r inte n\xe5got s\xe4tt f\xf6r anv\xe4ndare att logga in, inte heller har de n\xe5gra privata datam\xe4ngder."}),"\n",(0,r.jsx)(t.p,{children:"VissaERDDAP\u2122installationer har autentisering aktiverad. F\xf6r n\xe4rvarande,ERDDAP\u2122endast st\xf6der autentisering via Google-hanterade e-postkonton, som inkluderar e-postkonton p\xe5NOAAoch m\xe5nga universitet. Om enERDDAP\u2122har autentisering aktiverat, vem som helst med ett Google-hanterat e-postkonto kan logga in, men de kommer bara att ha tillg\xe5ng till de privata datam\xe4ngden somERDDAP\u2122administrat\xf6ren har uttryckligen godk\xe4nt dem att komma \xe5t."}),"\n",(0,r.jsx)(t.h2,{id:"updated-instructions",children:"Uppdaterade instruktioner"}),"\n",(0,r.jsxs)(t.p,{children:["En del av informationen nedan \xe4r ur datum. Tills detta uppdateras kan du anv\xe4nda",(0,r.jsx)(t.a,{href:"https://shospital.github.io/blog/posts/blog-post/erddap_private_dataset.html",children:"Detta blogginl\xe4gg"}),"f\xf6r senaste steg p\xe5 att f\xe5 data fr\xe5n en privat dataset med skript."]}),"\n",(0,r.jsx)(t.h2,{id:"humans-with-browsers",children:"M\xe4nniskor med webbl\xe4sare"}),"\n",(0,r.jsx)(t.p,{children:"M\xe4nskliga anv\xe4ndare avERDDAP\u2122kan logga inERDDAP\u2122i en webbl\xe4sare f\xf6r att f\xe5 tillg\xe5ng till privata datam\xe4ngder som de \xe4r beh\xf6riga att komma \xe5t."}),"\n",(0,r.jsx)(t.p,{children:"F\xf6r att logga in:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"Klicka p\xe5 loggen i l\xe4nken i den \xf6vre v\xe4nstern av n\xe5gonERDDAP\u2122webbsida.\r\nOm det inte finns n\xe5gon logga in l\xe4nk,ERDDAP\u2122installationen har inte autentisering aktiverad och det finns inga privata datam\xe4ngder.\r\n\xa0"}),"\n",(0,r.jsx)(t.li,{children:'Klicka p\xe5 knappen Logga in f\xf6r att logga in p\xe5 ditt Google-konto.\r\nTexten p\xe5 knappen ska \xe4ndras till "Signed in".\r\n\xa0'}),"\n",(0,r.jsxs)(t.li,{children:["Klicka p\xe5 Logga inERDDAPknappen.\r\nWebbsidan b\xf6r \xe4ndras f\xf6r att s\xe4ga Du \xe4r inloggad som ",(0,r.jsx)(t.em,{children:"Dina dina Emailadress"})," .\r\nOm det inte g\xf6r det, v\xe4nta 5 sekunder och klicka p\xe5 Logga inERDDAPknappen igen.\r\nI extrema fall kan du beh\xf6va v\xe4nta och sedan f\xf6rs\xf6ka igen n\xe5gra g\xe5nger.\r\n\xa0"]}),"\n",(0,r.jsx)(t.li,{children:'Anv\xe4nd inte webbl\xe4sarens Back-knapp. Anv\xe4nd "ERDDAPl\xe4nk h\xf6gst upp p\xe5 ovanst\xe5ende, sedan anv\xe4nda andra l\xe4nkar f\xf6r att g\xe5 tillERDDAP\u2122sidor du \xe4r intresserad av. Om en cachad webbsida s\xe4ger att du inte \xe4r inloggad, ladda om sidan.\r\n\xa0'}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"scripts",children:"Skrifter"}),"\n",(0,r.jsx)(t.p,{children:"\\[Detta \xe4ndras n\xe5got fr\xe5n information som tillhandah\xe5lls av Lynn DeWitt, som gjorde det sv\xe5ra jobbet att r\xe4kna ut detta. Lynn, tack s\xe5 mycket!\r\nOm du har korrigeringar eller f\xf6rslag, v\xe4nligen e-post erd.data @ noaa.gov.\\]"}),"\n",(0,r.jsx)(t.p,{children:"Det \xe4r ocks\xe5 m\xf6jligt att logga in p\xe5ERDDAP\u2122och tillg\xe5ng till privata dataset via ett skript. H\xe4r \xe4r ett exempel som anv\xe4ndercurlFr\xe5n:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"Dessa instruktioner antar att du anv\xe4nder en gmail-adress d\xe4r 2-faktorsautentisering inte aktiveras. Om din huvudsakliga gmail-adress har 2-faktorsautentisering aktiveras, \xf6verv\xe4ga att skapa en annan gmailadress med 2-faktorsautentisering avst\xe4ngd.\r\n\xa0"}),"\n",(0,r.jsx)(t.li,{children:"Logga in tillERDDAP\u2122manuellt med den gmail-adress du vill anv\xe4nda i ditt skript och acceptera eventuella beh\xf6righeter som kr\xe4vs, logga sedan helt ut.\r\n\xa0"}),"\n",(0,r.jsx)(t.li,{children:"\xd6ppna webbl\xe4saren Developer Tools och g\xe5 till fliken N\xe4tverk.\r\n\xa0"}),"\n",(0,r.jsx)(t.li,{children:'Klicka p\xe5ERDDAP\u2122"logga in" -l\xe4nken, sedan "Sign in" -knappen och v\xe4lj l\xe4mplig e-postadress om du uppmanas.\r\n\xa0'}),"\n",(0,r.jsx)(t.li,{children:'Efter att knappen "Sign in" \xe4ndras till "Signed in", visar fliken Utvecklarverktyg Network tv\xe5 poster som ser ut som f\xf6ljande (Exempel fr\xe5n Firefox) Fr\xe5n:'}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"    iframerpc?action=issueToken&response loginGoogle.html  \n"})}),"\n",(0,r.jsx)(t.p,{children:'Anv\xe4nd musen h\xf6gerklicka p\xe5 kontextmenyn f\xf6r att "kopiera som cURL" b\xe5da dessa url och klistra in dem i en vanlig textredigerare\r\n\xa0\r\n6. Klicka p\xe5 "Logga inERDDAP"Knapp och "kopia som cURL" l\xe4nken som ser ut:'}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"    login.html  \n"})}),"\n",(0,r.jsxs)(t.p,{children:["och klistra in denna tredjecurlkomma in i textfilen.\r\n\xa0\r\n7. I textfilen har du nu 3 rader som f\xf6ljande, d\xe4r du har loggat in i enERDDAP\u2122Server p\xe5 ' * ",(0,r.jsx)(t.a,{href:"https://host.somewhere.com/erddap",children:"https://host.somewhere.com/erddap"}),' * ". Den f\xf6rstacurlkommandot f\xe5r din anv\xe4ndarprofil i "login\\_hint" och genererar en "id\\_token". Den andra anv\xe4nder id\\_token f\xf6r att logga in p\xe5 Google, och den tredje loggar sedan in f\xf6r attERDDAP.']}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"    curl 'https://accounts.google.com/o/oauth2/iframerpc?action=issueToken&response\\\\_type=token%20id\\\\_token&scope=openid%20profile%20email&client\\\\_id=ABCDEFG.apps.googleusercontent.com&login\\\\_hint=XXXXXXXXXX&ss\\\\_domain=https%3A%2F%2Fhost.somewhere.com&origin=https%3A%2F%2Fhost.somewhere.com' --2.0 -H 'Host: accounts.google.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://accounts.google.com/o/oauth2/iframe' -H 'Cookie: lotsofcookiestuff' -H 'Connection: keep-alive' curl 'https://host.somewhere.com/erddap/loginGoogle.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' --data 'idtoken=HUGELONGIDTOKEN' curl 'https://host.somewhere.com/erddap/login.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1'\n"})}),"\n",(0,r.jsxs)(t.ol,{start:"8",children:["\n",(0,r.jsx)(t.li,{children:"Ovanst\xe5ende 3 rader, n\xe4r du k\xf6rs sekventiellt fr\xe5n en kommandorad, loggar du in dig iERDDAP. F\xf6r att kunna anv\xe4nda dessa i ett manus m\xe5ste du f\xe5nga id\\_token fr\xe5n den f\xf6rsta raden, mata den till den andra raden och skriva en cookie som ska l\xe4sas av efterf\xf6ljande rader.\r\n\xa0"}),"\n",(0,r.jsxs)(t.li,{children:['F\xf6r att utveckla ett manus, k\xf6r den f\xf6rsta (" ',(0,r.jsx)(t.a,{href:"https://accounts.google.com",children:"https://accounts.google.com"}),' )  curllinje exakt som den kopierades fr\xe5n utvecklarverktygen och f\xe5nga svaret (Du kan f\xe5 encurlfel om flaggan "-2.0" bara ta bort den) . I php ser det ut som f\xf6ljande:']}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"    $gcurlstuff=\"curl 'https://accounts.google.com/o/oauth2/iframerpc?action=issueToken&response\\\\_type=token%20id\\\\_token&scope=openid%20profile%20email&client\\\\_id=ABCDEFG.apps.googleusercontent.com&login\\\\_hint=XXXXXXXXXX&ss\\\\_domain=https%3A%2F%2Fhost.somewhere.com&origin=https%3A%2F%2Fhost.somewhere.com' -H 'Host: accounts.google.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://accounts.google.com/o/oauth2/iframe' -H 'Cookie: lotsofcookiestuff' -H 'Connection: keep-alive'\"; //execute the curl command: exec($gcurlstuff,$output,$status); //the response is a json array in $output $response=json\\\\_decode($output\\\\[0\\\\],true); //the part you need is in \"id\\\\_token\": $id\\\\_token=$response\\\\[\"id\\\\_token\"\\\\];\n"})}),"\n",(0,r.jsx)(t.p,{children:'Logga in p\xe5 Google genom att utf\xf6ra den andra raden med $id\\_token, f\xf6rst ta bort "-H" Cookie: saker "" parameter och ist\xe4llet ber\xe4ttacurlF\xf6r att skriva en cookie:'}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"    $glcurlstuff=\"curl 'https://host.somewhere.com/erddap/loginGoogle.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' --data 'idtoken=\".$id\\\\_token.\"' -b cookies.txt -c cookies.txt\" exec($glcurlstuff,$output1,$status);\n"})}),"\n",(0,r.jsx)(t.p,{children:'Logga in tillERDDAP\u2122\xc5terigen ta bort parametern "-H" Cookie: stuff "" och anv\xe4nda den tidigare skriftliga cookien:'}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"    $ecurlstuff=\"curl 'https://host.somewhere.com/erddap/login.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1 -b cookies.txt\"' exec($ecurlstuff,$output2,$status);\n"})}),"\n",(0,r.jsx)(t.p,{children:"Du b\xf6r nu kunna beg\xe4ra data fr\xe5n servern med samma cookie:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"    $curlstuff=\"curl -s 'https://host.somewhere.com/erddap/tabledap/datasetid.csv?variablelist' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1' -b cookies.txt\"; exec($curlstuff,$output3,$status); //$output3 will be data in csv!\n"})})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);