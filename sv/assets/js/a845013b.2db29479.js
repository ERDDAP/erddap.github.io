"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[6791],{10900:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>d,default:()=>u,frontMatter:()=>i,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"server-admin/prometheus","title":"Prometheus","description":"Prometheus Metrics finns p\xe5 /erddap/metri. JVM k\xe4rnm\xe4tningar tillsattes i 2,25 med m\xe5nga ERDDAP\u2122 m\xe4tv\xe4rden som l\xe4ggs till i version 2.26. Om du vill anv\xe4nda m\xe4tv\xe4rdena se till att du \xe4r i minst version 2.26. De standard f\xf6r att aktivera, du kan inaktivera dem genom att l\xe4gga till","source":"@site/i18n/sv/docusaurus-plugin-content-docs/current/server-admin/prometheus.md","sourceDirName":"server-admin","slug":"/server-admin/prometheus","permalink":"/sv/docs/server-admin/prometheus","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/prometheus.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"docSidebar","previous":{"title":"Lokaliserade metadata","permalink":"/sv/docs/server-admin/localized-metadata"},"next":{"title":"Funktion Flaggor","permalink":"/sv/docs/server-admin/feature-flags"}}');var n=r(74848),s=r(28453);const i={sidebar_position:9},d="Prometheus",l={},o=[{value:"Running Prometheus server",id:"running-prometheus-server",level:2},{value:"ERDDAP\u2122 Metrics",id:"erddap-metrics",level:2},{value:"JVM",id:"jvm",level:3},{value:"ERDDAP\u2122 specifika",id:"erddap-specifika",level:3},{value:"ERDDAP _build_info",id:"erddap-_build_info",level:4},{value:"_Flags",id:"_flags",level:4},{value:"Bufferterad Bild",id:"bufferterad-bild",level:4},{value:"http _request_duration_seconds",id:"http-_request_duration_seconds",level:4},{value:"touch_thread_duration_seconds",id:"touch_thread_duration_seconds",level:4},{value:"task_thread_duration_seconds",id:"task_thread_duration_seconds",level:4},{value:"load_datasets_duration_seconds",id:"load_datasets_duration_seconds",level:4},{value:"email_thread_duration_seconds",id:"email_thread_duration_seconds",level:4},{value:"e_count_distribution",id:"e_count_distribution",level:4},{value:"Dataset_count",id:"dataset_count",level:4},{value:"dataset_failed_load_count",id:"dataset_failed_load_count",level:4},{value:"Shed_requests_total",id:"shed_requests_total",level:4},{value:"far_memory_emails_total",id:"far_memory_emails_total",level:4},{value:"far_memory_failures_total",id:"far_memory_failures_total",level:4},{value:"Topo_request_total",id:"topo_request_total",level:4},{value:"Boundary Counters",id:"boundary-counters",level:4}];function m(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"prometheus",children:"Prometheus"})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"https://prometheus.io/",children:"Prometheus Metrics"})," finns p\xe5 /erddap/metri. JVM k\xe4rnm\xe4tningar tillsattes i 2,25 med m\xe5nga ERDDAP\u2122 m\xe4tv\xe4rden som l\xe4ggs till i version 2.26. Om du vill anv\xe4nda m\xe4tv\xe4rdena se till att du \xe4r i minst version 2.26. De standard f\xf6r att aktivera, du kan inaktivera dem genom att l\xe4gga till"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-xml",children:"<usePrometheusMetrics>false</usePrometheusMetrics>\n"})}),"\n",(0,n.jsx)(t.p,{children:"till din setup.xml."}),"\n",(0,n.jsx)(t.p,{children:"Dessa m\xe4tv\xe4rden \xe4r utformade f\xf6r att vara maskinl\xe4sbara. Medan du kan kontrollera metrics-sidan manuellt, f\xf6r djupg\xe5ende \xf6vervakning rekommenderas att du anv\xe4nder en Prometheus-server. En Prometheus-server kommer att lagra historiska m\xe4tv\xe4rden som m\xf6jligg\xf6r mer djupg\xe5ende \xf6vervakning (som priser och f\xf6r\xe4ndringar fr\xe5n tidigare v\xe4rden) Och k\xf6rs ofta med en Grafana-server. Vi tillhandah\xe5ller n\xe5gra f\xf6rbyggda instrumentbr\xe4dor som administrat\xf6rer kan hitta anv\xe4ndbara f\xf6r att komma ig\xe5ng med att \xf6vervaka sina servrar."}),"\n",(0,n.jsx)(t.h2,{id:"running-prometheus-server",children:"Running Prometheus server"}),"\n",(0,n.jsxs)(t.p,{children:["Den b\xe4sta dokumentationen f\xf6r att k\xf6ra \xf6vervakningsstapeln (Prometheus + Grafana) finns i Prometheus ",(0,n.jsx)(t.a,{href:"https://github.com/ERDDAP/erddap/blob/main/docker/prometheus/README.md",children:"L\xe4sme"})," ."]}),"\n",(0,n.jsx)(t.h2,{id:"erddap-metrics",children:"ERDDAP\u2122 Metrics"}),"\n",(0,n.jsx)(t.h3,{id:"jvm",children:"JVM"}),"\n",(0,n.jsxs)(t.p,{children:["ERDDAP\u2122 exporterar ett antal m\xe4tv\xe4rden som du kan hitta anv\xe4ndbart (B\xf6rjar i ERDDAP\u2122 2.25) . F\xf6r allm\xe4n \xf6vervakning av h\xe4lsan hos JVM anv\xe4nder vi de m\xe4tv\xe4rden som samlats in av Prometheus-klienten. Detta inkluderar data om skr\xe4psamling, minnesanv\xe4ndning, tr\xe5dar och mer. F\xf6r mer information se ",(0,n.jsx)(t.a,{href:"https://prometheus.github.io/client_java/instrumentation/jvm/",children:"Prometheus Java Klient JVM dokumentation"})," ."]}),"\n",(0,n.jsx)(t.h3,{id:"erddap-specifika",children:"ERDDAP\u2122 specifika"}),"\n",(0,n.jsxs)(t.p,{children:["Vi exporterar ocks\xe5 ett antal ERDDAP\u2122 specifika m\xe4tv\xe4rden (B\xf6rjar i ERDDAP\u2122 2.26) . Om du vill gr\xe4va i koden kan du hitta de m\xe4tv\xe4rden som samlas in i ",(0,n.jsx)(t.a,{href:"https://github.com/ERDDAP/erddap/blob/main/WEB-INF/classes/gov/noaa/pfel/erddap/util/Metrics.java",children:"Metrics.java"})," ."]}),"\n",(0,n.jsx)(t.h4,{id:"erddap-_build_info",children:"ERDDAP _build_info"}),"\n",(0,n.jsx)(t.p,{children:'Detta \xe4r bygg info f\xf6r ERDDAP\u2122 Server. Den inneh\xe5ller version (major.minor) version_full (major.minor.patch) och deployment_info (anv\xe4nds f\xf6r att ange hur servern distribueras, som "Docker ") .'}),"\n",(0,n.jsx)(t.h4,{id:"_flags",children:"_Flags"}),"\n",(0,n.jsx)(t.p,{children:"Detta \xe4r en info metrisk som visar det aktuella l\xe4get f\xf6r funktionsflaggor. De flesta booleanska konfigurationsalternativ anses vara funktionsflaggor."}),"\n",(0,n.jsx)(t.h4,{id:"bufferterad-bild",children:"Bufferterad Bild"}),"\n",(0,n.jsx)(t.p,{children:"Detta \xe4r en info metrisk som indikerar om grafikacceleration \xe4r tillg\xe4nglig."}),"\n",(0,n.jsx)(t.h4,{id:"http-_request_duration_seconds",children:"http _request_duration_seconds"}),"\n",(0,n.jsx)(t.p,{children:'Detta \xe4r ett histogram av beg\xe4ran svar varaktigheter p\xe5 n\xe5gra sekunder. Etiketterna \xe4r request_type (till exempel griddap, tabledap filer, wms) Dataset_id (om till\xe4mpligt, annars upprepar beg\xe4ran typ) Fil_type (Utg\xe5ngsformat f\xf6r beg\xe4ran t.ex. ".html", ".csv", ".iso19115 ") Lang_code (spr\xe5k f\xf6r beg\xe4ran, eller tom str\xe4ng om standard) status_code ( http statuskod f\xf6r beg\xe4ran t.ex. 200, 302, 404) .'}),"\n",(0,n.jsx)(t.p,{children:"Detta kan anv\xe4ndas f\xf6r att sp\xe5ra f\xf6rfr\xe5gningar av dataset id f\xf6r att best\xe4mma serverns popul\xe4ra dataset. Det kan ocks\xe5 hj\xe4lpa till att identifiera om det finns s\xe4rskilda typer av f\xf6rfr\xe5gningar som \xe4r l\xe5ngsamma p\xe5 din server."}),"\n",(0,n.jsx)(t.h4,{id:"touch_thread_duration_seconds",children:"touch_thread_duration_seconds"}),"\n",(0,n.jsx)(t.p,{children:"Ett histogram av touch tr\xe5d uppgift varaktigheter. De \xe4r m\xe4rkta med framg\xe5ng (sant/falskt) ."}),"\n",(0,n.jsx)(t.h4,{id:"task_thread_duration_seconds",children:"task_thread_duration_seconds"}),"\n",(0,n.jsx)(t.p,{children:"Ett histogram av uppgiftstr\xe5dens varaktigheter. De \xe4r m\xe4rkta med framg\xe5ng (sant/falskt) och task_type (Intetger) ."}),"\n",(0,n.jsx)(t.h4,{id:"load_datasets_duration_seconds",children:"load_datasets_duration_seconds"}),"\n",(0,n.jsx)(t.p,{children:"Ett histogram av varaktighet f\xf6r datasetuppgifter. De \xe4r m\xe4rkta med stora (sant/falskt) ."}),"\n",(0,n.jsx)(t.h4,{id:"email_thread_duration_seconds",children:"email_thread_duration_seconds"}),"\n",(0,n.jsx)(t.p,{children:"Ett histogram av e-posttr\xe5dsuppgifter. De \xe4r m\xe4rkta med framg\xe5ng (sant/falskt) ."}),"\n",(0,n.jsx)(t.h4,{id:"e_count_distribution",children:"e_count_distribution"}),"\n",(0,n.jsx)(t.p,{children:"Ett histogram av e-post per uppgift."}),"\n",(0,n.jsx)(t.h4,{id:"dataset_count",children:"Dataset_count"}),"\n",(0,n.jsx)(t.p,{children:"En m\xe4tning av datam\xe4ngderna, som anges efter varje laddningsdatam\xe4ngdssamtal. Detta \xe4r m\xe4rkt med kategori (rutn\xe4t, bord) ."}),"\n",(0,n.jsx)(t.h4,{id:"dataset_failed_load_count",children:"dataset_failed_load_count"}),"\n",(0,n.jsx)(t.p,{children:"En m\xe4tning av datam\xe4ngderna som misslyckades med att ladda, st\xe4lld efter varje laddningsdatam\xe4ngd."}),"\n",(0,n.jsx)(t.h4,{id:"shed_requests_total",children:"Shed_requests_total"}),"\n",(0,n.jsx)(t.p,{children:"Mottagare av f\xf6rfr\xe5gningar som skedde. Servern kommer att skicka en f\xf6rfr\xe5gan n\xe4r den tror att servern \xe4r l\xe5g p\xe5 minnet. (RAM) och beg\xe4ran skulle orsaka problem. Detta inkluderar inte f\xf6rfr\xe5gningar om felet p\xe5 grund av l\xe5gt RAM- eller diskutrymme under hanteringen av beg\xe4ran."}),"\n",(0,n.jsx)(t.h4,{id:"far_memory_emails_total",children:"far_memory_emails_total"}),"\n",(0,n.jsx)(t.p,{children:"Kontrakt av g\xe5nger servern f\xf6rs\xf6ker skicka ett e-postmeddelande till admin att minnet \xe4r farligt l\xe5gt."}),"\n",(0,n.jsx)(t.h4,{id:"far_memory_failures_total",children:"far_memory_failures_total"}),"\n",(0,n.jsx)(t.p,{children:"Mottagare av f\xf6rfr\xe5gningar som misslyckades p\xe5 grund av att maskinen gick ur minnet. Ofta beror detta p\xe5 att maskinen f\xe5r mycket dyra f\xf6rfr\xe5gningar eller den enskilda beg\xe4ran var exceptionellt stor."}),"\n",(0,n.jsx)(t.h4,{id:"topo_request_total",children:"Topo_request_total"}),"\n",(0,n.jsx)(t.p,{children:"Mottagare av f\xf6rfr\xe5gningar om topo-data. Detta \xe4r m\xe4rkt cache (cached/not_cached) ."}),"\n",(0,n.jsx)(t.h4,{id:"boundary-counters",children:"Boundary Counters"}),"\n",(0,n.jsx)(t.p,{children:"Det finns ocks\xe5 en samling r\xe4knare f\xf6r f\xf6rfr\xe5gningar om gr\xe4nser:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"National_boundaries_request_total"}),"\n",(0,n.jsx)(t.li,{children:"State_boundaries_request_total"}),"\n",(0,n.jsx)(t.li,{children:"River_boundaries_request_total"}),"\n",(0,n.jsx)(t.li,{children:"gshhs_request_total"}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Dessa \xe4r m\xe4rkta med status (grov, framg\xe5ng, kastad) ."})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(m,{...e})}):m(e)}},28453:(e,t,r)=>{r.d(t,{R:()=>i,x:()=>d});var a=r(96540);const n={},s=a.createContext(n);function i(e){const t=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),a.createElement(s.Provider,{value:t},e.children)}}}]);