"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[3052],{28453(e,n,t){t.d(n,{R:()=>a,x:()=>s});var r=t(96540);const d={},i=r.createContext(d);function a(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:a(e.components),r.createElement(i.Provider,{value:n},e.children)}},35027(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"server-admin/mqtt-integration","title":"ERDDAP MQTT Integration","description":"ERDDAP Nu ing\xe5r st\xf6d f\xf6r MQTT-protokollet f\xf6r att underl\xe4tta realtidsdataintag och meddelanden. Denna funktionalitet drivs av open-source  HiveMQ MQTT Kund  och  HiveMQ Community Edition  m\xe4klare bibliotek.","source":"@site/i18n/sv/docusaurus-plugin-content-docs/current/server-admin/mqtt-integration.md","sourceDirName":"server-admin","slug":"/server-admin/mqtt-integration","permalink":"/sv/docs/server-admin/mqtt-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/mqtt-integration.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docSidebar","previous":{"title":"Funktion Flaggor","permalink":"/sv/docs/server-admin/feature-flags"},"next":{"title":"Contributing","permalink":"/sv/docs/category/contributing"}}');var d=t(74848),i=t(28453);const a={},s="ERDDAP MQTT Integration",l={},o=[{value:"ERDDAP Som MQTT-klient",id:"erddap-som-mqtt-klient",level:2},{value:"Konfiguration: <code>EDDTableFromMqtt</code>",id:"konfiguration-eddtablefrommqtt",level:2},{value:"ERDDAP Som MQTT Broker",id:"erddap-som-mqtt-broker",level:2},{value:"G\xf6r det m\xf6jligt f\xf6r den inb\xe4ddade m\xe4klaren",id:"g\xf6r-det-m\xf6jligt-f\xf6r-den-inb\xe4ddade-m\xe4klaren",level:2},{value:"Broker Configuration &amp; Data Directories",id:"broker-configuration--data-directories",level:2},{value:"Anv\xe4nd fall 1: Ingesting Data fr\xe5n MQTT-klienter",id:"anv\xe4nd-fall-1-ingesting-data-fr\xe5n-mqtt-klienter",level:2},{value:"Anv\xe4nd fall 2: Publicera dataset\xe4ndringsmeddelanden",id:"anv\xe4nd-fall-2-publicera-dataset\xe4ndringsmeddelanden",level:2},{value:"Milj\xf6 Variable Parsing in <code>datasets.xml</code>",id:"milj\xf6-variable-parsing-in-datasetsxml",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"erddap-mqtt-integration",children:"ERDDAP MQTT Integration"})}),"\n",(0,d.jsxs)(n.p,{children:["ERDDAP Nu ing\xe5r st\xf6d f\xf6r MQTT-protokollet f\xf6r att underl\xe4tta realtidsdataintag och meddelanden. Denna funktionalitet drivs av open-source ",(0,d.jsxs)(n.a,{href:"https://github.com/hivemq/hivemq-mqtt-client",children:[" ",(0,d.jsx)(n.strong,{children:"HiveMQ MQTT Kund"})," "]})," och ",(0,d.jsxs)(n.a,{href:"https://github.com/hivemq/hivemq-community-edition",children:[" ",(0,d.jsx)(n.strong,{children:"HiveMQ Community Edition"})," "]})," m\xe4klare bibliotek."]}),"\n",(0,d.jsx)(n.p,{children:"ERDDAP kan utnyttja MQTT p\xe5 tv\xe5 prim\xe4ra s\xe4tt:"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Som MQTT-klient:"}),"    ERDDAP kan prenumerera p\xe5 \xe4mnen p\xe5 en befintlig MQTT-m\xe4klare f\xf6r att inta data och skapa dataset i realtid."]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Som MQTT Broker:"}),"    ERDDAP kan vara v\xe4rd f\xf6r sin egen inb\xe4ddade MQTT-m\xe4klare, s\xe5 att externa kunder kan publicera data direkt till den."]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"erddap-som-mqtt-klient",children:"ERDDAP Som MQTT-klient"}),"\n",(0,d.jsxs)(n.p,{children:["ERDDAP kan fungera som en MQTT-klient f\xf6r att prenumerera p\xe5 \xe4mnen p\xe5 en extern eller egen inb\xe4ddad MQTT-m\xe4klare. Detta uppn\xe5s med hj\xe4lp av den nya ",(0,d.jsx)(n.code,{children:"EDDTableFromMqtt"})," datasettyp, som fungerar p\xe5 samma s\xe4tt som den befintliga ",(0,d.jsxs)(n.a,{href:"/docs/server-admin/datasets#eddtablefromhttpget",children:[" ",(0,d.jsx)(n.code,{children:"EDDTableFromHttpGet"})," "]})," dataset."]}),"\n",(0,d.jsxs)(n.p,{children:["F\xf6r n\xe4rvarande st\xf6der klientgenomf\xf6randet endast ",(0,d.jsx)(n.strong,{children:"Prenumerera"})," \xe4mnen."]}),"\n",(0,d.jsxs)(n.h2,{id:"konfiguration-eddtablefrommqtt",children:["Konfiguration: ",(0,d.jsx)(n.code,{children:"EDDTableFromMqtt"})]}),"\n",(0,d.jsxs)(n.p,{children:["F\xf6r att konfigurera en datam\xe4ngd f\xf6r att prenumerera p\xe5 en MQTT-m\xe4klare, definiera en datam\xe4ngd av typ ",(0,d.jsx)(n.code,{children:"EDDTableFromMqtt"})," i din ",(0,d.jsx)(n.code,{children:"datasets.xml"})," fil. F\xf6ljande konfigurationstaggar finns tillg\xe4ngliga inom ",(0,d.jsx)(n.code,{children:"<dataset>"})," Block:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"\x3c!-- Example configuration for an EDDTableFromMqtt dataset in datasets.xml --\x3e\n<dataset type=\"EDDTableFromMqtt\" datasetID=\"mqtt_realtime_data\" active=\"true\">\n\n    \x3c!-- The hostname or IP address of the MQTT broker. --\x3e\n    <serverHost>broker.example.com</serverHost>\n\n    \x3c!-- The port number of the MQTT broker. --\x3e\n    <serverPort>1883</serverPort>\n\n    \x3c!-- A unique identifier for this MQTT client. --\x3e\n    <clientId>erddap-subscriber-1</clientId>\n\n    \x3c!-- The username for broker authentication (optional). --\x3e\n    <username>user</username>\n\n    \x3c!-- The password for broker authentication (optional). --\x3e\n    <password>secret</password>\n\n    \x3c!-- A comma-separated list of MQTT topics to subscribe to. --\x3e\n    <topics>sensor/+/data, another/topic</topics>\n\n    \x3c!-- Set to 'true' to use a secure SSL/TLS connection. Default is 'false'. --\x3e\n    <useSsl>false</useSsl>\n\n    \x3c!-- The session expiry interval in seconds. --\x3e\n    <sessionExpiryInterval>3600</sessionExpiryInterval>\n\n    \x3c!-- The connection timeout in seconds. --\x3e\n    <connectionTimeout>10</connectionTimeout>\n\n    \x3c!-- Set to 'true' to enable automatic reconnection. Default is 'true'. --\x3e\n    <automaticReconnect>true</automaticReconnect>\n\n</dataset>\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"erddap-som-mqtt-broker",children:"ERDDAP Som MQTT Broker"}),"\n",(0,d.jsx)(n.p,{children:"ERDDAP kan k\xf6ra en inb\xe4ddad MQTT-m\xe4klare, som tj\xe4nar tv\xe5 huvudsyften:"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Dataintag:"})," F\xf6r att f\xe5 data publicerad av externa MQTT-klienter f\xf6r att skapa realtidsdata."]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Meddelanden:"})," Att publicera meddelanden om dataset\xe4ndringar."]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"g\xf6r-det-m\xf6jligt-f\xf6r-den-inb\xe4ddade-m\xe4klaren",children:"G\xf6r det m\xf6jligt f\xf6r den inb\xe4ddade m\xe4klaren"}),"\n",(0,d.jsxs)(n.p,{children:["Den inb\xe4ddade MQTT-m\xe4klaren \xe4r inaktiverad som standard. F\xf6r att g\xf6ra det, l\xe4gg till f\xf6ljande flagga f\xf6r att ",(0,d.jsx)(n.code,{children:"setup.xml"})," Fr\xe5n:"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"\x3c!-- Enables the embedded HiveMQ broker. Default is 'false'. --\x3e   <enableMqttBroker> sanning sant </enableMqttBroker>"})}),"\n",(0,d.jsx)(n.h2,{id:"broker-configuration--data-directories",children:"Broker Configuration & Data Directories"}),"\n",(0,d.jsxs)(n.p,{children:["Du kan ange anpassade kataloger f\xf6r m\xe4klarens konfiguration och datafiler i ",(0,d.jsx)(n.code,{children:"setup.xml"})," . Om dessa taggar \xe4r tomma, ERDDAP kommer att anv\xe4nda standardkatalogen som anges av HiveMQ-biblioteket. F\xf6r mer avancerade konfigurationsuppgifter, inklusive loggning och till\xe4gg, v\xe4nligen h\xe4nvisa till den officiella ",(0,d.jsxs)(n.a,{href:"https://github.com/hivemq/hivemq-community-edition/wiki",children:[" ",(0,d.jsx)(n.strong,{children:"HiveMQ Community Edition Wiki"})," "]})," ."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"\x3c!-- The parent directory for all MQTT-related files. --\x3e\n<bigParentDirectory>/opt/erddap/mqtt/</bigParentDirectory>\n\n\x3c!-- The path to the embedded MQTT broker's configuration folder. --\x3e\n<mqttConfigFolder>/opt/erddap/mqtt/conf/</mqttConfigFolder>\n\n\x3c!-- The path to the embedded MQTT broker's data folder. --\x3e\n<mqttDataFolder>/opt/erddap/mqtt/data/</mqttDataFolder>\n"})}),"\n",(0,d.jsx)(n.h2,{id:"anv\xe4nd-fall-1-ingesting-data-fr\xe5n-mqtt-klienter",children:"Anv\xe4nd fall 1: Ingesting Data fr\xe5n MQTT-klienter"}),"\n",(0,d.jsxs)(n.p,{children:["F\xf6r att bygga en realtidsdataset med den inb\xe4ddade m\xe4klaren kan du konfigurera en ",(0,d.jsx)(n.code,{children:"EDDTableFromMqtt"})," Dataset (som beskrivs ovan) inom ",(0,d.jsx)(n.em,{children:"same"})," ERDDAP Till exempel att ansluta till sin egen lokala m\xe4klare. Externa MQTT-klienter kan sedan publicera data till detta ERDDAP m\xe4klare, som ",(0,d.jsx)(n.code,{children:"EDDTableFromMqtt"})," dataset kommer att prenumerera p\xe5 och inta."]}),"\n",(0,d.jsx)(n.h2,{id:"anv\xe4nd-fall-2-publicera-dataset\xe4ndringsmeddelanden",children:"Anv\xe4nd fall 2: Publicera dataset\xe4ndringsmeddelanden"}),"\n",(0,d.jsxs)(n.p,{children:["ERDDAP kan konfigureras f\xf6r att publicera meddelanden om dataset\xe4ndringar (t.ex. uppdateringar eller reloads) ett \xe4mne p\xe5 en MQTT m\xe4klare. F\xf6r det f\xf6rsta, se till att m\xe4klaren \xe4r aktiverad eller en extern \xe4r tillg\xe4nglig. Sedan aktivera meddelandefunktionen i ",(0,d.jsx)(n.code,{children:"setup.xml"})," Fr\xe5n:"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"\x3c!-- Set to 'true' to publish dataset change notifications via MQTT. Default is 'false'. --\x3e   <publishMqttNotif> sanning sant </publishMqttNotif>"})}),"\n",(0,d.jsxs)(n.p,{children:["N\xe4r denna funktion \xe4r aktiverad, ERDDAP anv\xe4nder en intern MQTT-klient f\xf6r att publicera meddelandena. Anslutningsinst\xe4llningarna f\xf6r denna klient kan anpassas i ",(0,d.jsx)(n.code,{children:"setup.xml"})," . Tabellen nedan listar de tillg\xe4ngliga inst\xe4llningarna och deras standardv\xe4rden."]}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Taggar"}),(0,d.jsx)(n.th,{children:"Typ"}),(0,d.jsx)(n.th,{children:"Standardv\xe4rde"}),(0,d.jsx)(n.th,{children:"Beskrivning"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"<mqttServerHost>"})}),(0,d.jsx)(n.td,{children:"Str\xe4ng"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"localhost"})}),(0,d.jsx)(n.td,{children:"M\xe4klaren v\xe4rd f\xf6r att publicera meddelanden till."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"<mqttServerPort>"})}),(0,d.jsx)(n.td,{children:"Int"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"1883"})}),(0,d.jsx)(n.td,{children:"Hamnen i anm\xe4lningsm\xe4klaren."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"<mqttClientId>"})}),(0,d.jsx)(n.td,{children:"Str\xe4ng"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"Erddap-klient"})}),(0,d.jsx)(n.td,{children:"Klient-ID f\xf6r anm\xe4lningsf\xf6rlaget."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"<mqttUserName>"})}),(0,d.jsx)(n.td,{children:"Str\xe4ng"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"Erddap-username"})}),(0,d.jsx)(n.td,{children:"Anv\xe4ndarnamnet f\xf6r anm\xe4lningsf\xf6rlaget."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"<mqttPassword>"})}),(0,d.jsx)(n.td,{children:"Str\xe4ng"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"Erddap-password"})}),(0,d.jsx)(n.td,{children:"L\xf6senordet f\xf6r meddelandeutgivaren."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"<mqttSsl>"})}),(0,d.jsx)(n.td,{children:"Boolean"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"falska l\xf6gner"})}),(0,d.jsx)(n.td,{children:"Anv\xe4nd SSL/TLS f\xf6r anm\xe4lningsanslutningen."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"<mqttKeepAlive>"})}),(0,d.jsx)(n.td,{children:"Int"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"60 60 60 60 60"})}),(0,d.jsx)(n.td,{children:"H\xe5ll-alive intervall p\xe5 n\xe5gra sekunder."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"<mqttCleanStart>"})}),(0,d.jsx)(n.td,{children:"Boolean"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"falska l\xf6gner"})}),(0,d.jsx)(n.td,{children:"B\xf6rja med en ren session (Inget best\xe5ende sessionstillst\xe5nd) ."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"<mqttSessionExpiry>"})}),(0,d.jsx)(n.td,{children:"Int"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"10 10 10 10 10"})}),(0,d.jsx)(n.td,{children:"Session l\xf6per ut intervall p\xe5 n\xe5gra sekunder."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"<mqttConnectionTimeout>"})}),(0,d.jsx)(n.td,{children:"Int"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"10 10 10 10 10"})}),(0,d.jsx)(n.td,{children:"Anslutnings timeout p\xe5 n\xe5gra sekunder."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"<mqttAutomaticReconnect>"})}),(0,d.jsx)(n.td,{children:"Boolean"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sanning sant"})}),(0,d.jsx)(n.td,{children:"\xc5teranslut automatiskt om anslutningen g\xe5r f\xf6rlorad."})]})]})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsxs)(n.h2,{id:"milj\xf6-variable-parsing-in-datasetsxml",children:["Milj\xf6 Variable Parsing in ",(0,d.jsx)(n.code,{children:"datasets.xml"})]}),"\n",(0,d.jsxs)(n.p,{children:["En ny funktion har inf\xf6rts som m\xf6jligg\xf6r anv\xe4ndning av milj\xf6variabler inom ",(0,d.jsx)(n.code,{children:"datasets.xml"})," . Detta \xe4r ",(0,d.jsx)(n.strong,{children:"aktiverat som standard"})," ."]}),"\n",(0,d.jsxs)(n.p,{children:["F\xf6r att inaktivera denna funktionalitet, l\xe4gg till f\xf6ljande flagga f\xf6r att ",(0,d.jsx)(n.code,{children:"setup.xml"})," Fr\xe5n:"]}),"\n",(0,d.jsx)(n.p,{children:"xml"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"<enableEnvParsing> falska l\xf6gner </enableEnvParsing>"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(c,{...e})}):c(e)}}}]);