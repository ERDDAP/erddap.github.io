"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[8404],{28453:(e,i,t)=>{t.d(i,{R:()=>s,x:()=>n});var a=t(96540);const o={},r=a.createContext(o);function s(e){const i=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function n(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),a.createElement(r.Provider,{value:i},e.children)}},44380:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>d,contentTitle:()=>n,default:()=>u,frontMatter:()=>s,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"server-admin/prometheus","title":"Prometeo","description":"metriche di Prometheussono disponibili a /erddap/metrics. Le metriche di base JVM sono state aggiunte in 2,25 con moltiERDDAP\u2122metriche aggiunte nella versione 2.26. Se si desidera utilizzare le metriche assicurarsi di essere in almeno versione 2.26. Essi di default per abilitare, \xe8 possibile disattivarli aggiungendo","source":"@site/i18n/it/docusaurus-plugin-content-docs/current/server-admin/prometheus.md","sourceDirName":"server-admin","slug":"/server-admin/prometheus","permalink":"/it/docs/server-admin/prometheus","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/prometheus.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"docSidebar","previous":{"title":"Metadati locali","permalink":"/it/docs/server-admin/localized-metadata"},"next":{"title":"Contributing","permalink":"/it/docs/category/contributing"}}');var o=t(74848),r=t(28453);const s={sidebar_position:9},n="Prometeo",d={},l=[{value:"Eseguire il server Prometheus",id:"eseguire-il-server-prometheus",level:2},{value:"ERDDAP\u2122metriche",id:"erddapmetriche",level:2},{value:"JVM",id:"jvm",level:3},{value:"ERDDAP\u2122specifico",id:"erddapspecifico",level:3},{value:"ERDDAP_build_info",id:"erddap_build_info",level:4},{value:"caratteristiche_flags",id:"caratteristiche_flags",level:4},{value:"bufferizzato Immagine",id:"bufferizzato-immagine",level:4},{value:"http_request_duration_seconds",id:"http_request_duration_seconds",level:4},{value:"touch_thread_duration_seconds",id:"touch_thread_duration_seconds",level:4},{value:"task_thread_duration_seconds",id:"task_thread_duration_seconds",level:4},{value:"load_datasets_duration_seconds",id:"load_datasets_duration_seconds",level:4},{value:"email_thread_duration_seconds",id:"email_thread_duration_seconds",level:4},{value:"email_count_distribution",id:"email_count_distribution",level:4},{value:"dataset_count",id:"dataset_count",level:4},{value:"dataset_failed_load_count",id:"dataset_failed_load_count",level:4},{value:"capannone_requests_total",id:"capannone_requests_total",level:4},{value:"pericoloso_memory_emails_total",id:"pericoloso_memory_emails_total",level:4},{value:"pericoloso_memory_failures_total",id:"pericoloso_memory_failures_total",level:4},{value:"topo_request_totale",id:"topo_request_totale",level:4},{value:"Controversie Boundary",id:"controversie-boundary",level:4}];function c(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.header,{children:(0,o.jsx)(i.h1,{id:"prometeo",children:"Prometeo"})}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.a,{href:"https://prometheus.io/",children:"metriche di Prometheus"}),"sono disponibili a /erddap/metrics. Le metriche di base JVM sono state aggiunte in 2,25 con moltiERDDAP\u2122metriche aggiunte nella versione 2.26. Se si desidera utilizzare le metriche assicurarsi di essere in almeno versione 2.26. Essi di default per abilitare, \xe8 possibile disattivarli aggiungendo"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-xml",children:"<usePrometheusMetrics>false</usePrometheusMetrics>\n"})}),"\n",(0,o.jsx)(i.p,{children:"al tuo setup.xml."}),"\n",(0,o.jsx)(i.p,{children:"Queste metriche sono progettate per essere leggibili in macchina. Mentre \xe8 possibile controllare manualmente la pagina delle metriche, per il monitoraggio in profondit\xe0 si consiglia di utilizzare un server Prometheus. Un server Prometheus memorizza metriche storiche che consentono un monitoraggio pi\xf9 approfondito (come i tassi e i cambiamenti dei valori passati) , e anche \xe8 spesso eseguito con un server Grafana. Forniamo alcune dashboard precostruite che gli amministratori possono trovare utili per iniziare a monitorare i loro server."}),"\n",(0,o.jsx)(i.h2,{id:"eseguire-il-server-prometheus",children:"Eseguire il server Prometheus"}),"\n",(0,o.jsxs)(i.p,{children:["La migliore documentazione per eseguire lo stack di monitoraggio (Prometeo + Grafana) \xe8 nel Prometeo",(0,o.jsx)(i.a,{href:"https://github.com/ERDDAP/erddap/blob/main/docker/prometheus/README.md",children:"lettura"}),"."]}),"\n",(0,o.jsx)(i.h2,{id:"erddapmetriche",children:"ERDDAP\u2122metriche"}),"\n",(0,o.jsx)(i.h3,{id:"jvm",children:"JVM"}),"\n",(0,o.jsxs)(i.p,{children:["ERDDAP\u2122esporta una serie di metriche che si possono trovare utili (a partire daERDDAP\u21222.25) . Per il monitoraggio generale della salute del JVM utilizziamo le metriche raccolte dal client Prometheus. Questo include i dati sulla raccolta rifiuti, l'uso della memoria, i fili e altro ancora. Per maggiori informazioni vedere",(0,o.jsx)(i.a,{href:"https://prometheus.github.io/client_java/instrumentation/jvm/",children:"PrometeoJavaDocumentazione client JVM"}),"."]}),"\n",(0,o.jsx)(i.h3,{id:"erddapspecifico",children:"ERDDAP\u2122specifico"}),"\n",(0,o.jsxs)(i.p,{children:["Esportiamo anche un certo numero diERDDAP\u2122metriche specifiche (a partire daERDDAP\u21222.26) . Se si desidera scavare nel codice, \xe8 possibile trovare le metriche raccolte in",(0,o.jsx)(i.a,{href:"https://github.com/ERDDAP/erddap/blob/main/WEB-INF/classes/gov/noaa/pfel/erddap/util/Metrics.java",children:"Metrics.java"}),"."]}),"\n",(0,o.jsx)(i.h4,{id:"erddap_build_info",children:"ERDDAP_build_info"}),"\n",(0,o.jsx)(i.p,{children:"Questa \xe8 l'informazione di costruzione perERDDAP\u2122server. Include la versione (major.minor) , versione_full (major.minor.patch) , e la distribuzione_info (usato per indicare come il server viene distribuito, come 'Docker ') ."}),"\n",(0,o.jsx)(i.h4,{id:"caratteristiche_flags",children:"caratteristiche_flags"}),"\n",(0,o.jsx)(i.p,{children:"Questa \xe8 una metrica di informazioni che mostra lo stato attuale delle bandiere di caratteristica. La maggior parte delle opzioni di configurazione booleana sono considerate bandiere di caratteristica."}),"\n",(0,o.jsx)(i.h4,{id:"bufferizzato-immagine",children:"bufferizzato Immagine"}),"\n",(0,o.jsx)(i.p,{children:"Questa \xe8 una metrica di info che indica se l'accelerazione grafica \xe8 disponibile."}),"\n",(0,o.jsx)(i.h4,{id:"http_request_duration_seconds",children:"http_request_duration_seconds"}),"\n",(0,o.jsx)(i.p,{children:"Questo \xe8 un istogramma di durata di risposta richiesta in pochi secondi. Le etichette sono request_type (per esempio grigliadap,tabledap, file, wms) , dataset_id (se applicabile, altrimenti ripete il tipo di richiesta) , file_type (formato di uscita per richiesta ad esempio '.html', '.csv', '.iso19115 ') , lang_code (lingua per la richiesta, o stringa vuota se predefinita) , status_code (httpcodice di stato della richiesta ad esempio 200, 302, 404) ."}),"\n",(0,o.jsx)(i.p,{children:"Questo pu\xf2 essere utilizzato per monitorare le richieste da dataset id per determinare i set di dati popolari del server. Pu\xf2 anche aiutare a identificare se ci sono particolari tipi di richieste che sono lente sul server."}),"\n",(0,o.jsx)(i.h4,{id:"touch_thread_duration_seconds",children:"touch_thread_duration_seconds"}),"\n",(0,o.jsx)(i.p,{children:"Un istogramma di durata del compito del thread touch. Sono etichettati con successo (vero/falso) ."}),"\n",(0,o.jsx)(i.h4,{id:"task_thread_duration_seconds",children:"task_thread_duration_seconds"}),"\n",(0,o.jsx)(i.p,{children:"Un istogramma di durata del thread di compito. Sono etichettati con successo (vero/falso) e task_type (Integer) ."}),"\n",(0,o.jsx)(i.h4,{id:"load_datasets_duration_seconds",children:"load_datasets_duration_seconds"}),"\n",(0,o.jsx)(i.p,{children:"Un istogramma di durata per le attivit\xe0 di dataset di carico. Sono etichettate con il maggiore (vero/falso) ."}),"\n",(0,o.jsx)(i.h4,{id:"email_thread_duration_seconds",children:"email_thread_duration_seconds"}),"\n",(0,o.jsx)(i.p,{children:"Un istogramma di durata delle attivit\xe0 del thread di posta elettronica. Sono etichettati con successo (vero/falso) ."}),"\n",(0,o.jsx)(i.h4,{id:"email_count_distribution",children:"email_count_distribution"}),"\n",(0,o.jsx)(i.p,{children:"Un istogramma di e-mail per compito."}),"\n",(0,o.jsx)(i.h4,{id:"dataset_count",children:"dataset_count"}),"\n",(0,o.jsx)(i.p,{children:"Un indicatore dei set di dati, impostato dopo ogni chiamata dataset di carico. Questo \xe8 etichettato con la categoria (griglia, tavolo) ."}),"\n",(0,o.jsx)(i.h4,{id:"dataset_failed_load_count",children:"dataset_failed_load_count"}),"\n",(0,o.jsx)(i.p,{children:"Un indicatore dei set di dati che non sono riusciti a caricare, impostare dopo ogni chiamata dataset di carico."}),"\n",(0,o.jsx)(i.h4,{id:"capannone_requests_total",children:"capannone_requests_total"}),"\n",(0,o.jsx)(i.p,{children:"Contatore di richieste che sono state sparse. Il server perder\xe0 una richiesta quando ritiene che il server sia basso sulla memoria (RAM) e la richiesta causerebbe problemi. Questo non include richieste di errore dovute a bassa RAM o spazio su disco durante la gestione della richiesta."}),"\n",(0,o.jsx)(i.h4,{id:"pericoloso_memory_emails_total",children:"pericoloso_memory_emails_total"}),"\n",(0,o.jsx)(i.p,{children:"Contro di volte il server tenta di inviare un'e-mail all'amministratore che la memoria \xe8 pericolosamente bassa."}),"\n",(0,o.jsx)(i.h4,{id:"pericoloso_memory_failures_total",children:"pericoloso_memory_failures_total"}),"\n",(0,o.jsx)(i.p,{children:"Contatore di richieste che non sono riuscite a causa della macchina che esce dalla memoria. Spesso questo \xe8 perch\xe9 la macchina sta ricevendo un sacco di richieste costose o la richiesta individuale era eccezionalmente grande."}),"\n",(0,o.jsx)(i.h4,{id:"topo_request_totale",children:"topo_request_totale"}),"\n",(0,o.jsx)(i.p,{children:"Contatore delle richieste di dati di topo. Questa \xe8 la cache etichettata (memorizzato/non registrato) ."}),"\n",(0,o.jsx)(i.h4,{id:"controversie-boundary",children:"Controversie Boundary"}),"\n",(0,o.jsx)(i.p,{children:"C'\xe8 anche una raccolta di contatori per richieste di confini:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Nazionali_produzioni_totale"}),"\n",(0,o.jsx)(i.li,{children:"State_boundaries_request_total"}),"\n",(0,o.jsx)(i.li,{children:"River_boundaries_request_total"}),"\n",(0,o.jsx)(i.li,{children:"gshhs_request_total"}),"\n"]}),"\n",(0,o.jsx)(i.p,{children:"Questi sono etichettati con lo stato (grossolano, successo, gettato) ."})]})}function u(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);