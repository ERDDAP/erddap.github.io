"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[1376],{28863:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"user/AccessToPrivateDatasets","title":"Access to Private Datasets","description":"MoltiERDDAP\u2122le installazioni non hanno abilitato l\'autenticazione e quindi non forniscono alcun modo per gli utenti di effettuare il login, n\xe9 hanno alcun datoset privato.","source":"@site/i18n/it/docusaurus-plugin-content-docs/current/user/AccessToPrivateDatasets.md","sourceDirName":"user","slug":"/user/AccessToPrivateDatasets","permalink":"/it/docs/user/AccessToPrivateDatasets","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/documentation/docs/user/AccessToPrivateDatasets.md","tags":[],"version":"current","frontMatter":{"title":"Access to Private Datasets"},"sidebar":"docSidebar","previous":{"title":"User","permalink":"/it/docs/category/user"},"next":{"title":"NCCSV 1.00","permalink":"/it/docs/user/nccsv-1.00"}}');var n=t(74848),a=t(28453);const s={title:"Access to Private Datasets"},r="Accesso ai Dataset privatiERDDAP\u2122",c={},l=[{value:"Istruzioni aggiornate",id:"updated-instructions",level:2},{value:"Uomo con Browser",id:"humans-with-browsers",level:2},{value:"Scripts",id:"scripts",level:2}];function u(e){const i={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.header,{children:(0,n.jsx)(i.h1,{id:"accesso-ai-dataset-privatierddap",children:"Accesso ai Dataset privatiERDDAP\u2122"})}),"\n",(0,n.jsx)(i.p,{children:"MoltiERDDAP\u2122le installazioni non hanno abilitato l'autenticazione e quindi non forniscono alcun modo per gli utenti di effettuare il login, n\xe9 hanno alcun datoset privato."}),"\n",(0,n.jsx)(i.p,{children:"AlcuniERDDAP\u2122le installazioni hanno attivato l'autenticazione. Attualmente,ERDDAP\u2122supporta solo l'autenticazione tramite account e-mail gestiti da Google, che include account e-mail aNOAAe molte universit\xe0. Se unERDDAP\u2122ha abilitato l'autenticazione, chiunque abbia un account e-mail gestito da Google pu\xf2 accedere, ma avr\xe0 solo accesso ai set di dati privati cheERDDAP\u2122l'amministratore li ha esplicitamente autorizzati ad accedere."}),"\n",(0,n.jsx)(i.h2,{id:"updated-instructions",children:"Istruzioni aggiornate"}),"\n",(0,n.jsxs)(i.p,{children:["Alcune delle informazioni qui sotto sono fuori data. Fino a quando questo viene aggiornato \xe8 possibile utilizzare",(0,n.jsx)(i.a,{href:"https://shospital.github.io/blog/posts/blog-post/erddap_private_dataset.html",children:"questo blog post"}),"per i passi recenti sull'ottenere i dati da un dataset privato con gli script."]}),"\n",(0,n.jsx)(i.h2,{id:"humans-with-browsers",children:"Uomo con Browser"}),"\n",(0,n.jsx)(i.p,{children:"Utenti umani diERDDAP\u2122pu\xf2 accedereERDDAP\u2122in un browser al fine di ottenere l'accesso a dataset privati che sono autorizzati ad accedere."}),"\n",(0,n.jsx)(i.p,{children:"Per accedere a:"}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsx)(i.li,{children:"Clicca sul log in link nella sinistra superiore di qualsiasiERDDAP\u2122pagina web.\r\nSe non c'\xe8 alcun collegamento, ilERDDAP\u2122l'installazione non ha attivato l'autenticazione e non ci sono set di dati privati.\r\n\xa0"}),"\n",(0,n.jsx)(i.li,{children:'Clicca sul pulsante Accedi per accedere al tuo account Google.\r\nIl testo del pulsante dovrebbe cambiare a "Signed in".\r\n\xa0'}),"\n",(0,n.jsxs)(i.li,{children:["Clicca sul AccediERDDAPPulsante.\r\nLa pagina web dovrebbe cambiare per dire Sei registrato come ",(0,n.jsx)(i.em,{children:"il tuo Indirizzo email"})," .\r\nSe non lo fa, attendere 5 secondi e cliccare sul Log inERDDAPPulsante di nuovo.\r\nIn casi estremi, potresti dover aspettare e poi riprovare qualche volta.\r\n\xa0"]}),"\n",(0,n.jsx)(i.li,{children:'Non utilizzare il pulsante Indietro del browser. Utilizzare il "ERDDAP" link in cima a quanto sopra, quindi utilizzare altri link per andare aERDDAP\u2122pagine che ti interessano. Se una pagina web memorizzata nella cache dice che non sei connesso, ricarica la pagina.\r\n\xa0'}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"scripts",children:"Scripts"}),"\n",(0,n.jsx)(i.p,{children:"\\[Questo \xe8 leggermente modificato da informazioni fornite da Lynn DeWitt, che ha fatto il duro lavoro di capire questo. Lynn, grazie mille!\r\nSe avete correzioni o suggerimenti, si prega di e-mail erd.data @ noa.gov .\\]"}),"\n",(0,n.jsx)(i.p,{children:"\xc8 anche possibile accedere aERDDAP\u2122e accedere ai set di dati privati tramite uno script. Ecco un esempio che utilizzacurl:"}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsx)(i.li,{children:"Queste istruzioni presumono che si sta utilizzando un indirizzo gmail in cui l'autenticazione a 2 fattori non \xe8 attivata. Se l'indirizzo gmail principale ha attivato l'autenticazione a 2 fattori, considerare la creazione di un altro indirizzo gmail con l'autenticazione a 2 fattori disattivata.\r\n\xa0"}),"\n",(0,n.jsx)(i.li,{children:"AccediERDDAP\u2122manualmente con l'indirizzo gmail che si desidera utilizzare nel tuo script e accettare eventuali autorizzazioni richieste, quindi eseguire il login completamente.\r\n\xa0"}),"\n",(0,n.jsx)(i.li,{children:"Apri il browser Strumenti di sviluppo e vai alla scheda Rete.\r\n\xa0"}),"\n",(0,n.jsx)(i.li,{children:'Fare clic suERDDAP\u2122"log in" link, quindi il pulsante "Sign in" e scegliere l\'indirizzo email appropriato se richiesto.\r\n\xa0'}),"\n",(0,n.jsx)(i.li,{children:'Dopo che il pulsante "Sign in" cambia a "Signed in", la scheda Developer Tools Network mostra due voci che sembrano le seguenti (esempio da Firefox) :'}),"\n"]}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{children:"    iframerpc?action=issueToken&response loginGoogle.html  \n"})}),"\n",(0,n.jsx)(i.p,{children:'Utilizzare il menu di scelta rapida del mouse per "copiare come cURL" entrambi questi ricci e incollarli in un editor di testo semplice\r\n\xa0\r\n6. Clicca sul "Log inERDDAP" pulsante e "copia come cURL" il link che sembra:'}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{children:"    login.html  \n"})}),"\n",(0,n.jsxs)(i.p,{children:["e incollare questo terzocurlcomando nel file di testo.\r\n\xa0\r\n7. Nel file di testo, ora avrai 3 linee come le seguenti, dove hai effettuato l'accesso in unERDDAP\u2122server in ' * ",(0,n.jsx)(i.a,{href:"https://host.somewhere.com/erddap",children:"https://host.somewhere.com/erddap"}),' * \'. Il primocurlcomando ottiene il tuo profilo utente in "login\\_hint" e genera un "id\\_token". Il secondo utilizza il id\\_token per accedere a Google, e il terzo poi accede aERDDAP.']}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{children:"    curl 'https://accounts.google.com/o/oauth2/iframerpc?action=issueToken&response\\\\_type=token%20id\\\\_token&scope=openid%20profile%20email&client\\\\_id=ABCDEFG.apps.googleusercontent.com&login\\\\_hint=XXXXXXXXXX&ss\\\\_domain=https%3A%2F%2Fhost.somewhere.com&origin=https%3A%2F%2Fhost.somewhere.com' --2.0 -H 'Host: accounts.google.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://accounts.google.com/o/oauth2/iframe' -H 'Cookie: lotsofcookiestuff' -H 'Connection: keep-alive' curl 'https://host.somewhere.com/erddap/loginGoogle.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' --data 'idtoken=HUGELONGIDTOKEN' curl 'https://host.somewhere.com/erddap/login.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1'\n"})}),"\n",(0,n.jsxs)(i.ol,{start:"8",children:["\n",(0,n.jsx)(i.li,{children:"Le 3 linee di cui sopra, quando si esegue sequenzialemente da una riga di comando, si accedeERDDAP. Al fine di utilizzare questi in uno script \xe8 necessario catturare l'id\\_token dalla prima riga, alimentarlo alla seconda riga, e scrivere un cookie da leggere dalle righe successive.\r\n\xa0"}),"\n",(0,n.jsxs)(i.li,{children:["Per sviluppare uno script, eseguire il primo (' ",(0,n.jsx)(i.a,{href:"https://accounts.google.com",children:"https://accounts.google.com"}),' )  curllinea esattamente come \xe8 stato copiato dagli strumenti dello sviluppatore, e catturare la risposta (si pu\xf2 ottenerecurlerrore sulla bandiera "--2.0" basta rimuoverlo) . In php sembra il seguente:']}),"\n"]}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{children:"    $gcurlstuff=\"curl 'https://accounts.google.com/o/oauth2/iframerpc?action=issueToken&response\\\\_type=token%20id\\\\_token&scope=openid%20profile%20email&client\\\\_id=ABCDEFG.apps.googleusercontent.com&login\\\\_hint=XXXXXXXXXX&ss\\\\_domain=https%3A%2F%2Fhost.somewhere.com&origin=https%3A%2F%2Fhost.somewhere.com' -H 'Host: accounts.google.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://accounts.google.com/o/oauth2/iframe' -H 'Cookie: lotsofcookiestuff' -H 'Connection: keep-alive'\"; //execute the curl command: exec($gcurlstuff,$output,$status); //the response is a json array in $output $response=json\\\\_decode($output\\\\[0\\\\],true); //the part you need is in \"id\\\\_token\": $id\\\\_token=$response\\\\[\"id\\\\_token\"\\\\];\n"})}),"\n",(0,n.jsx)(i.p,{children:"Accedi a Google eseguendo la seconda riga utilizzando $id\\_token, prima rimuovendo il parametro \"-H 'Cookie: stuff'\" e invece dicendocurlper scrivere un cookie:"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{children:"    $glcurlstuff=\"curl 'https://host.somewhere.com/erddap/loginGoogle.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' --data 'idtoken=\".$id\\\\_token.\"' -b cookies.txt -c cookies.txt\" exec($glcurlstuff,$output1,$status);\n"})}),"\n",(0,n.jsx)(i.p,{children:"AccediERDDAP\u2122, nuovamente rimuovendo il parametro \"-H 'Cookie: stuff'\" e utilizzando il cookie scritto in precedenza:"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{children:"    $ecurlstuff=\"curl 'https://host.somewhere.com/erddap/login.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1 -b cookies.txt\"' exec($ecurlstuff,$output2,$status);\n"})}),"\n",(0,n.jsx)(i.p,{children:"Ora dovresti essere in grado di richiedere i dati dal server, utilizzando lo stesso cookie:"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{children:"    $curlstuff=\"curl -s 'https://host.somewhere.com/erddap/tabledap/datasetid.csv?variablelist' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1' -b cookies.txt\"; exec($curlstuff,$output3,$status); //$output3 will be data in csv!\n"})})]})}function d(e={}){const{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}},28453:(e,i,t)=>{t.d(i,{R:()=>s,x:()=>r});var o=t(96540);const n={},a=o.createContext(n);function s(e){const i=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),o.createElement(a.Provider,{value:i},e.children)}}}]);