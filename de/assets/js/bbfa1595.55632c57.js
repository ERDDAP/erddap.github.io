"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[2492],{28453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>a});var r=i(96540);const t={},s=r.createContext(t);function d(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),r.createElement(s.Provider,{value:n},e.children)}},83578:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>o,frontMatter:()=>d,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"server-admin/prometheus","title":"Prometheus","description":"Prometheus Metrikenerh\xe4ltlich bei /erddap/metrics. JVM-Kernmetriken wurden in 2.25 mit vielenERDDAP\u2122Metriken in Version 2.26 hinzugef\xfcgt. Wenn Sie die Metriken verwenden m\xf6chten, stellen Sie sicher, dass Sie in mindestens Version 2.26 sind. Sie sind standardm\xe4\xdfig aktiviert, Sie k\xf6nnen sie deaktivieren, indem Sie","source":"@site/i18n/de/docusaurus-plugin-content-docs/current/server-admin/prometheus.md","sourceDirName":"server-admin","slug":"/server-admin/prometheus","permalink":"/de/docs/server-admin/prometheus","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/prometheus.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"docSidebar","previous":{"title":"Lokale Metadaten","permalink":"/de/docs/server-admin/localized-metadata"},"next":{"title":"Contributing","permalink":"/de/docs/category/contributing"}}');var t=i(74848),s=i(28453);const d={sidebar_position:9},a="Prometheus",l={},h=[{value:"Prometheus Server",id:"prometheus-server",level:2},{value:"ERDDAP\u2122Metriken",id:"erddapmetriken",level:2},{value:"JVM",id:"jvm",level:3},{value:"ERDDAP\u2122spezifische",id:"erddapspezifische",level:3},{value:"ERDDAPIch bin nicht da.",id:"erddapich-bin-nicht-da",level:4},{value:"feature_flags",id:"feature_flags",level:4},{value:"gepuffert Bild",id:"gepuffert-bild",level:4},{value:"http_request_duration_Sekunden",id:"http_request_duration_sekunden",level:4},{value:"touch_thread_duration_Sekunden",id:"touch_thread_duration_sekunden",level:4},{value:"Task_thread_duration_Sekunden",id:"task_thread_duration_sekunden",level:4},{value:"last_datasets_duration_seconds",id:"last_datasets_duration_seconds",level:4},{value:"E-Mail_thread_duration_Sekunden",id:"e-mail_thread_duration_sekunden",level:4},{value:"E-Mail-Adresse",id:"e-mail-adresse",level:4},{value:"Datensatz_count",id:"datensatz_count",level:4},{value:"Datensatz_failed_load_count",id:"datensatz_failed_load_count",level:4},{value:"shed_requests_total",id:"shed_requests_total",level:4},{value:"gef\xe4hrlich_memory_emails_total",id:"gef\xe4hrlich_memory_emails_total",level:4},{value:"gef\xe4hrlich_memory_failures_total",id:"gef\xe4hrlich_memory_failures_total",level:4},{value:"topo_request_total",id:"topo_request_total",level:4},{value:"Kundschaftsz\xe4hler",id:"kundschaftsz\xe4hler",level:4}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"prometheus",children:"Prometheus"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://prometheus.io/",children:"Prometheus Metriken"}),"erh\xe4ltlich bei /erddap/metrics. JVM-Kernmetriken wurden in 2.25 mit vielenERDDAP\u2122Metriken in Version 2.26 hinzugef\xfcgt. Wenn Sie die Metriken verwenden m\xf6chten, stellen Sie sicher, dass Sie in mindestens Version 2.26 sind. Sie sind standardm\xe4\xdfig aktiviert, Sie k\xf6nnen sie deaktivieren, indem Sie"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:"<usePrometheusMetrics>false</usePrometheusMetrics>\n"})}),"\n",(0,t.jsx)(n.p,{children:"auf Ihre setup.xml."}),"\n",(0,t.jsx)(n.p,{children:"Diese Metriken sind maschinenlesbar ausgebildet. W\xe4hrend Sie die Metriken-Seite manuell \xfcberpr\xfcfen k\xf6nnen, wird f\xfcr die Tiefen\xfcberwachung empfohlen, einen Prometheus-Server zu verwenden. Ein Prometheus-Server speichert historische Metriken, die mehr in der Tiefen\xfcberwachung erm\xf6glichen (wie Zinsen und \xc4nderungen von fr\xfcheren Werten) , und auch wird oft mit einem Grafana-Server betrieben. Wir bieten einige vorgefertigte Dashboards, die Admins k\xf6nnen n\xfctzlich finden, um gestartete \xdcberwachung ihrer Server."}),"\n",(0,t.jsx)(n.h2,{id:"prometheus-server",children:"Prometheus Server"}),"\n",(0,t.jsxs)(n.p,{children:["Die beste Dokumentation f\xfcr den Betrieb des \xdcberwachungsstapels (Prometheus + Grafana) ist im Prometheus",(0,t.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/blob/main/docker/prometheus/README.md",children:"Gef\xe4llt mir"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"erddapmetriken",children:"ERDDAP\u2122Metriken"}),"\n",(0,t.jsx)(n.h3,{id:"jvm",children:"JVM"}),"\n",(0,t.jsxs)(n.p,{children:["ERDDAP\u2122exportiert eine Reihe von Metriken, die Sie n\xfctzlich finden k\xf6nnen (AnfangERDDAP\u21222.2.2.) . Zur allgemeinen \xdcberwachung der Gesundheit des JVM verwenden wir die von dem Prometheus-Client gesammelten Metriken. Dazu geh\xf6ren Daten \xfcber M\xfcllsammlung, Speichernutzung, Threads und mehr. F\xfcr weitere Informationen siehe",(0,t.jsx)(n.a,{href:"https://prometheus.github.io/client_java/instrumentation/jvm/",children:"PrometheusJavaClient JVM Dokumentation"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"erddapspezifische",children:"ERDDAP\u2122spezifische"}),"\n",(0,t.jsxs)(n.p,{children:["Wir exportieren auch eine Reihe vonERDDAP\u2122spezifische Metriken (AnfangERDDAP\u21222.26) . Wenn Sie in den Code graben m\xf6chten, k\xf6nnen Sie die in",(0,t.jsx)(n.a,{href:"https://github.com/ERDDAP/erddap/blob/main/WEB-INF/classes/gov/noaa/pfel/erddap/util/Metrics.java",children:"Metrics.java"}),"."]}),"\n",(0,t.jsx)(n.h4,{id:"erddapich-bin-nicht-da",children:"ERDDAPIch bin nicht da."}),"\n",(0,t.jsx)(n.p,{children:"Dies ist die Build-Info f\xfcr dieERDDAP\u2122Server. Es enth\xe4lt die Version (Hauptsache) , version_full (Major.minor.patch) , und install_info (verwendet, um anzuzeigen, wie der Server bereitgestellt wird, wie \"Docker ') ."}),"\n",(0,t.jsx)(n.h4,{id:"feature_flags",children:"feature_flags"}),"\n",(0,t.jsx)(n.p,{children:"Dies ist eine Infometrik, die den aktuellen Zustand der Feature-Flags zeigt. Die meisten Boolean Konfigurationsoptionen werden als Feature-Flags betrachtet."}),"\n",(0,t.jsx)(n.h4,{id:"gepuffert-bild",children:"gepuffert Bild"}),"\n",(0,t.jsx)(n.p,{children:"Dies ist eine Infometrie, die anzeigt, ob Grafikbeschleunigung verf\xfcgbar ist."}),"\n",(0,t.jsx)(n.h4,{id:"http_request_duration_sekunden",children:"http_request_duration_Sekunden"}),"\n",(0,t.jsx)(n.p,{children:"Dies ist ein Histogramm der Anforderungsantwortdauern in Sekunden. Die Etiketten sind request_type (z.B. Gridap,tabledap, Dateien, wms) , dataset_id (falls zutreffend, andernfalls wiederholt der Antragstyp) , file_type (Ausgabeformat f\xfcr Anfrage z.B. '.html', '.csv', '.iso19115 ') , lang_code (Sprache f\xfcr die Anfrage oder leeren String, wenn Standardeinstellung) , status_code (httpStatuscode der Anfrage z.B. 200, 302, 404) ."}),"\n",(0,t.jsx)(n.p,{children:"Dies kann verwendet werden, um Anfragen von dataset id zu verfolgen, um die beliebten Datens\xe4tze des Servers zu ermitteln. Es kann auch helfen zu identifizieren, ob es bestimmte Arten von Anfragen, die langsam auf Ihrem Server sind."}),"\n",(0,t.jsx)(n.h4,{id:"touch_thread_duration_sekunden",children:"touch_thread_duration_Sekunden"}),"\n",(0,t.jsx)(n.p,{children:"Ein Histogramm von Ber\xfchrungsfaden-Taskdauern. Sie sind mit Erfolg gekennzeichnet (wahr/falsch) ."}),"\n",(0,t.jsx)(n.h4,{id:"task_thread_duration_sekunden",children:"Task_thread_duration_Sekunden"}),"\n",(0,t.jsx)(n.p,{children:"Ein Histogramm der Arbeitsfadendauern. Sie sind mit Erfolg gekennzeichnet (wahr/falsch) und task_type (intetger) ."}),"\n",(0,t.jsx)(n.h4,{id:"last_datasets_duration_seconds",children:"last_datasets_duration_seconds"}),"\n",(0,t.jsx)(n.p,{children:"Ein Histogramm der Dauer f\xfcr Lastdatens\xe4tze. Sie sind mit gro\xdfen (wahr/falsch) ."}),"\n",(0,t.jsx)(n.h4,{id:"e-mail_thread_duration_sekunden",children:"E-Mail_thread_duration_Sekunden"}),"\n",(0,t.jsx)(n.p,{children:"Ein Histogramm der E-Mail-Gewinde-Aufgabedauern. Sie sind mit Erfolg gekennzeichnet (wahr/falsch) ."}),"\n",(0,t.jsx)(n.h4,{id:"e-mail-adresse",children:"E-Mail-Adresse"}),"\n",(0,t.jsx)(n.p,{children:"Ein Histogramm von E-Mails pro Aufgabe."}),"\n",(0,t.jsx)(n.h4,{id:"datensatz_count",children:"Datensatz_count"}),"\n",(0,t.jsx)(n.p,{children:"Ein Messger\xe4t der Datens\xe4tze, das nach jedem Lastdatensatz-Aufruf gesetzt wird. Dies ist mit Kategorie gekennzeichnet (Gitter, Tisch) ."}),"\n",(0,t.jsx)(n.h4,{id:"datensatz_failed_load_count",children:"Datensatz_failed_load_count"}),"\n",(0,t.jsx)(n.p,{children:"Ein Messger\xe4t der Datens\xe4tze, die nicht geladen wurden, nach jedem Lastdatensatz-Aufruf gesetzt."}),"\n",(0,t.jsx)(n.h4,{id:"shed_requests_total",children:"shed_requests_total"}),"\n",(0,t.jsx)(n.p,{children:"Anzahl der Antr\xe4ge, die vergossen wurden. Der Server vergossen eine Anfrage, wenn er glaubt, dass der Server auf dem Speicher niedrig ist (RAM) und die Anfrage w\xfcrde Probleme verursachen. Dies beinhaltet keine Anfragen, die auf einen geringen RAM- oder Festplattenspeicher w\xe4hrend der Bearbeitung der Anfrage zur\xfcckzuf\xfchren sind."}),"\n",(0,t.jsx)(n.h4,{id:"gef\xe4hrlich_memory_emails_total",children:"gef\xe4hrlich_memory_emails_total"}),"\n",(0,t.jsx)(n.p,{children:"Manchmal versucht der Server, eine E-Mail an den Admin zu senden, dass der Speicher gef\xe4hrlich niedrig ist."}),"\n",(0,t.jsx)(n.h4,{id:"gef\xe4hrlich_memory_failures_total",children:"gef\xe4hrlich_memory_failures_total"}),"\n",(0,t.jsx)(n.p,{children:"Anzahl der Anfragen, die aufgrund der Maschine aus dem Speicher gelaufen sind. Oftmals ist dies, weil die Maschine viele teure Anfragen erh\xe4lt oder die individuelle Anfrage au\xdfergew\xf6hnlich gro\xdf war."}),"\n",(0,t.jsx)(n.h4,{id:"topo_request_total",children:"topo_request_total"}),"\n",(0,t.jsx)(n.p,{children:"Anzahl der Anfragen an Topo-Daten. Dieser Cache ist gekennzeichnet (Cache/not_cached) ."}),"\n",(0,t.jsx)(n.h4,{id:"kundschaftsz\xe4hler",children:"Kundschaftsz\xe4hler"}),"\n",(0,t.jsx)(n.p,{children:"Es gibt auch eine Sammlung von Z\xe4hlern f\xfcr Antr\xe4ge auf Grenzen:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"national_boundaries_request_total"}),"\n",(0,t.jsx)(n.li,{children:"State_boundaries_request_total"}),"\n",(0,t.jsx)(n.li,{children:"Fluss_boundaries_request_total"}),"\n",(0,t.jsx)(n.li,{children:"gshhs_request_total"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Diese sind mit Status gekennzeichnet (grob, erfolgreich, gesessen) ."})]})}function o(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}}}]);