"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[1355],{28453:(e,r,s)=>{s.d(r,{R:()=>a,x:()=>o});var n=s(96540);const i={},t=n.createContext(i);function a(e){const r=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(t.Provider,{value:r},e.children)}},49030:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"server-admin/deploy-install","title":"Installer","description":"Comment faire la configuration initiale deERDDAP\u2122sur votre serveur","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/server-admin/deploy-install.md","sourceDirName":"server-admin","slug":"/server-admin/deploy-install","permalink":"/fr/docs/server-admin/deploy-install","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/deploy-install.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docSidebar","previous":{"title":"Server Administration","permalink":"/fr/docs/category/server-administration"},"next":{"title":"Mise \xe0 jour","permalink":"/fr/docs/server-admin/deploy-update"}}');var i=s(74848),t=s(28453);const a={sidebar_position:1},o="Installer",l={},d=[{value:"Java",id:"java",level:2},{value:"Tomcat",id:"tomcat",level:2},{value:"serveur.xml",id:"serverxml",level:3},{value:"contenu.xml",id:"contentxml",level:3},{value:"Heure d&#39;arr\xeat Apache",id:"apache-timeout",level:3},{value:"M\xe9moire",id:"memory",level:3},{value:"Collecte des ordures",id:"garbage-collection",level:4},{value:"Autorisations",id:"permissions",level:3},{value:"Polices",id:"fonts",level:3},{value:"Essai Tomcat",id:"test-tomcat",level:3},{value:"Des probl\xe8mes avec l&#39;installation de Tomcat ?",id:"troubles-with-the-tomcat-installation",level:3},{value:"ERDDAP\u2122Contenu",id:"erddap-content",level:3},{value:"Autres r\xe9pertoires",id:"other-directory",level:4},{value:"configuration.xml",id:"setupxml",level:3},{value:"Variables d&#39;environnement",id:"environment-variables",level:3},{value:"datasets.xml",id:"datasetsxml",level:3},{value:"Installez le fichier erddap.war",id:"install-the-erddapwar-file",level:3},{value:"ProxyPass",id:"proxypass",level:4},{value:"NGINX",id:"nginx",level:3},{value:"D\xe9marrer Tomcat",id:"start-tomcat",level:3},{value:"EstERDDAP\u2122courir ?",id:"is-erddap-running",level:2},{value:"D\xe9pannage",id:"troubleshooting",level:3},{value:"Probl\xe8me: Ancienne version deJava",id:"trouble-old-version-of-java",level:3},{value:"Probl\xe8me: d\xe9marrage lent Premi\xe8re fois",id:"trouble-slow-startup-first-time",level:3},{value:"Arr\xeat et red\xe9marrage",id:"shut-down-and-restart",level:2},{value:"Des probl\xe8mes ?",id:"trouble",level:2},{value:"Notification par courriel des nouvelles versionsERDDAP",id:"email-notification-of-new-versions-of-erddap",level:2},{value:"Personnaliser",id:"customize",level:2}];function c(e){const r={a:"a",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"installer",children:"Installer"})}),"\n",(0,i.jsx)(r.p,{children:"Comment faire la configuration initiale deERDDAP\u2122sur votre serveur"}),"\n",(0,i.jsx)(r.p,{children:"ERDDAP\u2122peut fonctionner sur n'importe quel serveur qui prend en chargeJavaet Tomcat (et d'autres serveurs d'applications comme Jetty, mais nous ne les supportons pas) .ERDDAP\u2122a \xe9t\xe9 test\xe9 sur Linux (y compris sur Amazon's AWS) , Mac et les ordinateurs Windows."}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Amazonie"})," -- Si vous installezERDDAP\u2122sur une instance Amazon Web Services EC2, voir",(0,i.jsx)(r.a,{href:"/docs/server-admin/additional-information#amazon",children:"Aper\xe7u des services Web Amazon"}),"D'abord."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Coq"})," -- Axiom offre maintenant",(0,i.jsx)(r.a,{href:"https://hub.docker.com/u/axiom/",children:"ERDDAP\u2122dans un contenant Docker"}),"et IOOS offre maintenant",(0,i.jsx)(r.a,{href:"https://ioos.github.io/erddap-gold-standard/index.html",children:"Guide de d\xe9marrage rapide pourERDDAP\u2122dans un contenant Docker"}),".\nC'est le standard.ERDDAP\u2122l'installation, mais Axiom l'a mis dans un conteneur en fonte.\nSi vous utilisez d\xe9j\xe0 Docker, vous pr\xe9f\xe9rerez probablement la version Docker.\nSi vous n'utilisez pas d\xe9j\xe0 Docker, nous ne le recommandons g\xe9n\xe9ralement pas.\nSi vous avez choisi d'installerERDDAP\u2122via Docker, nous n'offrons aucun support pour le processus d'installation.\nOn n'a pas encore travaill\xe9 avec Docker. Si vous travaillez avec cela, envoyez-nous vos commentaires."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Linux et Macs"})," --ERDDAP\u2122fonctionne bien sur les ordinateurs Linux et Mac. Voir les instructions ci-dessous."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Fen\xeatres"})," -- Windows est parfait pour les testsERDDAP\u2122et \xe0 usage personnel (voir les instructions ci-dessous) , mais nous ne recommandons pas l'utiliser pour le publicERDDAPPar. CourirERDDAP\u2122sous Windows peut avoir des probl\xe8mes: notamment,ERDDAP\u2122peut \xeatre incapable de supprimer et/ou renommer les fichiers rapidement. Ceci est probablement d\xfb au logiciel antivirus (Par exemple, de McAfee et Norton) qui v\xe9rifie les fichiers pour les virus. Si vous rencontrez ce probl\xe8me (qui peut \xeatre vu par des messages d'erreur dans le",(0,i.jsx)(r.a,{href:"/docs/server-admin/additional-information#log",children:"Log.txt"}),"fichier comme \xab Impossible de supprimer ... \xbb) , modifier les param\xe8tres du logiciel antivirus peut att\xe9nuer partiellement le probl\xe8me. Ou envisager d'utiliser un serveur Linux ou Mac \xe0 la place."]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"La normeERDDAP\u2122instructions d'installation pour les ordinateurs Linux, Mac et Windows sont:"})}),"\n",(0,i.jsxs)(r.ol,{start:"0",children:["\n",(0,i.jsx)(r.li,{children:"Assurez-vous que toutes les d\xe9pendances sont install\xe9es. Sur les machines non Windows (Linux et Mac) Tu as besoin de Csh."}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"java",children:"Java"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.a,{href:"#java",children:"PourERDDAP\u2122v2.19+, mis en placeJava21. Le Pr\xe9sident."}),"\nPour des raisons de s\xe9curit\xe9, il est presque toujours pr\xe9f\xe9rable d'utiliser la derni\xe8re version deJava21. Le Pr\xe9sident.\nVeuillez t\xe9l\xe9charger et installer la derni\xe8re version de\n",(0,i.jsx)(r.a,{href:"https://adoptium.net/temurin/releases/?version=21",children:"OpenJDK d'Adoptium (T\xe9murine) 21 (LTS) "}),". Pour v\xe9rifier l'installation, tapez \"/",(0,i.jsx)(r.em,{children:"javaJreBinDirectory"}),'/java -version", par exemple\n/usr/local/jdk-21.0.3+9/jre/bin/java -version']}),"\n",(0,i.jsx)(r.p,{children:"ERDDAP\u2122fonctionne avecJavad'autres sources, mais nous recommandons Adoptium parce qu'il est le principal, soutenu par la communaut\xe9, gratuit (comme dans la bi\xe8re et le discours) desJava21 qui offre un soutien \xe0 long terme (mises \xe0 jour gratuites pour de nombreuses ann\xe9es apr\xe8s la publication initiale) . Pour des raisons de s\xe9curit\xe9, veuillez mettre \xe0 jour votreERDDAPversion deJavap\xe9riodiquement comme nouvelles versions deJava21 sont disponibles aupr\xe8s d'Adoptium."}),"\n",(0,i.jsx)(r.p,{children:"ERDDAP\u2122a \xe9t\xe9 test\xe9 et largement utilis\xe9 avec 21, pas d'autres versions. Pour diverses raisons, nous ne testons ni ne supportons d'autres versions deJava.\n\xa0"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"tomcat",children:"Tomcat"}),"\n",(0,i.jsxs)(r.ol,{start:"2",children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"#tomcat",children:"Mise en place"})," ",(0,i.jsx)(r.a,{href:"https://tomcat.apache.org",children:"Tomcat"}),".\nTomcat est le plus utilis\xe9JavaServeur d'application, qui estJavalogiciels qui se situent entre les services r\xe9seau du syst\xe8me d'exploitation etJavalogiciel serveur commeERDDAP\u2122. C'est un logiciel libre et ouvert (R\xc9SULTATS) ."]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"Vous pouvez utiliser un autreJavaServeur d'applications (Par exemple, Jetty) , mais nous testons seulement avec et soutenir Tomcat.\n\xa0"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["T\xe9l\xe9chargez Tomcat et d\xe9ballez-le sur votre serveur ou PC.\nPour des raisons de s\xe9curit\xe9, il est presque toujours pr\xe9f\xe9rable d'utiliser la derni\xe8re version de Tomcat 10 (version 9 et ci-dessous ne sont pas acceptables) qui est con\xe7u pour fonctionner avecJava21 ou plus r\xe9cent. Ci-dessous, le r\xe9pertoire Tomcat sera appel\xe9 ",(0,i.jsx)(r.em,{children:"tomcat"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["Avertissement ! Si vous avez d\xe9j\xe0 un Tomcat ex\xe9cutant une autre application web (en particulier) , nous vous recommandons d'installerERDDAP\u2122en",(0,i.jsx)(r.a,{href:"/docs/server-admin/additional-information#second-tomcat",children:"un deuxi\xe8me Tomcat"}),"Parce queERDDAP\u2122a besoin de diff\xe9rents param\xe8tres Tomcat et ne devrait pas avoir \xe0 faire face \xe0 d'autres applications pour la m\xe9moire."]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Sur Linux,",(0,i.jsx)(r.a,{href:"https://tomcat.apache.org/download-10.cgi",children:'t\xe9l\xe9charger le "Core" "tar.gzDistribution Tomcat'}),"et d\xe9baller. Nous vous recommandons de le d\xe9baller dans /usr/local."]}),"\n",(0,i.jsxs)(r.li,{children:["Sur un Mac, Tomcat est probablement d\xe9j\xe0 install\xe9 dans /Library/Tomcat, mais devrait le mettre \xe0 jour \xe0 la derni\xe8re version de Tomcat 10.\nSi vous le t\xe9l\xe9chargez,",(0,i.jsx)(r.a,{href:"https://tomcat.apache.org/download-10.cgi",children:'t\xe9l\xe9charger le "Core" "tar.gzDistribution Tomcat'}),"et d\xe9baller dans /Biblioth\xe8que/Tomcat."]}),"\n",(0,i.jsxs)(r.li,{children:["Sous Windows, vous pouvez",(0,i.jsx)(r.a,{href:"https://tomcat.apache.org/download-10.cgi",children:'t\xe9l\xe9charger la distribution "Core" "zip" Tomcat'}),'  (qui ne g\xe2che pas le registre Windows et que vous contr\xf4lez depuis une ligne de commande DOS) et le d\xe9compresser dans un r\xe9pertoire appropri\xe9. (Pour le d\xe9veloppement, nous utilisons la distribution "Core" "zip". Nous faisons un r\xe9pertoire /programs et le d\xe9ballons l\xe0-bas.) Ou vous pouvez t\xe9l\xe9charger la distribution "Core" "64 bits Windows zip", qui comprend plus de fonctionnalit\xe9s. Si la distribution est un installateur Windows, il mettra probablement Tomcat dans, par exemple, /Program Files/apache-tomcat-10.0.23 .\n\xa0']}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"serverxml",children:"serveur.xml"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"#serverxml",children:"serveur.xml"}),"- Dans le fichier ",(0,i.jsx)(r.em,{children:"tomcat"}),"/conf/server.xml, il y a deux changements que vous devriez apporter \xe0 chacun des deux<Connector> tags- un pour"]}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:'        <Connector port="8080" \n'})}),"\n",(0,i.jsx)(r.p,{children:"et un pour"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:'        <Conector port="8443"\n'})}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:"(Recommandation) Augmenter la valeur du param\xe8tre connectionTimeout, peut-\xeatre \xe0 300000 (millisecondes)   (qui est 5 minutes) ."}),"\n",(0,i.jsx)(r.li,{children:"(Recommandation) Ajouter un nouveau param\xe8tre: d\xe9tendueQueryChars\\[\\]|\" Ceci est facultatif et l\xe9g\xe8rement moins s\xe9curis\xe9, mais supprime la n\xe9cessit\xe9 pour les utilisateurs d'encoder ces caract\xe8res en pourcentage lorsqu'ils se produisent dans les param\xe8tres de l'URL de demande d'un utilisateur.\n\xa0"}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"contentxml",children:"contenu.xml"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["contexte.xml -- Ressources Cache - Dans ",(0,i.jsx)(r.em,{children:"tomcat"}),'/conf/context.xml, juste avant le</Context> tag, modifier l\'\xe9tiquette Ressources (ou l\'ajouter si elle n\'est pas d\xe9j\xe0 l\xe0) pour d\xe9finir le cache Param\xe8tre MaxSize \xe0 80000:\n<Ressources en cacheAllowed="true" cacheMaxSize="80000" />\nCela \xe9vite de nombreuses mises en garde en catalina. Tout commence par\n"AVOIR\\[principale\\]org.apache.catalina.webresources.Cache.getResource Impossible d\'ajouter la ressource \xe0\\[/WEB-INF/classes/...]"\n\xa0']}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"apache-timeout",children:"Heure d'arr\xeat Apache"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Sur les ordinateurs Linux, modifiez les param\xe8tres de timeout d'Apache de sorte que les requ\xeates d'utilisateurs qui prennent beaucoup de temps ne s'arr\xeatent pas (avec ce qui appara\xeet souvent comme une erreur \"Proxy\" ou \"Bad Gateway\") . En tant qu'utilisateur racine :","\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:"Modifier l'Apachehttpfichier d.conf (g\xe9n\xe9ralement dans /etc/httpd/conf/) :\nModifier l'actuel<R\xe9glage de l'heure de sortie et de l'heure; (ou en ajouter un \xe0 la fin du fichier) \xe0 3600 (secondes) , au lieu des 60 ou 120 secondes par d\xe9faut.\nModifier l'actuel<ProxyTimeout > r\xe9glage (ou en ajouter un \xe0 la fin du fichier) \xe0 3600 (secondes) , au lieu des 60 ou 120 secondes par d\xe9faut."}),"\n",(0,i.jsx)(r.li,{children:"Red\xe9marrer Apache: /usr/sbin/apachectl -K gracieux (mais parfois il est dans un r\xe9pertoire diff\xe9rent) .\n\xa0"}),"\n"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Recommandation en mati\xe8re de s\xe9curit\xe9 : Voir",(0,i.jsx)(r.a,{href:"https://tomcat.apache.org/tomcat-10.0-doc/security-howto.html",children:"les pr\xe9sentes instructions"}),"pour augmenter la s\xe9curit\xe9 de votre installation Tomcat, en particulier pour les serveurs publics.\n\xa0"]}),"\n",(0,i.jsxs)(r.li,{children:['Pour publicERDDAP\u2122installations sur Linux et Macs, il est pr\xe9f\xe9rable de configurer Tomcat (le programme) comme appartenant \xe0 l\'utilisateur "tomcat" (un utilisateur s\xe9par\xe9 avec des permissions limit\xe9es et qui',(0,i.jsx)(r.a,{href:"https://unix.stackexchange.com/questions/56765/creating-an-user-without-a-password",children:"n'a pas de mot de passe"}),") . Ainsi, seul le super utilisateur peut passer \xe0 agir en tant que tomcat utilisateur. Cela rend impossible pour les pirates de se connecter \xe0 votre serveur en tant que tomcat utilisateur. Et en tout cas, vous devriez le faire de sorte que l'utilisateur tomcat a des permissions tr\xe8s limit\xe9es sur le syst\xe8me de fichiers du serveur (read+write+execute privil\xe8ges pour l'arborescence de r\xe9pertoire apache-tomcat et<bigParentDirectory> et privil\xe8ges en lecture seule pour les r\xe9pertoires avec des donn\xe9es quiERDDAP\u2122a besoin d'acc\xe8s \xe0).","\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Vous pouvez cr\xe9er le compte utilisateur tomcat (qui n'a pas de mot de passe) en utilisant la commande\nsudo useradd tomcat -s /bin/bash -p '\\* '"}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Vous pouvez passer \xe0 travailler comme utilisateur tomcat en utilisant la commande\nsudo su - tomcat\n(Il vous demandera le mot de passe du superutilisateur pour obtenir la permission de le faire.)"}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Vous pouvez arr\xeater de travailler comme utilisateur tomcat en utilisant la commande\nsortie"}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:'Faites la plupart du reste du Tomcat etERDDAP\u2122instructions de configuration en tant qu\'utilisateur "tomcat". Plus tard, lancez les scripts startup.sh et stopdown.sh en tant qu\'utilisateur "tomcat" afin que Tomcat ait la permission d\'\xe9crire dans ses fichiers journaux.'}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Apr\xe8s avoir d\xe9ball\xe9 Tomcat, du parent du r\xe9pertoire apache-tomcat:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Changer la propri\xe9t\xe9 de l'arborescence du r\xe9pertoire apache-tomcat pour l'utilisateur tomcat.\ntomcat tomcat apache-tomcat-",(0,i.jsx)(r.em,{children:"10.0.23"}),"\n(mais remplacez le nom r\xe9el de votre r\xe9pertoire tomcat) ."]}),"\n",(0,i.jsxs)(r.li,{children:["Modifier le \"groupe\" pour \xeatre tomcat, votre nom d'utilisateur ou le nom d'un petit groupe qui inclut tomcat et tous les administrateurs de Tomcat/ERDDAP, par exemple,\n",(0,i.jsx)(r.em,{children:"Votre Nom d'utilisateur"})," apache-tomcat-",(0,i.jsx)(r.em,{children:"10.0.23"})]}),"\n",(0,i.jsxs)(r.li,{children:["Changer les permissions pour que tomcat et le groupe aient lu, \xe9crit, ex\xe9cut\xe9 des privil\xe8ges, par exemple.\nChmod -R ug+rwx apache-tomcat-",(0,i.jsx)(r.em,{children:"10.0.23"})]}),"\n",(0,i.jsxs)(r.li,{children:["Supprimer les permissions d'un autre utilisateur pour lire, \xe9crire ou ex\xe9cuter :\n-R o-rwx apache-tomcat-",(0,i.jsx)(r.em,{children:"10.0.23"}),"\nCeci est important, car il emp\xeache d'autres utilisateurs de lire des informationsERDDAP\u2122configurer les fichiers."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"memory",children:"M\xe9moire"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"D\xe9finir les variables d'environnement de Tomcat"}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["Sur Linux et Macs :\nCr\xe9er un fichier ",(0,i.jsx)(r.em,{children:"tomcat"}),"/bin/setenv.sh (ou dans Red Hat Enterprise Linux\\[RHEL\\], \xe9diter ~tomcat/conf/tomcat10.conf) pour d\xe9finir les variables d'environnement de Tomcat. Ce fichier sera utilis\xe9 par ",(0,i.jsx)(r.em,{children:"tomcat"}),"/bin/startup.sh et stopdown.sh. Le fichier devrait contenir quelque chose comme :"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"    export JAVA\\\\_HOME=/usr/local/jdk-21.0.3+9  \n    export JAVA\\\\_OPTS='-server -Djava.awt.headless=true -Xmx1500M -Xms1500M'  \n    export TOMCAT\\\\_HOME=/usr/local/apache-tomcat-_10.0.23_  \n    export CATALINA\\\\_HOME=/usr/local/apache-tomcat-_10.0.23_\n"})}),"\n",(0,i.jsxs)(r.p,{children:["(mais remplacez les noms de r\xe9pertoires de votre ordinateur) .\n(Si vous avez d\xe9j\xe0 d\xe9fini JRE\\_HOME, vous pouvez supprimer cela.)",(0,i.jsx)(r.br,{}),"\n","Sur Macs, vous n'avez probablement pas besoin de d\xe9finir JAVA\\_HOME."]}),"\n",(0,i.jsxs)(r.p,{children:["Sous Windows :\nCr\xe9ez un fichier ",(0,i.jsx)(r.em,{children:"tomcat"}),"\\bin\\setenv.bat pour d\xe9finir les variables d'environnement de Tomcat. Ce fichier sera utilis\xe9 par ",(0,i.jsx)(r.em,{children:"tomcat"}),"\\bin\\startup.bat etshutdown.bat. Le fichier devrait contenir quelque chose comme :"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:'    SET "JAVA\\\\_HOME=\\\\_someDirectory_\\\\jdk-21.0.3+9"  \n    SET "JAVA\\\\_OPTS=-server -Xmx1500M -Xms1500M"  \n    SET "TOMCAT\\\\_HOME=\\\\Program Files\\\\apache-tomcat-_10.0.23_"  \n    SET "CATALINA\\\\_HOME=\\\\Program Files\\\\apache-tomcat-_10.0.23_"\n'})}),"\n",(0,i.jsx)(r.p,{children:'(mais remplacez les noms de r\xe9pertoires de votre ordinateur) .\nSi c\'est juste pour les tests locaux, supprimer "-serveur".\n(Si vous avez d\xe9j\xe0 d\xe9fini JRE\\_HOME, vous pouvez supprimer cela.)'}),"\n",(0,i.jsx)(r.p,{children:"Les param\xe8tres de m\xe9moire -Xmx et -Xms sont importants carERDDAP\u2122fonctionne mieux avec plus de m\xe9moire. Toujours d\xe9finir -Xms \xe0 la m\xeame valeur que -Xmx."}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Pour les syst\xe8mes d'exploitation 32 bits et 32 bitsJava:\n64 bitsJavaest beaucoup mieux que 32 bitsJavamais 32 bitsJavafonctionnera aussi longtemps que le serveur n'est pas vraiment occup\xe9. La m\xe9moire plus physique dans le serveur le mieux: 4 Go+ est vraiment bon, 2 Go est correct, moins n'est pas recommand\xe9. Avec 32 bitsJava, m\xeame avec une m\xe9moire physique abondante, Tomcat etJavane fonctionnera pas si vous essayez de r\xe9gler -Xmx beaucoup plus de 1500M (1200M sur certains ordinateurs) . Si votre serveur a moins de 2 Go de m\xe9moire, r\xe9duisez la valeur -Xmx (dans 'M'egaBytes) \xe0 la moiti\xe9 de la m\xe9moire physique de l'ordinateur."}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Pour les syst\xe8mes d'exploitation 64 bits et 64 bitsJava:\n64 bitsJavafonctionnera uniquement sur un syst\xe8me d'exploitation 64 bits."}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"AvecJava8, vous devez ajouter \\-d64 au param\xe8tre Tomcat CATALINA\\_OPTS dans setenv.bat"}),"\n",(0,i.jsx)(r.li,{children:'AvecJava21, vous choisissez 64 bitsJavalorsque vous t\xe9l\xe9chargez une version deJavamarqu\xe9e "64 bits".'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["Avec 64 bitsJava, Tomcat etJavapeut utiliser des param\xe8tres tr\xe8s \xe9lev\xe9s -Xmx et -Xms. Plus la m\xe9moire physique du serveur est bonne. Comme suggestion simpliste: nous vous recommandons de d\xe9finir -Xmx et -Xms (dans 'M'egaBytes) \xe0 1/2 (ou moins) de la m\xe9moire physique de l'ordinateur. Tu peux voir si Tomcat,JavaetERDDAP\u2122sont en effet en mode 64 bits en cherchant \"bit\", dansERDDAP's Daily Report email ou dans le ",(0,i.jsx)(r.em,{children:"bigParentDirectory"}),"/logs/",(0,i.jsx)(r.a,{href:"/docs/server-admin/additional-information#log",children:"Log.txt"}),"fichier (",(0,i.jsx)(r.em,{children:"bigParentDirectory"})," est sp\xe9cifi\xe9 dans",(0,i.jsx)(r.a,{href:"#setupxml",children:"configuration.xml"}),") ."]}),"\n",(0,i.jsx)(r.h4,{id:"garbage-collection",children:"Collecte des ordures"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["EnERDDAP\u2122's",(0,i.jsx)(r.a,{href:"/docs/server-admin/additional-information#log",children:"Log.txt"}),"fichier, vous verrez beaucoup \"GC (D\xe9faut de r\xe9partition) \" des messages.\nCe n'est g\xe9n\xe9ralement pas un probl\xe8me. C'est un message fr\xe9quent d'un fonctionnement normalJavadisant qu'il vient de finir une petite collecte d'ordures parce qu'il manquait de place \xe0 Eden (de la sectionJavatas pour objets tr\xe8s jeunes) . Habituellement, le message vous montre ",(0,i.jsx)(r.em,{children:"memoryUseAvant"}),"\\->",(0,i.jsx)(r.em,{children:"memoryUseApr\xe8s"}),". Si ces deux chiffres sont rapproch\xe9s, cela signifie que la collecte des ordures n'\xe9tait pas productive. Le message n'est qu'un signe d'ennui s'il est tr\xe8s fr\xe9quent (toutes les quelques secondes) , pas productif, et les chiffres sont grands et ne croissent pas, ce qui indique ensemble queJavaa besoin de plus de m\xe9moire, peine \xe0 lib\xe9rer la m\xe9moire, et est incapable de lib\xe9rer la m\xe9moire. Cela peut se produire pendant une p\xe9riode stressante, puis partir. Mais s'il persiste, c'est un signe de trouble."]}),"\n",(0,i.jsxs)(r.li,{children:["Si vous voyez java.lang.OutOfMemoryError est dansERDDAP\u2122's",(0,i.jsx)(r.a,{href:"/docs/server-admin/additional-information#log",children:"Log.txt"}),"fichier, voir",(0,i.jsx)(r.a,{href:"/docs/server-admin/additional-information#outofmemoryerror",children:"De m\xe9moire"}),"pour des conseils sur la fa\xe7on de diagnostiquer et r\xe9soudre les probl\xe8mes.\n\xa0"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"permissions",children:"Autorisations"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"#permissions",children:"Sur Linux et Macs, changez les permissions"}),"de tous\\*.shfichiers dans ",(0,i.jsx)(r.em,{children:"tomcat"}),"/bin/ pour \xeatre ex\xe9cutables par le propri\xe9taire, par exemple, avec"]}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"    chmod +x \\\\*.sh  \n"})}),"\n",(0,i.jsx)(r.h3,{id:"fonts",children:"Polices"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"#fonts",children:"Polices pour images:"}),"Nous pr\xe9f\xe9rons fortement le libre",(0,i.jsx)(r.a,{href:"https://dejavu-fonts.github.io/",children:"Polices DejaVu"}),"\xe0 l'autreJavapolices. L'utilisation de ces polices est fortement recommand\xe9e mais pas n\xe9cessaire."]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"Si vous choisissez de ne pas utiliser les polices DejaVu, vous devez changer le param\xe8tre fontFamily dans setup.xml pour<fontFamily>SansSerif</fontFamille>, qui est disponible avec tousJavadistributions. Si vous d\xe9finissez fontFamille au nom d'une police qui n'est pas disponible,ERDDAP\u2122ne chargera pas et imprimera une liste des polices disponibles dans le fichier log.txt. Vous devez utiliser une de ces polices."}),"\n",(0,i.jsx)(r.p,{children:"Si vous choisissez d'utiliser les polices DejaVu, assurez-vous que le param\xe8tre fontFamily dans setup.xml est<police Famille>DejaVu Sans</fontFamille>."}),"\n",(0,i.jsxs)(r.p,{children:["Pour installer les polices DejaVu, veuillez t\xe9l\xe9charger",(0,i.jsx)(r.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:s(62900).A+"",children:"DejaVuFonts.zip"}),"  (5 522 795 octets, MD5=33E1E61FAB06A547851ED308B4FFEF42) et d\xe9compresser les fichiers de police vers un r\xe9pertoire temporaire."]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Sur Linux :","\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Pour Linux AdoptiumJavadistributions, voir",(0,i.jsx)(r.a,{href:"https://blog.adoptopenjdk.net/2021/01/prerequisites-for-font-support-in-adoptopenjdk/",children:"les pr\xe9sentes instructions"}),"."]}),"\n",(0,i.jsxs)(r.li,{children:["Avec d'autresJavadistributions: En tant qu'utilisateur Tomcat, copiez les fichiers de police dans _JAVA\\",(0,i.jsx)(r.em,{children:"HOME"}),"/lib/fontsJavapeut trouver les polices. Rappelez-vous : si/lorsque vous passez \xe0 une version plus r\xe9cente deJava, vous devez r\xe9installer ces polices."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.li,{children:"Sur Macs : pour chaque fichier de police, double-cliquez dessus et puis cliquez sur Installer la police."}),"\n",(0,i.jsx)(r.li,{children:"Sous Windows 7 et 10: dans Windows Explorer, s\xe9lectionnez tous les fichiers de police. Clic droit. Cliquez sur Installer.\n\xa0"}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"test-tomcat",children:"Essai Tomcat"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Testez votre installation Tomcat.","\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Linux :"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:['En tant qu\'utilisateur "tomcat", ex\xe9cutez ',(0,i.jsx)(r.em,{children:"tomcat"}),"/bin/startup.sh"]}),"\n",(0,i.jsxs)(r.li,{children:['Affichez votre URL + ":8080/" dans votre navigateur (Par exemple,',(0,i.jsx)(r.a,{href:"http://coastwatch.pfeg.noaa.gov:8080/",children:" http://coastwatch.pfeg.noaa.gov:8080/ "}),") ."]}),"\n",(0,i.jsxs)(r.li,{children:["Vous devriez voir la page des f\xe9licitations Tomcat.\nS'il y a des probl\xe8mes, consultez le fichier journal Tomcat ",(0,i.jsx)(r.em,{children:"tomcat"}),"/logs/catalina.out."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Mac (ex\xe9cuter tomcat en tant qu'utilisateur administrateur syst\xe8me) :"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Ex\xe9cuter ",(0,i.jsx)(r.em,{children:"tomcat"}),"/bin/startup.sh"]}),"\n",(0,i.jsxs)(r.li,{children:['Affichez votre URL + ":8080/" dans votre navigateur (Par exemple,',(0,i.jsx)(r.a,{href:"http://coastwatch.pfeg.noaa.gov:8080/",children:" http://coastwatch.pfeg.noaa.gov:8080/ "}),") . Notez que par d\xe9faut, votre Tomcat n'est accessible que par vous. Elle n'est pas accessible au public."]}),"\n",(0,i.jsxs)(r.li,{children:["Vous devriez voir la page des f\xe9licitations Tomcat.\nS'il y a des probl\xe8mes, consultez le fichier journal Tomcat ",(0,i.jsx)(r.em,{children:"tomcat"}),"/logs/catalina.out."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsx)(r.p,{children:"Windows localhost & #160;:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:'Faites un clic droit sur l\'ic\xf4ne Tomcat dans le plateau du syst\xe8me, et choisissez "D\xe9marrer le service".'}),"\n",(0,i.jsxs)(r.li,{children:["Affichage",(0,i.jsx)(r.a,{href:"http://127.0.0.1:8080/",children:" http://127.0.0.1:8080/ "}),"ou peut-\xeatre",(0,i.jsx)(r.a,{href:"http://localhost:8080/",children:" http://localhost:8080/ "}),", dans votre navigateur. Notez que par d\xe9faut, votre Tomcat n'est accessible que par vous. Elle n'est pas accessible au public."]}),"\n",(0,i.jsxs)(r.li,{children:["Vous devriez voir la page des f\xe9licitations Tomcat.\nS'il y a des probl\xe8mes, consultez le fichier journal Tomcat ",(0,i.jsx)(r.em,{children:"tomcat"}),"/logs/catalina.out."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"troubles-with-the-tomcat-installation",children:"Des probl\xe8mes avec l'installation de Tomcat ?"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Sur Linux et Mac, si vous ne pouvez pas atteindre Tomcat ouERDDAP\u2122  (ou peut-\xeatre que vous ne pouvez pas les atteindre \xe0 partir d'un ordinateur en dehors de votre pare-feu) , vous pouvez tester si Tomcat \xe9coute le port 8080, en tapant (comme racine) sur une ligne de commande du serveur :"}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"    netstat -tuplen | grep 8080  \n"})}),"\n",(0,i.jsx)(r.p,{children:"Cela devrait revenir \xe0 une ligne avec quelque chose comme:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"    tcp 0 0 :::8080 :::\\\\* LISTEN ## ##### ####/java\n"})}),"\n",(0,i.jsx)(r.p,{children:'(o\xf9 \'#\' est un chiffre) , indiquant qu\'un processus "java" (Probablement Tomcat) \xe9coute sur le port "8080" pour le trafic "tcp". Si aucune ligne n\'a \xe9t\xe9 retourn\xe9e, si la ligne renvoy\xe9e est significativement diff\xe9rente, ou si deux lignes ou plus ont \xe9t\xe9 retourn\xe9es, alors il peut y avoir un probl\xe8me avec les param\xe8tres du port.'}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Voir le fichier journal Tomcat ",(0,i.jsx)(r.em,{children:"tomcat"}),"/logs/catalina.out. Probl\xe8mes de Tomcat et certainsERDDAP\u2122Les probl\xe8mes de d\xe9marrage y sont presque toujours indiqu\xe9s. C'est courant quand vous \xeates en premi\xe8re mise en placeERDDAP\u2122."]}),"\n",(0,i.jsxs)(r.li,{children:["Voir",(0,i.jsx)(r.a,{href:"https://tomcat.apache.org/",children:"Tomcat"}),"site web ou rechercher de l'aide sur le web, mais s'il vous pla\xeet laissez-nous savoir les probl\xe8mes que vous avez eus et les solutions que vous avez trouv\xe9es."]}),"\n",(0,i.jsxs)(r.li,{children:["Voir notre",(0,i.jsx)(r.a,{href:"/docs/intro#support",children:"section sur l'obtention d'un soutien suppl\xe9mentaire"}),".\n\xa0"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"erddap-content",children:"ERDDAP\u2122Contenu"}),"\n",(0,i.jsxs)(r.ol,{start:"3",children:["\n",(0,i.jsxs)(r.li,{children:["\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.a,{href:"#erddap-content",children:"Mettre en place le_tomcat_/content/erddapfichiers de configuration."}),(0,i.jsx)(r.br,{}),"\n","Sur Linux, Mac et Windows, t\xe9l\xe9charger",(0,i.jsx)(r.a,{href:"https://github.com/ERDDAP/erddapContent/releases/download/content1.0.0/erddapContent.zip",children:"Contenu.zip"}),"  (version 1.0.0, 20333 octets, MD5=2B8D2A5AE5ED73E3A42B529C168C60B5, dat\xe9 2024-10-14) et d\xe9compresser dans ",(0,i.jsx)(r.em,{children:"tomcat"}),", en cr\xe9ant_tomcat_/content/erddap."]}),"\n",(0,i.jsxs)(r.p,{children:["\\[Certaines versions ant\xe9rieures sont \xe9galement disponibles:\n",(0,i.jsx)(r.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.17/erddapContent.zip",children:"2.17"}),"  (19 792 octets, MD5=8F892616BAEEF2DF0F4BB036DCB4AD7C, dat\xe9 du 2022-02-16)",(0,i.jsx)(r.br,{}),"\n",(0,i.jsx)(r.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.18/erddapContent.zip",children:"2.18"}),"  (19 792 octets, MD5=8F892616BAEEF2DF0F4BB036DCB4AD7C, dat\xe9 du 2022-02-16)",(0,i.jsx)(r.br,{}),"\n",(0,i.jsx)(r.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.21/erddapContent.zip",children:"2.21"}),"  (19 810 octets, MD5=1E26F62E7A06191EE6868C40B9A29362, dat\xe9 du 2022-10-09)",(0,i.jsx)(r.br,{}),"\n",(0,i.jsx)(r.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.22/erddapContent.zip",children:"2.22"}),"  (19,810 octets, MD5=1E26F62E7A06191EE6868C40B9A29362, dat\xe9 du 2022-12-08)\n",(0,i.jsx)(r.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.23/erddapContent.zip",children:"2.23"}),"  (19 810 octets, MD5=1E26F62E7A06191EE6868C40B9A29362, dat\xe9 du 2023-02-27)\net d\xe9compresser dans ",(0,i.jsx)(r.em,{children:"tomcat"}),", en cr\xe9ant_tomcat_/content/erddap.\\]"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.h4,{id:"other-directory",children:"Autres r\xe9pertoires"}),"\n",(0,i.jsx)(r.p,{children:"Pour Red Hat Enterprise Linux (RHEL) ou pour d'autres situations o\xf9 vous n'\xeates pas autoris\xe9 \xe0 modifier le r\xe9pertoire Tomcat ou o\xf9 vous souhaitez/besoin de mettre leERDDAP\u2122r\xe9pertoire de contenu dans un autre emplacement pour une autre raison (par exemple, si vous utilisez Jetty au lieu de Tomcat) , d\xe9zip erddapContenu.zipdans le r\xe9pertoire souhait\xe9 (auquel seul user=tomcat a acc\xe8s) et d\xe9finir leerddapContentDirectorypropri\xe9t\xe9 du syst\xe8me (Par exemple,erddapContentDirectory=~tomcat/content/erddap) doncERDDAP\u2122peut trouver ce nouveau r\xe9pertoire de contenu."}),"\n",(0,i.jsx)(r.h3,{id:"setupxml",children:"configuration.xml"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsxs)(r.a,{href:"#setupxml",children:["Lire les commentaires en_tomcat_/content/erddap/ ",(0,i.jsx)(r.strong,{children:"configuration.xml"})," "]}),"et d'apporter les modifications demand\xe9es. setup.xml est le fichier avec tous les param\xe8tres qui sp\xe9cifient comment votreERDDAP\u2122se comporter.\nPour la configuration initiale, vous DEVEZ au moins modifier ces param\xe8tres :"]}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"    <bigParentDirectory>, <emailEverythingTo>, <baseUrl>, <email.\\\\*>, <admin.\\\\*> (and <baseHttpsUrl> when you set up https).\n"})}),"\n",(0,i.jsx)(r.p,{children:"Lorsque vous cr\xe9ez le bigParentDirectory, \xe0 partir du r\xe9pertoire parent de bigParentDirectory:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Faire de user=tomcat le propri\xe9taire du bigParentDirectory, par exemple,"}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"        chown -R tomcat _bigParentDirectory_\n"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Modifier le \"groupe\" pour \xeatre tomcat, votre nom d'utilisateur ou le nom d'un petit groupe qui inclut tomcat et tous les administrateurs de Tomcat/ERDDAP, par exemple,"}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"        chgrp -R _yourUserName_ _bigParentDirectory_\n"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Changer les permissions pour que tomcat et le groupe aient lu, \xe9crit, ex\xe9cut\xe9 des privil\xe8ges, par exemple."}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"        chmod -R ug+rwx _bigParentDirectory_\n"})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Supprimer les permissions d'un autre utilisateur pour lire, \xe9crire ou ex\xe9cuter. Ceci est important pour emp\xeacher la lecture d'informationsERDDAP\u2122fichiers journaux et fichiers contenant des informations sur les ensembles de donn\xe9es priv\xe9s.:"}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"        chmod -R o-rwx _bigParentDirectory_\n"})}),"\n",(0,i.jsx)(r.h3,{id:"environment-variables",children:"Variables d'environnement"}),"\n",(0,i.jsxs)(r.p,{children:["En commen\xe7ant parERDDAP\u2122v2.13,ERDDAP\u2122les administrateurs peuvent surcharger n'importe quelle valeur dans setup.xml en sp\xe9cifiant une variable d'environnement nomm\xe9eERDDAP\\_",(0,i.jsx)(r.em,{children:"valueName"})," avant l'ex\xe9cutionERDDAP\u2122. Par exemple, utiliserERDDAP\\_baseUrl remplace<baseUrl> valeur. Cela peut \xeatre pratique lors du d\xe9ploiementERDDAP\u2122avec un conteneur comme Docker, comme vous pouvez mettre des param\xe8tres standard dans setup.xml et ensuite fournir des param\xe8tres sp\xe9ciaux via des variables d'environnement. Si vous fournissez des renseignements secrets \xe0ERDDAP\u2122via cette m\xe9thode, assurez-vous de v\xe9rifier que les informations resteront secr\xe8tes.ERDDAP\u2122ne lit que les variables d'environnement une fois par d\xe9marrage, dans la premi\xe8re seconde de d\xe9marrage, donc une fa\xe7on d'utiliser ceci est: d\xe9finir les variables d'environnement, d\xe9marrerERDDAP, attendez jusqu'\xe0ERDDAP\u2122est d\xe9marr\xe9, puis d\xe9sactive les variables d'environnement."]}),"\n",(0,i.jsx)(r.h3,{id:"datasetsxml",children:"datasets.xml"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Lire les commentaires en",(0,i.jsxs)(r.a,{href:"/docs/server-admin/datasets",children:[" ",(0,i.jsx)(r.strong,{children:"Travailler avec lesdatasets.xmlFichier"})," "]}),". Plus tard, apr\xe8s que vous ayezERDDAP\u2122courir pour la premi\xe8re fois (g\xe9n\xe9ralement avec juste les ensembles de donn\xe9es par d\xe9faut) , vous modifierez le XML dans_tomcat_/content/erddap/ ",(0,i.jsx)(r.strong,{children:"datasets.xml"})," pour sp\xe9cifier tous les ensembles de donn\xe9es que vous souhaitezERDDAP\u2122pour servir. C'est l\xe0 que vous passerez la majeure partie de votre temps pendant la mise en placeERDDAP\u2122et plus tard tout en maintenant votreERDDAP\u2122."]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["Vous pouvez voir un exemple",(0,i.jsx)(r.a,{href:"https://github.com/ERDDAP/erddap/blob/main/development/jetty/config/datasets.xml",children:"datasets.xmlsur GitHub"}),".\n\xa0"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["(Peu probable) Maintenant ou (l\xe9g\xe8rement plus probable) \xe0 l'avenir, si vous voulez modifier le fichier CSS d'erddap, faites une copie de_tomcat_/content/erddap/images/erddapStart2.css appel\xe9 erddap2.css puis y apporter des modifications. Les changements \xe0 erddap2.css ne prennent effet que lorsqueERDDAP\u2122est red\xe9marr\xe9 et n\xe9cessite souvent aussi l'utilisateur pour effacer les fichiers en cache du navigateur.\n\xa0\nERDDAP\u2122ne fonctionnera pas correctement si setup.xml oudatasets.xmlfichier n'est pas un fichier XML bien form\xe9. Donc, apr\xe8s avoir \xe9dit\xe9 ces fichiers, c'est une bonne id\xe9e de v\xe9rifier que le r\xe9sultat est bien form\xe9 XML en collant le texte XML dans un v\xe9rificateur XML comme",(0,i.jsx)(r.a,{href:"https://www.xmlvalidation.com/",children:"xmlvalidation"}),".\n\xa0"]}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"install-the-erddapwar-file",children:"Installez le fichier erddap.war"}),"\n",(0,i.jsxs)(r.ol,{start:"4",children:["\n",(0,i.jsxs)(r.li,{children:["Sur Linux, Mac et Windows, t\xe9l\xe9charger",(0,i.jsx)(r.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.27.0/erddap.war",children:"Guerre"}),"dans ",(0,i.jsx)(r.em,{children:"tomcat"}),"/webapps .\n(version 2.27.0, 620 554 403 octets, MD5=3b2086c659eee4145ca2dff447bf4ef7, dat\xe9e 06-11-2025)"]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"Le fichier .war est grand parce qu'il contient des donn\xe9es de littoral, de limite et d'altitude \xe0 haute r\xe9solution n\xe9cessaires pour cr\xe9er des cartes."}),"\n",(0,i.jsxs)(r.p,{children:["\\[Certaines versions ant\xe9rieures sont \xe9galement disponibles.\n",(0,i.jsx)(r.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.17/erddap.war",children:"2.17"}),"  (551 068 245 octets, MD5=5FEA912B5D42E50EAB9591F773EA848D, dat\xe9 du 2022-02-16)",(0,i.jsx)(r.br,{}),"\n",(0,i.jsx)(r.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.18/erddap.war",children:"2.18"}),"  (551 069 844 octets, MD5=461325E97E7577EC671DD50246CCFB8B, dat\xe9 du 2022-02-23)",(0,i.jsx)(r.br,{}),"\n",(0,i.jsx)(r.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.21/erddap.war",children:"2.21"}),"  (568,644,411 octets, MD5=F2CFF805893146E932E498FDBD519B6, dat\xe9 du 2022-10-09)",(0,i.jsx)(r.br,{}),"\n",(0,i.jsx)(r.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.22/erddap.war",children:"2.22"}),"  (567 742 765 octets, MD5=2B33354F633294213AE2AFDDCF4DA6D0, dat\xe9 du 2022-12-08)\n",(0,i.jsx)(r.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.23/erddap.war",children:"2.23"}),"  (572 124 953 octets, MD5=D843A043C506725EBD6F8EFDCCA8FD5F, dat\xe9 du 2023-03-03)\n",(0,i.jsx)(r.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.24/erddap.war",children:"2.24"}),"  (568 748 187 octets, MD5=970fbee172e28b0b8a07756eecbc898e, dat\xe9 du 2024-06-07)\n",(0,i.jsx)(r.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.25.1/erddap.war",children:"2,25"}),"  (592,292,039 octets, MD5=652AFC9D1421F00B5F789DA2C4732D4C, dat\xe9 du 2024-11-07)\n",(0,i.jsx)(r.a,{href:"https://github.com/ERDDAP/erddap/releases/download/v2.26.0/erddap.war",children:"2.26"}),"  (607 404 032 octets, MD5=99a725108b37708e5420986c1616a119, dat\xe9 2025-03-31)\n\\]"]}),"\n",(0,i.jsx)(r.h4,{id:"proxypass",children:"ProxyPass"}),"\n",(0,i.jsxs)(r.ol,{start:"5",children:["\n",(0,i.jsxs)(r.li,{children:["Utiliser Proxy Passez pour que les utilisateurs n'aient pas \xe0 mettre le num\xe9ro de port, par exemple :8080, dans l'URL.\nSur les ordinateurs Linux, si Tomcat fonctionne dans Apache, veuillez modifier l'Apachehttpfichier d.conf (g\xe9n\xe9ralement dans /etc/httpd/conf/) permettre le trafic HTTP vers/depuisERDDAP\u2122sans exiger le num\xe9ro de port, par exemple :8080, dans l'URL. En tant qu'utilisateur racine :","\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsx)(r.li,{children:"Modifier l'actuel<VirtualHost > \xe9tiquette (s'il y en a un) , ou en ajouter un \xe0 la fin du fichier:"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"        <VirtualHost \\\\*:80>\n           ServerName _YourDomain.org_\n           ProxyRequests Off\n           ProxyPreserveHost On\n           ProxyPass /erddap http://localhost:8080/erddap\n           ProxyPassReverse /erddap http://localhost:8080/erddap\n        </VirtualHost>\n"})}),"\n",(0,i.jsxs)(r.ol,{start:"2",children:["\n",(0,i.jsx)(r.li,{children:"Puis red\xe9marrez Apache: /usr/sbin/apachectl -K gracieux (mais parfois il est dans un r\xe9pertoire diff\xe9rent) .\n\xa0"}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"nginx",children:"NGINX"}),"\n",(0,i.jsxs)(r.p,{children:["(UNCOMMON) Si vous utilisez",(0,i.jsx)(r.a,{href:"https://www.nginx.com/",children:"NGINX"}),"  (un serveur web et un \xe9quilibreur de charge) :\npour obtenir NGINX etERDDAP\u2122fonctionnant correctement avechttps, vous devez mettre l'extrait suivant dans le serveur Tomcat.xml<Host> bloc:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:'    &lt;Valve className="org.apache.catalina.valves.RemoteIpValve"  \n      remoteIpHeader="X-Forwarded-For"  \n      protocolHeader="X-Forwarded-Proto"  \n      protocolHeaderHttpsValue="https" /&gt; \n'})}),"\n",(0,i.jsx)(r.p,{children:"Et dans le fichier de configuration nginx, vous devez d\xe9finir ces en-t\xeates :"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"      proxy\\\\_set\\\\_header Host              $host;\n      proxy\\\\_set\\\\_header X-Real-IP         $remote\\\\_addr;\n      proxy\\\\_set\\\\_header REMOTE\\\\_ADDR       $remote\\\\_addr;\n      proxy\\\\_set\\\\_header HTTP\\\\_CLIENT\\\\_IP    $remote\\\\_addr;\n      proxy\\\\_set\\\\_header X-Forwarded-For   $proxy\\\\_add\\\\_x\\\\_forwarded\\\\_for;\n      proxy\\\\_set\\\\_header X-Forwarded-Proto $scheme;\n"})}),"\n",(0,i.jsxs)(r.p,{children:["(Gr\xe2ce \xe0 Kyle Wilcox.)",(0,i.jsx)(r.br,{}),"\n","\xa0"]}),"\n",(0,i.jsx)(r.h3,{id:"start-tomcat",children:"D\xe9marrer Tomcat"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["(Je ne recommande pas d'utiliser le Tomcat Web Application Manager. Si vous ne vous arr\xeatez pas compl\xe8tement et ne d\xe9marrez pas Tomcat, t\xf4t ou tard vous aurez des probl\xe8mes de m\xe9moire PermGen.)",(0,i.jsx)(r.br,{}),"\n","\xa0"]}),"\n",(0,i.jsxs)(r.li,{children:["(Dans Linux ou Mac OS, si vous avez cr\xe9\xe9 un utilisateur sp\xe9cial pour ex\xe9cuter Tomcat, par exemple, tomcat, rappelez-vous de faire les \xe9tapes suivantes en tant qu'utilisateur.)",(0,i.jsx)(r.br,{}),"\n","\xa0"]}),"\n",(0,i.jsxs)(r.li,{children:["Si Tomcat est d\xe9j\xe0 en marche, fermez Tomcat avec (dans Linux ou Mac OS) ",(0,i.jsx)(r.em,{children:"tomcat"}),"/bin/shutdown.sh\nou (dans Windows) ",(0,i.jsx)(r.em,{children:"tomcat"}),"\\bin\\\\shutdown.bat"]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["Sur Linux, utilisez ps -ef|grep tomcat avant et apr\xe8s l'arr\xeat.sh pour s'assurer que le processus tomcat a cess\xe9. Le processus devrait \xeatre \xe9num\xe9r\xe9 avant l'arr\xeat et \xe9ventuellement non apr\xe8s l'arr\xeat. \xc7a peut prendre une minute ou deux.ERDDAP\u2122d'arr\xeater compl\xe8tement. Soyez patient. Ou si on dirait qu'il ne s'arr\xeatera pas seul, utilisez :\ntuer -9 ",(0,i.jsx)(r.em,{children:"processusID"})]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Commencez par Tomcat (dans Linux ou Mac OS) ",(0,i.jsx)(r.em,{children:"tomcat"}),"/bin/startup.sh\nou (dans Windows) ",(0,i.jsx)(r.em,{children:"tomcat"}),"\\bin\\startup.bat"]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"is-erddap-running",children:"EstERDDAP\u2122courir ?"}),"\n",(0,i.jsxs)(r.p,{children:["Utilisez un navigateur pour essayer de voir http://",(0,i.jsx)(r.em,{children:(0,i.jsx)(r.a,{href:"http://www.YourServer.org",children:"www.YourServer.org"})}),"/erddap/status.html",(0,i.jsx)(r.br,{}),"\n","ERDDAP\u2122d\xe9marre sans aucun ensemble de donn\xe9es charg\xe9. Les ensembles de donn\xe9es sont charg\xe9s dans un fil de fond et deviennent donc disponibles un par un."]}),"\n",(0,i.jsx)(r.h3,{id:"troubleshooting",children:"D\xe9pannage"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Lorsqu'une requ\xeate d'un utilisateur entre en jeu, elle est adress\xe9e \xe0 Apache (sur les ordinateurs Linux et Mac OS) , puis Tomcat, alorsERDDAP\u2122."}),"\n",(0,i.jsx)(r.li,{children:"Vous pouvez voir ce qui vient \xe0 Apache (et erreurs connexes) dans les fichiers journaux Apache."}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"/docs/server-admin/additional-information#tomcat-logs",children:"Toi"}),"peut voir ce qui vient \xe0 Tomcat (et erreurs connexes) dans les fichiers journaux Tomcat (",(0,i.jsx)(r.em,{children:"tomcat"}),"/logs/catalina.out et autres fichiers dans ce r\xe9pertoire) ."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.a,{href:"/docs/server-admin/additional-information#log",children:"Toi"}),"peut voir ce qui vient \xe0ERDDAP, messages de diagnostic deERDDAP, et les messages d'erreur deERDDAP, dansERDDAP\u2122 <bigParentDirectory>logs/log.txt fichier."]}),"\n",(0,i.jsx)(r.li,{children:"Tomcat ne commence pas.ERDDAP\u2122jusqu'\xe0 ce que Tomcat obtienne une demande pourERDDAP\u2122. Donc vous pouvez voir dans les fichiers journaux Tomcat si elle a commenc\xe9ERDDAP\u2122ou s'il existe un message d'erreur li\xe9 \xe0 cette tentative."}),"\n",(0,i.jsx)(r.li,{children:"QuandERDDAP\u2122commence, il renomme l'ancienERDDAP\u2122fichier log.txt (logArchiv\xe9At_CurrentTime_.txt) et cr\xe9e un nouveau fichier log.txt. Donc si le journal de bord. Le fichier txt est vieux, c'est un signe queERDDAP\u2122n'a pas red\xe9marr\xe9 r\xe9cemment.ERDDAP\u2122\xe9crit des informations de journal dans un tampon et \xe9crit seulement le tampon dans le fichier journal p\xe9riodiquement, mais vous pouvez forcerERDDAP\u2122pour \xe9crire le tampon dans le fichier journal en visitant .../erddap/status.html."}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"trouble-old-version-of-java",children:"Probl\xe8me: Ancienne version deJava"}),"\n",(0,i.jsxs)(r.p,{children:['Si vous utilisez une version deJavatrop vieux pourERDDAP,ERDDAP\u2122vous verrez un message d\'erreur dans le fichier journal de Tomcat comme\nException dans le fil "main" java.lang.Non support\xe9ClassVersionErreur:\n',(0,i.jsx)(r.em,{children:"quelques/classe/nom"})," & #160;: Non pris en charge major.minor version ",(0,i.jsx)(r.em,{children:"someNumber"}),"\nLa solution est de mettre \xe0 jour la version la plus r\xe9cente deJavaet assurez-vous que Tomcat l'utilise."]}),"\n",(0,i.jsx)(r.h3,{id:"trouble-slow-startup-first-time",children:"Probl\xe8me: d\xe9marrage lent Premi\xe8re fois"}),"\n",(0,i.jsx)(r.p,{children:"Tomcat doit faire beaucoup de travail la premi\xe8re fois une application commeERDDAP\u2122est commenc\xe9; notamment, il doit d\xe9baller l'erddap. fichier de guerre (qui est comme un.zipfichier) . Sur certains serveurs, la premi\xe8re tentative de voirERDDAP\u2122\xe9talons (30 secondes ?) jusqu'\xe0 ce que ce travail soit termin\xe9. Sur d'autres serveurs, la premi\xe8re tentative \xe9chouera imm\xe9diatement. Mais si vous attendez 30 secondes et essayez encore, il r\xe9ussira siERDDAP\u2122a \xe9t\xe9 correctement install\xe9.\nIl n'y a pas de solution. C'est simplement comme \xe7a que Tomcat fonctionne. Mais il ne se produit que la premi\xe8re fois apr\xe8s avoir install\xe9 une nouvelle version deERDDAP\u2122."}),"\n",(0,i.jsx)(r.h2,{id:"shut-down-and-restart",children:"Arr\xeat et red\xe9marrage"}),"\n",(0,i.jsxs)(r.p,{children:["\xc0 l'avenir, fermer (et red\xe9marrer)  ERDDAPVoir",(0,i.jsx)(r.a,{href:"/docs/server-admin/additional-information#shut-down-and-restart",children:"Comment fermer et red\xe9marrer Tomcat etERDDAP"}),"."]}),"\n",(0,i.jsx)(r.h2,{id:"trouble",children:"Des probl\xe8mes ?"}),"\n",(0,i.jsxs)(r.p,{children:["Probl\xe8mes d'installation de Tomcat ouERDDAP? Voir notre",(0,i.jsx)(r.a,{href:"/docs/intro#support",children:"section sur l'obtention d'un soutien suppl\xe9mentaire"}),"."]}),"\n",(0,i.jsx)(r.h2,{id:"email-notification-of-new-versions-of-erddap",children:"Notification par courriel des nouvelles versionsERDDAP"}),"\n",(0,i.jsxs)(r.p,{children:["Si vous voulez recevoir un email chaque fois qu'une nouvelle version deERDDAP\u2122est disponible ou autre importantERDDAP\u2122annonces, vous pouvez rejoindre leERDDAP\u2122Liste des annonces",(0,i.jsx)(r.a,{href:"https://groups.google.com/g/erddap-announce",children:"ici"}),". Cette liste est en moyenne d'environ un courriel tous les trois mois."]}),"\n",(0,i.jsx)(r.h2,{id:"customize",children:"Personnaliser"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.a,{href:"#customize",children:"Personnalisez votreERDDAP\u2122pour souligner votre organisation (pasNOAA ERD) ."})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["Changer la banni\xe8re qui appara\xeet en haut de tousERDDAP\u2122.html pages en \xe9ditant<startBodyHtml5> dans votre \xe9tiquettedatasets.xmlfichier. (S'il n'y en a pas, copiez la valeur par d\xe9fautERDDAP's\n\\[Tomcat\\]/webapps/erddap/WEB-INF/classes/gov/noaa/pfel/erddap/util/messages.xml fichier dansdatasets.xmlet le modifier.) Par exemple, vous pourriez :","\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Utiliser une image diff\xe9rente (i.e., le logo de votre organisation) ."}),"\n",(0,i.jsx)(r.li,{children:"Changer la couleur de fond."}),"\n",(0,i.jsx)(r.li,{children:'Changer "ERDDAP"\xe0 "Votre Organisation"ERDDAP"'}),"\n",(0,i.jsx)(r.li,{children:"Changez \xab Meilleur acc\xe8s aux donn\xe9es scientifiques \xbb pour \xab Meilleur acc\xe8s aux donn\xe9es de _Votre organisation \xbb."}),"\n",(0,i.jsx)(r.li,{children:"Changez les liens \xab cr\xe9\xe9s par \xbb pour \xeatre des liens vers votre organisation et des sources de financement."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["Modifier les informations sur le c\xf4t\xe9 gauche de la page d'accueil en \xe9ditant<l'\xe9tiquette ShortDescriptionHtml> dans votredatasets.xmlfichier. (S'il n'y en a pas, copiez la valeur par d\xe9fautERDDAP's\n\\[Tomcat\\]/webapps/erddap/WEB-INF/classes/gov/noaa/pfel/erddap/util/messages.xml fichier dansdatasets.xmlet le modifier.) Par exemple, vous pourriez :","\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"D\xe9crivez ce que fait votre organisation et/ou votre groupe."}),"\n",(0,i.jsx)(r.li,{children:"D\xe9crivez quel type de donn\xe9es ceERDDAP\u2122l'a fait."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(r.li,{children:["Pour modifier l'ic\xf4ne qui appara\xeet sur les onglets du navigateur, mettez le favicon de votre organisation. ico en_tomcat_/content/erddap/images/ . Voir",(0,i.jsx)(r.a,{href:"https://en.wikipedia.org/wiki/Favicon",children:" https://en.wikipedia.org/wiki/Favicon "}),"."]}),"\n"]})]})}function u(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},62900:(e,r,s)=>{s.d(r,{A:()=>n});const n=s.p+"assets/files/DejaVuFonts-9be3895e6d216d0fc9bb8f3520f765c6.zip"}}]);