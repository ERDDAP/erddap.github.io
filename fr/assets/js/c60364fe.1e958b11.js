"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[7958],{28453:(e,s,t)=>{t.d(s,{R:()=>r,x:()=>c});var n=t(96540);const o={},i=n.createContext(o);function r(e){const s=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),n.createElement(i.Provider,{value:s},e.children)}},51520:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>r,metadata:()=>n,toc:()=>u});const n=JSON.parse('{"id":"user/AccessToPrivateDatasets","title":"Access to Private Datasets","description":"NombreuxERDDAP\u2122les installations n\'ont pas d\'authentification activ\xe9e et ne fournissent donc aucun moyen pour les utilisateurs de se connecter, ni n\'ont de jeux de donn\xe9es priv\xe9s.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/user/AccessToPrivateDatasets.md","sourceDirName":"user","slug":"/user/AccessToPrivateDatasets","permalink":"/fr/docs/user/AccessToPrivateDatasets","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/user/AccessToPrivateDatasets.md","tags":[],"version":"current","frontMatter":{"title":"Access to Private Datasets"},"sidebar":"docSidebar","previous":{"title":"User","permalink":"/fr/docs/category/user"},"next":{"title":"NCCSV 1.00","permalink":"/fr/docs/user/nccsv-1.00"}}');var o=t(74848),i=t(28453);const r={title:"Access to Private Datasets"},c="Acc\xe8s aux ensembles de donn\xe9es priv\xe9s dansERDDAP\u2122",a={},u=[{value:"Instructions actualis\xe9es",id:"updated-instructions",level:2},{value:"Les humains avec les navigateurs",id:"humans-with-browsers",level:2},{value:"Scripts",id:"scripts",level:2}];function l(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"acc\xe8s-aux-ensembles-de-donn\xe9es-priv\xe9s-danserddap",children:"Acc\xe8s aux ensembles de donn\xe9es priv\xe9s dansERDDAP\u2122"})}),"\n",(0,o.jsx)(s.p,{children:"NombreuxERDDAP\u2122les installations n'ont pas d'authentification activ\xe9e et ne fournissent donc aucun moyen pour les utilisateurs de se connecter, ni n'ont de jeux de donn\xe9es priv\xe9s."}),"\n",(0,o.jsx)(s.p,{children:"CertainsERDDAP\u2122les installations ont une authentification activ\xe9e. Actuellement,ERDDAP\u2122ne prend en charge que l'authentification via les comptes de messagerie g\xe9r\xe9s par Google, qui inclut les comptes de messagerie \xe0NOAAet de nombreuses universit\xe9s. SiERDDAP\u2122a l'authentification activ\xe9e, toute personne avec un compte e-mail g\xe9r\xe9 par Google peut se connecter, mais ils n'auront acc\xe8s aux ensembles de donn\xe9es priv\xe9s que leERDDAP\u2122l'administrateur les a explicitement autoris\xe9s \xe0 y acc\xe9der."}),"\n",(0,o.jsx)(s.h2,{id:"updated-instructions",children:"Instructions actualis\xe9es"}),"\n",(0,o.jsxs)(s.p,{children:["Certaines des informations ci-dessous sont p\xe9rim\xe9es. Jusqu'\xe0 ce que cela soit mis \xe0 jour, vous pouvez utiliser",(0,o.jsx)(s.a,{href:"https://shospital.github.io/blog/posts/blog-post/erddap_private_dataset.html",children:"ce billet de blog"}),"pour les derni\xe8res \xe9tapes sur l'obtention de donn\xe9es d'un jeu de donn\xe9es priv\xe9 avec des scripts."]}),"\n",(0,o.jsx)(s.h2,{id:"humans-with-browsers",children:"Les humains avec les navigateurs"}),"\n",(0,o.jsx)(s.p,{children:"Utilisateurs humains deERDDAP\u2122peut se connecterERDDAP\u2122dans un navigateur afin d'acc\xe9der \xe0 des ensembles de donn\xe9es priv\xe9s qu'ils sont autoris\xe9s \xe0 acc\xe9der."}),"\n",(0,o.jsx)(s.p,{children:"Pour vous connecter :"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsx)(s.li,{children:"Cliquez sur le lien de connexion dans la partie sup\xe9rieure gauche de n'importe quelERDDAP\u2122page web.\r\nS'il n'y a pas de lien de connexion, leERDDAP\u2122installation n'a pas d'authentification activ\xe9e et il n'y a pas de jeux de donn\xe9es priv\xe9s.\r\n\xa0"}),"\n",(0,o.jsx)(s.li,{children:'Cliquez sur le bouton Connexion pour vous connecter \xe0 votre compte Google.\r\nLe texte du bouton doit \xeatre remplac\xe9 par "Sign\xe9".\r\n\xa0'}),"\n",(0,o.jsxs)(s.li,{children:["Cliquez sur la connexionERDDAPbouton.\r\nLa page Web devrait changer pour dire Vous \xeates connect\xe9 comme ",(0,o.jsx)(s.em,{children:"Votre Adresse \xe9lectronique"})," .\r\nSi ce n'est pas le cas, attendez 5 secondes et cliquez sur ConnexionERDDAPencore un bouton.\r\nDans les cas extr\xeames, vous devrez peut-\xeatre attendre et r\xe9essayer quelques fois.\r\n\xa0"]}),"\n",(0,o.jsx)(s.li,{children:"N'utilisez pas le bouton Back de votre navigateur. Utilisez le \"ERDDAP\" lien en haut de la ci-dessus, puis utiliser d'autres liens pour aller \xe0ERDDAP\u2122pages qui vous int\xe9ressent. Si une page web mise en cache indique que vous n'\xeates pas connect\xe9, rechargez la page.\r\n\xa0"}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"scripts",children:"Scripts"}),"\n",(0,o.jsx)(s.p,{children:"\\[Ceci est l\xe9g\xe8rement modifi\xe9 par rapport \xe0 l'information fournie par Lynn DeWitt, qui a fait le travail difficile de comprendre cela. Lynn, merci beaucoup !\r\nSi vous avez des corrections ou des suggestions, veuillez envoyer un courriel \xe0 erd.data @ noaa.gov .\\]"}),"\n",(0,o.jsx)(s.p,{children:"Il est \xe9galement possible de se connecter \xe0ERDDAP\u2122et acc\xe9der \xe0 des ensembles de donn\xe9es priv\xe9s via un script. Voici un exemple qui utilisecurl:"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsx)(s.li,{children:"Ces instructions supposent que vous utilisez une adresse gmail o\xf9 l'authentification \xe0 2 facteurs n'est pas activ\xe9e. Si votre adresse gmail principale a une authentification \xe0 2 facteurs activ\xe9e, envisagez de cr\xe9er une autre adresse gmail avec une authentification \xe0 2 facteurs d\xe9sactiv\xe9e.\r\n\xa0"}),"\n",(0,o.jsx)(s.li,{children:"Connectez-vous \xe0ERDDAP\u2122manuellement avec l'adresse gmail que vous voulez utiliser dans votre script et accepter toutes les permissions n\xe9cessaires, puis se connecter compl\xe8tement \xe0 nouveau.\r\n\xa0"}),"\n",(0,o.jsx)(s.li,{children:"Ouvrez le navigateur Outils d\xe9veloppeurs, et allez dans l'onglet R\xe9seau.\r\n\xa0"}),"\n",(0,o.jsx)(s.li,{children:"Cliquez sur leERDDAP\u2122Lien \xab se connecter \xbb, puis le bouton \xab Se connecter \xbb et choisir l'adresse email appropri\xe9e si elle est demand\xe9e.\r\n\xa0"}),"\n",(0,o.jsx)(s.li,{children:"Apr\xe8s la modification du bouton \"S'identifier\", l'onglet Developer Tools Network affichera deux entr\xe9es qui ressemblent \xe0 ce qui suit : (exemple de Firefox) :"}),"\n"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"    iframerpc?action=issueToken&response loginGoogle.html  \n"})}),"\n",(0,o.jsx)(s.p,{children:'Utilisez le menu contextuel de clic droit de la souris pour \xab copier en tant que cURL \xbb et collez-les dans un \xe9diteur de texte simple\r\n\xa0\r\n6. Cliquez sur "Se connecter"ERDDAP"bouton et "copie comme cURL" le lien qui ressemble \xe0:'}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"    login.html  \n"})}),"\n",(0,o.jsxs)(s.p,{children:["et coller ce troisi\xe8mecurlcommande dans le fichier texte.\r\n\xa0\r\n7. Dans le fichier texte, vous aurez maintenant 3 lignes comme ce qui suit, o\xf9 vous avez connect\xe9 unERDDAP\u2122serveur \xe0 ' * ",(0,o.jsx)(s.a,{href:"https://host.somewhere.com/erddap",children:"https://host.somewhere.com/erddap"}),' * ". La premi\xe8recurlcommande obtient votre profil utilisateur dans "login\\_hint" et g\xe9n\xe8re un "id\\_token". La seconde utilise l\'id\\_token pour se connecter \xe0 Google, et la troisi\xe8me puis se connecte \xe0ERDDAP.']}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"    curl 'https://accounts.google.com/o/oauth2/iframerpc?action=issueToken&response\\\\_type=token%20id\\\\_token&scope=openid%20profile%20email&client\\\\_id=ABCDEFG.apps.googleusercontent.com&login\\\\_hint=XXXXXXXXXX&ss\\\\_domain=https%3A%2F%2Fhost.somewhere.com&origin=https%3A%2F%2Fhost.somewhere.com' --2.0 -H 'Host: accounts.google.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://accounts.google.com/o/oauth2/iframe' -H 'Cookie: lotsofcookiestuff' -H 'Connection: keep-alive' curl 'https://host.somewhere.com/erddap/loginGoogle.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' --data 'idtoken=HUGELONGIDTOKEN' curl 'https://host.somewhere.com/erddap/login.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1'\n"})}),"\n",(0,o.jsxs)(s.ol,{start:"8",children:["\n",(0,o.jsx)(s.li,{children:"Les 3 lignes ci-dessus, lorsqu'elles sont ex\xe9cut\xe9es s\xe9quentiellement \xe0 partir d'une ligne de commande, vous connecterontERDDAP. Afin de pouvoir les utiliser dans un script, vous devez capturer l'id\\_token depuis la premi\xe8re ligne, le alimenter \xe0 la deuxi\xe8me ligne, et \xe9crire un cookie \xe0 lire par les lignes suivantes.\r\n\xa0"}),"\n",(0,o.jsxs)(s.li,{children:["Pour d\xe9velopper un script, lancez le premier (' ",(0,o.jsx)(s.a,{href:"https://accounts.google.com",children:"https://accounts.google.com"}),' )  curlligne exactement comme il a \xe9t\xe9 copi\xe9 \xe0 partir des outils de d\xe9veloppeur, et capturer la r\xe9ponse (vous pouvez obtenircurlerreur sur le drapeau "--2.0" il suffit de le supprimer) . Dans php, il ressemble \xe0 ce qui suit :']}),"\n"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"    $gcurlstuff=\"curl 'https://accounts.google.com/o/oauth2/iframerpc?action=issueToken&response\\\\_type=token%20id\\\\_token&scope=openid%20profile%20email&client\\\\_id=ABCDEFG.apps.googleusercontent.com&login\\\\_hint=XXXXXXXXXX&ss\\\\_domain=https%3A%2F%2Fhost.somewhere.com&origin=https%3A%2F%2Fhost.somewhere.com' -H 'Host: accounts.google.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://accounts.google.com/o/oauth2/iframe' -H 'Cookie: lotsofcookiestuff' -H 'Connection: keep-alive'\"; //execute the curl command: exec($gcurlstuff,$output,$status); //the response is a json array in $output $response=json\\\\_decode($output\\\\[0\\\\],true); //the part you need is in \"id\\\\_token\": $id\\\\_token=$response\\\\[\"id\\\\_token\"\\\\];\n"})}),"\n",(0,o.jsx)(s.p,{children:"Connectez-vous \xe0 Google en ex\xe9cutant la deuxi\xe8me ligne en utilisant $id\\_token, en supprimant d'abord le param\xe8tre \"-H 'Cookie: stuff'\" et en disant plut\xf4tcurlpour \xe9crire un cookie :"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"    $glcurlstuff=\"curl 'https://host.somewhere.com/erddap/loginGoogle.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' --data 'idtoken=\".$id\\\\_token.\"' -b cookies.txt -c cookies.txt\" exec($glcurlstuff,$output1,$status);\n"})}),"\n",(0,o.jsx)(s.p,{children:"Connectez-vous \xe0ERDDAP\u2122, en supprimant \xe0 nouveau le param\xe8tre \"-H 'Cookie: stuff'\" et en utilisant le cookie \xe9crit pr\xe9c\xe9demment:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"    $ecurlstuff=\"curl 'https://host.somewhere.com/erddap/login.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1 -b cookies.txt\"' exec($ecurlstuff,$output2,$status);\n"})}),"\n",(0,o.jsx)(s.p,{children:"Vous devriez maintenant pouvoir demander des donn\xe9es au serveur, en utilisant le m\xeame cookie :"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"    $curlstuff=\"curl -s 'https://host.somewhere.com/erddap/tabledap/datasetid.csv?variablelist' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1' -b cookies.txt\"; exec($curlstuff,$output3,$status); //$output3 will be data in csv!\n"})})]})}function d(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}}}]);