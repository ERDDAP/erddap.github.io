"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[4393],{28453:(e,s,t)=>{t.d(s,{R:()=>i,x:()=>d});var r=t(96540);const n={},a=r.createContext(n);function i(e){const s=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),r.createElement(a.Provider,{value:s},e.children)}},81781:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>o,contentTitle:()=>d,default:()=>c,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"server-admin/prometheus","title":"Prom\xe9th\xe9e","description":"Mesure de Prom\xe9th\xe9e sont disponibles \xe0 /erddap/metrics. Les param\xe8tres de base de JVM ont \xe9t\xe9 ajout\xe9s en 2,25 avec de nombreux ERDDAP\u2122 m\xe9triques ajout\xe9es dans la version 2.26. Si vous voulez utiliser les mesures, assurez-vous d\'\xeatre dans au moins la version 2.26. Ils sont activ\xe9s par d\xe9faut, vous pouvez les d\xe9sactiver en ajoutant","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/server-admin/prometheus.md","sourceDirName":"server-admin","slug":"/server-admin/prometheus","permalink":"/fr/docs/server-admin/prometheus","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/prometheus.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"docSidebar","previous":{"title":"M\xe9tadonn\xe9es localis\xe9es","permalink":"/fr/docs/server-admin/localized-metadata"},"next":{"title":"Options","permalink":"/fr/docs/server-admin/feature-flags"}}');var n=t(74848),a=t(28453);const i={sidebar_position:9},d="Prom\xe9th\xe9e",o={},l=[{value:"Lancer le serveur Prom\xe9th\xe9e",id:"lancer-le-serveur-prom\xe9th\xe9e",level:2},{value:"ERDDAP\u2122 m\xe9triques",id:"erddap-m\xe9triques",level:2},{value:"JVM",id:"jvm",level:3},{value:"ERDDAP\u2122 sp\xe9cifiques",id:"erddap-sp\xe9cifiques",level:3},{value:"ERDDAP _construire_info",id:"erddap-_construire_info",level:4},{value:"_flags de fonctionnalit\xe9s",id:"_flags-de-fonctionnalit\xe9s",level:4},{value:"tamponn\xe9 Image",id:"tamponn\xe9-image",level:4},{value:"http _request_duration_secondes",id:"http-_request_duration_secondes",level:4},{value:"touch_thread_duration_secondes",id:"touch_thread_duration_secondes",level:4},{value:"t\xe2che_thread_duration_secondes",id:"t\xe2che_thread_duration_secondes",level:4},{value:"load_datasets_duration_secondes",id:"load_datasets_duration_secondes",level:4},{value:"e-mail_thread_duration_secondes",id:"e-mail_thread_duration_secondes",level:4},{value:"e-mail_count_distribution",id:"e-mail_count_distribution",level:4},{value:"nombre_dataset",id:"nombre_dataset",level:4},{value:"dataset_failed_load_count",id:"dataset_failed_load_count",level:4},{value:"total des demandes",id:"total-des-demandes",level:4},{value:"memory_emails_total dangereux",id:"memory_emails_total-dangereux",level:4},{value:"_D\xe9fauts_de_m\xe9moire dangereux_total",id:"_d\xe9fauts_de_m\xe9moire-dangereux_total",level:4},{value:"Total des demandes",id:"total-des-demandes-1",level:4},{value:"Compteurs de fronti\xe8res",id:"compteurs-de-fronti\xe8res",level:4}];function u(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"prom\xe9th\xe9e",children:"Prom\xe9th\xe9e"})}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.a,{href:"https://prometheus.io/",children:"Mesure de Prom\xe9th\xe9e"})," sont disponibles \xe0 /erddap/metrics. Les param\xe8tres de base de JVM ont \xe9t\xe9 ajout\xe9s en 2,25 avec de nombreux ERDDAP\u2122 m\xe9triques ajout\xe9es dans la version 2.26. Si vous voulez utiliser les mesures, assurez-vous d'\xeatre dans au moins la version 2.26. Ils sont activ\xe9s par d\xe9faut, vous pouvez les d\xe9sactiver en ajoutant"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-xml",children:"<usePrometheusMetrics>false</usePrometheusMetrics>\n"})}),"\n",(0,n.jsx)(s.p,{children:"sur votre setup.xml."}),"\n",(0,n.jsx)(s.p,{children:"Ces mesures sont con\xe7ues pour \xeatre lisibles par machine. Bien que vous puissiez v\xe9rifier la page m\xe9triques manuellement, pour la surveillance en profondeur, il est recommand\xe9 d'utiliser un serveur Prom\xe9th\xe9e. Un serveur Prom\xe9th\xe9e stockera des m\xe9triques historiques qui permettent une surveillance plus approfondie (taux similaires et variations par rapport aux valeurs ant\xe9rieures) , et est aussi souvent ex\xe9cut\xe9 avec un serveur Grafana. Nous fournissons quelques tableaux de bord pr\xe9construits que les administrateurs peuvent trouver utiles pour commencer \xe0 surveiller leurs serveurs."}),"\n",(0,n.jsx)(s.h2,{id:"lancer-le-serveur-prom\xe9th\xe9e",children:"Lancer le serveur Prom\xe9th\xe9e"}),"\n",(0,n.jsxs)(s.p,{children:["La meilleure documentation pour faire fonctionner la pile de surveillance (Prom\xe9th\xe9e + Grafana) est dans le Prom\xe9th\xe9e ",(0,n.jsx)(s.a,{href:"https://github.com/ERDDAP/erddap/blob/main/docker/prometheus/README.md",children:"lire"})," ."]}),"\n",(0,n.jsx)(s.h2,{id:"erddap-m\xe9triques",children:"ERDDAP\u2122 m\xe9triques"}),"\n",(0,n.jsx)(s.h3,{id:"jvm",children:"JVM"}),"\n",(0,n.jsxs)(s.p,{children:["ERDDAP\u2122 exporte un certain nombre de mesures que vous pouvez trouver utiles (\xe0 partir de ERDDAP\u2122 2,25) . Pour la surveillance g\xe9n\xe9rale de la sant\xe9 du JVM, nous utilisons les mesures recueillies par le client Prom\xe9th\xe9e. Cela comprend des donn\xe9es sur la collecte des ordures, l'utilisation de la m\xe9moire, les fils, et plus encore. Pour plus d'informations, voir ",(0,n.jsx)(s.a,{href:"https://prometheus.github.io/client_java/instrumentation/jvm/",children:"Prom\xe9th\xe9e Java Documentation du client JVM"})," ."]}),"\n",(0,n.jsx)(s.h3,{id:"erddap-sp\xe9cifiques",children:"ERDDAP\u2122 sp\xe9cifiques"}),"\n",(0,n.jsxs)(s.p,{children:["Nous exportons \xe9galement un certain nombre de ERDDAP\u2122 m\xe9triques sp\xe9cifiques (\xe0 partir de ERDDAP\u2122 2.26) . Si vous voulez creuser dans le code, vous pouvez trouver les m\xe9triques collect\xe9es dans ",(0,n.jsx)(s.a,{href:"https://github.com/ERDDAP/erddap/blob/main/WEB-INF/classes/gov/noaa/pfel/erddap/util/Metrics.java",children:"m\xe9trique.java"})," ."]}),"\n",(0,n.jsx)(s.h4,{id:"erddap-_construire_info",children:"ERDDAP _construire_info"}),"\n",(0,n.jsx)(s.p,{children:"Voici les informations de construction pour le ERDDAP\u2122 serveur. Il comprend la version (majeur.mineur) , version_remplie (Major.minor.patch) , et de d\xe9ploiement_info (utilis\xe9 pour indiquer comment le serveur est d\xe9ploy\xe9, comme 'Docker ') ."}),"\n",(0,n.jsx)(s.h4,{id:"_flags-de-fonctionnalit\xe9s",children:"_flags de fonctionnalit\xe9s"}),"\n",(0,n.jsx)(s.p,{children:"Ceci est une m\xe9trique d'info qui montre l'\xe9tat actuel des drapeaux de fonction. La plupart des options de configuration bool\xe9enne sont consid\xe9r\xe9es comme des drapeaux."}),"\n",(0,n.jsx)(s.h4,{id:"tamponn\xe9-image",children:"tamponn\xe9 Image"}),"\n",(0,n.jsx)(s.p,{children:"C'est une info m\xe9trique qui indique si l'acc\xe9l\xe9ration graphique est disponible."}),"\n",(0,n.jsx)(s.h4,{id:"http-_request_duration_secondes",children:"http _request_duration_secondes"}),"\n",(0,n.jsx)(s.p,{children:"Il s'agit d'un histogramme des dur\xe9es de r\xe9ponse de la demande en secondes. Les \xe9tiquettes sont request_type (par exemple griddap, tabledap , fichiers, wms) , dataset_id (le cas \xe9ch\xe9ant, r\xe9p\xe8te le type de demande) _Type de fichier (format de sortie pour la demande Par exemple, '.html', '.csv', '.iso19115 ') , code_lang (langue pour la requ\xeate, ou cha\xeene vide si par d\xe9faut) , code_\xe9tat ( http code de statut de la demande, par exemple 200, 302, 404) ."}),"\n",(0,n.jsx)(s.p,{children:"Ceci peut \xeatre utilis\xe9 pour suivre les requ\xeates par l'id dataset pour d\xe9terminer les ensembles de donn\xe9es populaires du serveur. Il peut \xe9galement aider \xe0 identifier s'il y a des types particuliers de requ\xeates qui sont lents sur votre serveur."}),"\n",(0,n.jsx)(s.h4,{id:"touch_thread_duration_secondes",children:"touch_thread_duration_secondes"}),"\n",(0,n.jsx)(s.p,{children:"Un histogramme des dur\xe9es des t\xe2ches de fil tactile. Ils sont \xe9tiquet\xe9s avec succ\xe8s (vrai/faux) ."}),"\n",(0,n.jsx)(s.h4,{id:"t\xe2che_thread_duration_secondes",children:"t\xe2che_thread_duration_secondes"}),"\n",(0,n.jsx)(s.p,{children:"Un histogramme des dur\xe9es du fil de travail. Ils sont \xe9tiquet\xe9s avec succ\xe8s (vrai/faux) et type de t\xe2che (entier) ."}),"\n",(0,n.jsx)(s.h4,{id:"load_datasets_duration_secondes",children:"load_datasets_duration_secondes"}),"\n",(0,n.jsx)(s.p,{children:"Un histogramme de dur\xe9e pour les t\xe2ches d'ensemble de donn\xe9es de charge. Ils sont \xe9tiquet\xe9s avec (vrai/faux) ."}),"\n",(0,n.jsx)(s.h4,{id:"e-mail_thread_duration_secondes",children:"e-mail_thread_duration_secondes"}),"\n",(0,n.jsx)(s.p,{children:"Un histogramme des dur\xe9es des t\xe2ches de thread email. Ils sont \xe9tiquet\xe9s avec succ\xe8s (vrai/faux) ."}),"\n",(0,n.jsx)(s.h4,{id:"e-mail_count_distribution",children:"e-mail_count_distribution"}),"\n",(0,n.jsx)(s.p,{children:"Un histogramme de courriels par t\xe2che."}),"\n",(0,n.jsx)(s.h4,{id:"nombre_dataset",children:"nombre_dataset"}),"\n",(0,n.jsx)(s.p,{children:"Une jauge des ensembles de donn\xe9es, d\xe9finie apr\xe8s chaque appel de ensembles de donn\xe9es de charge. Ceci est \xe9tiquet\xe9 avec la cat\xe9gorie (grille, tableau) ."}),"\n",(0,n.jsx)(s.h4,{id:"dataset_failed_load_count",children:"dataset_failed_load_count"}),"\n",(0,n.jsx)(s.p,{children:"Une jauge des ensembles de donn\xe9es qui n'ont pas \xe9t\xe9 charg\xe9s, d\xe9finie apr\xe8s chaque appel de ensembles de donn\xe9es de charge."}),"\n",(0,n.jsx)(s.h4,{id:"total-des-demandes",children:"total des demandes"}),"\n",(0,n.jsx)(s.p,{children:"Contrepartie des demandes qui ont \xe9t\xe9 d\xe9pos\xe9es. Le serveur envoie une requ\xeate lorsqu'il croit que le serveur est faible en m\xe9moire (RAM) et la demande causerait des probl\xe8mes. Cela n'inclut pas les requ\xeates que l'erreur due \xe0 un faible espace RAM ou disque pendant la gestion de la demande."}),"\n",(0,n.jsx)(s.h4,{id:"memory_emails_total-dangereux",children:"memory_emails_total dangereux"}),"\n",(0,n.jsx)(s.p,{children:"Contre-temps le serveur tente d'envoyer un email \xe0 l'administrateur que la m\xe9moire est dangereusement faible."}),"\n",(0,n.jsx)(s.h4,{id:"_d\xe9fauts_de_m\xe9moire-dangereux_total",children:"_D\xe9fauts_de_m\xe9moire dangereux_total"}),"\n",(0,n.jsx)(s.p,{children:"Contre-demandes qui ont \xe9chou\xe9 en raison de la machine en panne de m\xe9moire. Souvent c'est parce que la machine re\xe7oit beaucoup de demandes co\xfbteuses ou que la demande individuelle \xe9tait exceptionnellement grande."}),"\n",(0,n.jsx)(s.h4,{id:"total-des-demandes-1",children:"Total des demandes"}),"\n",(0,n.jsx)(s.p,{children:"Compteur des demandes de donn\xe9es de topo. Ceci est marqu\xe9 cache (cached/not_cached) ."}),"\n",(0,n.jsx)(s.h4,{id:"compteurs-de-fronti\xe8res",children:"Compteurs de fronti\xe8res"}),"\n",(0,n.jsx)(s.p,{children:"Il y a aussi une collection de comptoirs pour les demandes de limites :"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"national_boundaires_request_total"}),"\n",(0,n.jsx)(s.li,{children:"\xc9tat_boundarys_request_total"}),"\n",(0,n.jsx)(s.li,{children:"rivi\xe9re_boundaires_request_total"}),"\n",(0,n.jsx)(s.li,{children:"Total des demandes"}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"Ils sont \xe9tiquet\xe9s avec le statut (grossi\xe8re, le succ\xe8s, jet\xe9) ."})]})}function c(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}}}]);