<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-server-admin/datasets" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">ERDDAP™ - Working with the datasets.xml File | ERDDAP™ Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://erddap.github.io/img/noaa_simple.gif"><meta data-rh="true" name="twitter:image" content="https://erddap.github.io/img/noaa_simple.gif"><meta data-rh="true" property="og:url" content="https://erddap.github.io/docs/server-admin/datasets"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="bn"><meta data-rh="true" property="og:locale:alternate" content="zh"><meta data-rh="true" property="og:locale:alternate" content="zt"><meta data-rh="true" property="og:locale:alternate" content="cs"><meta data-rh="true" property="og:locale:alternate" content="da"><meta data-rh="true" property="og:locale:alternate" content="nl"><meta data-rh="true" property="og:locale:alternate" content="fi"><meta data-rh="true" property="og:locale:alternate" content="fr"><meta data-rh="true" property="og:locale:alternate" content="de"><meta data-rh="true" property="og:locale:alternate" content="el"><meta data-rh="true" property="og:locale:alternate" content="hi"><meta data-rh="true" property="og:locale:alternate" content="hu"><meta data-rh="true" property="og:locale:alternate" content="id"><meta data-rh="true" property="og:locale:alternate" content="ga"><meta data-rh="true" property="og:locale:alternate" content="it"><meta data-rh="true" property="og:locale:alternate" content="ja"><meta data-rh="true" property="og:locale:alternate" content="ko"><meta data-rh="true" property="og:locale:alternate" content="nb"><meta data-rh="true" property="og:locale:alternate" content="pl"><meta data-rh="true" property="og:locale:alternate" content="pt"><meta data-rh="true" property="og:locale:alternate" content="ro"><meta data-rh="true" property="og:locale:alternate" content="ru"><meta data-rh="true" property="og:locale:alternate" content="es"><meta data-rh="true" property="og:locale:alternate" content="sv"><meta data-rh="true" property="og:locale:alternate" content="tl"><meta data-rh="true" property="og:locale:alternate" content="th"><meta data-rh="true" property="og:locale:alternate" content="tr"><meta data-rh="true" property="og:locale:alternate" content="uk"><meta data-rh="true" property="og:locale:alternate" content="ur"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ERDDAP™ - Working with the datasets.xml File | ERDDAP™ Documentation"><meta data-rh="true" name="description" content="\[This web page will only be of interest to ERDDAP™ administrators.\]"><meta data-rh="true" property="og:description" content="\[This web page will only be of interest to ERDDAP™ administrators.\]"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://erddap.github.io/docs/server-admin/datasets"><link data-rh="true" rel="alternate" href="https://erddap.github.io/docs/server-admin/datasets" hreflang="en"><link data-rh="true" rel="alternate" href="https://erddap.github.io/bn/docs/server-admin/datasets" hreflang="bn"><link data-rh="true" rel="alternate" href="https://erddap.github.io/zh/docs/server-admin/datasets" hreflang="zh"><link data-rh="true" rel="alternate" href="https://erddap.github.io/zt/docs/server-admin/datasets" hreflang="zt"><link data-rh="true" rel="alternate" href="https://erddap.github.io/cs/docs/server-admin/datasets" hreflang="cs"><link data-rh="true" rel="alternate" href="https://erddap.github.io/da/docs/server-admin/datasets" hreflang="da"><link data-rh="true" rel="alternate" href="https://erddap.github.io/nl/docs/server-admin/datasets" hreflang="nl"><link data-rh="true" rel="alternate" href="https://erddap.github.io/fi/docs/server-admin/datasets" hreflang="fi"><link data-rh="true" rel="alternate" href="https://erddap.github.io/fr/docs/server-admin/datasets" hreflang="fr"><link data-rh="true" rel="alternate" href="https://erddap.github.io/de/docs/server-admin/datasets" hreflang="de"><link data-rh="true" rel="alternate" href="https://erddap.github.io/el/docs/server-admin/datasets" hreflang="el"><link data-rh="true" rel="alternate" href="https://erddap.github.io/hi/docs/server-admin/datasets" hreflang="hi"><link data-rh="true" rel="alternate" href="https://erddap.github.io/hu/docs/server-admin/datasets" hreflang="hu"><link data-rh="true" rel="alternate" href="https://erddap.github.io/id/docs/server-admin/datasets" hreflang="id"><link data-rh="true" rel="alternate" href="https://erddap.github.io/ga/docs/server-admin/datasets" hreflang="ga"><link data-rh="true" rel="alternate" href="https://erddap.github.io/it/docs/server-admin/datasets" hreflang="it"><link data-rh="true" rel="alternate" href="https://erddap.github.io/ja/docs/server-admin/datasets" hreflang="ja"><link data-rh="true" rel="alternate" href="https://erddap.github.io/ko/docs/server-admin/datasets" hreflang="ko"><link data-rh="true" rel="alternate" href="https://erddap.github.io/nb/docs/server-admin/datasets" hreflang="nb"><link data-rh="true" rel="alternate" href="https://erddap.github.io/pl/docs/server-admin/datasets" hreflang="pl"><link data-rh="true" rel="alternate" href="https://erddap.github.io/pt/docs/server-admin/datasets" hreflang="pt"><link data-rh="true" rel="alternate" href="https://erddap.github.io/ro/docs/server-admin/datasets" hreflang="ro"><link data-rh="true" rel="alternate" href="https://erddap.github.io/ru/docs/server-admin/datasets" hreflang="ru"><link data-rh="true" rel="alternate" href="https://erddap.github.io/es/docs/server-admin/datasets" hreflang="es"><link data-rh="true" rel="alternate" href="https://erddap.github.io/sv/docs/server-admin/datasets" hreflang="sv"><link data-rh="true" rel="alternate" href="https://erddap.github.io/tl/docs/server-admin/datasets" hreflang="tl"><link data-rh="true" rel="alternate" href="https://erddap.github.io/th/docs/server-admin/datasets" hreflang="th"><link data-rh="true" rel="alternate" href="https://erddap.github.io/tr/docs/server-admin/datasets" hreflang="tr"><link data-rh="true" rel="alternate" href="https://erddap.github.io/uk/docs/server-admin/datasets" hreflang="uk"><link data-rh="true" rel="alternate" href="https://erddap.github.io/ur/docs/server-admin/datasets" hreflang="ur"><link data-rh="true" rel="alternate" href="https://erddap.github.io/docs/server-admin/datasets" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.1015a39a.css">
<script src="/assets/js/runtime~main.19ac9a89.js" defer="defer"></script>
<script src="/assets/js/main.3ec0708f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/noaab.png" alt="NOAA logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/noaab.png" alt="NOAA logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">ERDDAP™</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/bn/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="bn">বাংলা</a></li><li><a href="/zh/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">中文</a></li><li><a href="/zt/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zt">Zt</a></li><li><a href="/cs/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="cs">Čeština</a></li><li><a href="/da/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="da">Dansk</a></li><li><a href="/nl/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="nl">Nederlands</a></li><li><a href="/fi/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="fi">Suomi</a></li><li><a href="/fr/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="fr">Français</a></li><li><a href="/de/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="de">Deutsch</a></li><li><a href="/el/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="el">Ελληνικά</a></li><li><a href="/hi/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="hi">हिन्दी</a></li><li><a href="/hu/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="hu">Magyar</a></li><li><a href="/id/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="id">Indonesia</a></li><li><a href="/ga/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ga">Gaeilge</a></li><li><a href="/it/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="it">Italiano</a></li><li><a href="/ja/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li><li><a href="/ko/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko">한국어</a></li><li><a href="/nb/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="nb">Norsk bokmål</a></li><li><a href="/pl/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="pl">Polski</a></li><li><a href="/pt/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="pt">Português</a></li><li><a href="/ro/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ro">Română</a></li><li><a href="/ru/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ru">Русский</a></li><li><a href="/es/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="es">Español</a></li><li><a href="/sv/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="sv">Svenska</a></li><li><a href="/tl/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="tl">Filipino</a></li><li><a href="/th/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="th">ไทย</a></li><li><a href="/tr/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="tr">Türkçe</a></li><li><a href="/uk/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="uk">Українська</a></li><li><a href="/ur/docs/server-admin/datasets" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ur">اردو</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/governance">Governance</a><a class="navbar__item navbar__link" href="/cloud">Cloud</a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><a href="https://github.com/erddap/erddap" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS darkNavbarColorModeToggle_X3D1" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Documentation Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/server-administration">Server Administration</a><button aria-label="Collapse sidebar category &#x27;Server Administration&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/server-admin/deploy-install">Install</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/server-admin/deploy-update">Update</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/server-admin/datasets">ERDDAP™ - Working with the datasets.xml File</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/server-admin/additional-information">additional-information</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/server-admin/scaling">Scaling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/server-admin/EDDTableFromEML">EDDTableFromEML</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/server-admin/display-info">displayInfo and displayAttribute</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/contributing">Contributing</a><button aria-label="Expand sidebar category &#x27;Contributing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/dokka">Dataset Scripts Code Documentation</a><button aria-label="Expand sidebar category &#x27;Dataset Scripts Code Documentation&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/user">User</a><button aria-label="Expand sidebar category &#x27;User&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/server-administration"><span itemprop="name">Server Administration</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ERDDAP™ - Working with the datasets.xml File</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Working with the datasets.xml File</h1></header>
<p>[This web page will only be of interest to ERDDAP™ administrators.]</p>
<p>After you have followed the ERDDAP™ <a href="/docs/server-admin/deploy-install">installation instructions</a>, you must edit the datasets.xml file in <em>tomcat</em>/content/erddap/ to describe the datasets that your ERDDAP™ installation will serve.</p>
<p>You can see an example <a href="https://github.com/ERDDAP/erddap/blob/main/development/jetty/config/datasets.xml" target="_blank" rel="noopener noreferrer">datasets.xml on GitHub</a>.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction"><a href="#introduction">Introduction</a><a href="#introduction" class="hash-link" aria-label="Direct link to introduction" title="Direct link to introduction">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="some-assembly-required">Some Assembly Required<a href="#some-assembly-required" class="hash-link" aria-label="Direct link to Some Assembly Required" title="Direct link to Some Assembly Required">​</a></h3>
<p>Setting up a dataset in ERDDAP™ isn&#x27;t just a matter of pointing to the dataset&#x27;s directory or URL. You have to write a chunk of XML for datasets.xml which describes the dataset.</p>
<ul>
<li>For gridded datasets, in order to make the dataset conform to ERDDAP&#x27;s data structure for gridded data, you have to identify a subset of the dataset&#x27;s variables which share the same dimensions. (<a href="#why-just-two-basic-data-structures">Why?</a> <a href="#dimensions">How?</a>)</li>
<li>The dataset&#x27;s current metadata is imported automatically. But if you want to modify that metadata or add other metadata, you have to specify it in datasets.xml. And ERDDAP™ needs other metadata, including <a href="#global-attributes">global attributes</a> (such as infoUrl, institution, sourceUrl, summary, and title) and <a href="#variable-addattributes">variable attributes</a> (such as long_name and units). Just as the metadata that is currently in the dataset adds descriptive information to the dataset, the metadata requested by ERDDAP™ adds descriptive information to the dataset. The additional metadata is a good addition to your dataset and helps ERDDAP™ do a better job of presenting your data to users who aren&#x27;t familiar with it.</li>
<li>ERDDAP™ needs you to do special things with the <a href="#destinationname">longitude, latitude, altitude (or depth), and time variables</a>.</li>
</ul>
<p>If you buy into these ideas and expend the effort to create the XML for datasets.xml, you get all the advantages of ERDDAP™, including:</p>
<ul>
<li>Full text search for datasets</li>
<li>Search for datasets by category</li>
<li>Data Access Forms (<em>datasetID</em>.html) so you can request a subset of data in lots of different file formats</li>
<li>Forms to request graphs and maps (<em>datasetID</em>.graph)</li>
<li>Web Map Service (WMS) for gridded datasets</li>
<li>RESTful access to your data</li>
</ul>
<p>Making the datasets.xml takes considerable effort for the first few datasets, but <strong>it gets easier</strong>. After the first dataset, you can often re-use a lot of your work for the next dataset. Fortunately, ERDDAP™ comes with two <a href="#tools">Tools</a> to help you create the XML for each dataset in datasets.xml.<br>
<!-- -->If you get stuck, see our <a href="/docs/intro#support">section on getting additional support</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-provider-form">Data Provider Form<a href="#data-provider-form" class="hash-link" aria-label="Direct link to Data Provider Form" title="Direct link to Data Provider Form">​</a></h3>
<p>When a data provider comes to you hoping to add some data to your ERDDAP, it can be difficult and time consuming to collect all of the metadata (information about the dataset) needed to add the dataset into ERDDAP. Many data sources (for example, .csv files, Excel files, databases) have no internal metadata, so ERDDAP™ has a Data Provider Form which gathers metadata from the data provider and gives the data provider some other guidance, including extensive guidance for <a href="https://coastwatch.pfeg.noaa.gov/erddap/dataProviderForm1.html#databases" target="_blank" rel="noopener noreferrer">Data In Databases</a>. The information submitted is converted into the datasets.xml format and then emailed to the ERDDAP™ administrator (you) and written (appended) to <em>bigParentDirectory</em>/logs/dataProviderForm.log . Thus, the form semi-automates the process of getting a dataset into ERDDAP, but the ERDDAP™ administrator still has to complete the datasets.xml chunk and deal with getting the data file(s) from the provider or connecting to the database.</p>
<p>The submission of actual data files from external sources is a huge security risk, so ERDDAP™ does not deal with that. You have to figure out a solution that works for you and the data provider, for example, email (for small files), pull from the cloud (for example, DropBox or Google Drive), an sftp site (with passwords), or sneakerNet (a USB thumb drive or external hard drive). You should probably only accept files from people you know. You will need to scan the files for viruses and take other security precautions.</p>
<p>There isn&#x27;t a link in ERDDAP™ to the Data Provider Form (for example, on the ERDDAP™ home page). Instead, when someone tells you they want to have their data served by your ERDDAP, you can send them an email saying something like:<br>
<!-- -->Yes, we can get your data into ERDDAP. To get started, please fill out the form at https://<em>yourUrl</em>/erddap/dataProviderForm.html (or http:// if https:// isn&#x27;t enabled).<br>
<!-- -->After you finish, I&#x27;ll contact you to work out the final details.<br>
<!-- -->If you just want to look at the form (without filling it out), you can see the form on ERD&#x27;s ERDDAP: <a href="https://coastwatch.pfeg.noaa.gov/erddap/dataProviderForm.html" target="_blank" rel="noopener noreferrer">Introduction</a>, <a href="https://coastwatch.pfeg.noaa.gov/erddap/dataProviderForm1.html" target="_blank" rel="noopener noreferrer">Part 1</a>, <a href="https://coastwatch.pfeg.noaa.gov/erddap/dataProviderForm2.html" target="_blank" rel="noopener noreferrer">Part 2</a>, <a href="https://coastwatch.pfeg.noaa.gov/erddap/dataProviderForm3.html" target="_blank" rel="noopener noreferrer">Part 3</a>, and <a href="https://coastwatch.pfeg.noaa.gov/erddap/dataProviderForm4.html" target="_blank" rel="noopener noreferrer">Part 4</a>. These links on the ERD ERDDAP™ send information to me, not you, so don&#x27;t submit information with them unless you actually want to add data to the ERD ERDDAP.</p>
<p>If you want to remove the Data Provider Form from your ERDDAP™, put</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dataProviderFormActive&gt;false&lt;/dataProviderFormActive&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>in your setup.xml file.</p>
<p>The impetus for this was NOAA&#x27;s 2014 <a href="https://www.glerl.noaa.gov/review2016/reviewer_docs/NOAA_PARR_Plan_v5.04.pdf" target="_blank" rel="noopener noreferrer">Public Access to Research Results (PARR) directive</a>, which requires that all NOAA environmental data funded through taxpayer dollars be made available via a data service (not just files) within 12 months of creation. So there is increased interest in using ERDDAP™ to make datasets available via a service ASAP. We needed a more efficient way to deal with a large number of data providers.</p>
<p>Feedback/Suggestions? This form is new, so please email erd dot data at noaa dot gov if you have any feedback or suggestions for improving this.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tools">Tools<a href="#tools" class="hash-link" aria-label="Direct link to Tools" title="Direct link to Tools">​</a></h3>
<p>ERDDAP™ comes with two command line programs which are tools to help you create the XML for each dataset that you want your ERDDAP™ to serve. Once you have set up ERDDAP™ and run it (at least one time), you can find and use these programs in the <em>tomcat</em>/webapps/erddap/WEB-INF directory. There are Linux/Unix shell scripts (with the extension .sh) and Windows scripts (with the extension .bat) for each program. [On Linux, run these tools as the same user (tomcat?) that will run Tomcat.] When you run each program, it will ask you questions. For each question, type a response, then press Enter. Or press ^C to exit a program at any time.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="program-wont-run">Program won&#x27;t run?<a href="#program-wont-run" class="hash-link" aria-label="Direct link to Program won&#x27;t run?" title="Direct link to Program won&#x27;t run?">​</a></h4>
<ul>
<li>If you get an unknown program (or similar) error message, the problem is probably that the operating system couldn&#x27;t find Java. You need to figure out where Java is on your computer, then edit the java reference in the .bat or .sh file that you are trying to use.</li>
<li>If you get a jar file not found or class not found error message, then Java couldn&#x27;t find one of the classes listed in the .bat or .sh file you are trying to use. The solution is to figure out where that .jar file is, and edit the java reference to it in the .bat or .sh file.</li>
<li>If you are using a version of Java that is too old for a program, the program won&#x27;t run and you will see an error message like<br>
<!-- -->Exception in thread &quot;main&quot; java.lang.UnsupportedClassVersionError:<br>
<em>some/class/name</em>: Unsupported major.minor version <em>someNumber</em><br>
<!-- -->The solution is to update to the most recent version of Java and make sure the .sh or .bat file for the program is using it.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="the-tools-print-various-diagnostic-messages">The tools print various diagnostic messages:<a href="#the-tools-print-various-diagnostic-messages" class="hash-link" aria-label="Direct link to The tools print various diagnostic messages:" title="Direct link to The tools print various diagnostic messages:">​</a></h4>
<ul>
<li>The word &quot;ERROR&quot; is used when something went so wrong that the procedure failed to complete. Although it is annoying to get an error, the error forces you to deal with the problem.</li>
<li>The word &quot;WARNING&quot; is used when something went wrong, but the procedure was able to be completed. These are pretty rare.</li>
<li>Anything else is just an informative message. You can add -verbose to the <a href="#generatedatasetsxml">GenerateDatasetsXml</a> or <a href="#dasdds">DasDds</a> command line to get additional informative messages, which sometimes helps solve problems.</li>
</ul>
<p>The two tools are a big help, but you still must read all of these instructions on this page carefully and make important decisions yourself.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="generatedatasetsxml">GenerateDatasetsXml<a href="#generatedatasetsxml" class="hash-link" aria-label="Direct link to GenerateDatasetsXml" title="Direct link to GenerateDatasetsXml">​</a></h3>
<ul>
<li>
<p><strong>GenerateDatasetsXml</strong>is a command line program that can generate a rough draft of the dataset XML for almost any type of dataset.</p>
<p>We STRONGLY RECOMMEND that you use GenerateDatasetsXml instead of creating chunks of datasets.xml by hand because:</p>
<ul>
<li>GenerateDatasetsXml works in seconds. Doing this by hand is at least an hour&#x27;s work, even when you know what you&#x27;re doing.</li>
<li>GenerateDatasetsXml does a better job. Doing this by hand requires extensive knowledge of how ERDDAP™ works. It is unlikely that you will do a better job by hand. (Bob Simons always uses GenerateDatasetsXml for the first draft, and he wrote ERDDAP.)</li>
<li>GenerateDatasetsXml always generates a valid chunk of datasets.xml. Any chunk of datasets.xml that you write will probably have at least a few errors that prevent ERDDAP™ from loading the dataset. It often takes people hours to diagnose these problems. Don&#x27;t waste your time. Let GenerateDatasetsXml do the hard work. Then you can refine the .xml by hand if you want.</li>
</ul>
<p>When you use the GenerateDatasetsXml program:</p>
<ul>
<li>
<p>On Windows, the first time you run GenerateDatasetsXml, you need to edit the GenerateDatasetsXml.bat file with a text editor to change the path to the java.exe file so that Windows can find Java.</p>
</li>
<li>
<p>GenerateDatasetsXml first asks you to specify the EDDType (Erd Dap Dataset Type) of the dataset. See the <a href="#list-of-types-datasets">List of Dataset Types</a> (in this document) to figure out which is type appropriate for the dataset you are working on. In addition to the regular EDDTypes, there are also a few <a href="#specialpseudo-dataset-types">Special/Pseudo Dataset Types</a> (e.g., one which crawls a THREDDS catalog to generate a chunk of datasets.xml for each of the datasets in the catalog).</p>
</li>
<li>
<p>GenerateDatasetsXml then asks you a series of questions specific to that EDDType. The questions gather the information needed for ERDDAP™ to access the dataset&#x27;s source. To understand what ERDDAP™ is asking for, see the documentation for the EDDType that you specified by clicking on the same dataset type in the <a href="#list-of-types-datasets">List of Dataset Types</a>.</p>
<p>If you need to enter a string with special characters (e.g., whitespace characters at the beginning or end, non-ASCII characters), enter a <a href="https://www.json.org/json-en.html" target="_blank" rel="noopener noreferrer">JSON-style string</a> (with special characters escaped with \ characters). For example, to enter just a tab character, enter &quot;\t&quot; (with the surrounding double quotes, which tell ERDDAP™ that this is a JSON-style string.</p>
</li>
<li>
<p>Often, one of your answers won&#x27;t be what GenerateDatasetsXml needs. You can then try again, with revised answers to the questions, until GenerateDatasetsXml can successfully find and understand the source data.</p>
</li>
<li>
<p>If you answer the questions correctly (or sufficiently correctly), GenerateDatasetsXml will connect to the dataset&#x27;s source and gather basic information (for example, variable names and metadata).<br>
<!-- -->For datasets that are from local NetCDF .nc and related files, GenerateDatasetsXml will often print the ncdump-like structure of the file after it first reads the file. This may give you information to answer the questions better on a subsequent loop through GenerateDatasetsXml.</p>
</li>
<li>
<p>GenerateDatasetsXml will then generate a rough draft of the dataset XML for that dataset.</p>
</li>
<li>
<p>Diagnostic information and the rough draft of the dataset XML will be written to <em>bigParentDirectory</em>/logs/GenerateDatasetsXml.log .</p>
</li>
<li>
<p>The rough draft of the dataset XML will be written to <em>bigParentDirectory</em>/logs/GenerateDatasetsXml.out .</p>
</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="0-files-error-message">&quot;0 files&quot; Error Message<a href="#0-files-error-message" class="hash-link" aria-label="Direct link to &quot;0 files&quot; Error Message" title="Direct link to &quot;0 files&quot; Error Message">​</a></h4>
<p>If you run GenerateDatasetsXml or <a href="#dasdds">DasDds</a>, or if you try to load an EDDGridFrom...Files or EDDTableFrom...Files dataset in ERDDAP™, and you get a &quot;0 files&quot; error message indicating that ERDDAP™ found 0 matching files in the directory (when you think that there are matching files in that directory):</p>
<ul>
<li>
<p>Check that you have specified the full name of the directory. And if you specified the sample filename, make sure you specified the file&#x27;s full name, including the full directory name.</p>
</li>
<li>
<p>Check that the files really are in that directory.</p>
</li>
<li>
<p>Check the spelling of the directory name.</p>
</li>
<li>
<p>Check the fileNameRegex. It&#x27;s really, really easy to make mistakes with regexes. For test purposes, try the regex .* which should match all filenames. (See this <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" target="_blank" rel="noopener noreferrer">regex documentation</a> and <a href="https://www.vogella.com/tutorials/JavaRegularExpressions/article.html" target="_blank" rel="noopener noreferrer">regex tutorial</a>.)</p>
</li>
<li>
<p>Check that the user who is running the program (e.g., user=tomcat (?) for Tomcat/ERDDAP) has &#x27;read&#x27; permission for those files.</p>
</li>
<li>
<p>In some operating systems (for example, SELinux) and depending on system settings, the user who ran the program must have &#x27;read&#x27; permission for the whole chain of directories leading to the directory that has the files.</p>
</li>
<li>
<p>If you have problems that you can&#x27;t solve, <a href="/docs/intro#support">request support</a> with as much information as possible. Similarly, if it seems like the appropriate EDDType for a given dataset doesn&#x27;t work with that dataset, or if there is no appropriate EDDType, please file an <a href="https://github.com/ERDDAP/erddap/issues" target="_blank" rel="noopener noreferrer">issue on GitHub</a> with the details (and a sample file if relevant).<br>
<!-- --> </p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="you-need-to-edit-the-output-from-generatedatasetsxml-to-make-it-better">You need to edit the output from GenerateDatasetsXml to make it better.<a href="#you-need-to-edit-the-output-from-generatedatasetsxml-to-make-it-better" class="hash-link" aria-label="Direct link to You need to edit the output from GenerateDatasetsXml to make it better." title="Direct link to You need to edit the output from GenerateDatasetsXml to make it better.">​</a></h4>
<p> </p>
<ul>
<li>
<p>DISCLAIMER:<br>
<!-- -->THE CHUNK OF datasets.xml MADE BE GenerateDatasetsXml ISN&#x27;T PERFECT. YOU MUST READ AND EDIT THE XML BEFORE USING IT IN A PUBLIC ERDDAP. GenerateDatasetsXml RELIES ON A LOT OF RULES-OF-THUMB WHICH AREN&#x27;T ALWAYS CORRECT. YOU ARE RESPONSIBLE FOR ENSURING THE CORRECTNESS OF THE XML THAT YOU ADD TO ERDDAP&#x27;S datasets.xml FILE.</p>
<p>(Fun Fact: I&#x27;m not shouting. For historical legal reasons, disclaimers must be written in all caps.)</p>
<p>The output of GenerateDatasetsXml is a rough draft.<br>
<!-- -->You will almost always need to edit it.<br>
<!-- -->We&#x27;ve made and continue to make a huge effort to make the output as ready-to-go as possible, but there are limits. Often, needed information is simply not available from the source metadata.</p>
<p>A fundamental problem is that we&#x27;re asking a computer program (GenerateDatasetsXml) to do a task where, if you gave the same task to 100 people, you would get 100 different results. There is no single &quot;right&quot; answer. Obviously, the program comes closest to reading Bob&#x27;s mind (not yours), but even so, it isn&#x27;t an all-understanding AI program, just a bunch of heuristics cobbled together to do an AI-like task. (That day of an all-understanding AI program may come, but it hasn&#x27;t yet. If/when it does, we humans may have bigger problems. Be careful what you wish for.)</p>
</li>
<li>
<p>For informational purposes, the output shows the global sourceAttributes and variable sourceAttributes as comments. ERDDAP™ combines sourceAttributes and addAttributes (which have precedence) to make the combinedAttributes that are shown to the user. (And other attributes are automatically added to longitude, latitude, altitude, depth, and time variables when ERDDAP™ actually makes the dataset).<br>
<!-- --> </p>
</li>
<li>
<p>If you don&#x27;t like a sourceAttribute, overwrite it by adding an addAttribute with the same name but a different value (or no value, if you want to remove it).<br>
<!-- --> </p>
</li>
<li>
<p>All of the addAttributes are computer-generated suggestions. Edit them! If you don&#x27;t like an addAttribute, change it.<br>
<!-- --> </p>
</li>
<li>
<p>If you want to add other addAttributes, add them.<br>
<!-- --> </p>
</li>
<li>
<p>If you want to change a destinationName, change it. But don&#x27;t change sourceNames.<br>
<!-- --> </p>
</li>
<li>
<p>You can change the order of the dataVariables or remove any of them.</p>
<ul>
<li>You can then use <a href="#dasdds">DasDds</a> (see below) to repeatedly test the XML for that dataset to ensure that the resulting dataset appears as you want it to in ERDDAP.</li>
<li>Feel free to make small changes to the datasets.xml chunk that was generated, for example, supply a better infoUrl, summary, or title.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="donotaddstandardnames">doNotAddStandardNames<a href="#donotaddstandardnames" class="hash-link" aria-label="Direct link to doNotAddStandardNames" title="Direct link to doNotAddStandardNames">​</a></h4>
<p>If you include -doNotAddStandardNames as a command line parameter when you run generateDatasetsXml, generateDatasetsXml will not add standard_name to the addAttributes for any variables other than variables named latitude, longitude, altitude, depth or time (which have obvious standard_names). This can be useful if you are using the output from generateDatasetsXml directly in ERDDAP™ without editing the output, because generateDatasetsXml often guesses standard_names incorrectly. (Note that we always recommend that you do edit the output before using it in ERDDAP.) Using this parameter will have other minor related effects because the guessed standard_name is often used for other purposes, e.g., to create a new long_name, and to create the colorBar settings.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="scripting">Scripting<a href="#scripting" class="hash-link" aria-label="Direct link to Scripting" title="Direct link to Scripting">​</a></h4>
<p>As an alternative to answering the questions interactively at the keyboard and looping to generate additional datasets, you can provide command line arguments to answer all of the questions to generate one dataset. GenerateDatasetsXml will process those parameters, write the output to the output file, and exit the program.</p>
<p>To set this up, first use the program in interactive mode and write down your answers. Here&#x27;s a partial example:<br>
<!-- -->Let&#x27;s say you run the script: ./GenerateDatasetsXml.sh<br>
<!-- -->Then enter: EDDTableFromAsciiFiles<br>
<!-- -->Then enter: /u00/data/<br>
<!-- -->Then enter: .*\.asc<br>
<!-- -->Then enter: /u00/data/sampleFile.asc<br>
<!-- -->Then enter: ISO-8859-1</p>
<p>To run this in a non-interactive way, use this command line:<br>
<!-- -->./GenerateDatasetsXml.sh EDDTableFromAsciiFiles /u00/data/ .*\.asc /u00/data/sampleFile.asc ISO-8859-1<br>
<!-- -->So basically, you just list all the answers on the command line.<br>
<!-- -->This should be useful for datasets that change frequently in a way that necessitates re-running GenerateDatasetsXml (notably EDDGridFromThreddsCatalog).</p>
<p>Details:</p>
<ul>
<li>If a parameter contains a space or some special character, then encode the parameter as a <a href="https://www.json.org/json-en.html" target="_blank" rel="noopener noreferrer">JSON-style string</a>, e.g., &quot;my parameter with spaces and two\nlines&quot;.</li>
<li>If you want to specify an empty string as a parameter, use: nothing</li>
<li>If you want to specify the default value of a parameter, use: default<br>
<!-- --> </li>
<li>GenerateDatasetsXml supports a -i<em>datasetsXmlName</em>#<em>tagName</em> command line parameter which inserts the output into the specified datasets.xml file (the default is <em>tomcat</em>/content/erddap/datasets.xml). GenerateDatasetsXml looks for two lines in datasetsXmlName:</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;!-- Begin GenerateDatasetsXml #*tagName someDatetime* --&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;!-- End GenerateDatasetsXml #*tagName someDatetime* --&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and replaces everything in between those lines with the new content, and changes the someDatetime.</p>
<ul>
<li>The -i switch is only processed (and changes to datasets.xml are only made) if you run GenerateDatasetsXml with command line arguments which specify all the answers to all of the questions for one loop of the program. (See &#x27;Scripting&#x27; above.) (The thinking is: This parameter is for use with scripts. If you use the program in interactive mode (typing info on the keyboard), you are likely to generate some incorrect chunks of XML before you generate the one you want.)</li>
<li>If the Begin and End lines are not found, then those lines and the new content are inserted right before &lt;/erddapDatasets&gt;.</li>
<li>There is also a -I (capital i) switch for testing purposes which works the same as -i, but creates a file called datasets.xml<em>DateTime</em> and doesn&#x27;t make changes to datasets.xml.</li>
<li>Don&#x27;t run GenerateDatasetsXml with -i in two processes at once. There is a chance only one set of changes will be kept. There may be serious trouble (for example, corrupted files).</li>
</ul>
<p>If you use &quot;GenerateDatasetsXml -verbose&quot;, it will print more diagnostic messages than usual.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="specialpseudo-dataset-types">Special/Pseudo Dataset Types<a href="#specialpseudo-dataset-types" class="hash-link" aria-label="Direct link to Special/Pseudo Dataset Types" title="Direct link to Special/Pseudo Dataset Types">​</a></h4>
<p>In general, the EDDType options in GenerateDatasetsXml match of the EDD types described in this document (see the <a href="#list-of-types-datasets">List of Dataset Types</a>) and generate one datasets.xml chunk to create one dataset from one specific data source. There are a few exceptions and special cases:</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridfromerddap">EDDGridFromErddap<a href="#eddgridfromerddap" class="hash-link" aria-label="Direct link to EDDGridFromErddap" title="Direct link to EDDGridFromErddap">​</a></h5>
<p>This EDDType generates all of the datasets.xml chunks needed to make <a href="#eddfromerddap">EDDGridFromErddap</a> datasets from all of the EDDGrid datasets in a remote ERDDAP. You will have the option of keeping the original datasetIDs (which may duplicate some datasetIDs already in your ERDDAP) or generating new names which will be unique (but usually aren&#x27;t as human-readable).<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromerddap">EDDTableFromErddap<a href="#eddtablefromerddap" class="hash-link" aria-label="Direct link to EDDTableFromErddap" title="Direct link to EDDTableFromErddap">​</a></h5>
<p>This EDDType generates all of the datasets.xml chunks needed to make <a href="#eddfromerddap">EDDTableFromErddap</a> datasets from all of the EDDTable datasets in a remote ERDDAP. You will have the option of keeping the original datasetIDs (which may duplicate some datasetIDs already in your ERDDAP) or generating new names which will be unique (but usually aren&#x27;t as human-readable).<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridfromthreddscatalog">EDDGridFromThreddsCatalog<a href="#eddgridfromthreddscatalog" class="hash-link" aria-label="Direct link to EDDGridFromThreddsCatalog" title="Direct link to EDDGridFromThreddsCatalog">​</a></h5>
<p>This EDDType generates all of the datasets.xml chunks needed for all of the <a href="#eddgridfromdap">EDDGridFromDap</a> datasets that it can find by crawling recursively through a THREDDS (sub) catalog. There are many forms of THREDDS catalog URLs. This option REQUIRES a THREDDS .xml URL with /catalog/ in it, for example,<br>
<a href="https://oceanwatch.pfeg.noaa.gov/thredds/catalog/catalog.xml" target="_blank" rel="noopener noreferrer">https://oceanwatch.pfeg.noaa.gov/thredds/catalog/catalog.xml</a> or<br>
<a href="https://oceanwatch.pfeg.noaa.gov/thredds/catalog/Satellite/aggregsatMH/chla/catalog.xml" target="_blank" rel="noopener noreferrer">https://oceanwatch.pfeg.noaa.gov/thredds/catalog/Satellite/aggregsatMH/chla/catalog.xml</a><br>
<!-- -->(a related .html catalog is at<br>
<a href="https://oceanwatch.pfeg.noaa.gov/thredds/Satellite/aggregsatMH/chla/catalog.html" target="_blank" rel="noopener noreferrer">https://oceanwatch.pfeg.noaa.gov/thredds/Satellite/aggregsatMH/chla/catalog.html</a> , which is not acceptable for EDDGridFromThreddsCatalog).<br>
<!-- -->If you have problems with EDDGridFromThreddsCatalog:</p>
<ul>
<li>Make sure the URL you are using is valid, includes /catalog/, and ends with /catalog.xml .</li>
<li>If possible, use a public IP address (for example, <a href="https://oceanwatch.pfeg.noaa.gov" target="_blank" rel="noopener noreferrer">https://oceanwatch.pfeg.noaa.gov</a>) in the URL, not a local numeric IP address (for example, <a href="https://12.34.56.78" target="_blank" rel="noopener noreferrer">https://12.34.56.78</a>). If the THREDDS is only accessible via the local numeric IP address, you can use <a href="#converttopublicsourceurl">&lt;convertToPublicSourceUrl&gt;</a> so ERDDAP™ users see the public address, even though ERDDAP™ gets data from the local numeric address.</li>
<li>If you have problems that you can&#x27;t solve, <a href="#troubleshooting-tips">check the troubleshooting tips</a>.</li>
<li>The low level code for this now uses the Unidata netcdf-java catalog crawler code (thredds.catalog classes) so that it can handle all THREDDS catalogs (which can be surprisingly complex) Thanks to Unidata for that code.<br>
<!-- --> </li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridlonpm180fromerddapcatalog">EDDGridLonPM180FromErddapCatalog<a href="#eddgridlonpm180fromerddapcatalog" class="hash-link" aria-label="Direct link to EDDGridLonPM180FromErddapCatalog" title="Direct link to EDDGridLonPM180FromErddapCatalog">​</a></h5>
<p>This EDDType generates the datasets.xml to make <a href="#eddgridlonpm180">EDDGridLonPM180</a> datasets from all of the EDDGrid datasets in an ERDDAP that have any longitude values greater than 180.</p>
<ul>
<li>If possible, use a public IP address (for example, <a href="https://oceanwatch.pfeg.noaa.gov" target="_blank" rel="noopener noreferrer">https://oceanwatch.pfeg.noaa.gov</a>) in the URL, not a local numeric IP address (for example, <a href="https://12.34.56.78" target="_blank" rel="noopener noreferrer">https://12.34.56.78</a>). If the ERDDAP™ is only accessible via the local numeric IP address, you can use <a href="#converttopublicsourceurl">&lt;convertToPublicSourceUrl&gt;</a> so ERDDAP™ users see the public address, even though ERDDAP™ gets data from the local numeric address.<br>
<!-- --> </li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridlon0360fromerddapcatalog">EDDGridLon0360FromErddapCatalog<a href="#eddgridlon0360fromerddapcatalog" class="hash-link" aria-label="Direct link to EDDGridLon0360FromErddapCatalog" title="Direct link to EDDGridLon0360FromErddapCatalog">​</a></h5>
<p>This EDDType generates the datasets.xml to make <a href="#eddgridlon0360">EDDGridLon0360</a> datasets from all of the EDDGrid datasets in an ERDDAP that have any longitude values less than 0.</p>
<ul>
<li>If possible, use a public IP address (for example, <a href="https://oceanwatch.pfeg.noaa.gov" target="_blank" rel="noopener noreferrer">https://oceanwatch.pfeg.noaa.gov</a>) in the URL, not a local numeric IP address (for example, <a href="https://12.34.56.78" target="_blank" rel="noopener noreferrer">https://12.34.56.78</a>). If the ERDDAP™ is only accessible via the local numeric IP address, you can use <a href="#converttopublicsourceurl">&lt;convertToPublicSourceUrl&gt;</a> so ERDDAP™ users see the public address, even though ERDDAP™ gets data from the local numeric address.<br>
<!-- --> </li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="eddsfromfiles">EDDsFromFiles<a href="#eddsfromfiles" class="hash-link" aria-label="Direct link to EDDsFromFiles" title="Direct link to EDDsFromFiles">​</a></h5>
<p>Given a start directory, this traverses the directory and all subdirectories and tries to create a dataset for each group of data files that it finds.</p>
<ul>
<li>This assumes that when a dataset is found, the dataset includes all subdirectories.</li>
<li>If a dataset is found, similar sibling directories will be treated as separate datasets (for example, directories for the 1990&#x27;s, the 2000&#x27;s, the 2010&#x27;s, will generate separate datasets). They should be easy to combine by hand -- just change the first dataset&#x27;s &lt;fileDir&gt; to the parent directory and delete all the subsequent sibling datasets.</li>
<li>This will only try to generate a chunk of datasets.xml for the most common type of file extension in a directory (not counting .md5, which is ignored). So, given a directory with 10 .nc files and 5 .txt files, a dataset will be generated for the .nc files only.</li>
<li>This assumes that all files in a directory with the same extension belong in the same dataset. If a directory has some .nc files with SST data and some .nc files with chlorophyll data, just one sample .nc file will be read (SST? chlorophyll?) and just one dataset will be created for that type of file. That dataset will probably fail to load because of complications from trying to load two types of files into the same dataset.</li>
<li>If there are fewer than 4 files with the most common extension in a directory, this assumes that they aren&#x27;t data files and just skips the directory.</li>
<li>If there are 4 or more files in a directory, but this can&#x27;t successfully generate a chunk of datasets.xml for the files (for example, an unsupported file type), this will generate an <a href="#eddtablefromfilenames">EDDTableFromFileNames</a> dataset for the files.</li>
<li>At the end of the diagnostics that this writes to the log file, just before the datasets.xml chunks, this will print a table with a summary of information gathered by traversing all the subdirectories. The table will list every subdirectory and indicate the most common type of file extension, the total number of files, and which type of dataset was created for these files (if any). If you are faced with a complex, deeply nested file structure, consider running GenerateDatasetsXml with EDDType=EDDsFromFiles just to generate this information,</li>
<li>This option may not do a great job of guessing the best EDDType for a given group of data files, but it is quick, easy, and worth a try. If the source files are suitable, it works well and is a good first step in generating the datasets.xml for a file system with lots of subdirectories, each with data files from different datasets.<br>
<!-- --> </li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromeml-and-eddtablefromemlbatch">EDDTableFromEML and EDDTableFromEMLBatch<a href="#eddtablefromeml-and-eddtablefromemlbatch" class="hash-link" aria-label="Direct link to EDDTableFromEML and EDDTableFromEMLBatch" title="Direct link to EDDTableFromEML and EDDTableFromEMLBatch">​</a></h5>
<p>These special EDDType generates the datasets.xml to make an <a href="#eddtablefromasciifiles">EDDTableFromAsciiFiles</a> dataset from each of the tables described in an <a href="https://knb.ecoinformatics.org/external//emlparser/docs/index.html" target="_blank" rel="noopener noreferrer">Ecological Metadata Language</a> XML file. The &quot;Batch&quot; variant works on all of the EML files in a local or remote directory. Please see the separate <a href="/docs/server-admin/EDDTableFromEML">documentation for EDDTableFromEML</a>.<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefrominport">EDDTableFromInPort<a href="#eddtablefrominport" class="hash-link" aria-label="Direct link to EDDTableFromInPort" title="Direct link to EDDTableFromInPort">​</a></h5>
<p>This special EDDType generates the datasets.xml to make an <a href="#eddtablefromasciifiles">EDDTableFromAsciiFiles</a> dataset from the information in an <a href="https://inport.nmfs.noaa.gov/inport" target="_blank" rel="noopener noreferrer">inport-xml</a> file. If you can get access to the source data file (the inport-xml file should have clues for where to find it), you can make a working dataset in ERDDAP.</p>
<p>The following steps outline how to use GenerateDatasetsXml with an inport-xml file in order to get a working dataset in ERDDAP.</p>
<ol>
<li>Once you have access to the inport-xml file (either as a URL or a local file): run GenerateDatasetsXml, specify EDDType=EDDTableFromInPort, specify the inport-xml URL or full filename, specify whichChild=0, and specify the other requested information (if known). (At this point, you don&#x27;t need to have the source data file or specify its name.) The whichChild=0 setting tells GenerateDatasetsXml to write out the information for <strong>all</strong> of the &lt;entity-attribute-information&gt;&lt;entity&gt;&#x27;s in the inport-xml file (if there are any). It also prints out a Background information summary, including all of the download-url&#x27;s listed in the inport-xml file.</li>
<li>Look through all that information (including the Background information that GenerateDatasetsXml prints) and visit the download-url(s) in order to try to find the source data file(s). If you can find it(them), download it(them) into a directory that is accessible to ERDDAP. (If you can&#x27;t find any source data files, there is no point in proceeding.)</li>
<li>Run GenerateDatasetsXml again.<br>
<!-- -->If the source data file corresponds to one of the inport-xml file&#x27;s &lt;entity-attribute-information&gt;&lt;entity&gt;&#x27;s, specify whichChild=<em>thatEntity&#x27;sNumber</em> (e.g., 1, 2, 3, ...). ERDDAP™ will try to match the column names in the source data file to names in the entity information, and prompt to accept/reject/fix any discrepancies.<br>
<!-- -->Or, if the inport-xml file doesn&#x27;t have any &lt;entity-attribute-information&gt;&lt;entity&gt;&#x27;s, specify whichChild=0.</li>
<li>In the chunk of datasets.xml that was made by GenerateDatasetsXml, revise the <a href="#global-attributes">global &lt;addAttributes&gt;</a> as needed/desired.</li>
<li>In the chunk of datasets.xml that was made by GenerateDatasetsXml, add/revise the <a href="#datavariable">&lt;dataVariable&gt;</a> information as needed/desired to describe each of the variables. Be sure you properly identify each variable&#x27;s<br>
<a href="#sourcename">&lt;sourceName&gt;</a> (as it appears in the source),<br>
<a href="#destinationname">&lt;destinationName&gt;</a> (which has more limitations on allowed characters than sourceName),<br>
<a href="#units">&lt;units&gt;</a> (especially if it is a <a href="#timestamp-variables">time or timestamp variable</a> where the units need to specify the format), and<br>
<a href="#missing_value">&lt;missing_value&gt;</a>,</li>
<li>When you are close to finishing, repeatedly use the <a href="#dasdds">DasDds</a> tool to quickly see if the dataset description is valid and if the dataset will appear in ERDDAP™ as you want it to.<br>
<!-- --> </li>
</ol>
<p>It would be great if groups using InPort to document their datasets would also use ERDDAP™ to make the actual data available:</p>
<ul>
<li>ERDDAP™ is a solution that can be used right now so you can fulfill NOAA&#x27;s <a href="https://nosc.noaa.gov/EDMC/PD.DSP.php" target="_blank" rel="noopener noreferrer">Public Access to Research Results (PARR) requirements</a> right now, not at some vague time in the future.</li>
<li>ERDDAP™ makes the actual data available to users, not just the metadata. (What good is metadata without data?)</li>
<li>ERDDAP™ supports metadata (notably, the units of variables), unlike some other data server software being considered. (What good is data without metadata?) To use software that doesn&#x27;t support metadata is to invite the data to be misunderstood and misused.</li>
<li>ERDDAP™ is free and open-source software unlike some other software being considered. Ongoing development of ERDDAP™ is already paid for. Support for ERDDAP™ users is free.</li>
<li>ERDDAP&#x27;s appearance can be easily customized to reflect and highlight your group (not ERD or ERDDAP).</li>
<li>ERDDAP™ offers a consistent way to access all datasets.</li>
<li>ERDDAP™ can read data from many types of data files and from relational databases.</li>
<li>ERDDAP™ can deal with large datasets, including datasets where the source data is in many data files.</li>
<li>ERDDAP™ can write data to many types of data files, at the user&#x27;s request, including scientific data file types like netCDF, ESRI .csv, and ODV .txt.</li>
<li>ERDDAP™ can make custom graphs and maps of subsets of the data, based on the user&#x27;s specifications.</li>
<li>ERDDAP™ can deal with non-data datasets such as collections of image, video, or audio files.</li>
<li>ERDDAP™ has been installed and used at <a href="/#who-uses-erddap">more than 60 institutions around the world</a>.</li>
<li>ERDDAP™ is listed as one of the data servers recommended for use within NOAA in the <a href="https://www.ngdc.noaa.gov/wiki/index.php/Data_Access_Technical_Recommendations#Software_implementations" target="_blank" rel="noopener noreferrer">NOAA Data Access Procedural Directive</a>, unlike some other software being considered.</li>
<li>ERDDAP™ is a product of NMFS/NOAA, so using it within NMFS and NOAA should be a point of pride for NMFS and NOAA.</li>
</ul>
<p>Please give ERDDAP™ a try. If you need help, please post a message in the ERDDAP™ Google group.<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="addfillvalueattributes">addFillValueAttributes<a href="#addfillvalueattributes" class="hash-link" aria-label="Direct link to addFillValueAttributes" title="Direct link to addFillValueAttributes">​</a></h5>
<p>This special EDDType option isn&#x27;t a dataset type. It is a tool which can add _FillValue attributes to some variables in some datasets. See <a href="#add-_fillvalue-attributes">addFillValueAttributes</a>.<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="findduplicatetime">findDuplicateTime<a href="#findduplicatetime" class="hash-link" aria-label="Direct link to findDuplicateTime" title="Direct link to findDuplicateTime">​</a></h5>
<p>This special EDDType option isn&#x27;t a dataset type. Instead, it tells GenerateDatasetsXml to search through a collection of gridded .nc (and related) files to find and print out a list of files with duplicate time values. When it looks at the time values, it converts them from the original units to &quot;seconds since 1970-01-01&quot; in case different files use different units strings. You need to provide the starting directory (with or without the trailing slash), the file name regular expression (e.g., .*\.nc ), and the name of the time variable in the files.<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="ncdump">ncdump<a href="#ncdump" class="hash-link" aria-label="Direct link to ncdump" title="Direct link to ncdump">​</a></h5>
<p>This special EDDType option isn&#x27;t a dataset type. Instead, it tells GenerateDatasetsXml to print an <a href="https://linux.die.net/man/1/ncdump" target="_blank" rel="noopener noreferrer">ncdump</a>-like printout of an .nc, .ncml, or .hdf file. It actually uses the netcdf-java&#x27;s <a href="https://docs.unidata.ucar.edu/netcdf-java/5.4/javadoc/ucar/nc2/write/Ncdump.html" target="_blank" rel="noopener noreferrer">NCdump</a>, which is a more limited tool than the C version of NCdump. If you use this option, GenerateDatasetsXml will ask you to use one of the options: &quot;-h&quot; (header), &quot;-c&quot; (coordinate vars), &quot;-vall&quot; (default), &quot;-v var1;var2&quot;, &quot;-v var1(0,0:10,0:20)&quot;. This is useful because, without ncdump it is hard to know what is in an .nc, .ncml, or .hdf file and thus which EDDType you should specify for GenerateDatasetsXml. For an .ncml file, this will print the ncdump output for the result of the .ncml file changes applied to the underlying .nc or .hdf file.<br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dasdds">DasDds<a href="#dasdds" class="hash-link" aria-label="Direct link to DasDds" title="Direct link to DasDds">​</a></h3>
<ul>
<li><a href="#dasdds"><strong>DasDds</strong></a> is a command line program that you can use after you have created a first attempt at the XML for a new dataset in datasets.xml. With DasDds, you can repeatedly test and refine the XML. When you use the DasDds program:<!-- -->
<ol>
<li>On Windows, the first time you run DasDds, you need to edit the DasDds.bat file with a text editor to change the path to the java.exe file so that Windows can find Java.</li>
<li>DasDds asks you for the datasetID for the dataset you are working on.</li>
<li>DasDds tries to create the dataset with that datasetID.<!-- -->
<ul>
<li>DasDds always prints lots of diagnostic messages.<br>
<!-- -->If you use &quot;DasDds -verbose&quot;, DasDds will print more diagnostic messages than usual.</li>
<li>For safety, DasDds always deletes all of the cached dataset information (files) for the dataset before trying to create the dataset. This is the equivalent of setting a <a href="/docs/server-admin/additional-information#hard-flag">hard flag</a> So for aggregated datasets, you might want to adjust the fileNameRegex temporarily to limit the number of files the data constructor finds.</li>
<li>If the dataset fails to load (for whatever reason), DasDds will stop and show you the error message for the first error it finds.<br>
<strong>Don&#x27;t try to guess what the problem might be. Read the ERROR message carefully.</strong><br>
<!-- -->If necessary, read the preceding diagnostic messages to find more clues and information, too.</li>
<li><strong>Make a change to the dataset&#x27;s XML to try to solve THAT problem</strong><br>
<!-- -->and let DasDds try to create the dataset again.</li>
<li><strong>If you repeatedly solve each problem, you will eventually solve all the problems</strong><br>
<!-- -->and the dataset will load.</li>
</ul>
</li>
<li>All DasDds output (diagnostics and results) are written to the screen and to <em>bigParentDirectory</em>/logs/DasDds.log .</li>
<li>If DasDds can create the dataset, DasDds will then show you the <a href="https://coastwatch.pfeg.noaa.gov/erddap/griddap/documentation.html#fileType_das" target="_blank" rel="noopener noreferrer">.das (Dataset Attribute Structure)</a>, <a href="https://coastwatch.pfeg.noaa.gov/erddap/griddap/documentation.html#fileType_dds" target="_blank" rel="noopener noreferrer">.dds (Dataset Descriptor Structure)</a>, and <a href="https://coastwatch.pfeg.noaa.gov/erddap/griddap/documentation.html#timeGaps" target="_blank" rel="noopener noreferrer">.timeGaps (time gaps)</a> information for the dataset on your screen and write them to <em>bigParentDirectory</em>/logs/DasDds.out .</li>
<li>Often, you will want to make some small change to the dataset&#x27;s XML to clean up the dataset&#x27;s metadata and rerun DasDds.</li>
</ol>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bonus-third-party-tool-erddap-lint">Bonus Third-Party Tool: ERDDAP-lint<a href="#bonus-third-party-tool-erddap-lint" class="hash-link" aria-label="Direct link to Bonus Third-Party Tool: ERDDAP-lint" title="Direct link to Bonus Third-Party Tool: ERDDAP-lint">​</a></h3>
<p>ERDDAP-lint is a program from Rob Fuller and Adam Leadbetter of the Irish Marine Institute that you can use to improve the metadata of your ERDDAP™ datasets. ERDDAP-lint &quot;contains rules and a simple static web application for running some verification tests against your ERDDAP™ server. All the tests are run in the web browser.&quot; Like the <a href="https://en.wikipedia.org/wiki/Lint_(software)" target="_blank" rel="noopener noreferrer">Unix/Linux lint tool</a>, you can edit the existing rules or add new rules. See <a href="https://github.com/IrishMarineInstitute/erddap-lint" target="_blank" rel="noopener noreferrer">ERDDAP-lint</a> for more information.</p>
<p>This tool is especially useful for datasets that you created some time ago and now want to bring up-to-date with your current metadata preferences. For example, early versions of GenerateDatasetsXml didn&#x27;t put any effort into creating global creator_name, creator_email, creator_type, or creator_url metadata. You could use ERDDAP-lint to identify the datasets that lack those metadata attributes.</p>
<p>Thanks to Rob and Adam for creating this tool and making it available to the ERDDAP™ community.<br>
<!-- --> </p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-basic-structure-of-the-datasetsxml-file">The Basic Structure of the datasets.xml File<a href="#the-basic-structure-of-the-datasetsxml-file" class="hash-link" aria-label="Direct link to The Basic Structure of the datasets.xml File" title="Direct link to The Basic Structure of the datasets.xml File">​</a></h2>
<p>The required and optional tags allowed in a datasets.xml file (and the number of times they may appear) are shown below. In practice, your datasets.xml will have lots of &lt;dataset&gt;&#x27;s tags and only use the other tags within &lt;erddapDatasets&gt; as needed.</p>
<blockquote>
<p> &lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot; ?&gt;<br>
<!-- --> &lt;erddapDatasets&gt;<br>
<!-- -->   <a href="#angulardegreeunits">&lt;angularDegreeUnits&gt;</a>...&lt;/angularDegreeUnits&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#angulardegreetrueunits">&lt;angularDegreeTrueUnits&gt;</a>...&lt;/angularDegreeTrueUnits&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#cacheminutes">&lt;cacheMinutes&gt;</a>...&lt;/cacheMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#commonstandardnames">&lt;commonStandardNames&gt;</a>...&lt;/commonStandardNames&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#convertinterpolaterequestcsvexample">&lt;convertInterpolateRequestCSVExample /&gt;</a> &lt;!-- 0 or more --&gt;<br>
<!-- -->   <a href="#convertinterpolatedatasetidvariablelist">&lt;convertInterpolateDatasetIDVariableList /&gt;</a> &lt;!-- 0 or more --&gt;<br>
<!-- -->   <a href="#converttopublicsourceurl">&lt;convertToPublicSourceUrl /&gt;</a> &lt;!-- 0 or more --&gt;<br>
<!-- -->   <a href="#decompressed-cache">&lt;decompressedCacheMaxGB&gt;</a>...&lt;/decompressedCacheMaxGB&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#decompressed-cache">&lt;decompressedCacheMaxMinutesOld&gt;</a>...&lt;/decompressedCacheMaxMinutesOld&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#drawlandmask">&lt;drawLandMask&gt;</a>...&lt;/drawLandMask&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#emaildiagnosticstoerddata">&lt;emailDiagnosticsToErdData&gt;</a>...&lt;/emailDiagnosticsToErdData&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#graphbackgroundcolor">&lt;graphBackgroundColor&gt;</a>...&lt;/graphBackgroundColor&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#ipaddressmaxrequests">&lt;ipAddressMaxRequests&gt;</a>...&lt;/ipAddressMaxRequests&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#ipaddressmaxrequestsactive">&lt;ipAddressMaxRequestsActive&gt;</a>...&lt;ipAddressMaxRequestsActive&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#ipaddressunlimited">&lt;ipAddressUnlimited&gt;</a>...&lt;ipAddressUnlimited&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#loaddatasetsminminutes">&lt;loadDatasetsMinMinutes&gt;</a>...&lt;/loadDatasetsMinMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#loaddatasetsmaxminutes">&lt;loadDatasetsMaxMinutes&gt;</a>...&lt;/loadDatasetsMaxMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#loglevel">&lt;logLevel&gt;</a>...&lt;/logLevel&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#nthreads">&lt;nGridThreads&gt;</a>...&lt;/nGridThreads&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#nthreads">&lt;nTableThreads&gt;</a>...&lt;/nTableThreads&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#palettes">&lt;palettes&gt;</a>...&lt;/palettes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#partialrequestmaxbytes-and-partialrequestmaxcells">&lt;partialRequestMaxBytes&gt;</a>...&lt;/partialRequestMaxBytes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#partialrequestmaxbytes-and-partialrequestmaxcells">&lt;partialRequestMaxCells&gt;</a>...&lt;/partialRequestMaxCells&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#requestblacklist">&lt;requestBlacklist&gt;</a>...&lt;/requestBlacklist&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#slowdowntroublemillis">&lt;slowDownTroubleMillis&gt;</a>...&lt;/slowDownTroubleMillis&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#subscriptionemailblacklist">&lt;subscriptionEmailBlacklist&gt;</a>...&lt;/subscriptionEmailBlacklist&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#unusualactivity">&lt;unusualActivity&gt;</a>...&lt;/unusualActivity&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#updatemaxevents">&lt;updateMaxEvents&gt;</a>...&lt;/updateMaxEvents&gt; &lt;!-- 0 or 1 --&gt;</p>
<p>   <a href="#standard-text">&lt;standardLicense&gt;</a>...&lt;/standardLicense&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#standard-text">&lt;standardContact&gt;</a>...&lt;/standardContact&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#standard-text">&lt;standardDataLicenses&gt;</a>...&lt;/standardDataLicenses&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#standard-text">&lt;standardDisclaimerOfEndorsement&gt;</a>...&lt;/standardDisclaimerOfEndorsement&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#standard-text">&lt;standardDisclaimerOfExternalLinks&gt;</a>...&lt;/standardDisclaimerOfExternalLinks&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#standard-text">&lt;standardGeneralDisclaimer&gt;</a>...&lt;/standardGeneralDisclaimer&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#standard-text">&lt;standardPrivacyPolicy&gt;</a>...&lt;/standardPrivacyPolicy&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#standard-text">&lt;startHeadHtml5&gt;</a>...&lt;/startHeadHtml5&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#standard-text">&lt;startBodyHtml5&gt;</a>...&lt;/startBodyHtml5&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#standard-text">&lt;theShortDescriptionHtml&gt;</a>...&lt;/theShortDescriptionHtml&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->   <a href="#standard-text">&lt;endBodyHtml5&gt;</a>...&lt;/endBodyHtml5&gt; &lt;!-- 0 or 1 --&gt;</p>
<p>   <a href="#user">&lt;user username=&quot;...&quot; password=&quot;...&quot; roles=&quot;...&quot; /&gt;</a> &lt;!-- 0 or more --&gt;</p>
<p>   <a href="#list-of-types-datasets">&lt;dataset&gt;</a>...&lt;/dataset&gt; &lt;!-- 1 or more --&gt;<br>
<!-- --> &lt;/erddapDatasets&gt;</p>
</blockquote>
<p>It is possible that other encodings will be allowed in the future, but for now, only ISO-8859-1 is recommended.<br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="xinclude">XInclude<a href="#xinclude" class="hash-link" aria-label="Direct link to XInclude" title="Direct link to XInclude">​</a></h3>
<p>New in version 2.25 is support for XInclude. This requires you are using the SAX parser &lt;useSaxParser&gt;true&lt;/useSaxParser&gt; in your setup.xml. This can allow you to write each dataset in its own file, then include them all in the main datasets.xml, reuse parts of dataset definitions, or both. If you want to see an example, <a href="https://github.com/ERDDAP/erddap/blob/main/src/test/java/testDataset/EDDTestDataset.java" target="_blank" rel="noopener noreferrer">EDDTestDataset.java</a> sets up XInclude to reuse variable definitions.<br>
<!-- --> </p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="notes">Notes<a href="#notes" class="hash-link" aria-label="Direct link to Notes" title="Direct link to Notes">​</a></h2>
<p>Working with the datasets.xml file is a non-trivial project. Please read all of these notes carefully. After you pick a <a href="#list-of-types-datasets">dataset type</a>, please read the detailed description of it carefully.
 </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="choosing-the-dataset-type">Choosing the Dataset Type<a href="#choosing-the-dataset-type" class="hash-link" aria-label="Direct link to Choosing the Dataset Type" title="Direct link to Choosing the Dataset Type">​</a></h3>
<p>In most cases, there is just one ERDDAP™ dataset type that is appropriate for a given data source. In a few cases (e.g., .nc files), there are a few possibilities, but usually one of them is definitely best. The first and biggest decision you must make is: is it appropriate to treat the dataset as a group of multidimensional arrays (if so see the <a href="#eddgrid">EDDGrid dataset types</a>) or as a database-like table of data (if so see the <a href="#eddtable">EDDTable dataset types</a>).<br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="serving-the-data-as-is">Serving the Data As Is<a href="#serving-the-data-as-is" class="hash-link" aria-label="Direct link to Serving the Data As Is" title="Direct link to Serving the Data As Is">​</a></h3>
<p>Usually, there is no need to modify the data source (e.g., convert the files to some other file type) so that ERDDAP™ can serve it. One of the assumptions of ERDDAP™ is that the data source will be used as is. Usually this works fine. Some exceptions are:</p>
<ul>
<li>Relational Databases and Cassandra -- ERDDAP™ can serve data directly from relational databases and Cassandra. But for security, load balancing, and performance issues, you may choose to set up another database with the same data or save the data to NetCDF v3 .nc files and have ERDDAP™ serve the data from the new data source. See <a href="#eddtablefromdatabase">EDDTableFromDatabase</a> and <a href="#eddtablefromcassandra">EDDTableFromCassandra</a>.</li>
<li>Not Supported Data Sources -- ERDDAP™ can support a large number of types of data sources, but the world is filled with 1000&#x27;s (millions?) of different data sources (notably, data file structures). If ERDDAP™ doesn&#x27;t support your data source:<!-- -->
<ul>
<li>If the data source is NetCDF .nc files, you can use <a href="#ncml-files">NcML</a> to modify the data files on-the-fly, or use <a href="#netcdf-operators-nco">NCO</a> to permanently modify the data files.</li>
<li>You can write the data to a data source type that ERDDAP™ supports. NetCDF-3 .nc files are a good, general recommendation because they are binary files that ERDDAP™ can read very quickly. For tabular data, consider storing the data in a collection of .nc files that use the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#discrete-sampling-geometries" target="_blank" rel="noopener noreferrer">CF Discrete Sampling Geometries (DSG)</a> Contiguous Ragged Array data structures and so can be handled with ERDDAP&#x27;s <a href="#eddtablefromnccffiles">EDDTableFromNcCFFiles</a>). If they are logically organized (each with data for a chunk of space and time), ERDDAP™ can extract data from them very quickly.</li>
<li>You can request that support for that data source be added to ERDDAP™ by emailing Chris.John at noaa.gov.</li>
<li>You can add support for that data source by writing the code to handle it yourself. See <a href="/docs/contributing/programmer-guide">the ERDDAP™ Programmer&#x27;s Guide</a></li>
</ul>
</li>
<li>Speed -- ERDDAP™ can read data from some data sources much faster than others. For example, reading NetCDF v3 .nc files is fast and reading ASCII files is slower. And if there is a large (&gt;1000) or huge (&gt;10,000) number of source data files, ERDDAP™ will respond to some data requests slowly. Usually, the difference isn&#x27;t noticeable to humans. However, if you think ERDDAP™ is slow for a given dataset, you may choose to solve the problem by writing the data to a more efficient setup (usually: a few, well-structured, NetCDF v3 .nc files). For tabular data, see <a href="#millions-of-files">this advice</a>.<br>
<!-- --> </li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hint">Hint<a href="#hint" class="hash-link" aria-label="Direct link to Hint" title="Direct link to Hint">​</a></h3>
<p>It is often easier to generate the XML for a dataset by making a copy of a working dataset description in dataset.xml and then modifying it.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="encoding-special-characters">Encoding Special Characters<a href="#encoding-special-characters" class="hash-link" aria-label="Direct link to Encoding Special Characters" title="Direct link to Encoding Special Characters">​</a></h3>
<p>Since datasets.xml is an XML file, you MUST <a href="https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML" target="_blank" rel="noopener noreferrer">&amp;-encode</a> &quot;&amp;&quot;, &quot;&lt;&quot;, and &quot;&gt;&quot; in any content as &quot;&amp;&quot;, &quot;&lt;&quot;, and &quot;&gt;&quot;.<br>
<!-- -->Wrong: &lt;title&gt;Time &amp; Tides&lt;/title&gt;<br>
<!-- -->Right:   &lt;title&gt;Time &amp; Tides&lt;/title&gt;<br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="xml-doesnt-tolerate-syntax-errors">XML doesn&#x27;t tolerate syntax errors<a href="#xml-doesnt-tolerate-syntax-errors" class="hash-link" aria-label="Direct link to XML doesn&#x27;t tolerate syntax errors" title="Direct link to XML doesn&#x27;t tolerate syntax errors">​</a></h3>
<p>After you edit the dataset.xml file, it is a good idea to verify that the result is <a href="https://www.w3schools.com/xml/xml_dtd.asp" target="_blank" rel="noopener noreferrer">well-formed XML</a> by pasting the XML text into an XML checker like <a href="https://www.xmlvalidation.com/" target="_blank" rel="noopener noreferrer">xmlvalidation</a>.<br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting-tips">Troubleshooting Tips<a href="#troubleshooting-tips" class="hash-link" aria-label="Direct link to Troubleshooting Tips" title="Direct link to Troubleshooting Tips">​</a></h3>
<ul>
<li><strong>Other Ways To Diagnose Problems With Datasets</strong><br>
<!-- -->In addition to the two main <a href="#tools">Tools</a>,<!-- -->
<ul>
<li><a href="/docs/server-admin/additional-information#log">log.txt</a> is a log file with all of ERDDAP&#x27;s diagnostic messages.</li>
<li>The <a href="/docs/server-admin/additional-information#daily-report">Daily Report</a> has more information than the status page, including a list of datasets that didn&#x27;t load and the exceptions (errors) they generated.</li>
<li>The <a href="/docs/server-admin/additional-information#status-page">Status Page</a> is a quick way to check ERDDAP&#x27;s status from any web browser. It includes a list of datasets that didn&#x27;t load (although not the related exceptions) and taskThread statistics (showing the progress of <a href="#eddgridcopy">EDDGridCopy</a> and <a href="#eddtablecopy">EDDTableCopy</a> datasets and any <a href="#eddgridfromfiles">EDDGridFromFiles</a> or <a href="#eddtablefromfiles">EDDTableFromFiles</a> datasets that use <a href="#cachefromurl">cacheFromUrl</a> (but not cacheSizeGB)).</li>
<li>If you get stuck, see our <a href="/docs/intro#support">section on getting additional support</a>.
 </li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="special-variables">Special variables<a href="#special-variables" class="hash-link" aria-label="Direct link to Special variables" title="Direct link to Special variables">​</a></h3>
<ul>
<li><strong><a href="#destinationname">The longitude, latitude, altitude (or depth), and time (LLAT) variable</a> <a href="#destinationname">destinationName</a>s are special.</strong>
<ul>
<li>In general:<!-- -->
<ul>
<li>LLAT variables are made known to ERDDAP™ if the axis variable&#x27;s (for EDDGrid datasets) or data variable&#x27;s (for EDDTable datasets) <a href="#destinationname">destinationName</a> is &quot;longitude&quot;, &quot;latitude&quot;, &quot;altitude&quot;, &quot;depth&quot;, or &quot;time&quot;.</li>
<li>We strongly encourage you to use these standard names for these variables whenever possible. None of them is required. If you don&#x27;t use these special variable names, ERDDAP™ won&#x27;t recognize their significance. For example, LLAT variables are treated specially by Make A Graph (<em>datasetID</em>.graph): if the X Axis variable is &quot;longitude&quot; and the Y Axis variable is &quot;latitude&quot;, you will get a map (using a standard projection, and with a land mask, political boundaries, etc.) instead of a graph.</li>
<li>ERDDAP™ will automatically add lots of metadata to LLAT variables (for example, &quot;<a href="#ioos_category">ioos_category</a>&quot;, &quot;<a href="#units">units</a>&quot;, and several standards-related attributes like &quot;_CoordinateAxisType&quot;).</li>
<li>ERDDAP™ will automatically, on-the-fly, add lots of global metadata related to the LLAT values of the selected data subset (for example, &quot;geospatial_lon_min&quot;).</li>
<li>Clients that support these metadata standards will be able to take advantage of the added metadata to position the data in time and space.</li>
<li>Clients will find it easier to generate queries that include LLAT variables because the variable&#x27;s names are the same in all relevant datasets.</li>
</ul>
</li>
<li>For the &quot;longitude&quot; variable and the &quot;latitude&quot; variable:<!-- -->
<ul>
<li>Use the <a href="#destinationname">destinationName</a>s &quot;longitude&quot; and &quot;latitude&quot; only if the <a href="#units">units</a> are degrees_east and degrees_north, respectively. If your data doesn&#x27;t fit these requirements, use different variable names (for example, x, y, lonRadians, latRadians).</li>
<li>If you have longitude and latitude data expressed in different units and thus with different destinationNames, for example, lonRadians and latRadians, Make A Graph (<em>datasetID</em>.graph) will make graphs (for example, time series) instead of maps.</li>
</ul>
</li>
<li>For the &quot;altitude&quot; variable and the &quot;depth&quot; variable:<!-- -->
<ul>
<li>Use the <a href="#destinationname">destinationName</a> &quot;altitude&quot; to identify the data&#x27;s distance above sea level (positive=&quot;up&quot; values). Optionally, you may use &quot;altitude&quot; for distances below sea level if the values are negative below the sea (or if you use, for example,<br>
<a href="#scale_factor">&lt;att name=&quot;scale_factor&quot; type=&quot;int&quot;&gt;-1&lt;/att&gt;</a> to convert depth values into altitude values.</li>
<li>Use the destinationName &quot;depth&quot; to identify the data&#x27;s distance below sea level (positive=&quot;down&quot; values).</li>
<li>A dataset may not have both &quot;altitude&quot; and &quot;depth&quot; variables.</li>
<li>For these variable names, the <a href="#units">units</a> must be &quot;m&quot;, &quot;meter&quot;, or &quot;meters&quot;. If the units different (for example, fathoms), you can use<br>
<a href="#scale_factor">&lt;att name=&quot;scale_factor&quot;&gt;<em>someValue</em>&lt;/att&gt;</a> and <a href="#units">&lt;att name=&quot;units&quot;&gt;meters&lt;/att&gt;</a> to convert the units to meters.</li>
<li>If your data doesn&#x27;t fit these requirements, use a different destinationName (for example, aboveGround, distanceToBottom).</li>
<li>If you know the vertical CRS please specify it in the metadata, e.g., &quot;EPSG:5829&quot; (instantaneous height above sea level), &quot;EPSG:5831&quot; (instantaneous depth below sea level), or &quot;EPSG:5703&quot; (NAVD88 height).</li>
</ul>
</li>
<li>For the &quot;time&quot; variable:<!-- -->
<ul>
<li>Use the <a href="#destinationname">destinationName</a> &quot;time&quot; only for variables that include the entire date+time (or date, if that is all there is). If, for example, there are separate columns for date and timeOfDay, don&#x27;t use the variable name &quot;time&quot;.</li>
<li>See <a href="#time-units">units</a> for more information about the units attribute for time and timeStamp variables.</li>
<li>The time variable and related <a href="#timestamp-variables">timeStamp variables</a> are unique in that they always convert data values from the source&#x27;s time format (whatever it is) into a numeric value (seconds since 1970-01-01T00:00:00Z) or a String value (ISO 8601:2004(E) format), depending on the situation.</li>
<li>When a user requests time data, they can request it by specifying the time as a numeric value (seconds since 1970-01-01T00:00:00Z) or a String value (ISO 8601:2004(E) format).</li>
<li>ERDDAP™ has a utility to <a href="https://coastwatch.pfeg.noaa.gov/erddap/convert/time.html" target="_blank" rel="noopener noreferrer">Convert a Numeric Time to/from a String Time</a>.</li>
<li>See <a href="https://coastwatch.pfeg.noaa.gov/erddap/convert/time.html#erddap" target="_blank" rel="noopener noreferrer">How ERDDAP Deals with Time</a>.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-just-two-basic-data-structures">Why just two basic data structures?<a href="#why-just-two-basic-data-structures" class="hash-link" aria-label="Direct link to Why just two basic data structures?" title="Direct link to Why just two basic data structures?">​</a></h3>
<ul>
<li>Since it is difficult for human clients and computer clients to deal with a complex set of possible dataset structures, ERDDAP™ uses just two basic data structures:<!-- -->
<ul>
<li>a <a href="https://coastwatch.pfeg.noaa.gov/erddap/griddap/documentation.html#dataModel" target="_blank" rel="noopener noreferrer">gridded data structure</a> (for example, for satellite data and model data) and</li>
<li>a <a href="https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#dataModel" target="_blank" rel="noopener noreferrer">tabular data structure</a> (for example, for in-situ buoy, station, and trajectory data).</li>
</ul>
</li>
<li>Certainly, not all data can be expressed in these structures, but much of it can. Tables, in particular, are very flexible data structures (look at the success of relational database programs).</li>
<li>This makes data queries easier to construct.</li>
<li>This makes data responses have a simple structure, which makes it easier to serve the data in a wider variety of standard file types (which often just support simple data structures). This is the main reason that we set up ERDDAP™ this way.</li>
<li>This, in turn, makes it very easy for us (or anyone) to write client software which works with all ERDDAP™ datasets.</li>
<li>This makes it easier to compare data from different sources.</li>
<li>We are very aware that if you are used to working with data in other data structures you may initially think that this approach is simplistic or insufficient. But all data structures have tradeoffs. None is perfect. Even the do-it-all structures have their downsides: working with them is complex and the files can only be written or read with special software libraries. If you accept ERDDAP&#x27;s approach enough to try to work with it, you may find that it has its advantages (notably the support for multiple file types that can hold the data responses). The <a href="https://coastwatch.pfeg.noaa.gov/erddap/images/erddapTalk/erddapTechTalk.html" target="_blank" rel="noopener noreferrer">ERDDAP™ slide show</a> (particularly the <a href="https://coastwatch.pfeg.noaa.gov/erddap/images/erddapTalk/erddapTechTalk.html#dataStructures" target="_blank" rel="noopener noreferrer">data structures slide</a>) talks a lot about these issues.</li>
<li>And even if this approach sounds odd to you, most ERDDAP™ clients will never notice -- they will simply see that all of the datasets have a nice simple structure and they will be thankful that they can get data from a wide variety of sources returned in a wide variety of file formats.<br>
<!-- --> </li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dimensions">Dimensions<a href="#dimensions" class="hash-link" aria-label="Direct link to Dimensions" title="Direct link to Dimensions">​</a></h3>
<ul>
<li>
<p><strong>What if the grid variables in the source dataset DON&#x27;T share the same axis variables?</strong><br>
<!-- -->In EDDGrid datasets, all data variables MUST use (share) all of the axis variables. So if a source dataset has some variables with one set of dimensions, and other variables with a different set of dimensions, you will have to make two datasets in ERDDAP. For example, you might make one ERDDAP™ dataset entitled &quot;Some Title (at surface)&quot; to hold variables that just use [time][latitude][longitude] dimensions and make another ERDDAP™ dataset entitled &quot;Some Title (at depths)&quot; to hold the variables that use [time][altitude][latitude][longitude]. Or perhaps you can change the data source to add a dimension with a single value (for example, altitude=0) to make the variables consistent.</p>
<p>ERDDAP™ doesn&#x27;t handle more complicated datasets (for example, models that use a mesh of triangles) well. You can serve these datasets in ERDDAP™ by creating two or more datasets in ERDDAP™ (so that all data variables in each new dataset share the same set of axis variables), but that isn&#x27;t what users want. For some datasets, you might consider making a regular gridded version of the dataset and offering that in addition to the original data. Some client software can only deal with a regular grid, so by doing this, you reach additional clients.<br>
<!-- --> </p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="projected-gridded-data">Projected Gridded Data<a href="#projected-gridded-data" class="hash-link" aria-label="Direct link to Projected Gridded Data" title="Direct link to Projected Gridded Data">​</a></h3>
<p>Some gridded data has a complex structure. For example, satellite level 2 (&quot;along track&quot;) data does not use a simple projection. Modelers (and others) often work with gridded data on various non-cylindrical projections (for example, conic, polar stereographic, tripolar) or in unstructured grids (a more complex data structure). Some end users want this data as is, so there is no loss of information. For those clients, ERDDAP™ can serve the data, as is, only if the ERDDAP™ administrator breaks the original dataset into a few datasets, with each part including variables which share the same axis variables. Yes, that seems odd to people involved and it is different from most OPeNDAP servers. But ERDDAP™ emphasizes making the data available in many formats. That is possible because ERDDAP™ uses/requires a more uniform data structure. Although it is a little awkward (i.e., different than expected), ERDDAP™ can distribute the projected data.</p>
<p>[Yes, ERDDAP™ could have looser requirements for the data structure, but keep the requirements for the output formats. But that would lead to confusion among many users, particularly newbies, since many seemingly valid requests for data with different structures would be invalid because the data wouldn&#x27;t fit into the file type. We keep coming back to the current system&#x27;s design.]</p>
<p>Some end users want data in a lat lon cylindrical projection like Equirectangular / plate carrée or Mercator) for ease-of-use in different situations. For these situations, we encourage the ERDDAP™ administrator to use some other software (NCO? Matlab? R? IDV? ...?) to re-project the data onto a geographic (Equirectangular projection / plate carrée) or other cylindrical projection and serve that form of the data in ERDDAP™ as a different dataset. This is similar to what people do when they convert satellite level 2 data into level 3 data. One such tool is <a href="https://nco.sourceforge.net/nco.html#Regridding" target="_blank" rel="noopener noreferrer">NCO</a> which offers extension options for regridding data.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="gis-and-reprojecting-data">GIS and Reprojecting Data<a href="#gis-and-reprojecting-data" class="hash-link" aria-label="Direct link to GIS and Reprojecting Data" title="Direct link to GIS and Reprojecting Data">​</a></h4>
<p>Since the GIS world is often map oriented, GIS programs usually offer support for reprojecting the data, i.e., plotting the data on a map with a different projection.</p>
<p>Currently, ERDDAP™ does not have tools to reproject data. Instead, we recommend that you use an external tool to make a variant of the dataset, where data has been reprojected from its original form onto a rectangular (latitude longitude) array suitable for ERDDAP.</p>
<p>In our opinion, the CF/DAP world is a little different than the GIS world and works at a slightly lower level. ERDDAP™ reflects that. In general, ERDDAP™ is designed to work primarily with data (not maps) and doesn&#x27;t want to change (e.g., reproject) that data. For ERDDAP™, gridded data is often/usually/preferably associated with lat lon values and a cylindrical projection, and not some projection&#x27;s x,y values. In any case, ERDDAP™ doesn&#x27;t do anything with the data&#x27;s projection; it just passes the data through, as is, with its current projection, on the theory that a reprojection is a significant change to the data and ERDDAP™ doesn&#x27;t want to be involved with significant changes. Also, subsequent users might naively reproject the data again, which would be not as good as just doing one reprojection. (So, if the ERDDAP™ administrator wants to offer the data in a different projection, fine; just reproject the data offline and offer that as a different dataset in ERDDAP. Lots of satellite-based datasets are offered as what NASA calls Level 2 (swath) and as Level 3 (Equirectangular projection) versions.) When ERDDAP™ makes maps (directly or via WMS or KML), ERDDAP™ currently only offers to make maps with the Equirectangular / plate carrée projection which, fortunately, is accepted by most mapping programs.</p>
<p>We encourage ERDDAP™ administrators to use some other software (NCO? Matlab? R? IDV? ...?) to re-project the data onto a geographic (Equirectangular projection / plate carrée) or other cylindrical projection and serve that form of the data in ERDDAP™ as a different dataset. This is similar to what people do when they convert satellite level 2 data into level 3 data. One such tool is <a href="https://nco.sourceforge.net/nco.html#Regridding" target="_blank" rel="noopener noreferrer">NCO</a> which offers extension options for regridding data.</p>
<p>We hope that ERDDAP™ will have built-in tools to offer maps with other projections in the future. We also hope to have better connections to the GIS world in the future (other than the current WMS service). It is terrible that in this &quot;modern&quot; world, the links between the CF/DAP world and the GIS world are still so weak. Both of those things are on the To Do list. (If you want to help, notably with connecting ERDDAP™ to MapServer, please email Chris.John at noaa.gov .)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-types">Data Types<a href="#data-types" class="hash-link" aria-label="Direct link to Data Types" title="Direct link to Data Types">​</a></h3>
<p>ERDDAP™ supports the following data types<br>
<!-- -->(the names are case sensitive; &#x27;u&#x27; prefix stands for &quot;unsigned&quot;; the number many of the names in other systems is the number of bits):</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="byte">byte<a href="#byte" class="hash-link" aria-label="Direct link to byte" title="Direct link to byte">​</a></h4>
<ul>
<li><strong>byte</strong> has signed integer values with a range of -128 to 127.<br>
<!-- -->In other systems, this is sometimes called int8.<br>
<!-- -->This is called &quot;tinyint&quot; by SQL and Cassandra.<br>
<!-- -->ERDDAP™ converts <a href="#boolean-data">boolean</a> from some sources (e.g., SQL and Cassandra) into bytes in ERDDAP™ with a value of 0=false, 1=true, and 127=missing_value.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ubyte">ubyte<a href="#ubyte" class="hash-link" aria-label="Direct link to ubyte" title="Direct link to ubyte">​</a></h4>
<ul>
<li><strong>ubyte</strong> has unsigned integer values with a range of 0 to 255.<br>
<!-- -->In other systems, this is sometimes called uint8.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="short">short<a href="#short" class="hash-link" aria-label="Direct link to short" title="Direct link to short">​</a></h4>
<ul>
<li><strong>short</strong> has signed integer values with a range of -32768 to 32767.<br>
<!-- -->In other systems, this is sometimes called int16.<br>
<!-- -->This is called &quot;smallint&quot; by SQL and Cassandra.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ushort">ushort<a href="#ushort" class="hash-link" aria-label="Direct link to ushort" title="Direct link to ushort">​</a></h4>
<ul>
<li><strong>ushort</strong> has unsigned integer values with a range of 0 to 65535.<br>
<!-- -->In other systems, this is sometimes called uint16.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="int">int<a href="#int" class="hash-link" aria-label="Direct link to int" title="Direct link to int">​</a></h4>
<ul>
<li><strong>int</strong> has signed integer values with a range of -2147483648 to 2147483647.<br>
<!-- -->In other systems, this is sometimes called int32.<br>
<!-- -->This is called &quot;integer|numeric(?)&quot; by SQL and &quot;int&quot; by Cassandra.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="uint">uint<a href="#uint" class="hash-link" aria-label="Direct link to uint" title="Direct link to uint">​</a></h4>
<ul>
<li><strong>uint</strong> has unsigned integer values with a range of 0 to 4294967295.<br>
<!-- -->In other systems, this is sometimes called uint32.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="long">long<a href="#long" class="hash-link" aria-label="Direct link to long" title="Direct link to long">​</a></h4>
<ul>
<li><strong>long</strong> has signed integer values with a range of -9223372036854775808 to 9223372036854775807.<br>
<!-- -->In other systems, this is sometimes called int64.<br>
<!-- -->This is called &quot;bigint|numeric(?)&quot; by SQL and &quot;bigint&quot; by Cassandra.<br>
<!-- -->Because many file types don&#x27;t support long data, their use is discouraged. When possible, use double instead (see below).</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ulong">ulong<a href="#ulong" class="hash-link" aria-label="Direct link to ulong" title="Direct link to ulong">​</a></h4>
<ul>
<li><strong>ulong</strong> has unsigned integer values with a range of 0 to 18446744073709551615<br>
<!-- -->In other systems, this is sometimes called uint64.<br>
<!-- -->Because many file types don&#x27;t support ulong data, their use is discouraged. When possible, use double instead (see below).</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="float">float<a href="#float" class="hash-link" aria-label="Direct link to float" title="Direct link to float">​</a></h4>
<ul>
<li><strong>float</strong> is an IEEE 754 float with a range of approximately +/- 3.402823466e+38.<br>
<!-- -->In other systems, this is sometimes called float32.<br>
<!-- -->This is called &quot;real|float(?)|decimal(?)|numeric(?)&quot; by SQL and &quot;float&quot; by Cassandra.<br>
<!-- -->The special value NaN means Not-a-Number.<br>
<!-- -->ERDDAP™ converts positive and negative infinity values to NaN.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="double">double<a href="#double" class="hash-link" aria-label="Direct link to double" title="Direct link to double">​</a></h4>
<ul>
<li><strong>double</strong> is an IEEE 754 double with a range of approximately<br>
<!-- -->+/- 1.7976931348623157E+308.<br>
<!-- -->In other systems, this is sometimes called float64.<br>
<!-- -->This is called &quot;double precision|float(?)|decimal(?)|numeric(?)&quot; by SQL and &quot;double&quot; by Cassandra.<br>
<!-- -->The special value NaN means Not-a-Number.<br>
<!-- -->ERDDAP™ converts positive and negative infinity values to NaN.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="char">char<a href="#char" class="hash-link" aria-label="Direct link to char" title="Direct link to char">​</a></h4>
<ul>
<li><strong>char</strong> is a single, 2-byte (16-bit) <a href="https://en.wikipedia.org/wiki/UTF-16" target="_blank" rel="noopener noreferrer">Unicode UCS-2 character</a> ranging from \u0000 (#0) through \uffff (#65535).<br>
<!-- -->\uffff&#x27;s definition is Not-a-Character, analogous to a double value of NaN.<br>
<!-- -->The use of char is discouraged because many file types either don&#x27;t support chars or only support 1-byte chars (see below). Consider using String instead.<br>
<!-- -->Users can use char variables to make graphs. ERDDAP™ will convert the characters to their Unicode code point number, which can be used as numeric data.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="string">String<a href="#string" class="hash-link" aria-label="Direct link to String" title="Direct link to String">​</a></h4>
<ul>
<li><strong>String</strong> is a sequence of 0 or more, 2-byte (16-bit) <a href="https://en.wikipedia.org/wiki/UTF-16" target="_blank" rel="noopener noreferrer">Unicode UCS-2 characters</a>.<br>
<!-- -->ERDDAP™ uses/interprets a 0-length string as a missing value. ERDDAP™ does not support a true null string.<br>
<!-- -->The theoretical maximum string length is 2147483647 characters, but there are probably various problems in various places even with somewhat shorter Strings.<br>
<!-- -->Use ERDDAP&#x27;s String for SQL&#x27;s character, varchar, character varying, binary, varbinary, interval, array, multiset, xml, and any other database data type that doesn&#x27;t fit cleanly with any other ERDDAP™ data type.<br>
<!-- -->Use ERDDAP&#x27;s String for Cassandra&#x27;s &quot;text&quot; and any other Cassandra data type that doesn&#x27;t fit cleanly with any other ERDDAP™ data type.<br>
<!-- --> </li>
</ul>
<p>Before ERDDAP™ v2.10, ERDDAP™ did not support unsigned integer types internally and offered limited support in its data readers and writers.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-type-limitations">Data Type Limitations<a href="#data-type-limitations" class="hash-link" aria-label="Direct link to Data Type Limitations" title="Direct link to Data Type Limitations">​</a></h3>
<p>You can think of ERDDAP™ as a system which has virtual datasets, and which works by reading data from a dataset&#x27;s source into an internal data model and writing data to various services (e.g., (OPeN)DAP, WMS) and file types in response to user requests.</p>
<ul>
<li>Each input reader supports a subset of the data types that ERDDAP™ supports. So reading data into ERDDAP&#x27;s internal data structures isn&#x27;t a problem.</li>
<li>Each output writer also supports a subset of data types. That&#x27;s a problem because ERDDAP has to squeeze, for example, long data into file types that don&#x27;t support long data.<br>
<!-- --> </li>
</ul>
<p>Below are explanations of the limitations (or none) of various output writers and how ERDDAP™ deals with the problems. Such complications are an inherent part of ERDDAP&#x27;s goal of making disparate systems interoperable.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ascii">ASCII<a href="#ascii" class="hash-link" aria-label="Direct link to ASCII" title="Direct link to ASCII">​</a></h4>
<ul>
<li>ASCII (.csv, .tsv, etc.) text files -<!-- -->
<ul>
<li>All numeric data is written via its String representation (with missing data values appearing as 0-length strings).</li>
<li>Although ERDDAP™ writes long and ulong values correctly to ASCII text files, many readers (e.g., spreadsheet programs) can&#x27;t correctly deal with long and ulong values and instead convert them to double values (with loss of precision in some cases).</li>
<li>Char and String data are written via JSON Strings, which handle all Unicode characters (notably, the &quot;unusual&quot; characters beyond ASCII #127, e.g., the Euro character appears as &quot;\u20ac&quot;).</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="json">JSON<a href="#json" class="hash-link" aria-label="Direct link to JSON" title="Direct link to JSON">​</a></h4>
<ul>
<li>JSON (.json, .jsonlCSV, etc.) text files -<!-- -->
<ul>
<li>All numeric data is written via its String representation.</li>
<li>Char and String data are written as JSON Strings, which handle all Unicode characters (notably, the &quot;unusual&quot; characters beyond ASCII #127, e.g., the Euro character appears as &quot;\u20ac&quot;).</li>
<li>Missing values for all numeric data types appear as null.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="nc3-files">.nc3 files<a href="#nc3-files" class="hash-link" aria-label="Direct link to .nc3 files" title="Direct link to .nc3 files">​</a></h4>
<ul>
<li>.nc3 files don&#x27;t natively support any unsigned integer data types. Before CF v1.9, CF did not support unsigned integer types. To deal with this, ERDDAP™ 2.10+ follows the NUG standard and always adds an &quot;_Unsigned&quot; attribute with a value of &quot;true&quot; or &quot;false&quot; to indicate if the data is from an unsigned or signed variable. All integer attributes are written as signed attributes (e.g., byte) with signed values (e.g., a ubyte actual_range attribute with values 0 to 255, appears as a byte attribute with values 0 to -1 (the inverse of the two&#x27;s complement value of the out-of-range value). There is no easy way to know which (signed) integer attributes should be read as unsigned attributes. ERDDAP™ supports the &quot;_Unsigned&quot; attribute when it reads .nc3 files.</li>
<li>.nc3 files don&#x27;t support the long or ulong data types. ERDDAP™ deals with this by temporarily converting them to be double variables. Doubles can exactly represent all values up to +/- 9,007,199,254,740,992 which is 2^53. This is an imperfect solution. Unidata refuses to make a minor upgrade to .nc3 to deal with this and related problems, citing .nc4 (a major change) as the solution.</li>
<li>The CF specification (before v1.9) said it supports a char data type but it is unclear if char is intended only as the building blocks of char arrays, which are effectively Strings. Questions to their mailing list yielded only confusing answers. Because of these complications, it is best to avoid char variables in ERDDAP™ and use String variables whenever possible.</li>
<li>Traditionally, .nc3 files only supported strings with ASCII-encoded (7-bit, #0 - #127) characters. NUG (and ERDDAP) extend that (starting ~2017) by including the attribute &quot;_Encoding&quot; with a value of &quot;ISO-8859-1&quot; (an extension of ASCII which defines all 256 values of each 8-bit character) or &quot;UTF-8&quot; to indicate how the String data is encoded. Other encodings may be legal but are discouraged.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="nc4-files">.nc4 files<a href="#nc4-files" class="hash-link" aria-label="Direct link to .nc4 files" title="Direct link to .nc4 files">​</a></h4>
<ul>
<li>.nc4 files support all of ERDDAP&#x27;s data types.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="nccsv-files">NCCSV files<a href="#nccsv-files" class="hash-link" aria-label="Direct link to NCCSV files" title="Direct link to NCCSV files">​</a></h4>
<p>NCCSV 1.0 files don&#x27;t support any unsigned integer data types.<br>
<a href="/docs/user/nccsv-1.00">NCCSV 1.1+ files</a> support all unsigned integer data types.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dap">DAP<a href="#dap" class="hash-link" aria-label="Direct link to DAP" title="Direct link to DAP">​</a></h4>
<ul>
<li>(OPeN)DAP (.das, .dds, .asc ASCII files, and .dods binary files) -<!-- -->
<ul>
<li>(OPeN)DAP handles short, ushort, int, uint, float and double values correctly.</li>
<li>(OPeN)DAP has a &quot;byte&quot; data type that it defines as unsigned, whereas historically, THREDDS and ERDDAP™ have treated &quot;byte&quot; as signed in their (OPeN)DAP services. To deal with this better, ERDDAP™ 2.10+ follows the NUG standard and always adds an &quot;_Unsigned&quot; attribute with a value of &quot;true&quot; or &quot;false&quot; to indicate if the data is what ERDDAP™ calls byte or ubyte. All byte and ubyte attributes are written as &quot;byte&quot; attributes with signed values (e.g., a ubyte actual_range attribute with values 0 to 255, appears as a byte attribute with values 0 to -1 (the inverse of the two&#x27;s complement value of the out-of-range value). There is no easy way to know which &quot;byte&quot; attributes should be read as ubyte attributes.</li>
<li>(OPeN)DAP does not support signed or unsigned longs. ERDDAP™ deals with this by temporarily converting them to be double variables and attributes. Doubles can exactly represent all values up to 9,007,199,254,740,992 which is 2^53. This is an imperfect solution. OPeNDAP (the organization) refuses to make a minor upgrade to DAP 2.0 to deal with this and related problems, citing DAP4 (a major change) as the solution.</li>
<li>Because (OPeN)DAP has no separate char data type and technically only supports 1-byte ASCII characters (#0 - #127) in Strings, char data variables will appear as 1-character-long Strings in (OPeN)DAP .das, .dds, and .dods responses.</li>
<li>Technically, the (OPeN)DAP specification only supports strings with ASCII-encoded characters (#0 - #127). NUG (and ERDDAP) extend that (starting ~2017) by including the attribute &quot;_Encoding&quot; with a value of &quot;ISO-8859-1&quot; (an extension of ASCII which defines all 256 values of each 8-bit character) or &quot;UTF-8&quot; to indicate how the String data is encoded. Other encodings may be legal but are discouraged.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-type-comments">Data Type Comments<a href="#data-type-comments" class="hash-link" aria-label="Direct link to Data Type Comments" title="Direct link to Data Type Comments">​</a></h3>
<ul>
<li>Because of the poor support for long, ulong, and char data in many file types, we discourage the use of these data types in ERDDAP. When possible, use double instead of long and ulong, and use String instead of char.<br>
<!-- --> </li>
<li>Metadata - Because (OPeN)DAP&#x27;s .das and .dds responses don&#x27;t support long or ulong attributes or data types (and instead show them as doubles), you may instead want to use ERDDAP&#x27;s tabular representation of metadata as seen in the http.../erddap/<strong>info</strong>/<em>datasetID</em>.html web page (for example, <a href="https://coastwatch.pfeg.noaa.gov/erddap/info/cwwcNDBCMet/index.html" target="_blank" rel="noopener noreferrer">https://coastwatch.pfeg.noaa.gov/erddap/info/cwwcNDBCMet/index.html</a> ) (which you can also get in other file types, e.g., .csv, .htmlTable, .itx, .json, .jsonlCSV1, .jsonlCSV, .jsonlKVP, .mat, .nc, .nccsv, .tsv, .xhtml) or the .nccsvMetadata response (for example, <a href="https://coastwatch.pfeg.noaa.gov/erddap/tabledap/cwwcNDBCMet.nccsvMetadata" target="_blank" rel="noopener noreferrer">https://coastwatch.pfeg.noaa.gov/erddap/tabledap/cwwcNDBCMet.nccsvMetadata</a> although .nccsvMetadata is only available for tabular datasets), both of which supports all data types (notably, long, ulong, and char).<br>
<!-- --> </li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="media-files">Media Files<a href="#media-files" class="hash-link" aria-label="Direct link to Media Files" title="Direct link to Media Files">​</a></h3>
<p>Not all data are arrays of numbers or text. Some datasets consist of or include media files, such as image, audio and video files. ERDDAP™ has some special features to make it easier for users to get access to media files. It&#x27;s a two step process:<br>
<!-- --> </p>
<ol>
<li>
<p>Make each file accessible via its own URL, via a system that supports byte range requests.<br>
<!-- -->The easiest way to do this is to put the files in a directory that ERDDAP™ has access to. (If they are in a container like a .zip file, unzip them, although you may want to offer the .zip file to users too.) Then, make an <a href="#eddtablefromfilenames">EDDTableFromFileNames</a> dataset to make those files accessible via ERDDAP™, notably via ERDDAP&#x27;s <a href="https://coastwatch.pfeg.noaa.gov/erddap/files/documentation.html" target="_blank" rel="noopener noreferrer">&quot;files&quot; system</a>.</p>
<p>All files made accessible via EDDTableFromFileNames and ERDDAP&#x27;s &quot;files&quot; system support <a href="https://en.wikipedia.org/wiki/Byte_serving" target="_blank" rel="noopener noreferrer">byte range requests</a>. Normally, when a client (e.g., a browser) makes a request to a URL, it gets the entire file as the response. But with a byte range request, the request specifies a range of bytes from the file, and the server only returns those bytes. This is relevant here because the audio and video players in browsers only work if the file can be accessed via byte range requests.</p>
<p>Optional: If you have more than one dataset with associated media files, you can make just one EDDTableFromFileNames which has a subfolder for each group of files. The advantage is that when you want to add new media files for a new dataset, all you have to do is create a new folder and put the files in that folder. The folder and files will be automatically added to the EDDTableFromFileNames dataset.</p>
</li>
<li>
<p>Optional: If you have a dataset which includes references to media files, add it to ERDDAP.<br>
<!-- -->For example, you may have a .csv file with a row for each time someone saw a whale and a column which includes the name of an image file related to that sighting. If the name of the image file is just the filename, e.g., Img20141024T192403Z, not a full URL, then you need to add <a href="#fileaccessbaseurl">fileAccessBaseUrl and/or fileAccessSuffix</a> attributes to the metadata for that dataVariable which specifies the baseURL and suffix for those filenames. If you made the files accessible via EDDTableFromFileNames, the URL will be in the form<br>
<em>baseUrl</em>/erddap/files/<em>datasetID</em>/<br>
<!-- -->For example,</p>
</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;att name=&quot;fileAccessBaseUrl&quot;&gt;*someBaseURL*&lt;/a&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;att name=&quot;fileAccessSuffix&quot;&gt;.png&lt;/a&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If there is a .zip or other container file with all of the media files related to a data variable, we recommend that you also make that file accessible to users (see step 1 above) and then identify it with a <a href="#fileaccessarchiveurl">fileAccessArchiveUrl</a> attribute.</p>
<p>[Starting in ERDDAP™ v1.82] If you do the first step above (or both steps), then when a user views the ERDDAP™ &quot;files&quot; system for that dataset (or asks to see a subset of the dataset via an .htmlTable request, if you did the second step), ERDDAP™ will show a &#x27;?&#x27; icon to the left of the filename. If the user hovers over that icon, they will see a popup showing the image, or an audio player, or a video player. Browsers only support a limited number of types of</p>
<ul>
<li>image (usually .gif, .jpg, and .png),</li>
<li>audio (usually .mp3, .ogg, and .wav), and</li>
<li>video files (usually .mp4, .ogv, and .webm).</li>
</ul>
<p>Support varies with different versions of different browsers on different operating systems. So if you have a choice of which file type to offer, it makes sense to offer these types.</p>
<p>Or, if a user clicks on the filename shown on a ERDDAP™ web page, their browser will show the image, audio or video file as a separate web page. This is mostly useful to see a very large image or video scaled to full screen, instead of in a popup.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="working-with-aws-s3-files">Working with AWS S3 Files<a href="#working-with-aws-s3-files" class="hash-link" aria-label="Direct link to Working with AWS S3 Files" title="Direct link to Working with AWS S3 Files">​</a></h3>
<p><a href="https://aws.amazon.com" target="_blank" rel="noopener noreferrer">Amazon Web Service (AWS)</a> is a seller of <a href="https://en.wikipedia.org/wiki/Cloud_computing" target="_blank" rel="noopener noreferrer">cloud computing</a> services. <a href="https://aws.amazon.com/s3/" target="_blank" rel="noopener noreferrer">S3</a> is an object storage system offered by AWS. Instead of the hierarchical system of directories and files of a traditional file system (like a hard drive in your PC), S3 offers just &quot;buckets&quot; which hold &quot;objects&quot; (we&#x27;ll call them &quot;files&quot;).</p>
<p>For ASCII files (e.g., .csv), ERDDAP™ can work with the files in the buckets directly. The only thing you need to do is specify the &lt;fileDir&gt; for the dataset using a specific format for the AWS bucket, e.g., https://<em>bucketName</em>.s3.<em>aws-region</em>.amazonaws.com/<em>subdirectory</em>/ . You should not use &lt;cacheFromUrl&gt; . See below for details.</p>
<p>But for binary files (e.g., .nc, .grib, .bufr, and .hdf files), you do need to use the &lt;cacheFromUrl&gt; system described below. ERDDAP, netcdf-java (which ERDDAP™ uses to read data from these files), and other scientific data software are designed to work with files in a traditional file system which offers <a href="https://en.wikipedia.org/wiki/Block-level_storage" target="_blank" rel="noopener noreferrer">block level</a> access to files (which permits reading chunks of a file), but S3 only offers <a href="https://en.wikipedia.org/wiki/Block-level_storage" target="_blank" rel="noopener noreferrer">file level (object)</a> access to files (which only permits reading the entire file). AWS offers an alternative to S3, <a href="https://aws.amazon.com/ebs/" target="_blank" rel="noopener noreferrer">Elastic Block Store (EBS)</a>), which supports block level access to files but it is more expensive than S3, so it is rarely used for bulk storage of large quantities of data files. (So when people say storing data in the cloud (S3) is cheap, it is usually an apples to oranges comparison.)</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="s3-buckets">S3 Buckets<a href="#s3-buckets" class="hash-link" aria-label="Direct link to S3 Buckets" title="Direct link to S3 Buckets">​</a></h4>
<p><strong>The Contents of a Bucket. Keys. Objects. Delimiters.</strong><br>
<!-- -->Technically, S3 buckets aren&#x27;t organized in a hierarchical file structure like a file system on a computer. Instead, buckets only contain &quot;objects&quot; (files), each of which has a &quot;key&quot; (a name). An example of a key in that noaa-goes17 bucket is</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ABI-L1b-RadC/2019/235/22/OR\_ABI-L1b-RadC-M6C01\_G17\_s20192352201196\_e20192352203569\_c20192352204013.nc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The corresponding URl for that object is</p>
<p><a href="https://noaa-goes17.s3.us-east-1.amazonaws.com/ABI-L1b-RadC/2019/235/22/OR_ABI-L1b-RadC-M6C01_G17_s20192352201196_e20192352203569_c20192352204013.nc" target="_blank" rel="noopener noreferrer">https://noaa-goes17.s3.us-east-1.amazonaws.com/ABI-L1b-RadC/2019/235/22/OR_ABI-L1b-RadC-M6C01_G17_s20192352201196_e20192352203569_c20192352204013.nc</a></p>
<p>AWS supports a little variation in how that URL is constructed, but ERDDAP™ requires this one specific format:<br>
<!-- -->  https://<em>bucketName</em>.s3.<em>region</em>.amazonaws.com/<em>key</em><br>
<!-- -->It is common practice, as with this example, to make key names look like a hierarchical path plus a file name, but technically they aren&#x27;t. Since it is common and useful, ERDDAP™ treats keys with /&#x27;s as if they are a hierarchical path plus file name, and this documentation will refer to them as such. If a bucket&#x27;s keys don&#x27;t use /&#x27;s (e.g., a key like<br>
<!-- -->ABI-Lib.2018.052.22.OR_ABI-L1b-RadM2-M3C10_G16_s20180522247575), then ERDDAP™ will just treat the whole key as a long file name.</p>
<p>Private vs Public Buckets -- The administrator for the S3 bucket may make the bucket and its contents public or private. If public, any file in the bucket may be downloaded by anyone using the URL for the file. Amazon has an <a href="https://aws.amazon.com/opendata/" target="_blank" rel="noopener noreferrer">Open Data</a> program which hosts public datasets (including data from NOAA, NASA, and USGS) for free and doesn&#x27;t charge for anyone to download the files from those buckets. If a bucket is private, files in the bucket are only accessible to authorized users and AWS charges a fee (usually paid by the bucket&#x27;s owner) for downloading files to a non-AWS S3 computer. ERDDAP™ can work with data in public and private buckets.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="aws-credentials">AWS Credentials<a href="#aws-credentials" class="hash-link" aria-label="Direct link to AWS Credentials" title="Direct link to AWS Credentials">​</a></h4>
<p>To make it so that ERDDAP™ can read the contents of private buckets, you need AWS credentials and you need to store a credentials file in the standard place so ERDDAP™ can find the information. See the AWS SDK for Java 2.x documentation: <a href="https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/setup.html#setup-credentials" target="_blank" rel="noopener noreferrer">Set default credentials</a>. (The option to store the values as Java command line parameters in [tomcat]/bin/setenv.sh may be a good option.)</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="aws-files">AWS /files/<a href="#aws-files" class="hash-link" aria-label="Direct link to AWS /files/" title="Direct link to AWS /files/">​</a></h4>
<ul>
<li>/files/ system -- The ERDDAP™ <a href="#accessibleviafiles">/files/ system</a> allows users to download the source files for a dataset. We recommend that you turn this on for all datasets with source files because many users want to download the original source files.<!-- -->
<ul>
<li>If the files are in a private S3 bucket, the user&#x27;s request to download a file will be handled by ERDDAP™, which will read the data from the file and then transmit it to the user, thus increasing the load on your ERDDAP™, using incoming and outgoing bandwidth, and making you (the ERDDAP™ administrator) pay the data egress fee to AWS.</li>
<li>If the files are in a public S3 bucket, the user&#x27;s request to download a file will be redirected to the AWS S3 URL for that file, so the data won&#x27;t flow through ERDDAP™, thus reducing the load on ERDDAP. And if the files are in an Amazon Open Data (free) public bucket, then you (the ERDDAP™ administrator) won&#x27;t have to pay any data egress fee to AWS. Thus, there is a big advantage serving data from public (not private) S3 buckets, and a huge advantage to serving data from Amazon Open Data (free) buckets.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="erddap-and-aws-s3-buckets">ERDDAP™ and AWS S3 Buckets<a href="#erddap-and-aws-s3-buckets" class="hash-link" aria-label="Direct link to ERDDAP™ and AWS S3 Buckets" title="Direct link to ERDDAP™ and AWS S3 Buckets">​</a></h4>
<p><a href="#erddap-and-aws-s3-buckets"><strong>ERDDAP™ and AWS S3 Buckets</strong></a><br>
<!-- -->Fortunately, after much effort, ERDDAP™ has a number of features which allow it to deal with the inherent problems of working with S3&#x27;s block level access to files in a reasonably efficient way:</p>
<ul>
<li>
<p>[Disclaimer: Working with AWS S3 buckets is a lot of extra work. AWS is a huge ecosystem of services and features. There&#x27;s a lot to learn. It takes time and effort, but it is do-able. Be patient and you&#x27;ll get things working. Look/ask for help<br>
<!-- -->(<a href="https://aws.amazon.com/documentation/gettingstarted/" target="_blank" rel="noopener noreferrer">AWS documentation</a>, websites like <a href="https://stackoverflow.com/" target="_blank" rel="noopener noreferrer">Stack Overflow</a>, and the regular<br>
<a href="/docs/intro#support">ERDDAP™ support options</a>) if/when you get stuck.]<br>
<!-- --> </p>
</li>
<li>
<p>It can be hard to even find out the directory structure and file names of the files in an S3 bucket. ERDDAP™ has a solution for this problem: EDDTableFromFileNames has a special <a href="#fromonthefly">***fromOnTheFly</a> option which lets you make an EDDTableFromFileNames dataset which allows users to browse the contents of an S3 bucket (and download files) via the dataset&#x27;s &quot;files&quot; option. There is an <a href="#viewing-the-contents-of-a-bucket">example of this below</a>.<br>
<!-- --> </p>
</li>
<li>
<p>ERDDAP™ can read data from <a href="#externally-compressed-files">externally compressed data files</a>, so it is fine if the files on S3 are stored as .gz, .gzip, .bz2, .Z, or other types of externally compressed data files, which can dramatically (2 - 20X) cut down on file storage costs. There is often no time penalty for using externally compressed files, since the time saved by transferring a smaller file from S3 to ERDDAP roughly balances the extra time needed for ERDDAP™ to decompress the file. To use this feature, you just have to make sure that the dataset&#x27;s &lt;fileNameRegex&gt; allows for the compressed file type (e.g., by adding (|.gz) to the end of the regex).<br>
<!-- --> </p>
</li>
<li>
<p>For the most common case, where you have an ERDDAP™ installed on your PC for test/development and where the dataset has binary data files which are stored as objects in an S3 bucket, one approach to getting the dataset in ERDDAP™ is:</p>
<ol>
<li>
<p>Create a directory on your PC to hold a few test data files.</p>
</li>
<li>
<p>Download two data files from the source to the directory you just created.</p>
</li>
<li>
<p>Use <a href="#generatedatasetsxml">GenerateDatasetsXml</a> to generate the chunk of datasets.xml for the dataset based on the two local data files.</p>
</li>
<li>
<p>Check that that dataset works as desired with <a href="#dasdds">DasDds</a> and/or your local ERDDAP.</p>
<p><strong>The following steps make a copy of that dataset (which will get data from the S3 bucket) on a public ERDDAP.</strong></p>
</li>
<li>
<p>Copy the chunk of datasets.xml for the dataset to the datasets.xml for the public ERDDAP™ that will serve the data.</p>
</li>
<li>
<p>Create a directory on the public ERDDAP&#x27;s local hard drive to hold a cache of temporary files. The directory won&#x27;t use a lot of disk space (see cacheSizeGB below).</p>
</li>
<li>
<p>Change the value of the dataset&#x27;s &lt;fileDir&gt; tag so that it points to the directory you just created (even though the directory is empty).</p>
</li>
<li>
<p>Add a <a href="#cachefromurl">cacheFromUrl</a> tag which specifies the dataset&#x27;s bucket name and optional prefix (i.e., directory) in the specific <a href="#accessing-files-in-an-aws-s3-bucket">Aws S3 URL Format that ERDDAP™ requires</a>.</p>
</li>
<li>
<p>Add a <a href="#cachefromurl">&lt;cacheSizeGB&gt;</a> tag to the dataset&#x27;s xml (e.g., 10 is a good value for most datasets) to tell ERDDAP™ to limit the size of the local cache (i.e., don&#x27;t try to cache all of the remote files).</p>
</li>
<li>
<p>See if that works in the public ERDDAP. Note that the first time ERDDAP™ loads the dataset, it will take a long time to load, because ERDDAP™ needs to download and read all of the data files.</p>
</li>
</ol>
<p>If the dataset is a huge collection of huge gridded data files, this will take a very long time and be impractical. In some cases, for gridded data files, ERDDAP™ can extract the needed information (e.g., the time point for the data in a gridded data file) from the file name and avoid this problem. See <a href="#aggregation-via-file-names-or-global-metadata">Aggregation via File Names</a>.</p>
<ol start="11">
<li>Optionally (but especially for EDDTableFromFiles datasets), you can add an <a href="#nthreads">nThreads</a> tag to the dataset to tell ERDDAP to use more than 1 thread when responding to a user&#x27;s request for data. This minimizes the effects of the delay that occurs when ERDDAP™ reads data files from (remote) AWS S3 buckets into the local cache and (perhaps) decompressing them.</li>
</ol>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="aws-s3-open-data">AWS S3 Open Data<a href="#aws-s3-open-data" class="hash-link" aria-label="Direct link to AWS S3 Open Data" title="Direct link to AWS S3 Open Data">​</a></h4>
<p>As part of NOAA&#x27;s <a href="https://www.noaa.gov/nodd/about" target="_blank" rel="noopener noreferrer">Big Data Program</a>, NOAA has partnerships with five organizations, including AWS, &quot;to explore the potential benefits of storing copies of key observations and model outputs in the Cloud to allow computing directly on the data without requiring further distribution&quot;. AWS includes the datasets it gets from NOAA as part of its program to offer public access to a large collection of <a href="https://registry.opendata.aws/" target="_blank" rel="noopener noreferrer">Open Data on AWS S3</a> from any computer, whether it is an Amazon compute instance (a rented computer) on the AWS network or your own PC on any network. The example below assumes you are working with a publicly accessible dataset.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="accessing-files-in-an-aws-s3-bucket">Accessing Files in an AWS S3 Bucket<a href="#accessing-files-in-an-aws-s3-bucket" class="hash-link" aria-label="Direct link to Accessing Files in an AWS S3 Bucket" title="Direct link to Accessing Files in an AWS S3 Bucket">​</a></h4>
<p>For a private S3 data bucket, the bucket&#x27;s owner must give you access to the bucket. (See the AWS documentation.)</p>
<p>In all cases, you will need an AWS account because the AWS SDK for Java (which ERDDAP™ uses to retrieve information about the contents of a bucket) requires AWS account credentials. (more on this below)</p>
<p>ERDDAP™ can only access AWS S3 buckets if you specify the <a href="#cachefromurl">&lt;cacheFromUrl&gt;</a> (or &lt;fileDir&gt;) in a specific format:<br>
<!-- -->https://<em>bucketName</em>.s3.<em>aws-region</em>.amazonaws.com/<em>prefix/</em><br>
<!-- -->where</p>
<ul>
<li>The bucketName is the short form of the bucket name, e.g. noaa-goes17 .</li>
<li>The aws-region, e.g., us-east-1, is from the &quot;Region&quot; column in one of the tables of <a href="https://docs.aws.amazon.com/general/latest/gr/rande.html" target="_blank" rel="noopener noreferrer">AWS Service Endpoints</a> where the bucket is actually located.</li>
<li>The prefix is optional. If present, it must end with &#x27;/&#x27;.</li>
</ul>
<p>For example, <a href="https://noaa-goes17.s3.us-east-1.amazonaws.com/ABI-L1b-RadC/" target="_blank" rel="noopener noreferrer">https://noaa-goes17.s3.us-east-1.amazonaws.com/ABI-L1b-RadC/</a><br>
<!-- -->This URL format is one of the AWS S3 recommendations: see <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingBucket.html" target="_blank" rel="noopener noreferrer">Accessing a Bucket</a> and <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/ListingKeysHierarchy.html" target="_blank" rel="noopener noreferrer">this description of prefixes</a>. ERDDAP™ requires that you combine the bucket URL and the optional prefix into one URL in order to specify the &lt;cacheFromUrl&gt; (or &lt;fileDir&gt;) where the files are located.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="test-public-aws-s3-buckets">Test Public AWS S3 Buckets<a href="#test-public-aws-s3-buckets" class="hash-link" aria-label="Direct link to Test Public AWS S3 Buckets" title="Direct link to Test Public AWS S3 Buckets">​</a></h4>
<p>For public buckets, you can and should test the bucket URL of the AWS S3 directory in your browser, e.g.,<br>
<a href="https://noaa-goes17.s3.us-east-1.amazonaws.com" target="_blank" rel="noopener noreferrer">https://noaa-goes17.s3.us-east-1.amazonaws.com</a> If the bucket URL is correct and appropriate for ERDDAP, it will return an XML document which has (partial) listing of the contents of that bucket. Unfortunately, the full URL (i.e., bucket URL plus prefix) that ERDDAP™ wants for a given dataset doesn&#x27;t work in a browser. AWS doesn&#x27;t offer a system to browse the hierarchy of a bucket easily in your browser. (If that is incorrect, please email Chris.John at noaa.gov. Otherwise, Amazon, please add support for this!)</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="viewing-the-contents-of-a-bucket">Viewing the Contents of a Bucket<a href="#viewing-the-contents-of-a-bucket" class="hash-link" aria-label="Direct link to Viewing the Contents of a Bucket" title="Direct link to Viewing the Contents of a Bucket">​</a></h4>
<p>S3 buckets often contain a couple of categories of files, in a couple of pseudo subdirectories, which could become a couple of ERDDAP™ datasets. To make the ERDDAP™ datasets, you need to know the starting directory for &lt;cacheFromUrl&gt; (or &lt;fileDir&gt;) and the format of the file names which identify that subset of files. If you try to view the entire contents of a bucket in a browser, S3 will just show you the first 1000 files, which is insufficient. Currently, the best way for you to view all of the contents of a bucket is to make an <a href="#eddtablefromfilenames">EDDTableFromFileNames</a> dataset (on your PC&#x27;s ERDDAP™ and/or on your public ERDDAP), which also gives you an easy way to browse the directory structure and download files. The &lt;fileDir&gt; for that will be the URL you made above, e.g., <a href="https://noaa-goes17.s3.us-east-1.amazonaws.com" target="_blank" rel="noopener noreferrer">https://noaa-goes17.s3.us-east-1.amazonaws.com</a> . [Why doesn&#x27;t AWS S3 offer a quick and easy way for anyone to do this without an AWS account?] Note that when I do this on my PC on a non-Amazon network, it appears that Amazon slows down the response to a trickle (about 100(?) files per chunk) after the first few chunks (of 1000 of files per chunk) are downloaded. Since buckets may have a huge number of files (noaa-goes17 has 26 million), getting all of the contents of a bucket may take EDDTableFromFileNames several hours (e.g., 12!) to finish. [Amazon, is that right?!]</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="making-an-eddtablefromfilenames-dataset-with-an-aws-s3-bucket">Making an EDDTableFromFileNames Dataset with an AWS S3 Bucket<a href="#making-an-eddtablefromfilenames-dataset-with-an-aws-s3-bucket" class="hash-link" aria-label="Direct link to Making an EDDTableFromFileNames Dataset with an AWS S3 Bucket" title="Direct link to Making an EDDTableFromFileNames Dataset with an AWS S3 Bucket">​</a></h4>
<p>If you have a bucket name, but don&#x27;t already have a list of files in the S3 bucket or the prefix that identifies location of the relevant files in the bucket, use the instructions below to make an EDDTableFromFileNames dataset so you can browse the directory hierarchy of the S3 bucket via ERDDAP&#x27;s &quot;files&quot; system.</p>
<ol>
<li>
<p>Open an AWS Account<br>
<!-- -->ERDDAP™ uses the <a href="https://docs.aws.amazon.com/sdk-for-java/index.html" target="_blank" rel="noopener noreferrer">AWS SDK for Java</a> to get bucket information from AWS, so you need to <a href="https://aws.amazon.com/premiumsupport/knowledge-center/create-and-activate-aws-account/" target="_blank" rel="noopener noreferrer">create and activate an AWS account</a>. That&#x27;s a pretty big job, with lots of things to learn.<br>
<!-- --> </p>
</li>
<li>
<p>Put your AWS Credentials where ERDDAP™ can find them.<br>
<!-- -->Follow the instructions at <a href="https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/setup.html#setup-credentials" target="_blank" rel="noopener noreferrer">Set up AWS Credentials and Region for Development</a> so ERDDAP™ (specifically, the AWS SDK for Java) will be able to find and use your AWS credentials. If ERDDAP™ can&#x27;t find the credentials, you will see a<br>
<!-- -->java.lang.IllegalArgumentException: profile file cannot be null error in ERDDAP&#x27;s log.txt file.</p>
<p>Hint for Linux and Mac OS: the credentials file must be in the home directory of the user that is running Tomcat (and ERDDAP) (for this paragraph, we&#x27;ll assume user=tomcat) in a file called ~/.aws/credentials . Don&#x27;t assume that ~ is /home/tomcat -- actually use cd ~ to find out where the operating system thinks ~ for user=tomcat is. Create the directory if it doesn&#x27;t exist. Also, after you put the credentials file in place, make sure the user and group for the file are tomcat and then use chmod 400 credentials to make sure the file is read-only for user=tomcat.</p>
</li>
<li>
<p>Create the bucket URL in the <a href="#accessing-files-in-an-aws-s3-bucket">format that ERDDAP™ requires</a>, e.g.,<br>
<a href="https://noaa-goes17.s3.us-east-1.amazonaws.com" target="_blank" rel="noopener noreferrer">https://noaa-goes17.s3.us-east-1.amazonaws.com</a> , and (for public buckets) test it in a browser to make sure it returns an XML document which has a partial listing the contents of that bucket.<br>
<!-- --> </p>
</li>
<li>
<p>Use <a href="#generatedatasetsxml">GenerateDatasetsXml</a> to create an <a href="#eddtablefromfilenames">EDDTableFromFileNames</a> dataset:</p>
<ul>
<li>  For the Starting directory, use this syntax:<br>
<!-- -->***fromOnTheFly,<em>yourBucketUrl</em><br>
<!-- -->for example,<br>
<!-- -->***fromOnTheFly,<a href="https://noaa-goes17.s3.us-east-1.amazonaws.com/" target="_blank" rel="noopener noreferrer">https://noaa-goes17.s3.us-east-1.amazonaws.com/</a></li>
<li>File name regex? .*</li>
<li>Recursive? true</li>
<li>reloadEveryNMinutes? 10080</li>
<li>infoUrl? <a href="https://registry.opendata.aws/noaa-goes/" target="_blank" rel="noopener noreferrer">https://registry.opendata.aws/noaa-goes/</a></li>
<li>institution? NOAA</li>
<li>summary? nothing (ERDDAP™ will create a decent summary automatically.)</li>
<li>title? nothing     (ERDDAP™ will create a decent title automatically.)As usual, you should edit the resulting XML to verify correctness and make improvements before the chunk of datasets using it in datasets.xml.</li>
</ul>
</li>
<li>
<p>If you follow the instructions above and load the dataset in ERDDAP, you have created an EDDTableFromFiles dataset. As an example, and to make it easier for anyone to browse and download files from the AWS Open Data buckets, we have created EDDTableFromFileNames datasets (see the list at<br>
<a href="https://upwell.pfeg.noaa.gov/erddap/search/index.html?searchFor=awsS3Files_" target="_blank" rel="noopener noreferrer">https://upwell.pfeg.noaa.gov/erddap/search/index.html?searchFor=awsS3Files_</a>) for almost all of the <a href="https://registry.opendata.aws/" target="_blank" rel="noopener noreferrer">AWS S3 Open Data buckets</a>.<br>
<!-- -->[The few buckets that we didn&#x27;t include either have a large number of files in the root directory (more than can be downloaded in a reasonable amount of time), or don&#x27;t allow public access (aren&#x27;t they all supposed to be public?), or are Requester Pays buckets (e.g., Sentinel).]<br>
<!-- -->If you click on the &quot;files&quot; link for one of these datasets, you can browse the directory tree and files in that S3 bucket. Because of the way ***fromOnTheFly EDDTableFromFiles works, these directory listings are always perfectly up-to-date because ERDDAP™ gets them on-the-fly. If you click down the directory tree to an actual file name and click on the file name, ERDDAP™ will redirect your request to AWS S3 so that you can download the file directly from AWS. You can then inspect that file.</p>
<p>Trouble?<br>
<!-- -->If your EDDTableFromFiles won&#x27;t load in ERDDAP™ (or DasDds), look in the log.txt file for an error message. If you see a<br>
<!-- -->java.lang.IllegalArgumentException: profile file cannot be null error, the problem is that the AWS SDK for Java (used by ERDDAP) isn&#x27;t finding the credentials file. See the credentials instructions above.<br>
<!-- --> </p>
</li>
</ol>
<p>It is unfortunate that AWS doesn&#x27;t simply allow people to use a browser to view the contents of a public bucket.</p>
<p><strong>Then you can make ERDDAP™ datasets that give users access to the data in the files.</strong><br>
<!-- -->See the instructions in <a href="#erddap-and-aws-s3-buckets">ERDDAP™ and S3 Buckets</a> (above).<br>
<!-- -->For the sample EDDTableFromFileNames dataset that you made above, if you do a little poking around with the directory and file names in the directory tree, it becomes clear that the top level directory names (e.g., ABI-L1b-RadC) correspond to what ERDDAP™ would call separate datasets. The bucket you are working with may be similar. You could then pursue creating separate datasets in ERDDAP™ for each of those datasets, using, e.g.,<br>
<a href="https://noaa-goes17.s3.us-east-1.amazonaws.com/ABI-L1b-RadC/" target="_blank" rel="noopener noreferrer">https://noaa-goes17.s3.us-east-1.amazonaws.com/ABI-L1b-RadC/</a><br>
<!-- -->as the &lt;cacheFromUrl&gt;. Unfortunately, for this particular example, the datasets in the bucket all seem to be level 1 or level 2 datasets, which ERDDAP™ <a href="#dimensions">isn&#x27;t particularly good at</a>, because the dataset is a more complicated collection of variables which use different dimensions.<br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ncml-files">NcML files<a href="#ncml-files" class="hash-link" aria-label="Direct link to NcML files" title="Direct link to NcML files">​</a></h3>
<p>NcML files let you specify on-the-fly changes to one or more original source NetCDF (v3 or v4) .nc, .grib, .bufr, or .hdf (v4 or v5) files, and then have ERDDAP™ treat the .ncml files as the source files. ERDDAP™ datasets will accept .ncml files whenever .nc files are expected. The NcML files MUST have the extension .ncml. See the <a href="https://docs.unidata.ucar.edu/netcdf-java/current/userguide/ncml_overview.html" target="_blank" rel="noopener noreferrer">Unidata NcML documentation</a>. NcML is useful because you can do some things with it (for example, making different changes to different files in a collection, including adding a dimension with a specific value to a file), that you can&#x27;t do with ERDDAP&#x27;s datasets.xml.</p>
<ul>
<li>Changes to an .ncml file&#x27;s lastModified time will cause the file to be reloaded whenever the dataset is reloaded, but changes to the underlying .nc data files won&#x27;t be directly noticed.</li>
<li>Hint: NcML is *very* sensitive to the order of some items in the NcML file. Think of NcML as specifying a series of instructions in the specified order, with the intention of changing the source files (the state at the start/top of the NcML file) into the destination files (the state at the end/bottom of the NcML file).</li>
</ul>
<p>An alternative to NcML is the <a href="#netcdf-operators-nco">NetCDF Operators (NCO)</a>. The big difference is that NcML is a system for making changes on-the-fly (so the source files aren&#x27;t altered), whereas NCO can be used to make changes to (or new versions of) the files. Both NCO and NcML are very, very flexible and allow you to make almost any change you can think of to the files. For both, it can be challenging to figure out exactly how to do what you want to do -- check the web for similar examples. Both are useful tools for preparing netCDF and HDF files for use with ERDDAP, notably, to make changes beyond what ERDDAP&#x27;s manipulation system can do.</p>
<p>Example #1: Adding a Time Dimension with a Single Value<br>
<!-- -->Here&#x27;s an .ncml file that creates a new outer dimension (time, with 1 value: 1041379200) and adds that dimension to the pic variable in the file named A2003001.L3m_DAY_PIC_pic_4km.nc:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;netcdf xmlns=&#x27;https://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2&#x27;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;variable name=&#x27;time&#x27; type=&#x27;int&#x27; shape=&#x27;time&#x27; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;aggregation dimName=&#x27;time&#x27; type=&#x27;joinNew&#x27;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;variableAgg name=&#x27;pic&#x27;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;netcdf location=&#x27;A2003001.L3m\_DAY\_PIC\_pic\_4km.nc&#x27; coordValue=&#x27;1041379200&#x27;/&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/aggregation&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/netcdf&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Example #2: Changing an Existing Time Value<br>
<!-- -->Sometimes the source .nc file already has a time dimension and time value, but the value is incorrect (for your purposes). This .ncml file says: for the data file named &quot;&quot;19810825230030-NCEI...&quot;, for the dimension variable &quot;time&quot;, set the units attribute to be &#x27;seconds since 1970-01-01T00:00:00Z&#x27; and set the time value to be 367588800.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;netcdf xmlns=&#x27;https://www.unidata.ucar.edu/namespaces/netcdf/ncml-2.2&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      location=&quot;19810825230030-NCEI-L3C\_GHRSST-SSTskin-AVHRR\_Pathfinder-PFV5.3\_NOAA07\_G\_1981237\_day-v02.0-fv01.0.nc&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;variable name=&quot;time&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;attribute name=&#x27;units&#x27; value=&#x27;seconds since 1970-01-01T00:00:00Z&#x27; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;values&gt;367588800&lt;/values&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/variable&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/netcdf&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="netcdf-operators-nco">NetCDF Operators (NCO)<a href="#netcdf-operators-nco" class="hash-link" aria-label="Direct link to NetCDF Operators (NCO)" title="Direct link to NetCDF Operators (NCO)">​</a></h3>
<p>&quot;The netCDF Operators (NCO) comprise a dozen standalone, command-line programs that take netCDF [v3 or v4], HDF [v4 or v5], [.grib, .bufr,] and/or DAP files as input, then operate (e.g., derive new data, compute statistics, print, hyperslab, manipulate metadata) and output the results to screen or files in text, binary, or netCDF formats. NCO aids analysis of gridded scientific data. The shell-command style of NCO allows users to manipulate and analyze files interactively, or with expressive scripts that avoid some overhead of higher-level programming environments.&quot; (from the <a href="https://nco.sourceforge.net/" target="_blank" rel="noopener noreferrer">NCO</a> homepage).</p>
<p>An alternative to NCO is <a href="#ncml-files">NcML</a>. The big difference is that NcML is a system for making changes on-the-fly (so the source files aren&#x27;t altered), whereas NCO can be used to make changes to (or new versions of) the files. Both NCO and NcML are very, very flexible and allow you to make almost any change you can think of to the files. For both, it can be challenging to figure out exactly how to do what you want to do -- check the web for similar examples. Both are useful tools for preparing netCDF and HDF files for use with ERDDAP, notably, to make changes beyond what ERDDAP&#x27;s manipulation system can do.</p>
<p>For example, you can use NCO to make the units of the time variable consistent in a group of files where they weren&#x27;t consistent originally. Or, you can use NCO to apply scale_factor and add_offset in a group of files where scale_factor and add_offset have different values in different source files.<br>
<!-- -->(Or, you can now deal with those problems in ERDDAP™ via <a href="#eddgridfromncfilesunpacked">EDDGridFromNcFilesUnpacked</a>, which is a variant of EDDGridFromNcFiles which unpacks packed data and standardizes time values at a low level in order to deal with a collection files that have different scale_factors and add_offset, or different time units.)</p>
<p>NCO is Free and Open Source Software which uses the <a href="https://www.gnu.org/licenses/gpl-3.0.html" target="_blank" rel="noopener noreferrer">GPL 3.0</a> license.</p>
<p>Example #1: Making Units Consistent<br>
<!-- -->EDDGridFromFiles and EDDTableFrom Files insist that the units for a given variable be identical in all of the files. If some of the files are trivially (not functionally) different from others (e.g., time units of<br>
<!-- -->&quot;seconds since 1970-01-01 00:00:00 UTC&quot; versus<br>
<!-- -->&quot;seconds since 1970-01-01T00:00:00Z&quot;, you could use NCO&#x27;s <a href="https://nco.sourceforge.net/nco.html#ncatted-netCDF-Attribute-Editor" target="_blank" rel="noopener noreferrer">ncatted</a>. to change the units in all of the files to be identical with<br>
<!-- -->nco/ncatted -a units,time,o,c,&#x27;seconds since 1970-01-01T00:00:00Z&#x27; *.nc<br>
<!-- -->[For many problems like this in EDDTableFrom...Files datasets, you can now use <a href="#standardizewhat">standardizeWhat</a> to tell ERDDAP to standardize the source files as they are read into ERDDAP.]</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="limits-to-the-size-of-a-dataset">Limits to the Size of a Dataset<a href="#limits-to-the-size-of-a-dataset" class="hash-link" aria-label="Direct link to Limits to the Size of a Dataset" title="Direct link to Limits to the Size of a Dataset">​</a></h3>
<p>You&#x27;ll see many references to &quot;2 billion&quot; below. More accurately, that is a reference to 2,147,483,647 (2^31-1), which is the maximum value of a 32-bit signed integer. In some computer languages, for example Java (which ERDDAP™ is written in), that is the largest data type that can be used for many data structures (for example, the size of an array).</p>
<p>For String values (for example, for variable names, attribute names, String attribute values, and String data values), the maximum number of characters per String in ERDDAP™ is ~2 billion. But in almost all cases, there will be small or large problems if a String exceeds a reasonable size (e.g., 80 characters for variable names and attribute names, and 255 characters for most String attribute values and data values). For example, web pages which display long variable names will be awkwardly wide and long variable names will be truncated if they exceed the limit of the response file type.</p>
<p>For gridded datasets:</p>
<ul>
<li>The maximum number of axisVariables is ~2 billion.<br>
<!-- -->The maximum number of dataVariables is ~2 billion.<br>
<!-- -->But if a dataset has &gt;100 variables, it will be cumbersome for users to use.<br>
<!-- -->And if a dataset has &gt;1 million variables, your server will need a lot of physical memory and there will be other problems.</li>
<li>The maximum size of each dimension (axisVariable) is ~2 billion values.</li>
<li>I think the maximum total number of cells (the product of all dimension sizes) is unlimited, but it may be ~9e18.</li>
</ul>
<p>For tabular datasets:</p>
<ul>
<li>The maximum number of dataVariables is ~2 billion.<br>
<!-- -->But if a dataset has &gt;100 variables, it will be cumbersome for users to use.<br>
<!-- -->And if a dataset has &gt;1 million variables, your server will need a lot of physical memory and there will be other problems.</li>
<li>The maximum number of sources (for example, files) that can be aggregated is ~2 billion.</li>
<li>In some cases, the maximum number of rows from an individual source (for example, a file, but not a database) is ~2 billion rows.</li>
<li>I don&#x27;t think there are other limits.</li>
</ul>
<p>For both gridded and tabular datasets, there are some internal limits on the size of the subset that can be requested by a user in a single request (often related to &gt;2 billion of something or ~9e18 of something), but it is far more likely that a user will hit the file-type-specific limits.</p>
<ul>
<li>NetCDF version 3 .nc files are limited to 2GB bytes. (If this is really a problem for someone, let me know: I could add support for the NetCDF version 3 .nc 64-bit extension or NetCDF Version 4, which would increase the limit significantly, but not infinitely.)</li>
<li>Browsers crash after only ~500MB of data, so ERDDAP™ limits the response to .htmlTable requests to ~400MB of data.</li>
<li>Many data analysis programs have similar limits (for example, the maximum size of a dimension is often ~2 billion values), so there is no reason to work hard to get around the file-type-specific limits.</li>
<li>The file-type-specific limits are useful in that they prevent naive requests for truly huge amounts of data (for example, &quot;give me all of this dataset&quot; when the dataset has 20TB of data), which would take weeks or months to download. The longer the download, the more likely it will fail for a variety of reasons.</li>
<li>The file-type-specific limits are useful in that they force the user to deal with reasonably-sized subsets (for example, dealing with a large gridded dataset via files with data from one time point each).<br>
<!-- --> </li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="switch-to-acdd-13">Switch to ACDD-1.3<a href="#switch-to-acdd-13" class="hash-link" aria-label="Direct link to Switch to ACDD-1.3" title="Direct link to Switch to ACDD-1.3">​</a></h3>
<p>We (notably <a href="#generatedatasetsxml">GenerateDatasetsXml</a>) currently recommend <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD version 1.3</a>, which was ratified in early 2015 and which is referred to as &quot;ACDD-1.3&quot; in the global Conventions attribute. Prior to ERDDAP™ version 1.62 (released in June 2015), ERDDAP™ used/recommended the original, version 1.0, of the <a href="https://wiki.esipfed.org/ArchivalCopyOfVersion1" target="_blank" rel="noopener noreferrer">NetCDF Attribute Convention for Dataset Discovery</a> which was referred to as &quot;Unidata Dataset Discovery v1.0&quot; in the global Conventions and Metadata_Conventions attributes.</p>
<p>If your datasets use earlier versions of ACDD, we RECOMMEND that you switch to ACDD-1.3. It isn&#x27;t hard. ACDD-1.3 is highly backward compatible with version 1.0. To switch, for all datasets (except EDDGridFromErddap and EDDTableFromErddap datasets):</p>
<ol>
<li>Remove the newly deprecated global Metadata_Conventions attribute by adding (or by changing the existing Metadata_Conventions attribute)</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;att name=&quot;Metadata\_Conventions&quot;&gt;null&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>to the dataset&#x27;s global &lt;addAttributes&gt;.<br>
<!-- --> 
2.  If the dataset has a Conventions attribute in the global &lt;addAttributes&gt;, change all &quot;Unidata Dataset Discovery v1.0&quot; references to &quot;ACDD-1.3&quot;.<br>
<!-- -->If the dataset doesn&#x27;t have a Conventions attribute in the global &lt;addAttributes&gt;, then add one that refers to ACDD-1.3. For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;att name=&quot;Conventions&quot;&gt;COARDS, CF-1.6, ACDD-1.3&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p> 
3.  If the dataset has a global standard_name_vocabulary attribute, please change the format of the value to, for example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;att name=&quot;standard\_name\_vocabulary&quot;&gt;CF Standard Name Table v65&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If the reference is to an older version of the <a href="https://cfconventions.org/Data/cf-standard-names/current/build/cf-standard-name-table.html" target="_blank" rel="noopener noreferrer">CF standard name table</a>. it is probably a good idea to switch to the current version (65, as we write this), since new standard names are added to that table with subsequent versions, but old standard names are rarely deprecated and never removed.<br>
<!-- --> 
4.  Although ACDD-1.0 included global attributes for creator_name, creator_email, creator_url, <a href="#generatedatasetsxml">GenerateDatasetsXml</a> didn&#x27;t automatically add them until sometime around ERDDAP™ v1.50. This is important information:</p>
<ul>
<li>creator_name lets users know/cite the creator of the dataset.</li>
<li>creator_email tells users the preferred email address for contacting the creator of the dataset, for example if they have questions about the dataset.</li>
<li>creator_url gives users a way to find out more about the creator.</li>
<li>ERDDAP™ uses all of this information when generating FGDC and ISO 19115-2/19139 metadata documents for each dataset. Those documents are often used by external search services.</li>
</ul>
<p>Please add these attributes to the dataset&#x27;s global &lt;addAttributes&gt;.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;att name=&quot;creator\_name&quot;&gt;NOAA NMFS SWFSC ERD&lt;/att&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;att name=&quot;creator\_email&quot;&gt;erd.data@noaa.gov&lt;/att&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;att name=&quot;creator\_url&quot;&gt;https://www.pfeg.noaa.gov&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That&#x27;s it. I hope that wasn&#x27;t too hard.<br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="zarr">Zarr<a href="#zarr" class="hash-link" aria-label="Direct link to Zarr" title="Direct link to Zarr">​</a></h3>
<p>As of version 2.25 ERDDAP™ can read local Zarr files using <a href="#eddtablefromncfiles">EDDTableFromNcFiles</a> and <a href="#eddgridfromncfiles">EDDGridFromNcFiles</a>.</p>
<p>(As of August 2019) We could easily be wrong, but we are not yet convinced that <a href="https://github.com/zarr-developers/zarr-python" target="_blank" rel="noopener noreferrer">Zarr</a>, or similar systems which break data files up into smaller chunks, are great solutions to the problem of ERDDAP™ reading data stored in cloud services like Amazon AWS S3. Zarr is a great technology that has shown its usefulness in a variety of situations, we&#x27;re just not sure that ERDDAP+S3 will be one of those situations. Mostly we&#x27;re saying: before we rush to make the effort to store all our data in Zarr, let&#x27;s do some tests to see if it is actually a better solution.</p>
<p>The problems with accessing data in the cloud are latency (the lag to first get data) and file-level access (rather than block-level access). Zarr solves the file-level access problem, but does nothing about latency. Compared to just downloading the file (so it can be read as a local file with block-level access), Zarr may even exacerbate the latency problem because, with Zarr, reading a file now involves a series of several calls to read different parts of the file (each with its own lag). The latency problem can be solved by parallelizing the requests, but that is a higher-level solution, not dependent on Zarr.</p>
<p>And with Zarr (as with relational databases), we lose the convenience of having a data file be a simple, single file that you can easily verify the integrity of, or make/download a copy of.</p>
<p>ERDDAP™ (as of v2) has a system for maintaining a local cache of files from a URL source (e.g., S3) (see <a href="#cachefromurl">&lt;cacheFromUrl&gt; and &lt;cacheMaxGB&gt;</a>). And the new <a href="#nthreads">&lt;nThreads&gt;</a> should minimize the latency problem by parallelizing data retrieval at a high level. &lt;cacheFromUrl&gt; seems to work very well for many scenarios. (We&#x27;re not sure how beneficial &lt;nThreads&gt; is without further tests.) We admit we haven&#x27;t done timing tests on an AWS instance with a good network connection, but we have successfully tested with various remote URL sources of files. And ERDDAP&#x27;s &lt;cacheFromUrl&gt; works with any type of data file (e.g., .nc, .hdf, .csv, .jsonlCSV), even if externally compressed (e.g., .gz), without any changes to the files (e.g., rewriting them as Zarr collections).</p>
<p>It is likely that different scenarios will favor different solutions, e.g., only need to read part of a file once (Zarr will win), vs. need to read all of a file once, vs. need to read part or all of a file repeatedly (&lt;cacheFromUrl&gt; will win).</p>
<p>Mostly we&#x27;re saying: before we rush to make the effort to store all our data in Zarr, let&#x27;s do some tests to see if it is actually a better solution.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="list-of-types-datasets">List of Types Datasets<a href="#list-of-types-datasets" class="hash-link" aria-label="Direct link to List of Types Datasets" title="Direct link to List of Types Datasets">​</a></h2>
<p>If you need help choosing the right dataset type, see <a href="#choosing-the-dataset-type">Choosing the Dataset Type</a>.</p>
<p>The types of datasets fall into two categories. (<a href="#why-just-two-basic-data-structures">Why?</a>)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddgrid">EDDGrid<a href="#eddgrid" class="hash-link" aria-label="Direct link to EDDGrid" title="Direct link to EDDGrid">​</a></h3>
<ul>
<li><a href="#eddgrid"><strong>EDDGrid</strong></a> datasets handle gridded data.<!-- -->
<ul>
<li>
<p>In EDDGrid datasets, data variables are multi-dimensional arrays of data.</p>
</li>
<li>
<p>There MUST be an axis variable for each dimension. Axis variables MUST be specified in the order that the data variables use them.</p>
</li>
<li>
<p>In EDDGrid datasets, all data variables MUST use (share) all of the axis variables.<br>
<!-- -->(<a href="#why-just-two-basic-data-structures">Why?</a> <a href="#dimensions">What if they don&#x27;t?</a>)</p>
</li>
<li>
<p>Sorted Dimension Values - In all EDDGrid datasets, each dimension MUST be in sorted order (ascending or descending). Each can be irregularly spaced. There can be no ties. This is a requirement of the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF metadata standard</a>. If any dimension&#x27;s values aren&#x27;t in sorted order, the dataset won&#x27;t be loaded and ERDDAP™ will identify the first unsorted value in the log file, <em>bigParentDirectory</em>/logs/log.txt .</p>
<p>A few subclasses have additional restrictions (notably, EDDGridAggregateExistingDimension requires that the outer (leftmost, first) dimension be ascending.</p>
<p>Unsorted dimension values almost always indicate a problem with the source dataset. This most commonly occurs when a misnamed or inappropriate file is included in the aggregation, which leads to an unsorted time dimension. To solve this problem, see the error message in the ERDDAP™ log.txt file to find the offending time value. Then look in the source files to find the corresponding file (or one before or one after) that doesn&#x27;t belong in the aggregation.</p>
</li>
<li>
<p>See the more complete description of the <a href="https://coastwatch.pfeg.noaa.gov/erddap/griddap/documentation.html#dataModel" target="_blank" rel="noopener noreferrer">EDDGrid data model</a>.</p>
</li>
<li>
<p>The EDDGrid dataset types are:</p>
<ul>
<li><a href="#eddfromaudiofiles">EDDGridFromAudioFiles</a> aggregates data from a group of local audio files.</li>
<li><a href="#eddgridfromdap">EDDGridFromDap</a> handles gridded data from DAP servers.</li>
<li><a href="#eddgridfromeddtable">EDDGridFromEDDTable</a> lets you convert a tabular dataset into a gridded dataset.</li>
<li><a href="#eddfromerddap">EDDGridFromErddap</a> handles gridded data from a remote ERDDAP.</li>
<li><a href="#eddgridfrometopo">EDDGridFromEtopo</a> just handles the built-in ETOPO topography data.</li>
<li><a href="#eddgridfromfiles">EDDGridFromFiles</a> is the superclass of all EDDGridFrom...Files classes.</li>
<li><a href="#eddgridfrommergeirfiles">EDDGridFromMergeIRFiles</a> aggregates data from a group of local MergeIR .gz files.</li>
<li><a href="#eddgridfromncfiles">EDDGridFromNcFiles</a> aggregates data from a group of local NetCDF (v3 or v4) .nc and related files.</li>
<li><a href="#eddgridfromncfilesunpacked">EDDGridFromNcFilesUnpacked</a> is a variant if EDDGridFromNcFiles which also aggregates data from a group of local NetCDF (v3 or v4) .nc and related files, which ERDDAP™ unpacks at a low level.</li>
<li><a href="#eddgridlonpm180">EDDGridLonPM180</a> modifies the longitude values of a child EDDGrid so that they are in the range -180 to 180.</li>
<li><a href="#eddgridlon0360">EDDGridLon0360</a> modifies the longitude values of a child EDDGrid so that they are in the range 0 to 360.</li>
<li><a href="#eddgridsidebyside">EDDGridSideBySide</a> aggregates two or more EDDGrid datasets side by side.</li>
<li><a href="#eddgridaggregateexistingdimension">EDDGridAggregateExistingDimension</a> aggregates two or more EDDGrid datasets, each of which has a different range of values for the first dimension, but identical values for the other dimensions.</li>
<li><a href="#eddgridcopy">EDDGridCopy</a> can make a local copy of another EDDGrid&#x27;s data and serves data from the local copy.<br>
<!-- --> </li>
</ul>
</li>
<li>
<p>All EDDGrid datasets support an nThreads setting, which tells ERDDAP™ how many threads to use when responding to a request. See the <a href="#nthreads">nThreads</a> documentation for details.<br>
<!-- --> </p>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtable">EDDTable<a href="#eddtable" class="hash-link" aria-label="Direct link to EDDTable" title="Direct link to EDDTable">​</a></h3>
<ul>
<li><a href="#eddtable"><strong>EDDTable</strong></a> datasets handle tabular data.<!-- -->
<ul>
<li>Tabular data can be represented as a database-like table with rows and columns. Each column (a data variable) has a name, a set of attributes, and stores just one type of data. Each row has an observation (or group of related values). The data source may have the data in a different data structure, a more complicated data structure, and/or multiple data files, but ERDDAP™ needs to be able to flatten the source data into a database-like table in order to present the data as a tabular dataset to users of ERDDAP.</li>
<li>See the more complete description of the <a href="https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#dataModel" target="_blank" rel="noopener noreferrer">EDDTable data model</a>.</li>
<li>The EDDTable dataset types are:<!-- -->
<ul>
<li><a href="#eddtablefromalldatasets">EDDTableFromAllDatasets</a> is a higher-level dataset which has information about all the other datasets in your ERDDAP.</li>
<li><a href="#eddtablefromasciifiles">EDDTableFromAsciiFiles</a> aggregates data from comma-, tab-, semicolon-, or space-separated tabular ASCII data files.</li>
<li><a href="#eddtablefromasciiservice">EDDTableFromAsciiService</a> is the superclass of all EDDTableFromAsciiService... classes.</li>
<li><a href="#eddtablefromasciiservicenos">EDDTableFromAsciiServiceNOS</a> handles data from some of the NOAA NOS web services.</li>
<li><a href="#eddfromaudiofiles">EDDTableFromAudioFiles</a> aggregates data from a group of local audio files.</li>
<li><a href="#eddtablefromawsxmlfiles">EDDTableFromAwsXmlFiles</a> aggregates data from a set of Automatic Weather Station (AWS) XML files.</li>
<li><a href="#eddtablefromcassandra">EDDTableFromCassandra</a> handles tabular data from one Cassandra table.</li>
<li><a href="#eddtablefromcolumnarasciifiles">EDDTableFromColumnarAsciiFiles</a> aggregates data from tabular ASCII data files with fixed-width data columns.</li>
<li><a href="#eddtablefromdapsequence">EDDTableFromDapSequence</a> handles tabular data from DAP sequence servers.</li>
<li><a href="#eddtablefromdatabase">EDDTableFromDatabase</a> handles tabular data from one database table.</li>
<li><a href="#eddtablefromeddgrid">EDDTableFromEDDGrid</a> lets you create an EDDTable dataset from an EDDGrid dataset.</li>
<li><a href="#eddfromerddap">EDDTableFromErddap</a> handles tabular data from a remote ERDDAP.</li>
<li><a href="#eddtablefromfilenames">EDDTableFromFileNames</a> creates a dataset from information about a group of files in the server&#x27;s file system, but it doesn&#x27;t serve data from within the files.</li>
<li><a href="#eddtablefromfiles">EDDTableFromFiles</a> is the superclass of all EDDTableFrom...Files classes.</li>
<li><a href="#eddtablefromhttpget">EDDTableFromHttpGet</a> is ERDDAP&#x27;s only system for data import as well as data export.</li>
<li><a href="#eddtablefromhyraxfiles">EDDTableFromHyraxFiles</a> (DEPRECATED) aggregates data from files with several variables with shared dimensions served by a <a href="https://www.opendap.org/software/hyrax-data-server" target="_blank" rel="noopener noreferrer">Hyrax OPeNDAP server</a>.</li>
<li><a href="#eddtablefrominvalidcrafiles">EDDTableFromInvalidCRAFiles</a> aggregates data from NetCDF (v3 or v4) .nc files which use a specific, invalid, variant of the CF DSG Contiguous Ragged Array (CRA) files. Although ERDDAP™ supports this file type, it is an invalid file type that no one should start using. Groups that currently use this file type are strongly encouraged to use ERDDAP™ to generate valid CF DSG CRA files and stop using these files.</li>
<li><a href="#eddtablefromjsonlcsvfiles">EDDTableFromJsonlCSVFiles</a> aggregates data from <a href="https://jsonlines.org/examples/" target="_blank" rel="noopener noreferrer">JSON Lines CSV files</a>.</li>
<li><a href="#eddtablefrommultidimncfiles">EDDTableFromMultidimNcFiles</a> aggregates data from NetCDF (v3 or v4) .nc files with several variables with shared dimensions.</li>
<li><a href="#eddtablefromncfiles">EDDTableFromNcFiles</a> aggregates data from NetCDF (v3 or v4) .nc files with several variables with shared dimensions. It is fine to continue using this dataset type for existing datasets, but for new datasets we recommend using EDDTableFromMultidimNcFiles instead.</li>
<li><a href="#eddtablefromnccffiles">EDDTableFromNcCFFiles</a> aggregates data from NetCDF (v3 or v4) .nc files which use one of the file formats specified by the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#discrete-sampling-geometries" target="_blank" rel="noopener noreferrer">CF Discrete Sampling Geometries (DSG)</a> conventions. But for files using one of the multidimensional CF DSG variants, use <a href="#eddtablefrommultidimncfiles">EDDTableFromMultidimNcFiles</a> instead.</li>
<li><a href="#eddtablefromnccsvfiles">EDDTableFromNccsvFiles</a> aggregates data from <a href="/docs/user/nccsv-1.00">NCCSV</a> ASCII .csv files.</li>
<li><a href="#eddtablefromnos">EDDTableFromNOS</a> (DEPRECATED) handles tabular data from NOS XML servers.</li>
<li><a href="#eddtablefromobis">EDDTableFromOBIS</a> handles tabular data from OBIS servers.</li>
<li><a href="#eddtablefromparquetfiles">EDDTableFromParquetFiles</a> handles data from <a href="https://parquet.apache.org/" target="_blank" rel="noopener noreferrer">Parquet</a>.</li>
<li><a href="#eddtablefromsos">EDDTableFromSOS</a> handles tabular data from SOS servers.</li>
<li><a href="#eddtablefromthreddsfiles">EDDTableFromThreddsFiles</a> (DEPRECATED) aggregates data from files with several variables with shared dimensions served by a <a href="https://www.unidata.ucar.edu/software/tds/" target="_blank" rel="noopener noreferrer">THREDDS OPeNDAP server</a>.</li>
<li><a href="#eddtablefromwfsfiles">EDDTableFromWFSFiles</a> (DEPRECATED) makes a local copy of all of the data from an ArcGIS MapServer WFS server so the data can then be re-served quickly to ERDDAP™ users.</li>
<li><a href="#eddtableaggregaterows">EDDTableAggregateRows</a> can make an EDDTable dataset from a group of EDDTable datasets.</li>
<li><a href="#eddtablecopy">EDDTableCopy</a> can make a local copy of many types of EDDTable datasets and then re-serve the data quickly from the local copy.</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="detailed-descriptions-of-dataset-types">Detailed Descriptions of Dataset Types<a href="#detailed-descriptions-of-dataset-types" class="hash-link" aria-label="Direct link to Detailed Descriptions of Dataset Types" title="Direct link to Detailed Descriptions of Dataset Types">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridfromdap">EDDGridFromDap<a href="#eddgridfromdap" class="hash-link" aria-label="Direct link to EDDGridFromDap" title="Direct link to EDDGridFromDap">​</a></h3>
<p><a href="#eddgridfromdap"><strong>EDDGridFromDap</strong></a> handles grid variables from <a href="https://www.opendap.org/" target="_blank" rel="noopener noreferrer">DAP</a> servers.</p>
<ul>
<li>
<p>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. You can gather the information you need to tweak that or create your own XML for an EDDGridFromDap dataset by looking at the source dataset&#x27;s DDS and DAS files in your browser (by adding .das and .dds to the sourceUrl, for example, <a href="https://thredds1.pfeg.noaa.gov/thredds/dodsC/satellite/BA/ssta/5day.dds" target="_blank" rel="noopener noreferrer">https://thredds1.pfeg.noaa.gov/thredds/dodsC/satellite/BA/ssta/5day.dds</a>).<br>
<!-- --> </p>
</li>
<li>
<p>EDDGridFromDap can get data from any multi-dimensional variable from a DAP data server. (Previously, EDDGridFromDap was limited to variables designated as &quot;grid&quot;&#x27;s, but that is no longer a requirement.)<br>
<!-- --> </p>
</li>
<li>
<p>Sorted Dimension Values - The values for each dimension MUST be in sorted order (ascending or descending). The values can be irregularly spaced. There can be no ties. This is a requirement of the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF metadata standard</a>. If any dimension&#x27;s values aren&#x27;t in sorted order, the dataset won&#x27;t be loaded and ERDDAP™ will identify the first unsorted value in the log file, <em>bigParentDirectory</em>/logs/log.txt .</p>
<p>Unsorted dimension values almost always indicate a problem with the source dataset. This most commonly occurs when a misnamed or inappropriate file is included in the aggregation, which leads to an unsorted time dimension. To solve this problem, see the error message in the ERDDAP™ log.txt file to find the offending time value. Then look in the source files to find the corresponding file (or one before or one after) that doesn&#x27;t belong in the aggregation.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridfromdap-skeleton-xml">EDDGridFromDap skeleton XML<a href="#eddgridfromdap-skeleton-xml" class="hash-link" aria-label="Direct link to EDDGridFromDap skeleton XML" title="Direct link to EDDGridFromDap skeleton XML">​</a></h4>
<blockquote>
<p>    &lt;dataset type=&quot;EDDGridFromDap&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      <a href="#sourceurl">&lt;sourceUrl&gt;</a>...&lt;/sourceUrl&gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#accessibleviawms">&lt;accessibleViaWMS&gt;</a>...&lt;/accessibleViaWMS&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#updateeverynmillis">&lt;updateEveryNMillis&gt;</a>...&lt;/updateEveryNMillis&gt; &lt;!-- 0 or 1.<br>
<!-- -->        For EDDGridFromDap, this gets the remote .dds and then gets the new<br>
<!-- -->        leftmost (first) dimension values. --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#nthreads">&lt;nThreads&gt;</a>...&lt;/nThreads&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#dimensionvaluesinmemory">&lt;dimensionValuesInMemory&gt;</a>...&lt;/dimensionValuesInMemory&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->      <a href="#global-attributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#axisvariable">&lt;axisVariable&gt;</a>...&lt;/axisVariable&gt; &lt;!-- 1 or more --&gt;<br>
<!-- -->      <a href="#datavariable">&lt;dataVariable&gt;</a>...&lt;/dataVariable&gt; &lt;!-- 1 or more --&gt;<br>
<!-- -->    &lt;/dataset&gt;</p>
</blockquote>
<p> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridfromeddtable">EDDGridFromEDDTable<a href="#eddgridfromeddtable" class="hash-link" aria-label="Direct link to EDDGridFromEDDTable" title="Direct link to EDDGridFromEDDTable">​</a></h3>
<p><a href="#eddgridfromeddtable"><strong>EDDGridFromEDDTable</strong></a> lets you convert an EDDTable tabular dataset into an EDDGrid gridded dataset. Remember that ERDDAP™ treats datasets as either <a href="#why-just-two-basic-data-structures">gridded datasets (subclasses of EDDGrid) or tabular datasets (subclasses of EDDTable)</a>.</p>
<ul>
<li>
<p>Normally, if you have gridded data, you just set up an EDDGrid dataset directly. Sometimes this isn&#x27;t possible, for example, when you have the data stored in a relational database that ERDDAP™ can only access via EDDTableFromDatabase. EDDGridFromEDDTable class lets you remedy that situation.<br>
<!-- --> </p>
</li>
<li>
<p>Obviously, the data in the underlying EDDTable dataset must be (basically) gridded data, but in a tabular form. For example, the EDDTable dataset may have CTD data: measurements of eastward and northward current, at several depths, at several times. Since the depths are the same at each time point, EDDGridFromEDDTable can create a gridded dataset with a time and a depth dimension which accesses the data via the underlying EDDTable dataset.<br>
<!-- --> </p>
</li>
<li>
<p>GenerateDatasetsXml -- We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. You can gather the information you need to improve the rough draft.<br>
<!-- --> </p>
</li>
<li>
<p>Source Attributes -- As with all other types of datasets, EDDGridFromTable has the idea that there are global sourceAttributes and <a href="#global-attributes">global addAttributes</a> (specified in datasets.xml), which are combined to make the global combinedAttributes, which are what users see. For global sourceAttributes, EDDGridFromEDDTable uses the global combinedAttributes of the underlying EDDTable dataset. (If you think about it for a minute, it makes sense.)</p>
<p>Similarly, for each axisVariable&#x27;s and dataVariable&#x27;s <a href="#addattributes">addAttributes</a>, EDDGridFromEDDTable uses the variable&#x27;s combinedAttributes from the underlying EDDTable dataset as the EDDGridFromEDDTable variable&#x27;s sourceAttributes. (If you think about it for a minute, it makes sense.)</p>
<p>As a consequence, if the EDDTable has good metadata, the EDDGridFromEDDTable often needs very little addAttributes metadata -- just a few tweaks here and there.</p>
</li>
<li>
<p>dataVariables versus axisVariables -- The underlying EDDTable has only dataVariables. An EDDGridFromEDDTable dataset will have some axisVariables (created from some of the EDDTable dataVariables) and some dataVariables (created from the remaining EDDTable dataVariables). <a href="#generatedatasetsxml">GenerateDatasetsXml</a> will make a guess as to which EDDTable dataVariables should become EDDGridFromEDDTable axisVariables, but it is just a guess. You need to modify the output of GenerateDatasetsXml to specify which dataVariables will become axisVariables, and in which order.<br>
<!-- --> </p>
</li>
<li>
<p>axisValues -- There is nothing about the underlying EDDTable to tell EDDGridFromEDDTable the possible values of the axisVariables in the gridded version of the dataset, so you MUST provide that information for each axisVariable via one of these attributes:</p>
<ul>
<li>axisValues -- lets you specify a list of values. For example,<br>
<!-- -->&lt;att name=&quot;axisValues&quot; <a href="#attributetype">type=&quot;doubleList&quot;</a>&gt;2, 2.5, 3, 3.5, 4&lt;/att&gt;<br>
<!-- -->Note the use of a <a href="#data-types">data type</a> plus the word List. Also, the type of list (for example, double), MUST match the dataType of the variable in the EDDTable and EDDGridFromEDDTable datasets.</li>
<li>axisValuesStartStrideStop -- lets you specify a sequence of regularly spaced values by specifying the start, stride, and stop values. Here is an example that is equivalent to the axisValues example above:<br>
<!-- -->&lt;att name=&quot;axisValuesStartStrideStop&quot; <a href="#attributetype">type=&quot;doubleList&quot;</a>&gt;2, 0.5, 4&lt;/att&gt;<br>
<!-- -->Again, note the use of a list data type. Also, the type of list (for example, double), MUST match the dataType of the variable in the EDDTable and EDDGridFromEDDTable datasets.<br>
<!-- --> </li>
</ul>
<p>Updates -- Just as there is no way for EDDGridFromEDDTable to determine the axisValues from the EDDTable initially, there is also no reliable way for EDDGridFromEDDTable to determine from the EDDTable when the axisValues have changed (notably, when there are new values for the time variable). Currently, the only solution is to change the axisValues attribute in datasets.xml and reload the dataset. For example, you could write a script to</p>
<ol>
<li>Search datasets.xml for<br>
<!-- -->datasetID=&quot;<em>theDatasetID</em>&quot;<br>
<!-- -->so you are working with the correct dataset.</li>
<li>Search datasets.xml for the next occurrence of<br>
<sourcename><em>theVariablesSourceName</em></sourcename><br>
<!-- -->so you are working with the correct variable.</li>
<li>Search datasets.xml for the next occurrence of</li>
</ol>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;att name=&quot;axisValuesStartStrideStop&quot; type=&quot;doubleList&quot;&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>so you know the start position of the tag.
4.  Search datasets.xml for the next occurrence of</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>so you know the end position of the axis values.
5.  Replace the old start, stride, stop values with the new values.
6.  Contact the <a href="/docs/server-admin/additional-information#set-dataset-flag">flag URL</a> for the dataset to tell ERDDAP™ to reload the dataset.</p>
<p>This isn&#x27;t ideal, but it works.<br>
<!-- --> </p>
<ul>
<li>precision -- When EDDGridFromEDDTable responds to a user&#x27;s request for data, it moves a row of data from the EDDTable response table into the EDDGrid response grid. To do this, it has to figure out if the &quot;axis&quot; values on a given row in the table match some combination of axis values in the grid. For integer data types, it is easy to determine if two values are equal. But for floats and doubles, this brings up the horrible problem of floating point numbers <a href="https://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/" target="_blank" rel="noopener noreferrer">not matching exactly</a>. (for example, 0.2 versus 0.199999999999996). To (try to) deal with this, EDDGridFromTable lets you specify a precision attribute for any of the axisVariables, which specifies the total number of decimal digits which must be identical.<!-- -->
<ul>
<li>
<p>For example, &lt;att name=&quot;precision&quot; type=&quot;int&quot;&gt;5&lt;/att&gt;</p>
</li>
<li>
<p>For different types of data variables, there are different default precision values. The defaults are usually appropriate. If they aren&#x27;t, you need to specify different values.</p>
</li>
<li>
<p>For axisVariables that are <a href="#timestamp-variables">time or timeStamp variables</a>, the default is full precision (an exact match).</p>
</li>
<li>
<p>For axisVariables that are floats, the default precision is 5.</p>
</li>
<li>
<p>For axisVariables that are doubles, the default precision is 9.</p>
</li>
<li>
<p>For axisVariables that have integer data types, EDDGridFromEDDTable ignores the precision attribute and always uses full precision (an exact match).<br>
<!-- --> </p>
</li>
<li>
<p><strong>WARNING!</strong> When doing the conversion of a chunk of tabular data into a chunk of gridded data, if EDDGridFromEDDTable can&#x27;t match an EDDTable &quot;axis&quot; value to one of the expected EDDGridFromEDDTable axis values, EDDGridFromEDDTable silently (no error) throws away the data from that row of the table. For example, there may be other data (not on the grid) in the EDDTable dataset. (And if stride &gt; 1, it isn&#x27;t obvious to EDDGridFromTable which axis values are desired values and which ones are the one&#x27;s to be skipped because of the stride.) So, if the precision values are too high, the user will see missing values in the data response when valid data values actually exist.</p>
<p>Conversely, if the precision values are set too low, EDDTable &quot;axis&quot; values that shouldn&#x27;t match EDDGridFromEDDTable axis values will (erroneously) match.</p>
<p>These potential problems are horrible, because the user gets the wrong data (or missing values) when they should get the right data (or at least an error message).<br>
<!-- -->This is not a flaw in EDDGridFromTable. EDDGridFromTable can&#x27;t solve this problem. The problem is inherent in the conversion of tabular data into gridded data (unless other assumptions can be made, but they can&#x27;t be made here).<br>
<!-- -->It is up to you, the ERDDAP™ administrator, to <strong>test your EDDGridFromEDDTable thoroughly</strong> to ensure that the precision values are set to avoid these potential problems.</p>
</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="gapthreshold">gapThreshold<a href="#gapthreshold" class="hash-link" aria-label="Direct link to gapThreshold" title="Direct link to gapThreshold">​</a></h4>
<ul>
<li>
<p><a href="#gapthreshold">gapThreshold</a> -- This is a very unusual type of dataset. Since the types of queries that can be made to (handled by) an EDDGrid dataset (related to the ranges and strides of the axisVariables) are very different from the types of queries that can be made to (handled by) an EDDTable dataset (just related to the ranges of some variables), the performance of EDDGridFromEDDTable datasets will vary greatly depending on the exact request which is made and the speed of the underlying EDDTable dataset. For requests that have a stride value &gt; 1, EDDGridFromEDDTable may ask the underlying EDDTable for a relatively big chunk of data (as if stride=1) and then sift through the results, keeping the data from some rows and throwing away the data from others. If it has to sift through a lot of data to get the data it needs, the request will take longer to fill.</p>
<p>If EDDGridFromEDDTable can tell that there will be large gaps (with rows of unwanted data) between the rows with desired data, EDDGridFromEDDTable may choose to make several subrequests to the underlying EDDTable instead of one big request, thereby skipping the unwanted rows of data in the large gaps. The sensitivity for this decision is controlled by the gapThreshold value as specified in the &lt;gapThreshold&gt; tag (default=1000 rows of source data). Setting gapThreshold to a smaller number will lead to the dataset making (generally) more subrequests. Setting gapThreshold to a larger number will lead to the dataset making (generally) fewer subrequests.</p>
<p>If gapThreshold is set too small, EDDGridFromEDDTable will operate more slowly because the overhead of multiple requests will be greater than the time saved by getting some excess data. If gapThreshold is set too big, EDDGridFromEDDTable will operate more slowly because so much excess data will be retrieved from the EDDTable, only to be discarded. (As Goldilocks discovered, the middle is &quot;just right&quot;.) The overhead for different types of EDDTable datasets varies greatly, so the only way to know the actual best setting for your dataset is via experimentation. But you won&#x27;t go too far wrong sticking to the default.</p>
<p>A simple example is: Imagine an EDDGridFromTable with just one axisVariable (time, with a size of 100000), one dataVariable (temperature), and the default gapThreshold of 1000.</p>
<ul>
<li>If a user requests temperature[0<!-- -->💯<!-- -->5000], the stride is 100 so the gap size is 99, which is less than the gapThreshold. So EDDGridFromTable will make just one request to EDDTable for all of the data needed for the request (equivalent to temperature[0:5000]) and throw away all the rows of data it doesn&#x27;t need.</li>
<li>If a user requests temperature[0:2500:5000], that stride is 2500 so the gap size is 2499, which is greater than the gapThreshold. So EDDGridFromTable will make separate requests to EDDTable which are equivalent to temperature[0], temperature[2500], temperature[5000].</li>
</ul>
<p>Calculation of the gap size is more complicated when there are multiple axes.</p>
<p>For each user request, EDDGridFromEDDTable prints diagnostic messages related to this in the <a href="/docs/server-admin/additional-information#log">log.txt</a> file.</p>
<ul>
<li>If <a href="#loglevel">&lt;logLevel&gt;</a> in datasets.xml is set to info, this prints a message like<br>
<!-- -->* nOuterAxes=1 of 4 nOuterRequests=22<br>
<!-- -->If nOuterAxes=0, gapThreshold wasn&#x27;t exceeded and only one request will be made to EDDTable.<br>
<!-- -->If nOuterAxes&gt;0, gapThreshold was exceeded and nOuterRequests will be made to EDDTable, corresponding to each requested combination of the leftmost nOuterAxes. For example, if the dataset has 4 axisVariables and dataVariables like eastward[time][latitude][longitude][depth], the leftmost (first) axis variable is time.</li>
<li>If &lt;logLevel&gt; in datasets.xml is set to all, additional information is written to the log.txt file.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridfromeddtable-skeleton-xml">EDDGridFromEDDTable skeleton XML<a href="#eddgridfromeddtable-skeleton-xml" class="hash-link" aria-label="Direct link to EDDGridFromEDDTable skeleton XML" title="Direct link to EDDGridFromEDDTable skeleton XML">​</a></h4>
<blockquote>
<p> &lt;dataset type=&quot;EDDGridFromEDDTable&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->    <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->    <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->    <a href="#accessibleviawms">&lt;accessibleViaWMS&gt;</a>...&lt;/accessibleViaWMS&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->    <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->    <a href="#updateeverynmillis">&lt;updateEveryNMillis&gt;</a>...&lt;/updateEveryNMillis&gt; &lt;!-- 0 or 1.<br>
<!-- -->     For EDDGridFromEDDTable, this only works if the underlying EDDTable<br>
<!-- -->     supports updateEveryNMillis. --&gt;<br>
<!-- -->    <a href="#gapthreshold">&lt;gapThreshold&gt;</a>...&lt;/gapThreshold&gt; &lt;!-- 0 or 1. The default is 1000. &gt;<br>
<!-- -->    <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->    <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->    <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->    <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->    <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->    <a href="#global-attributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->    <a href="#axisvariable">&lt;axisVariable&gt;</a>...&lt;/axisVariable&gt; &lt;!-- 1 or more --&gt;<br>
<!-- -->    <a href="#datavariable">&lt;dataVariable&gt;</a>...&lt;/dataVariable&gt; &lt;!-- 1 or more --&gt;<br>
<!-- -->    &lt;dataset&gt;...&lt;/dataset&gt; &lt;!-- The underlying source EDDTable dataset. --&gt;<br>
<!-- --> &lt;/dataset&gt;</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddfromerddap">EDD*FromERDDAP<a href="#eddfromerddap" class="hash-link" aria-label="Direct link to EDD*FromERDDAP" title="Direct link to EDD*FromERDDAP">​</a></h3>
<p><strong>EDDGridFromErddap</strong> handles gridded data from a remote ERDDAP™ server.<br>
<strong>EDDTableFromErddap</strong> handles tabular data from a remote ERDDAP™ server.</p>
<ul>
<li>EDDGridFromErddap and EDDTableFromErddap behave differently from all other types of datasets in ERDDAP.<!-- -->
<ul>
<li>Like other types of datasets, these datasets get information about the dataset from the source and keep it in memory.</li>
<li>Like other types of datasets, when ERDDAP™ searches for datasets, displays the Data Access Form (<em>datasetID</em>.html), or displays the Make A Graph form (<em>datasetID</em>.graph), ERDDAP™ uses the information about the dataset which is in memory.</li>
<li>EDDGridFromErddap and EDDTableFromErddap are the basis for <a href="/docs/server-admin/scaling">grids/clusters/federations</a> of ERDDAPs, which efficiently distribute the CPU usage (mostly for making maps), memory usage, dataset storage, and bandwidth usage of a large data center.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="redirect">Redirect<a href="#redirect" class="hash-link" aria-label="Direct link to Redirect" title="Direct link to Redirect">​</a></h4>
<ul>
<li>Unlike other types of datasets, when ERDDAP™ receives a request for data or images from these datasets, ERDDAP <a href="https://en.wikipedia.org/wiki/URL_redirection" target="_blank" rel="noopener noreferrer">redirects</a> the request to the remote ERDDAP™ server. The result is:<!-- -->
<ul>
<li>This is very efficient (CPU, memory, and bandwidth), because otherwise<!-- -->
<ol>
<li>The composite ERDDAP™ has to send the request to the other ERDDAP™ (which takes time).</li>
<li>The other ERDDAP™ has to get the data, reformat it, and transmit the data to the composite ERDDAP.</li>
<li>The composite ERDDAP™ has to receive the data (using bandwidth), reformat it (using CPU and memory), and transmit the data to the user (using bandwidth).By redirecting the request and allowing the other ERDDAP™ to send the response directly to the user, the composite ERDDAP™ spends essentially no CPU time, memory, or bandwidth on the request.</li>
</ol>
</li>
<li>The redirect is transparent to the user regardless of the client software (a browser or any other software or command line tool).</li>
</ul>
</li>
<li><a href="#redirect">You can tell ERDDAP™</a> not to redirect any user requests by setting &lt;redirect&gt;false&lt;/redirect&gt;, but this negates most of the advantages of the ...FromErddap dataset type (notably, dispersing the load on the front end ERDDAP™ to the remote/backend ERDDAP).<br>
<!-- --> 
 </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="subscriptions">Subscriptions<a href="#subscriptions" class="hash-link" aria-label="Direct link to Subscriptions" title="Direct link to Subscriptions">​</a></h4>
<p>Normally, when an EDDGridFromErddap and EDDTableFromErddap are (re)loaded on your ERDDAP, they try to add a subscription to the remote dataset via the remote ERDDAP&#x27;s email/URL subscription system. That way, whenever the remote dataset changes, the remote ERDDAP™ contacts the <a href="/docs/server-admin/additional-information#set-dataset-flag">setDatasetFlag URL</a> on your ERDDAP™ so that the local dataset is reloaded ASAP and so that the local dataset is always perfectly up-to-date and mimics the remote dataset. So, the first time this happens, you should get an email requesting that you validate the subscription. However, if the local ERDDAP™ can&#x27;t send an email or if the remote ERDDAP&#x27;s email/URL subscription system isn&#x27;t active, you should email the remote ERDDAP™ administrator and request that s/he manually add <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; tags to all of the relevant datasets to call your dataset&#x27;s <a href="/docs/server-admin/additional-information#set-dataset-flag">setDatasetFlag URLs</a>. See your ERDDAP™ daily report for a list of setDatasetFlag URLs, but just send the ones for EDDGridFromErddap and EDDTableFromErddap datasets to the remote ERDDAP™ administrator.</p>
<p>Is this not working? Are your local datasets not staying in sync with the remote datasets?<br>
<!-- -->Several things must all work correctly for this system to work so that your datasets stay up-to-date. Check each of these things in order:</p>
<ol>
<li>Your ERDDAP™ must be able to send out emails. See the email settings in your setup.xml.</li>
<li>In general (but not always), your ERDDAP&#x27;s &lt;baseUrl&gt; and &lt;baseHttpsUrl&gt;must not have a port number (e.g., :8080, :8443). If they do, use a <a href="/docs/server-admin/deploy-install#proxypass">proxypass</a> to remove the port from the Url.</li>
<li>In your setup.xml, &lt;subscribeToRemoteErddapDataset&gt; must be set to true.</li>
<li>When your local EDD...FromErddap dataset is reloaded, it should send a request to the remote ERDDAP™ to subscribe to the remote dataset. Look in log.txt to see if this is happening.</li>
<li>You should get an email asking you to validate the subscription request.</li>
<li>You must click on the link in that email to validate the subscription request.</li>
<li>The remote ERDDAP™ should say that the validation was successful. At any time, you can request an email from the remote ERDDAP™ with a list of your pending and valid subscriptions. See the form at <em>remoteErddapBaseUrl</em>/erddap/subscriptions/list.html .</li>
<li>When the remote dataset changes (e.g., gets additional data), the remote ERDDAP™ should try to contact the flagURL on your ERDDAP. You can&#x27;t check this, but you can ask the administrator of the remote ERDDAP™ to check this.</li>
<li>Your ERDDAP™ should receive a request to set that flagURL. Look in your log.txt for &quot;setDatasetFlag.txt?&quot; request(s) and see if there is an error message associated with the requests.</li>
<li>Your ERDDAP™ should then try to reload that dataset (perhaps not immediately, but ASAP).<br>
<!-- --> </li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="up-to-date-maxtime">Up-to-date max(time)?<a href="#up-to-date-maxtime" class="hash-link" aria-label="Direct link to Up-to-date max(time)?" title="Direct link to Up-to-date max(time)?">​</a></h4>
<p>EDDGrid/TableFromErddap datasets only changes their stored information about each source dataset when the source dataset is <a href="#reloadeverynminutes">&quot;reload&quot;ed</a> and some piece of metadata changes (e.g., the time variable&#x27;s actual_range), thereby generating a subscription notification. If the source dataset has data that changes frequently (for example, new data every second) and uses the <a href="#updateeverynmillis">&quot;update&quot;</a> system to notice frequent changes to the underlying data, the EDDGrid/TableFromErddap won&#x27;t be notified about these frequent changes until the next dataset &quot;reload&quot;, so the EDDGrid/TableFromErddap won&#x27;t be perfectly up-to-date. You can minimize this problem by changing the source dataset&#x27;s &lt;reloadEveryNMinutes&gt; to a smaller value (60? 15?) so that there are more subscription notifications to tell the EDDGrid/TableFromErddap to update its information about the source dataset.</p>
<p>Or, if your data management system knows when the source dataset has new data (e.g., via a script that copies a data file into place), and if that isn&#x27;t super frequent (e.g., every 5 minutes, or less frequent), there&#x27;s a better solution:</p>
<ol>
<li>Don&#x27;t use &lt;updateEveryNMillis&gt; to keep the source dataset up-to-date.</li>
<li>Set the source dataset&#x27;s &lt;reloadEveryNMinutes&gt; to a larger number (1440?).</li>
<li>Have the script contact the source dataset&#x27;s <a href="/docs/server-admin/additional-information#set-dataset-flag">flag URL</a> right after it copies a new data file into place.<br>
<!-- --> </li>
</ol>
<p>That will lead to the source dataset being perfectly up-to-date and cause it to generate a subscription notification, which will be sent to the EDDGrid/TableFromErddap dataset. That will lead the EDDGrid/TableFromErddap dataset to be perfectly up-to-date (well, within 5 seconds of new data being added). And all that will be done efficiently (without unnecessary dataset reloads).<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="no-addattributes-axisvariable-or-datavariable">No addAttributes, axisVariable, or dataVariable<a href="#no-addattributes-axisvariable-or-datavariable" class="hash-link" aria-label="Direct link to No addAttributes, axisVariable, or dataVariable" title="Direct link to No addAttributes, axisVariable, or dataVariable">​</a></h4>
<p>Unlike other types of datasets, EDDTableFromErddap and EDDGridFromErddap datasets don&#x27;t allow global &lt;addAttributes&gt;, &lt;axisVariable&gt;, or &lt;dataVariable&gt; sections in the datasets.xml for that dataset. The problem is that allowing those would lead to inconsistencies:</p>
<ol>
<li>Let&#x27;s say it was allowed and you added a new global attribute.</li>
<li>When a user asks your ERDDAP™ for the global attributes, the new attribute will appear.</li>
<li>But when a user asks your ERDDAP™ for a data file, your ERDDAP™ redirects the request to the source ERDDAP. That ERDDAP™ is unaware of the new attribute. So if it creates a data file with metadata, e.g., a .nc file, the metadata won&#x27;t have the new attribute.</li>
</ol>
<p>There are two work-arounds:</p>
<ol>
<li>Convince the admin of the source ERDDAP™ to make the changes that you want to the metadata.</li>
<li>Instead of EDDTableFromErddap, use <a href="#eddtablefromdapsequence">EDDTableFromDapSequence</a>. Or instead of EDDGridFromErddap, use <a href="#eddgridfromdap">EDDGridFromDap</a>. Those EDD types allow you to connect efficiently to a dataset on a remote ERDDAP™ (but without redirecting data requests) and they allow you to include global &lt;addAttributes&gt;, &lt;axisVariable&gt;, or &lt;dataVariable&gt; sections in the datasets.xml. One other difference: you will need to manually subscribe to the remote dataset, so that the dataset on your ERDDAP™ will be notified (via the <a href="/docs/server-admin/additional-information#set-dataset-flag">flag URL</a>) when there are changes to the remote dataset. Thus, you are creating a new dataset, instead of linking to a remote dataset.<br>
<!-- --> </li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="other-notes">Other notes<a href="#other-notes" class="hash-link" aria-label="Direct link to Other notes" title="Direct link to Other notes">​</a></h4>
<ul>
<li>For security reasons, EDDGridFromErddap and EDDTableFromErddap don&#x27;t support the <a href="#accessibleto">&lt;accessibleTo&gt;</a> tag and can&#x27;t be used with remote datasets that require logging in (because they use <a href="#accessibleto">&lt;accessibleTo&gt;</a>).. See ERDDAP&#x27;s <a href="/docs/server-admin/additional-information#security">security system</a> for restricting access to some datasets to some users.<br>
<!-- --> </li>
<li>Starting with ERDDAP™ v2.10, EDDGridFromErddap and EDDTableFromErddap support the <a href="#accessibleviafiles">&lt;accessibleViaFiles&gt;</a> tag. Unlike other types of datasets, the default is true, but the dataset&#x27;s files will be accessibleViaFiles only if the source dataset also has &lt;accessibleViaFiles&gt; set to true.<br>
<!-- --> </li>
<li>You can use the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make the datasets.xml chunk for this type of dataset. But you can do these types of datasets easily by hand.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridfromerddap-skeleton-xml">EDDGridFromErddap skeleton XML<a href="#eddgridfromerddap-skeleton-xml" class="hash-link" aria-label="Direct link to EDDGridFromErddap skeleton XML" title="Direct link to EDDGridFromErddap skeleton XML">​</a></h4>
<ul>
<li>EDDGridFromErddap skeleton XML  dataset is very simple, because the intent is just to mimic the remote dataset which is already suitable for use in ERDDAP:</li>
</ul>
<blockquote>
<p>  &lt;dataset type=&quot;EDDGridFromErddap&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      <a href="#sourceurl">&lt;sourceUrl&gt;</a>...&lt;/sourceUrl&gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#accessibleviafiles">&lt;accessibleViaFiles&gt;</a>...&lt;/accessibleViaFiles&gt; &lt;!-- 0 or 1, default=true. --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#updateeverynmillis">&lt;updateEveryNMillis&gt;</a>...&lt;/updateEveryNMillis&gt; &lt;!-- 0 or 1<br>
<!-- -->        For EDDGridFromErddap, this gets the remote .dds and then gets<br>
<!-- -->        the new leftmost (first) dimension values. --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#nthreads">&lt;nThreads&gt;</a>...&lt;/nThreads&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#dimensionvaluesinmemory">&lt;dimensionValuesInMemory&gt;</a>...&lt;/dimensionValuesInMemory&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->      <a href="#redirect">&lt;redirect&gt;</a>true(default)|false&lt;/redirect&gt; &lt;!-- 0 or 1; --&gt;<br>
<!-- -->  &lt;/dataset&gt;</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromerddap-skeleton-xml">EDDTableFromErddap skeleton XML<a href="#eddtablefromerddap-skeleton-xml" class="hash-link" aria-label="Direct link to EDDTableFromErddap skeleton XML" title="Direct link to EDDTableFromErddap skeleton XML">​</a></h4>
<ul>
<li>The skeleton XML for an EDDTableFromErddap dataset is very simple, because the intent is just to mimic the remote dataset, which is already suitable for use in ERDDAP:</li>
</ul>
<blockquote>
<p>  &lt;dataset type=&quot;EDDTableFromErddap&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      <a href="#sourceurl">&lt;sourceUrl&gt;</a>...&lt;/sourceUrl&gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#addvariableswhere">&lt;addVariablesWhere&gt;</a>...&lt;/addVariablesWhere&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->      <a href="#redirect">&lt;redirect&gt;</a>true(default)|false&lt;/redirect&gt; &lt;!-- 0 or 1; --&gt;<br>
<!-- -->  &lt;/dataset&gt;</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridfrometopo">EDDGridFromEtopo<a href="#eddgridfrometopo" class="hash-link" aria-label="Direct link to EDDGridFromEtopo" title="Direct link to EDDGridFromEtopo">​</a></h3>
<p><a href="#eddgridfrometopo"><strong>EDDGridFromEtopo</strong></a> just serves the <a href="https://www.ngdc.noaa.gov/mgg/global/global.html" target="_blank" rel="noopener noreferrer">ETOPO1 Global 1-Minute Gridded Elevation Data Set</a> (Ice Surface, grid registered, binary, 2byte int: etopo1_ice_g_i2.zip) which is distributed with ERDDAP.</p>
<ul>
<li>Only two datasetIDs are supported for EDDGridFromEtopo, so that you can access the data with longitude values -180 to 180, or longitude values 0 to 360.</li>
<li>There are never any sub tags, since the data is already described within ERDDAP.</li>
<li>So the two options for EDDGridFromEtopo datasets are (literally):</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;!-- etopo180 serves the data from longitude -180 to 180 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;dataset type=&quot;EDDGridFromEtopo&quot; datasetID=&quot;etopo180&quot; /&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;!-- etopo360 serves the data from longitude 0 to 360 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;dataset type=&quot;EDDGridFromEtopo&quot; datasetID=&quot;etopo360&quot; /&gt; </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridfromfiles">EDDGridFromFiles<a href="#eddgridfromfiles" class="hash-link" aria-label="Direct link to EDDGridFromFiles" title="Direct link to EDDGridFromFiles">​</a></h3>
<p><a href="#eddgridfromfiles"><strong>EDDGridFromFiles</strong></a> is the superclass of all EDDGridFrom...Files classes. You can&#x27;t use EDDGridFromFiles directly. Instead, use a subclass of EDDGridFromFiles to handle the specific file type:</p>
<ul>
<li><a href="#eddgridfrommergeirfiles">EDDGridFromMergeIRFiles</a> handles data from gridded <a href="https://www.cpc.ncep.noaa.gov/products/global_precip/html/README" target="_blank" rel="noopener noreferrer">MergeIR .gz</a> files.</li>
<li><a href="#eddfromaudiofiles">EDDGridFromAudioFiles</a> aggregates data from a group of local audio files.</li>
<li><a href="#eddgridfromncfiles">EDDGridFromNcFiles</a> handles data from gridded <a href="https://en.wikipedia.org/wiki/GRIB" target="_blank" rel="noopener noreferrer">GRIB .grb</a> files, <a href="https://www.hdfgroup.org/" target="_blank" rel="noopener noreferrer">HDF (v4 or v5) .hdf</a> files, <a href="#ncml-files">.ncml</a> files, and <a href="https://www.unidata.ucar.edu/software/netcdf/" target="_blank" rel="noopener noreferrer">NetCDF (v3 or v4) .nc</a> files. This may work with other file types (for example, BUFR), we just haven&#x27;t tested it -- please send us some sample files if you are interested.</li>
<li><a href="#eddgridfromncfilesunpacked">EDDGridFromNcFilesUnpacked</a> is a variant of EDDGridFromNcFiles which handles data from gridded NetCDF (v3 or v4) .nc and related files, which ERDDAP™ unpacks at a low level.</li>
</ul>
<p>Currently, no other file types are supported. But it is usually relatively easy to add support for other file types. Contact us if you have a request. Or, if your data is in an old file format that you would like to move away from, we recommend converting the files to be NetCDF v3 .nc files. NetCDF is a widely supported, binary format, allows fast random access to the data, and is already supported by ERDDAP.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="from-files-details">From Files Details<a href="#from-files-details" class="hash-link" aria-label="Direct link to From Files Details" title="Direct link to From Files Details">​</a></h4>
<p>The following information applies to all of the subclasses of EDDGridFromFiles.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="aggregation-of-an-existing-dimension">Aggregation of an Existing Dimension<a href="#aggregation-of-an-existing-dimension" class="hash-link" aria-label="Direct link to Aggregation of an Existing Dimension" title="Direct link to Aggregation of an Existing Dimension">​</a></h5>
<p>All variations of EDDGridFromFiles can aggregate data from local files, where each file has 1 (or more) different values for the leftmost (first) dimension, usually [time], which will be aggregated. For example, the dimensions might be [time][altitude][latitude][longitude], and the files might have the data for one (or a few) time value(s) per file. The resulting dataset appears as if all of the file&#x27;s data had been combined. The big advantages of aggregation are:</p>
<ul>
<li>The size of the aggregated data set can be much larger than a single file can be conveniently (~2GB).</li>
<li>For near-real-time data, it is easy to add a new file with the latest chunk of data. You don&#x27;t have to rewrite the entire dataset.</li>
</ul>
<p>The requirements for aggregation are:</p>
<ul>
<li>The local files needn&#x27;t have the same dataVariables (as defined in the dataset&#x27;s datasets.xml). The dataset will have the dataVariables defined in datasets.xml. If a given file doesn&#x27;t have a given dataVariable, ERDDAP™ will add missing values as needed.</li>
<li>All of the dataVariables MUST use the same axisVariables/dimensions (as defined in the dataset&#x27;s datasets.xml). The files will be aggregated based on the first (left-most) dimension, sorted in ascending order.</li>
<li>Each file MAY have data for one or more values of the first dimension, but there can&#x27;t be any overlap between files. If a file has more than one value for the first dimension, the values MUST be sorted in ascending order, with no ties.</li>
<li>All files MUST have exactly the same values for all of the other dimensions. The precision of the testing is determined by <a href="#matchaxisndigits">matchAxisNDigits</a>.</li>
<li>All files MUST have exactly the same <a href="#units">units</a> metadata for all axisVariables and dataVariables. If this is a problem, you may be able to use <a href="#ncml-files">NcML</a> or <a href="#netcdf-operators-nco">NCO</a> to fix the problem.<br>
<!-- --> </li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="aggregation-via-file-names-or-global-metadata">Aggregation via File Names or Global Metadata<a href="#aggregation-via-file-names-or-global-metadata" class="hash-link" aria-label="Direct link to Aggregation via File Names or Global Metadata" title="Direct link to Aggregation via File Names or Global Metadata">​</a></h5>
<p>All variations of EDDGridFromFiles can also aggregate a group of files by adding a new leftmost (first) dimension, usually time, based on a value derived from each filename or from the value of a global attribute that is in each file. For example, the filename might include the time value for the data in the file. ERDDAP™ would then create a new time dimension.</p>
<p>Unlike the similar feature in THREDDS, ERDDAP™ always creates an axisVariable with numeric values (as required by CF), never String values (which are not allowed by CF). Also, ERDDAP™ will sort the files in the aggregation based on the numeric axisVariable value which is assigned to each file, so that the axis variable will always have sorted values as required by CF. The THREDDS approach of doing a lexicographic sort based on the file names leads to aggregations where the axis values aren&#x27;t sorted (which is not allowed by CF) when the file names sort differently than the derived axisVariable values.</p>
<p>To set up one of these aggregations in ERDDAP™, you will define a new leftmost (first) <a href="#axisvariable">axisVariable</a> with a special, pseudo &lt;sourceName&gt;, which tells ERDDAP™ where and how to find the value for the new dimension from each file.</p>
<ul>
<li>The format for the pseudo sourceName which gets the value from a filename (just filename.ext) is<br>
<!-- -->***fileName,<em><a href="#data-types">dataType</a></em>,<em>extractRegex</em>,<em>captureGroupNumber</em></li>
<li>The format for the pseudo sourceName which gets the value from a file&#x27;s absolute path name is<br>
<!-- -->***pathName,<em><a href="#data-types">dataType</a></em>,<em>extractRegex</em>,<em>captureGroupNumber</em><br>
<!-- -->[For this, the path name always uses &#x27;/&#x27; as the directory separator character, never &#x27;\&#x27;.]</li>
<li>The format for the pseudo sourceName which gets the value from a global attribute is<br>
<!-- -->***global:<em>attributeName</em>,<em><a href="#data-types">dataType</a></em>,<em>extractRegex</em>,<em>captureGroupNumber</em></li>
<li>This pseudo sourceName option works differently from the others: instead of creating a new leftmost (first) axisVariable, this replaces the value of the current axisVariable with a value extracted from the filename (just filename.ext). The format is<br>
<!-- -->***replaceFromFileName,<em><a href="#data-types">dataType</a></em>,<em>extractRegex</em>,<em>captureGroupNumber</em><br>
<!-- --> </li>
</ul>
<p>The descriptions of the parts you need to provide are:</p>
<ul>
<li>
<p><em>attributeName</em> -- the name of the global attribute which is in each file and which contains the dimension value.</p>
</li>
<li>
<p><em>dataType</em> -- This specifies the data type that will be used to store the values. See the standard list of <a href="#data-types">dataTypes</a> that ERDDAP™ supports, except that String is not allowed here since axis variables in ERDDAP™ can&#x27;t be String variables.</p>
<p>There is an additional pseudo dataType, timeFormat=<em>stringTimeFormat</em>, which tells ERDDAP™ that the value is a String timeStamp <a href="#string-time-units">units suitable for string times</a>. In most cases, the stringTimeFormat you need will be a variation of one of these formats:</p>
<ul>
<li>yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ss<!-- -->.SSSZ -- which ISO 8601:2004(E) date time format. You may need a shortened version of this, e.g., yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ss<!-- --> or yyyy-MM-dd.</li>
<li>yyyyMMddHHmmss.SSS -- which is the compact version of the ISO 8601 date time format. You may need a shortened version of this, e.g., yyyyMMddHHmmss or yyyyMMdd.</li>
<li>M/d/yyyy H:mm<!-- -->:ss<!-- -->.SSS -- which is the U.S. slash date format. You may need a shortened version of this, e.g., M/d/yyyy .</li>
<li>yyyyDDDHHmmssSSS -- which is the year plus the zero-padded day of the year (e.g, 001 = Jan 1, 365 = Dec 31 in a non-leap year; this is sometimes erroneously called the Julian date). You may need a shortened version of this, e.g., yyyyDDD .</li>
</ul>
<p>If you use this pseudo dataType, add this to the new variable&#x27;s &lt;addAttributes&gt;:</p>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;att name=&quot;units&quot;&gt;seconds since 1970-01-01T00:00:00Z&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you want to shift all of the time values, shift the time value in units, e.g.,<br>
<!-- -->1970-01-01T12:00:00Z.</p>
<ul>
<li><em>extractRegex</em> -- This is the <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" target="_blank" rel="noopener noreferrer">regular expression</a> (<a href="https://www.vogella.com/tutorials/JavaRegularExpressions/article.html" target="_blank" rel="noopener noreferrer">tutorial</a>) which includes a capture group (in parentheses) which describes how to extract the value from the filename or global attribute value. For example, given a filename like S19980011998031.L3b_MO_CHL.nc, capture group #1, &quot;\d<!-- -->7<!-- -->&quot;, in the regular expression S(\d<!-- -->7<!-- -->)\d<!-- -->7<!-- -->\.L3b.* will capture the first 7 digits after &#x27;S&#x27;: 1998001.</li>
<li><em>captureGroupNumber</em> -- This is the number of the capture group (within a pair of parentheses) in the regular expression which contains the information of interest. It is usually 1, the first capture group. Sometimes you need to use capture groups for other purposes in the regex, so then the important capture group number will be 2 (the second capture group) or 3 (the third), etc.</li>
</ul>
<p>A full example of an axisVariable which makes an aggregated dataset with a new time axis which gets the time values from the filename of each file is</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;axisVariable&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceName&gt;\*\*\*fileName,timeFormat=yyyyDDD,S(\\d{7})\\.L3m.\*,1&lt;/sourceName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;destinationName&gt;time&lt;/destinationName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/axisVariable&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When you use the &quot;timeFormat=&quot; pseudo dataType, ERDDAP™ will add 2 attributes to the axisVariable so that they appear to be coming from the source:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;standard\_name&quot;&gt;time&lt;/att&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;units&quot;&gt;seconds since 1970-01-01T00:00:00Z&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>So in this case, ERDDAP™ will create a new axis named &quot;time&quot; with double values (seconds since 1970-01-01T00:00:00Z) by extracting the 7 digits after &#x27;S&#x27; and before &quot;.L3m&quot; in the filename and interpreting those as time values formatted as yyyyDDD.</p>
<p>You can override the default base time (1970-01-01T00:00:00Z) by adding an <a href="#addattributes">addAttribute</a> which specifies a different units attribute with a different base time. A common situation is: there are groups of data files, each with a 1 day composite of a satellite dataset, where you want the time value to be noon of the day mentioned in the filename (the centered time of each day) and want the variable&#x27;s long_name to be &quot;Centered Time&quot;. An example which does this is:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;axisVariable&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceName&gt;\*\*\*fileName,timeFormat=yyyyDDD,S(\\d{7})\\.L3m.\*,1&lt;/sourceName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;destinationName&gt;time&lt;/destinationName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;addAttributes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;att name=&quot;long\_name&quot;&gt;Centered Time&lt;/att&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;att name=&quot;units&quot;&gt;seconds since 1970-01-01T12:00:00Z&lt;/att&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/addAttributes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/axisVariable&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note hours=12 in the base time, which adds 12 hours relative to the original base time of 1970-01-01T00:00:00Z.</p>
<p>A full example of an axisVariable which makes an aggregated dataset with a new &quot;run&quot; axis (with int values) which gets the run values from the &quot;runID&quot; global attribute in each file (with values like &quot;r17_global&quot;, where 17 is the run number) is</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;axisVariable&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceName&gt;\*\*\*global:runID,int,(r|s)(\\d+)\_global,2&lt;/sourceName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;destinationName&gt;run&lt;/destinationName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;addAttributes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;att name=&quot;ioos\_category&quot;&gt;Other&lt;/att&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;att name=&quot;units&quot;&gt;count&lt;/att&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/addAttributes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/axisVariable&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note the use of the capture group number 2 to capture the digits which occur after &#x27;r&#x27; or &#x27;s&#x27;, and before &quot;_global&quot;. This example also shows how to add additional attributes (e.g., ioos_category and units) to the axis variable.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="externally-compressed-files">Externally Compressed Files<a href="#externally-compressed-files" class="hash-link" aria-label="Direct link to Externally Compressed Files" title="Direct link to Externally Compressed Files">​</a></h4>
<ul>
<li>
<p>Datasets that are subsets of EDDGridFromFiles and EDDTableFromFiles can serve data directly from externally compressed data files, including .tgz, .tar.gz, .tar.gzip, .gz, .gzip, .zip, .bz2, and .Z files.<br>
<!-- --> </p>
</li>
<li>
<p><strong>This works surprisingly well!</strong><br>
<!-- -->In most cases, the slowdown related to decompressing small and medium-sized data files is minor. If you need to conserve disk space, we strongly encourage using this feature, especially for older files that are rarely accessed.<br>
<!-- --> </p>
</li>
<li>
<p><strong>Save money!</strong><br>
<!-- -->This is one of the few features in ERDDAP™ that offers you a chance to save a lot of money (although at the cost of slightly decreased performance). If the compression ratio is e.g., 6:1 (sometimes it will be much higher), then the dataset&#x27;s data files will only need 1/6 the disk space. Then perhaps you can get by with 1 RAID (of a given size) instead of 6 RAIDS (of the same size). That is a huge cost savings. Hopefully, the ability to compress some files in a collection (the older ones?) and not compress others (the newer ones?), and to change that at any time, let&#x27;s you minimize the downside to compressing some of the files (slower access). And if the choice is between storing the files on tape (and only accessible upon request, after a delay) vs storing them compressed on a RAID (and accessible via ERDDAP), then there is a huge advantage to using compression so that users get interactive and (relatively) quick access to the data. And if this can save you from purchasing an additional RAID, this feature can save you about $30,000.<br>
<!-- --> </p>
</li>
<li>
<p>For all EDDGridFromFiles subclasses, if the data files have an extension indicating that they are externally compressed files (currently: .tgz, .tar.gz, .tar.gzip, .gz, .gzip, .zip, .bz2, or .Z), ERDDAP™ will decompress the files to the dataset&#x27;s cache directory when it reads them (if they aren&#x27;t already in the cache). The same is true for binary file (e.g., .nc) subclasses of EDDTableFromFiles.<br>
<!-- --> </p>
</li>
<li>
<p>For EDDTableFromFiles subclasses for non-binary files (e.g., .csv), data files with an extension indicating that they are externally compressed files will be decompressed on-the-fly as the file is read.<br>
<!-- --> </p>
</li>
<li>
<p>REQUIREMENT: If the type of externally compressed file used (e.g., .tgz or .zip) supports more than 1 file inside the compressed file, the compressed file must contain just 1 file.<br>
<!-- --> </p>
</li>
<li>
<p>REQUIREMENT: This feature assumes that the contents of the externally compressed files don&#x27;t change, so that a cached decompressed file can be reused. If some or all of a dataset&#x27;s data files are sometimes changed, don&#x27;t compress those files. This is consistent with common usage, since people don&#x27;t normally compress files that they sometimes need to change.<br>
<!-- --> </p>
</li>
<li>
<p>&lt;fileNameRegex&gt; To make this work, the dataset&#x27;s &lt;fileNameRegex&gt; must match the compressed files&#x27; names. Obviously, regexes like .* will match all file names. If you specify a specific file type, e.g., .*\.nc, then you need to modify the regex to include the compression extension too, e.g., .*\.nc\.gz (if all of the files will be <em>something</em>.nc.gz files) .<br>
<!-- --> </p>
</li>
<li>
<p>It is fine if your dataset includes a mix of compressed and not compressed files. This may be useful if you believe that some files (e.g., older files) will be used less often and therefore it would be useful to save disk space by compressing them. To make this work, the &lt;fileNameRegex&gt; must match the compressed and not compressed files&#x27; names, e.g., .* or .*\.nc(|\.gz) (where the capture group at the end of that specifies that .gz is optional.<br>
<!-- --> </p>
</li>
<li>
<p>It is fine if you compress or decompress specific files in the collection at any time.<br>
<!-- -->If the dataset doesn&#x27;t use <a href="#updateeverynmillis">&lt;updateEveryNMillis&gt;</a>, set the dataset&#x27;s <a href="/docs/server-admin/additional-information#flag">flag</a> to tell ERDDAP™ to reload the dataset and thus notice the changes. Interestingly, you could use different compression algorithms and settings for different files in the same dataset (e.g., .bz2 for rarely used files, .gz for not often used files, and no compression for frequently used files), just be sure that the regex supports all of the file extensions that are in use, e.g., .*\.nc(|\.gz|\.bz2) .<br>
<!-- --> </p>
</li>
<li>
<p>Of course, compression ratios and speeds for the different compression algorithms vary with the source file and the settings (e.g., compression level). If you want to optimize this system for your files, do a test of the different compression methods with your files and with a range of compression settings. If you want a reliably good (not necessarily the best) setup, we will slightly recommend gzip (.gz). gzip doesn&#x27;t make the smallest compressed file (it&#x27;s reasonably close), but it compresses the file very quickly and (more important for ERDDAP™ users) decompresses the file very quickly. Plus, gzip software comes standard with every Linux and Mac OS installation and is readily available for Windows via free tools like 7Zip and Linux add-ons like Git Bash. For example, to compress a source file into the .gz version of the file (same filename, but with .gz appended), use (in Linux, Mac OS, and Git Bash)<br>
<!-- -->gzip <em>sourceName</em><br>
<!-- -->To decompress a .gz file back to the original, use<br>
<!-- -->gunzip <em>sourceName.gz</em><br>
<!-- -->To compress each of the source files in directory and its subdirectories, recursively, use<br>
<!-- -->gzip -r <em>directorName</em><br>
<!-- -->To decompress each of the .gz files in directory and its subdirectories , recursively, use<br>
<!-- -->gunzip -r <em>directorName</em><br>
<!-- --> </p>
</li>
<li>
<p>WARNING: Don&#x27;t externally compress (gzip) files that are already internally compressed!<br>
<!-- -->Many files already have compressed data internally. If you gzip these files, the resulting files won&#x27;t be much smaller (&lt; 5%) and ERDDAP™ will waste time decompressing them when it needs to read them. For example:</p>
<ul>
<li>data files: e.g., .nc 4, and .hdf 5 files: Some files use internal compression; some don&#x27;t. How to tell: compressed variables have &quot;_ChunkSize&quot; attributes. Also, if a group of gridded .nc or .hdf files are all different sizes, they are likely internally compressed. If they are all the same size, they are not internally compressed.</li>
<li>image files: e.g., .gif, .jpg, and .png</li>
<li>audio files: e.g., .mp3, and .ogg.</li>
<li>video files: e.g., .mp4, .ogv, and .webm.</li>
</ul>
<p>One unfortunate odd case: .wav audio files are huge and not internally compressed. It would be nice to compress (gzip) them, but generally you shouldn&#x27;t because if you do, users won&#x27;t be able to play the compressed files in their browser.<br>
<!-- --> </p>
</li>
<li>
<p>Test Case: compressing (with gzip) a dataset with 1523 gridded .nc files.</p>
<ul>
<li>The data in the source files was sparse (lots of missing values).</li>
<li>Total disk space went from 57 GB before compression to 7 GB after.</li>
<li>A request for lots of data from 1 time point is &lt; 1 s before and after compression.</li>
<li>A request for 1 data point for 365 time points (the worst case situation) went from 4 s to 71 s.<br>
<!-- --> </li>
</ul>
<p>To me that is a reasonable trade-off for any dataset, and certainly for datasets that are infrequently used.<br>
<!-- --> </p>
</li>
<li>
<p>Internal versus External Compression --<br>
<!-- -->Compared to the internal file compression offered by .nc4 and .hdf5 files, ERDDAP&#x27;s approach for externally compressed binary files has advantages and disadvantages. The disadvantage is: for a one time read of a small part of one file, internal compression is better because EDDGridFromFiles only needs to decompress a few chunk(s) of the file, not the entire file. But ERDDAP&#x27;s approach has some advantages:</p>
<ul>
<li>ERDDAP™ supports compression of all types of data files (binary and non-binary, e.g., .nc3 and .csv) not just .nc4 and .hdf4.</li>
<li>If the bulk of a file needs to be read more than once in a short period of time, then it saves time to decompress the file once and read it many times. This happens in ERDDAP™ when a user uses Make-A-Graph for the dataset and makes a series of small changes to the graph.</li>
<li>The ability to have compressed files and not compressed files in the same collection, allows you more control over which files are compressed and which aren&#x27;t. And this added control comes without really modifying the source file (since you can compress a file with e.g., .gz and then decompress it to get the original file).</li>
<li>The ability to change at any time whether a given file is compressed and how it is compressed (different algorithms and settings) gives you more control over the performance of the system. And you can easily recover the original uncompressed file at any time.</li>
</ul>
<p>While neither approach is a winner in all situations, it is clear that ERDDAP&#x27;s ability to serve data from externally compressed files makes external compression a reasonable alternative to the internal compression offered by .nc4 and .hdf5. That is significant given that internal compression is one of the main reasons people choose to use .nc4 and .hdf5.<br>
<!-- --> </p>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="decompressed-cache">Decompressed Cache<a href="#decompressed-cache" class="hash-link" aria-label="Direct link to Decompressed Cache" title="Direct link to Decompressed Cache">​</a></h5>
<p>ERDDAP™ makes a decompressed version of any compressed binary (e.g., .nc) data file when it needs to read the file. The decompressed files are kept in the dataset&#x27;s directory within <em>bigParentDirectory</em>/decompressed/ . Decompressed files which haven&#x27;t been used recently will be deleted to free up space when the cumulative file size is &gt;10GB. You can change that by setting &lt;decompressedCacheMaxGB&gt; (default=10) in datasetsXml.xml, e.g.,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;decompressedCacheMaxGB&gt;40&lt;/decompressedCacheMaxGB&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Also, decompressed files that haven&#x27;t been used in the last 15 minutes will be deleted at the start of each major dataset reload. You can change that by setting &lt;decompressedCacheMaxMinutesOld&gt; (default=15) in datasetsXml.xml, e.g.,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;decompressedCacheMaxMinutesOld&gt;60&lt;/decompressedCacheMaxMinutesOld&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Larger numbers are nice, but the cumulative size of the decompressed files may cause <em>bigParentDirectory</em> to run out of disk space, which causes severe problems.<br>
<!-- --> </p>
<ul>
<li>Because decompressing a file can take a significant amount of time (0.1 to 10 seconds), datasets with compressed files may benefit from setting the dataset&#x27;s <a href="#nthreads">&lt;nThreads&gt;</a> setting to a higher number (2? 3? 4?). The downsides to even higher numbers (e.g., 5? 6? 7?) are diminishing returns and that one user&#x27;s request can then use a high percentage of the system&#x27;s resources, thus significantly slowing down the processing of other user&#x27;s requests. Thus, there is no ideal nThreads setting, just different consequences in different situations with different settings.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sorted-dimension-values">Sorted Dimension Values<a href="#sorted-dimension-values" class="hash-link" aria-label="Direct link to Sorted Dimension Values" title="Direct link to Sorted Dimension Values">​</a></h4>
<p>The values for each dimension MUST be in sorted order (ascending or descending, except for the first (left-most) dimension which must be ascending). The values can be irregularly spaced. There can&#x27;t be any ties. This is a requirement of the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF metadata standard</a>. If any dimension&#x27;s values aren&#x27;t in sorted order, the dataset won&#x27;t be loaded and ERDDAP™ will identify the first unsorted value in the log file, <em>bigParentDirectory</em>/logs/log.txt .</p>
<p>Unsorted dimension values almost always indicate a problem with the source dataset. This most commonly occurs when a misnamed or inappropriate file is included in the aggregation, which leads to an unsorted time dimension. To solve this problem, see the error message in the ERDDAP™ log.txt file to find the offending time value. Then look in the source files to find the corresponding file (or one before or one after) that doesn&#x27;t belong in the aggregation.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="directories">Directories<a href="#directories" class="hash-link" aria-label="Direct link to Directories" title="Direct link to Directories">​</a></h4>
<p>The files MAY be in one directory, or in a directory and its subdirectories (recursively). If there are a large number of files (for example, &gt;1,000), the operating system (and thus EDDGridFromFiles) will operate much more efficiently if you store the files in a series of subdirectories (one per year, or one per month for datasets with very frequent files), so that there are never a huge number of files in a given directory.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cachefromurl">&lt;cacheFromUrl&gt;<a href="#cachefromurl" class="hash-link" aria-label="Direct link to &lt;cacheFromUrl&gt;" title="Direct link to &lt;cacheFromUrl&gt;">​</a></h4>
<p>All EDDGridFromFiles and all EDDTableFromFiles datasets support a set of tags which tell ERDDAP™ to download and maintain a copy of all of a remote dataset&#x27;s files, or a cache of a few files (downloaded as needed). This can be incredibly useful. See the <a href="#cachefromurl">cacheFromUrl documentation</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="remote-directories-and-http-range-requests">Remote Directories and HTTP Range Requests<a href="#remote-directories-and-http-range-requests" class="hash-link" aria-label="Direct link to Remote Directories and HTTP Range Requests" title="Direct link to Remote Directories and HTTP Range Requests">​</a></h4>
<p>(AKA Byte Serving, Byte Range Requests, Accept-Ranges http header)<br>
<!-- -->EDDGridFromNcFiles, EDDTableFromMultidimNcFiles, EDDTableFromNcFiles, and EDDTableFromNcCFFiles, can <em>sometimes</em> serve data from .nc files on remote servers and accessed via HTTP if the server supports <a href="https://en.wikipedia.org/wiki/Byte_serving" target="_blank" rel="noopener noreferrer">Byte Serving</a> via HTTP range requests (the HTTP mechanism for byte serving). This is possible because netcdf-java (which ERDDAP™ uses to read .nc files) supports reading data from remote .nc files via HTTP range requests.</p>
<p><strong>Don&#x27;t do this!</strong> It is horribly inefficient and slow.<br>
<!-- -->Instead, use the <a href="#cachefromurl">&lt;cacheFromUrl&gt; system</a>.</p>
<p>Accessing ERDDAP™ datasets as files via byte range requests --<br>
<!-- -->Flipping this around, given that you can (in theory) think of a dataset in ERDDAP™ as a giant .nc file by appending &quot;.nc&quot; to the base OPenDAP URL for a given dataset (e.g., <a href="https://myserver.org/erddap/griddap/datasetID.nc" target="_blank" rel="noopener noreferrer">https://myserver.org/erddap/griddap/datasetID.nc</a> and also by adding a ?query after that to specify a subset), it is perhaps reasonable to ask whether you can use netcdf-java, Ferret, or some other NetCDF client software to read data via HTTP Range Requests from ERDDAP. The answer is no, because there isn&#x27;t really a huge &quot;.nc&quot; file. If you want to do this, instead do one of these options:</p>
<ul>
<li>Use (OPeN)DAP client software to connect to the griddap services offered by ERDDAP. That is what DAP (and thus ERDDAP) was designed for. It is very efficient.</li>
<li>Or, download the source file(s) from the &quot;files&quot; system (or a subset file via a .nc?query) to your computer and use netcdf-java, Ferret, or some other NetCDF client software to read the (now) local file(s).<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cached-file-information">Cached File Information<a href="#cached-file-information" class="hash-link" aria-label="Direct link to Cached File Information" title="Direct link to Cached File Information">​</a></h4>
<p>When an EDDGridFromFiles dataset is first loaded, EDDGridFromFiles reads information from all of the relevant files and creates tables (one row for each file) with information about each valid file and each &quot;bad&quot; (different or invalid) file.</p>
<ul>
<li>The tables are also stored on disk, as NetCDF v3 .nc files in <em>bigParentDirectory</em>/dataset/<em>last2CharsOfDatasetID</em>/<em>datasetID</em>/ in files named:<br>
<!-- -->  dirTable.nc (which holds a list of unique directory names),<br>
<!-- -->  fileTable.nc (which holds the table with each valid file&#x27;s information),<br>
<!-- -->  badFiles.nc (which holds the table with each bad file&#x27;s information).</li>
<li>To speed up access to an EDDGridFromFiles dataset (but at the expense of using more memory), you can use</li>
</ul>
<blockquote>
<p><a href="#filetableinmemory"><filetableinmemory>true</filetableinmemory></a><br>
<!-- -->to tell ERDDAP™ to keep a copy of the file information tables in memory.</p>
</blockquote>
<ul>
<li>The copy of the file information tables on disk is also useful when ERDDAP™ is shut down and restarted: it saves EDDGridFromFiles from having to re-read all of the data files.</li>
<li>When a dataset is reloaded, ERDDAP™ only needs to read the data in new files and files that have changed.</li>
<li>If a file has a different structure from the other files (for example, a different data type for one of the variables, or a different value for the &quot;<a href="#units">units</a>&quot; attribute), ERDDAP adds the file to the list of &quot;bad&quot; files. Information about the problem with the file will be written to the <em>bigParentDirectory</em>/logs/log.txt file.</li>
<li>You shouldn&#x27;t ever need to delete or work with these files. One exception is: if you are still making changes to a dataset&#x27;s datasets.xml setup, you may want to delete these files to force ERDDAP™ to reread all of the files since the files will be read/interpreted differently. If you ever do need to delete these files, you can do it when ERDDAP™ is running. (Then set a <a href="/docs/server-admin/additional-information#set-dataset-flag">flag</a> to reload the dataset ASAP.) However, ERDDAP™ usually notices that the datasets.xml information doesn&#x27;t match the fileTable information and deletes the file tables automatically.</li>
<li>If you want to encourage ERDDAP™ to update the stored dataset information (for example, if you just added, removed, or changed some files to the dataset&#x27;s data directory), use the <a href="/docs/server-admin/additional-information#flag">flag system</a> to force ERDDAP™ to update the cached file information.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="handling-requests">Handling Requests<a href="#handling-requests" class="hash-link" aria-label="Direct link to Handling Requests" title="Direct link to Handling Requests">​</a></h4>
<p>When a client&#x27;s request for data is processed, EDDGridFromFiles can quickly look in the table with the valid file information to see which files have the requested data.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="updating-the-cached-file-information">Updating the Cached File Information<a href="#updating-the-cached-file-information" class="hash-link" aria-label="Direct link to Updating the Cached File Information" title="Direct link to Updating the Cached File Information">​</a></h4>
<p>Whenever the dataset is reloaded, the cached file information is updated.</p>
<ul>
<li>The dataset is reloaded periodically as determined by the &lt;reloadEveryNMinutes&gt; in the dataset&#x27;s information in datasets.xml.</li>
<li>The dataset is reloaded as soon as possible whenever ERDDAP™ detects that you have added, removed, <a href="https://en.wikipedia.org/wiki/Touch_(Unix)" target="_blank" rel="noopener noreferrer">touch&#x27;d</a> (to change the file&#x27;s lastModified time), or changed a datafile.</li>
<li>The dataset is reloaded as soon as possible if you use the <a href="/docs/server-admin/additional-information#flag">flag system</a>.</li>
</ul>
<p>When the dataset is reloaded, ERDDAP™ compares the currently available files to the cached file information tables. New files are read and added to the valid files table. Files that no longer exist are dropped from the valid files table. Files where the file timestamp has changed are read and their information is updated. The new tables replace the old tables in memory and on disk.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="bad-files">Bad Files<a href="#bad-files" class="hash-link" aria-label="Direct link to Bad Files" title="Direct link to Bad Files">​</a></h4>
<p>The table of bad files and the reasons the files were declared bad (corrupted file, missing variables, etc.) is emailed to the emailEverythingTo email address (probably you) every time the dataset is reloaded. You should replace or repair these files as soon as possible.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="missing-variables">Missing Variables<a href="#missing-variables" class="hash-link" aria-label="Direct link to Missing Variables" title="Direct link to Missing Variables">​</a></h4>
<p>If some of the files don&#x27;t have some of the dataVariables defined in the dataset&#x27;s datasets.xml chunk, that&#x27;s okay. When EDDGridFromFiles reads one of those files, it will act as if the file had the variable, but with all missing values.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="ftp-troubleadvice">FTP Trouble/Advice<a href="#ftp-troubleadvice" class="hash-link" aria-label="Direct link to FTP Trouble/Advice" title="Direct link to FTP Trouble/Advice">​</a></h4>
<p>If you FTP new data files to the ERDDAP™ server while ERDDAP™ is running, there is the chance that ERDDAP™ will be reloading the dataset during the FTP process. It happens more often than you might think! If it happens, the file will appear to be valid (it has a valid name), but the file isn&#x27;t yet valid. If ERDDAP™ tries to read data from that invalid file, the resulting error will cause the file to be added to the table of invalid files. This is not good. To avoid this problem, use a temporary filename when FTP&#x27;ing the file, for example, ABC2005.nc_TEMP . Then, the fileNameRegex test (see below) will indicate that this is not a relevant file. After the FTP process is complete, rename the file to the correct name. The renaming process will cause the file to become relevant in an instant.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="0-files-error-message-1">&quot;0 files&quot; Error Message<a href="#0-files-error-message-1" class="hash-link" aria-label="Direct link to &quot;0 files&quot; Error Message" title="Direct link to &quot;0 files&quot; Error Message">​</a></h4>
<p>If you run <a href="#generatedatasetsxml">GenerateDatasetsXml</a> or <a href="#dasdds">DasDds</a>, or if you try to load an EDDGridFrom...Files dataset in ERDDAP™, and you get a &quot;0 files&quot; error message indicating that ERDDAP™ found 0 matching files in the directory (when you think that there are matching files in that directory):</p>
<ul>
<li>Check that the files really are in that directory.</li>
<li>Check the spelling of the directory name.</li>
<li>Check the fileNameRegex. It&#x27;s really, really easy to make mistakes with regexes. For test purposes, try the regex .* which should match all filenames. (See this <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" target="_blank" rel="noopener noreferrer">regex documentation</a> and <a href="https://www.vogella.com/tutorials/JavaRegularExpressions/article.html" target="_blank" rel="noopener noreferrer">regex tutorial</a>.)</li>
<li>Check that the user who is running the program (e.g., user=tomcat (?) for Tomcat/ERDDAP) has &#x27;read&#x27; permission for those files.</li>
<li>In some operating systems (for example, SELinux) and depending on system settings, the user who ran the program must have &#x27;read&#x27; permission for the whole chain of directories leading to the directory that has the files.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridfromfiles-skeleton-xml">EDDGridFromFiles skeleton XML<a href="#eddgridfromfiles-skeleton-xml" class="hash-link" aria-label="Direct link to EDDGridFromFiles skeleton XML" title="Direct link to EDDGridFromFiles skeleton XML">​</a></h4>
<ul>
<li><strong>The skeleton XML</strong> for all EDDGridFromFiles subclasses is:</li>
</ul>
<blockquote>
<p>  &lt;dataset type=&quot;EDDGridFrom...Files&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#accessibleviawms">&lt;accessibleViaWMS&gt;</a>...&lt;/accessibleViaWMS&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#updateeverynmillis">&lt;updateEveryNMillis&gt;</a>...&lt;/updateEveryNMillis&gt; &lt;!-- 0 or 1. For<br>
<!-- -->        EDDGridFromFiles subclasses, this uses Java&#x27;s WatchDirectory system<br>
<!-- -->        to notice new/deleted/changed files quickly and efficiently. --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#matchaxisndigits">&lt;matchAxisNDigits&gt;</a>...&lt;/matchAxisNDigits&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#nthreads">&lt;nThreads&gt;</a>...&lt;/nThreads&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#dimensionvaluesinmemory">&lt;dimensionValuesInMemory&gt;</a>...&lt;/dimensionValuesInMemory&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->      &lt;fileDir&gt;...&lt;/fileDir&gt; &lt;-- The directory (absolute) with the<br>
<!-- -->        data files. --&gt;<br>
<!-- -->      &lt;recursive&gt;true|false&lt;/recursive&gt; &lt;!-- 0 or 1. Indicates if<br>
<!-- -->        subdirectories of fileDir have data files, too. --&gt;<br>
<!-- -->      <a href="#pathregex">&lt;pathRegex&gt;</a>...&lt;/pathRegex&gt;  &lt;!-- 0 or 1. Only directory names which<br>
<!-- -->        match the pathRegex (default=&quot;.*&quot;) will be accepted. --&gt;<br>
<!-- -->      &lt;fileNameRegex&gt;...&lt;/fileNameRegex&gt; &lt;-- 0 or 1. A<br>
<!-- -->        <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" target="_blank" rel="noopener noreferrer">regular expression</a> (<a href="https://www.vogella.com/tutorials/JavaRegularExpressions/article.html" target="_blank" rel="noopener noreferrer">tutorial</a>) describing valid data<br>
<!-- -->        file names, for example, &quot;.*\.nc&quot; for all .nc files. --&gt;<br>
<!-- -->      <a href="#accessibleviafiles">&lt;accessibleViaFiles&gt;</a>true|false(default)&lt;/accessibleViaFiles&gt;<br>
<!-- -->        &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      &lt;metadataFrom&gt;...&lt;/metadataFrom&gt; &lt;-- The file to get<br>
<!-- -->        metadata from (&quot;first&quot; or &quot;last&quot; (the default) based on file&#x27;s<br>
<!-- -->        lastModifiedTime). --&gt;<br>
<!-- -->      <a href="#filetableinmemory">&lt;fileTableInMemory&gt;</a>...&lt;/fileTableInMemory&gt; &lt;!-- 0 or 1 (true or<br>
<!-- -->        false (the default)) --&gt;<br>
<!-- -->      <a href="#cachefromurl">&lt;cacheFromUrl&gt;</a>...&lt;/cacheFromUrl&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#cachefromurl">&lt;cacheSizeGB&gt;</a>...&lt;/cacheSizeGB&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#global-attributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#axisvariable">&lt;axisVariable&gt;</a>...&lt;/axisVariable&gt; &lt;!-- 1 or more --&gt;<br>
<!-- -->      <a href="#datavariable">&lt;dataVariable&gt;</a>...&lt;/dataVariable&gt; &lt;!-- 1 or more --&gt;<br>
<!-- -->  &lt;/dataset&gt;</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddfromaudiofiles">EDD*FromAudioFiles<a href="#eddfromaudiofiles" class="hash-link" aria-label="Direct link to EDD*FromAudioFiles" title="Direct link to EDD*FromAudioFiles">​</a></h3>
<p><strong>EDDGridFromAudioFiles</strong> and <strong>EDDTableFromAudioFiles</strong> aggregate data from a collection of local audio files. (These first appeared in ERDDAP™ v1.82.) The difference is that EDDGridFromAudioFiles treats the data as a multidimensional dataset (usually with 2 dimensions: [file startTime] and [elapsedTime within a file]), whereas EDDTableFromAudioFiles treats the data as tabular data (usually with columns for the file startTime, the elapsedTime with the file, and the data from the audio channels). EDDGridFromAudioFiles requires that all files have the same number of samples, so if that is not true, you must use EDDTableFromAudioFiles. Otherwise, the choice of which EDD type to use is entirely your choice. One advantage of EDDTableFromAudioFiles: you can add other variables with other information, e.g., stationID, stationType. In both cases, the lack of a unified time variable makes it more difficult to work with the data from these EDD types, but there was no good way to set up a unified time variable.</p>
<p>See these class&#x27; superclasses, <a href="#eddgridfromfiles">EDDGridFromFiles</a> and <a href="#eddtablefromfiles">EDDTableFromFiles</a>, for general information on how this class works and how to use it.</p>
<p>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. Since audio files have no metadata other than information related to the encoding of the sound data, you will have to edit the output from GenerateDatasetsXml to provide essential information (e.g., title, summary, creator_name, institution, history).</p>
<p>Details:</p>
<ul>
<li>
<p>There are a large number of audio file formats. Currently, ERDDAP™ can read data from most .wav and .au files. It currently can&#x27;t read other types of audio files, e.g., .aiff or .mp3. If you need support for other audio file formats or other variants of .wav and .au, please email your request to Chris.John at noaa.gov . Or, as a workaround you can use right now, you can convert your audio files into PCM_SIGNED (for integer data) or PCM_FLOAT (for floating point data) .wav files so that ERDDAP™ can work with them.</p>
</li>
<li>
<p>Currently, ERDDAP™ can read audio files with what Java&#x27;s AudioFormat class calls PCM_FLOAT, PCM_SIGNED, PCM_UNSIGNED, ALAW, and ULAW encodings. ERDDAP™ converts PCM_UNSIGNED values (e.g., 0 to 255) into signed values (e.g., -128 to 128) by rearranging the bits in the data values. ERDDAP™ converts ALAW and ULAW encoded from their native encoded byte format into short (int16) values. Since Java wants bigEndian=true data, ERDDAP™ rearranges the bytes of data stored with bigEndian=false (little endian) in order to read the values correctly. For all other encodings (PCM), ERDDAP™ reads the data as is.</p>
</li>
<li>
<p>When ERDDAP™ reads data from audio files, it converts the file&#x27;s available audio metadata into global attributes. This will always include (with sample values shown)</p>
<p>String audioBigEndian  &quot;false&quot;;     //true or false
int    audioChannels   1;<br>
<!-- -->String audioEncoding   &quot;PCM_SIGNED&quot;;
float  audioFrameRate  96000.0;     //per second
int    audioFrameSize  2;           //# of data bytes per frame
float  audioSampleRate 96000.0;     //per second
int    audioSampleSizeInBits 16;    //# of bits per channel per sample</p>
<p>For ERDDAP&#x27;s purposes, a frame is synonymous with a sample, which is the data for one point in time.<br>
<!-- -->The attributes in ERDDAP™ will have the information describing the data as it was in the source files. ERDDAP™ will often have changed this while reading the data, e.g., PCM_UNSIGNED, ALAW, and ULAW encoded data are converted to PCM_SIGNED, and bigEndian=false data is converted to bigEndian=true data (which is how Java wants to read it). In the end, data values in ERDDAP™ will always be the <a href="https://en.wikipedia.org/wiki/Pulse-code_modulation" target="_blank" rel="noopener noreferrer">PCM-encoded </a> data values (i.e., simple digitized samples of the sound wave).</p>
</li>
<li>
<p>When ERDDAP™ reads data from audio files, it reads the entire file. ERDDAP™ can read as many as about 2 billion samples per channel. For example, if the sample rate is 44,100 samples per second, 2 billion samples translates to about 756 minutes of sound data per file. If you have audio files with more than this amount of data, you need to break up the files into smaller chunks so that ERDDAP™ can read them.</p>
</li>
<li>
<p>Because ERDDAP™ reads entire audio files, ERDDAP™ must have access to a large amount of memory to work with large audio files. See <a href="/docs/server-admin/deploy-install#memory">ERDDAP&#x27;s memory settings</a>. Again, if this is a problem, a workaround that you can use right now is to break up the files into smaller chunks so that ERDDAP™ can read them with less memory.</p>
</li>
<li>
<p>Some audio files were written incorrectly. ERDDAP™ makes a small effort to deal with such cases. But in general, when there is an error, ERDDAP™ will throw an Exception (and reject that file) or (if the error is undetectable) read the data (but the data will be incorrect).</p>
</li>
<li>
<p>ERDDAP™ does not check or alter the volume of the sound. Ideally, integer audio data is scaled to use the entire range of the data type.</p>
</li>
<li>
<p>Audio files and audio players have no system for missing values (e.g., -999 or Float.NaN). So audio data shouldn&#x27;t have any missing values. If there are missing values (e.g., if you need to lengthen an audio file), use a series of 0&#x27;s which will be interpreted as perfect silence.</p>
</li>
<li>
<p>When ERDDAP™ reads data from audio files, it always creates a column called elapsedTime with the time for each sample, in seconds (stored as doubles), relative to the first sample (which is assigned elapsedTime=0.0 s). With EDDGridFromAudioFiles, this becomes the elapsedTime axis variable.</p>
</li>
<li>
<p>EDDGridFromAudioFiles requires that all files have the same number of samples. So if that is not true, you must use EDDTableFromAudioFiles.</p>
</li>
<li>
<p>For EDDGridFromAudioFiles, we recommend that you set <a href="#dimensionvaluesinmemory">&lt;dimensionValuesInMemory&gt;</a> to false (as is recommended by GenerateDatasetsXml), because the time dimension often has a huge number of values.</p>
</li>
<li>
<p>For EDDGridFromAudioFiles, you should almost always use the EDDGridFromFiles system for <a href="#aggregation-via-file-names-or-global-metadata">Aggregation via File Names</a>, almost always by extracting the recording&#x27;s start dateTime from the filenames. For example,</p>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;sourceName&gt;\*\*\*fileName,&quot;timeFormat=yyyyMMdd&#x27;\_&#x27;HHmmss&quot;,aco\_acoustic\\.(\[0-9\]{8}\_\[0-9\]{6})\\.wav,1&lt;/sourceName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>GenerateDatasetsXml will encourage this and help you with this.</p>
<ul>
<li>For EDDTableFromAudioFiles, you should almost always use the EDDTableFromFiles system for <a href="#filename-sourcenames">***fileName pseudo sourceNames</a> to extract information from the file&#x27;s name (almost always the start dateTime for the recording) and promote it to be a column of data. For example,</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;sourceName&gt;\*\*\*fileName,aco\_acoustic\\.(\[0-9\]{8}\_\[0-9\]{6})\\.wav,1&lt;/sourceName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The time format should then be specified as the units attribute: &lt;att name=&quot;units&quot;&gt;yyyMMdd&#x27;_&#x27;HHmmss&lt;/att&gt;<br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridfrommergeirfiles">EDDGridFromMergeIRFiles<a href="#eddgridfrommergeirfiles" class="hash-link" aria-label="Direct link to EDDGridFromMergeIRFiles" title="Direct link to EDDGridFromMergeIRFiles">​</a></h3>
<p><a href="#eddgridfrommergeirfiles"><strong>EDDGridFromMergeIRFiles</strong></a> aggregates data from local, <a href="https://www.cpc.ncep.noaa.gov/products/global_precip/html/README" target="_blank" rel="noopener noreferrer">MergeIR</a> files, which are from the <a href="https://trmm.gsfc.nasa.gov" target="_blank" rel="noopener noreferrer">Tropical Rainfall Measuring Mission (TRMM)</a>, which is a joint mission between NASA and the Japan Aerospace Exploration Agency (JAXA). MergeIR files can be downloaded from <a href="ftp://disc2.nascom.nasa.gov/data/s4pa/TRMM_ANCILLARY/MERG/" target="_blank" rel="noopener noreferrer">NASA</a>.</p>
<p>EDDGridFromMergeIRFiles.java was written and contributed to the ERDDAP™ project by Jonathan Lafite and Philippe Makowski of R.Tech Engineering (license: copyrighted open source).</p>
<p>EDDGridFromMergeIRFiles is a little unusual:</p>
<ul>
<li>EDDGridFromMergeIRFiles supports compressed or uncompressed source data files, in any combination, in the same dataset. This allows you, for example, to compress older files that are rarely accessed, but uncompress new files that are often accessed. Or, you can change the type of compression from the original .Z to for example, .gz.</li>
<li>If you have compressed and uncompressed versions of the same data files in the same directory, please make sure the &lt;fileNameRegex&gt; for your dataset matches the filenames that you want it to match and doesn&#x27;t match filenames that you don&#x27;t want it to match.</li>
<li>Uncompressed source data files must have no file extension (i.e., no &quot;.&quot; in the filename).</li>
<li>Compressed source data files must have a file extension, but ERDDAP™ determines the type of compression by inspecting the contents of the file, not by looking at the file&#x27;s file extension (for example, &quot;.Z&quot;). The supported compression types include &quot;gz&quot;, &quot;bzip2&quot;, &quot;xz&quot;, &quot;lzma&quot;, &quot;snappy-raw&quot;, &quot;snappy-framed&quot;, &quot;pack200&quot;, and &quot;z&quot;. When ERDDAP™ reads compressed files, it decompresses on-the-fly, without writing to a temporary file.</li>
<li>All source data files must use the original file naming system: i.e., merg_<em>YYYYMMDDHH</em>_4km-pixel (where <em>YYYYMMDDHH</em> indicates the time associated with the data in the file), plus a file extension if the file is compressed.</li>
</ul>
<p>See this class&#x27; superclass, <a href="#eddgridfromfiles">EDDGridFromFiles</a>, for general information on how this class works and how to use it.</p>
<p>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. You can then edit that to fine tune it.<br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridfromncfiles">EDDGridFromNcFiles<a href="#eddgridfromncfiles" class="hash-link" aria-label="Direct link to EDDGridFromNcFiles" title="Direct link to EDDGridFromNcFiles">​</a></h3>
<p><a href="#eddgridfromncfiles"><strong>EDDGridFromNcFiles</strong></a> aggregates data from local, gridded, <a href="https://en.wikipedia.org/wiki/GRIB" target="_blank" rel="noopener noreferrer">GRIB .grb and .grb2</a> files, <a href="https://www.hdfgroup.org/" target="_blank" rel="noopener noreferrer">HDF (v4 or v5) .hdf</a> files, <a href="#ncml-files">.ncml</a> files, <a href="https://www.unidata.ucar.edu/software/netcdf/" target="_blank" rel="noopener noreferrer">NetCDF (v3 or v4) .nc</a> files, and <a href="https://github.com/zarr-developers/zarr-python" target="_blank" rel="noopener noreferrer">Zarr</a> files (as of version 2.25). Zarr files have slightly different behavior and require either the fileNameRegex or the pathRegex to include &quot;zarr&quot;.</p>
<p>This may work with other file types (for example, BUFR), we just haven&#x27;t tested it -- please send us some sample files.</p>
<ul>
<li>For GRIB files, ERDDAP™ will make a .gbx index file the first time it reads each GRIB file. So the GRIB files must be in a directory where the &quot;user&quot; that ran Tomcat has read+write permission.</li>
<li>See this class&#x27; superclass, <a href="#eddgridfromfiles">EDDGridFromFiles</a>, for information on how this class works and how to use it.</li>
<li>Starting with ERDDAP™ v2.12, EDDGridFromNcFiles and EDDGridFromNcFilesUnpacked can read data from &quot;structures&quot; in .nc4 and .hdf4 files. To identify a variable that is from a structure, the &lt;sourceName&gt; must use the format: <em>fullStructureName</em>|<em>memberName</em>, for example group1/myStruct|myMember .</li>
<li>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. You can then edit that to fine tune it.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="groups-in-gridded-nc-files">Groups in Gridded Nc Files<a href="#groups-in-gridded-nc-files" class="hash-link" aria-label="Direct link to Groups in Gridded Nc Files" title="Direct link to Groups in Gridded Nc Files">​</a></h4>
<p><a href="#groups-in-gridded-nc-files">Netcdf4 files can contain groups.</a> ERDDAP™ just makes a dataset from the variables in one group and all of its parent groups. You can specify a specific group name in GenerateDatasetsXml (omit the trailing slash), or use &quot;&quot; to have GenerateDatasetsXml search all groups for the variables that use the most dimensions, or use &quot;[root]&quot; to have GenerateDatasets just look for variables in the root group.</p>
<p>The first thing GenerateDatasetsXml does for this type of dataset after you answer the questions is print the ncdump-like structure of the sample file. So if you enter a few goofy answers for the first loop through GenerateDatasetsXml, at least you&#x27;ll be able to see if ERDDAP™ can read the file and see what dimensions and variables are in the file. Then you can give better answers for the second loop through GenerateDatasetsXml.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridfromncfilesunpacked">EDDGridFromNcFilesUnpacked<a href="#eddgridfromncfilesunpacked" class="hash-link" aria-label="Direct link to EDDGridFromNcFilesUnpacked" title="Direct link to EDDGridFromNcFilesUnpacked">​</a></h3>
<p><a href="#eddgridfromncfilesunpacked"><strong>EDDGridFromNcFilesUnpacked</strong></a> is a variant of <a href="#eddgridfromncfiles">EDDGridFromNcFiles</a> which aggregates data from local, gridded NetCDF (v3 or v4) .nc and related files. The difference is that this class unpacks each data file before EDDGridFromFiles looks at the files:</p>
<ul>
<li>It unpacks variables that are packed with <a href="#scale_factor">scale_factor and/or add_offset</a>.</li>
<li>It converts _FillValue and missing_value values to be NaN&#x27;s (or MAX_VALUE for integer data types).</li>
<li>It converts time and timestamp values to &quot;seconds since 1970-01-01T00:00:00Z&quot;.</li>
</ul>
<p>The big advantage of this class is that it provides a way to deal with different values of scale_factor, add_offset, _FillValue, missing_value, or time units in different source files in a collection. Otherwise, you would have to use a tool like <a href="#ncml-files">NcML</a> or <a href="#netcdf-operators-nco">NCO</a> to modify each file to remove the differences so that the files could be handled by EDDGridFromNcFiles. For this class to work properly, the files must follow the CF standards for the related attributes.</p>
<ul>
<li>
<p>If try to make an EDDGridFromNcFilesUnpacked from a group of files with which you previously tried and failed to use EDDGridFromNcFiles, cd to<br>
<em>bigParentDirectory</em>/dataset/<em>last2Letters</em>/<em>datasetID</em>/<br>
<!-- -->where <em>last2Letters</em> is the last 2 letters of the datasetID,<br>
<!-- -->and delete all of the files in that directory.</p>
</li>
<li>
<p>Starting with ERDDAP™ v2.12, EDDGridFromNcFiles and EDDGridFromNcFilesUnpacked can read data from &quot;structures&quot; in .nc4 and .hdf4 files. To identify a variable that is from a structure, the &lt;sourceName&gt; must use the format: <em>fullStructureName</em>|<em>memberName</em>, for example group1/myStruct|myMember .</p>
</li>
<li>
<p>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. You can then edit that to fine tune it.</p>
<p>Netcdf4 files can contain groups. See <a href="#groups-in-gridded-nc-files">this documentation</a>.</p>
<p>The first thing GenerateDatasetsXml does for this type of dataset after you answer the questions is print the ncdump-like structure of the sample file <strong>before</strong> it is unpacked. So if you enter a few goofy answers for the first loop through GenerateDatasetsXml, at least you&#x27;ll be able to see if ERDDAP™ can read the file and see what dimensions and variables are in the file. Then you can give better answers for the second loop through GenerateDatasetsXml.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridlonpm180">EDDGridLonPM180<a href="#eddgridlonpm180" class="hash-link" aria-label="Direct link to EDDGridLonPM180" title="Direct link to EDDGridLonPM180">​</a></h3>
<p><a href="#eddgridlonpm180"><strong>EDDGridLonPM180</strong></a> modifies the longitude values of a child (enclosed) EDDGrid dataset that has some longitude values greater than 180 (for example, 0 to 360) so that they are in the range -180 to 180 (Longitude Plus or Minus 180, hence the name).</p>
<ul>
<li>
<p>This provides a way to make datasets that have longitude values greater than 180 compliant in/with OGC services (for example the WMS server in ERDDAP), since all OGC services require longitude values within -180 to 180.</p>
</li>
<li>
<p>Working near a discontinuity causes problems, regardless of whether the discontinuity is at longitude 0 or at longitude 180. This dataset type lets you avoid those problems for everyone, by offering two versions of the same dataset:<br>
<!-- -->one with longitude values in the range 0 to 360 (&quot;Pacificentric&quot;?),<br>
<!-- -->one with longitude values in the range -180 to 180 (&quot;Atlanticentric&quot;?).</p>
</li>
<li>
<p>For child datasets with all longitude values greater than 180, all of the new longitude values are simply 360 degrees lower. For example, a dataset with longitude values of 180 to 240 would become a dataset with longitude values of -180 to -120.</p>
</li>
<li>
<p>For child datasets that have longitude values for the entire globe (roughly 0 to 360), the new longitude value will be rearranged to be (roughly) -180 to 180:<br>
<!-- -->The original 0 to almost 180 values are unchanged.<br>
<!-- -->The original 180 to 360 values are converted to -180 to 0 and shifted to the beginning of the longitude array.</p>
</li>
<li>
<p>For child datasets that span 180 but don&#x27;t cover the globe, ERDDAP™ inserts missing values as needed to make a dataset which covers the globe. For example, a child dataset with longitude values of 140 to 200 would become a dataset with longitude values of -180 to 180.<br>
<!-- -->The child values of 180 to 200 would become -180 to -160.<br>
<!-- -->New longitude values would be inserted from -160 to 140. The corresponding data values will be _FillValues.<br>
<!-- -->The child values of 140 to almost 180 would be unchanged.<br>
<!-- -->The insertion of missing values may seem odd, but it avoids several problems that result from having longitude values that jump suddenly (e.g, from -160 to 140).</p>
</li>
<li>
<p>In <a href="#generatedatasetsxml">GenerateDatasetsXml</a>, there is a special &quot;dataset type&quot;, EDDGridLonPM180FromErddapCatalog, that lets you generate the datasets.xml for EDDGridLonPM180 datasets from each of the EDDGrid datasets in an ERDDAP that have any longitude values greater than 180. This facilitates offering two versions of these datasets:<br>
<!-- -->the original, with longitude values in the range 0 to 360,<br>
<!-- -->and the new dataset, with longitude values in the range -180 to 180.</p>
<p>The child dataset within each EDDGridLonPM180 dataset will be an EDDGridFromErddap dataset which points to the original dataset.<br>
<!-- -->The new dataset&#x27;s datasetID will be the name of the original dataset plus &quot;_LonPM180&quot;.<br>
<!-- -->For example,</p>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;dataset type=&quot;EDDGridLonPM180&quot; datasetID=&quot;erdMBsstdmday\_LonPM180&quot; active=&quot;true&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;dataset type=&quot;EDDGridFromErddap&quot; datasetID=&quot;erdMBsstdmday\_LonPM180Child&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;!-- SST, Aqua MODIS, NPP, 0.025 degrees, Pacific Ocean, Daytime </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          (Monthly Composite) minLon=120.0 maxLon=320.0 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceUrl&gt;https://coastwatch.pfeg.noaa.gov/erddap/griddap/erdMBsstdmday</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/sourceUrl&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/dataset&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/dataset&gt; </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Put the EDDGridLonPM180 dataset <strong>below</strong> the original dataset in datasets.xml. That avoids some possible problems.</p>
<p>Alternatively, you can replace the EDDGridFromErddap child dataset with the original dataset&#x27;s datasets.xml. Then, there will be only one version of the dataset: the one with longitude values within -180 to 180. We discourage this because there are times when each version of the dataset is more convenient.</p>
<ul>
<li>If you offer two versions of a dataset, for example, one with longitude 0 to 360 and one with longitude -180 to 180:<!-- -->
<ul>
<li>You can use the optional <a href="#accessibleviawms">&lt;accessibleViaWMS&gt;false&lt;/accessibleViaWMS&gt;</a> with the 0-360 dataset to forcibly disable the WMS service for that dataset. Then, only the LonPM180 version of the dataset will be accessible via WMS.</li>
<li>There are a couple of ways to keep the LonPM180 dataset up-to-date with changes to the underlying dataset:<!-- -->
<ul>
<li>If the child dataset is a EDDGridFromErddap dataset that references a dataset in the same ERDDAP™, the LonPM180 dataset will try to directly subscribe to the underlying dataset so that it is always up-to-date. Direct subscriptions don&#x27;t generate emails asking you to validate the subscription - validation should be done automatically.</li>
<li>If the child dataset is not an EDDGridFromErddap dataset that is on the same ERDDAP™, the LonPM180 dataset will try to use the regular subscription system to subscribe to the underlying dataset. If you have the subscription system in your ERDDAP™ turned on, you should get emails asking you to validate the subscription. Please do so.</li>
<li>If you have the subscription system in your ERDDAP™ turned off, the LonPM180 dataset may sometimes have outdated metadata until the LonPM180 dataset is reloaded. So if the subscription system is turned off, you should set the <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a> setting of the LonPM180 dataset to a smaller number, so that it is more likely to catch changes to the child dataset sooner.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridlonpm180-skeleton-xml">EDDGridLonPM180 skeleton XML<a href="#eddgridlonpm180-skeleton-xml" class="hash-link" aria-label="Direct link to EDDGridLonPM180 skeleton XML" title="Direct link to EDDGridLonPM180 skeleton XML">​</a></h4>
<blockquote>
<p>  &lt;dataset type=&quot;EDDGridLonPM180&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#updateeverynmillis">&lt;updateEveryNMillis&gt;</a>...&lt;/updateEveryNMillis&gt; &lt;!-- 0 or 1. For<br>
<!-- -->        EDDGridFromDap, this gets the remote .dds and then gets the new<br>
<!-- -->        leftmost (first) dimension values. --&gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#accessibleviawms">&lt;accessibleViaWMS&gt;</a>...&lt;/accessibleViaWMS&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#nthreads">&lt;nThreads&gt;</a>...&lt;/nThreads&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#dimensionvaluesinmemory">&lt;dimensionValuesInMemory&gt;</a>...&lt;/dimensionValuesInMemory&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->      &lt;dataset&gt;...&lt;/dataset&gt; &lt;!-- The child EDDGrid dataset. --&gt;<br>
<!-- -->  &lt;/dataset&gt;</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridlon0360">EDDGridLon0360<a href="#eddgridlon0360" class="hash-link" aria-label="Direct link to EDDGridLon0360" title="Direct link to EDDGridLon0360">​</a></h3>
<p><a href="#eddgridlon0360"><strong>EDDGridLon0360</strong></a> modifies the longitude values of a child (enclosed) EDDGrid dataset that has some longitude values less than 0 (for example, -180 to 180) so that they are in the range 0 to 360 (hence the name).</p>
<ul>
<li>
<p>Working near a discontinuity causes problems, regardless of whether the discontinuity is at longitude 0 or at longitude 180. This dataset type lets you avoid those problems for everyone, by offering two versions of the same dataset:<br>
<!-- -->one with longitude values in the range -180 to 180 (&quot;Atlanticentric&quot;?).<br>
<!-- -->one with longitude values in the range 0 to 360 (&quot;Pacificentric&quot;?),</p>
</li>
<li>
<p>For child datasets with all longitude values less than 0, all of the new longitude values are simply 360 degrees higher. For example, a dataset with longitude values of -180 to -120 would become a dataset with longitude values of 180 to 240.</p>
</li>
<li>
<p>For child datasets that have longitude values for the entire globe (roughly -180 to 180), the new longitude value will be rearranged to be (roughly) 0 to 360:<br>
<!-- -->The original -180 to 0 values are converted to 180 to 360 and shifted to the end of the longitude array.<br>
<!-- -->The original 0 to almost 180 values are unchanged.</p>
</li>
<li>
<p>For child datasets that span lon=0 but don&#x27;t cover the globe, ERDDAP™ inserts missing values as needed to make a dataset which covers the globe. For example, a child dataset with longitude values of -40 to 20 would become a dataset with longitude values of 0 to 360.<br>
<!-- -->The child values of 0 to 20 would be unchanged.<br>
<!-- -->New longitude values would be inserted from 20 to 320. The corresponding data values will be _FillValues.<br>
<!-- -->The child values of -40 to 0 would become 320 to 360.<br>
<!-- -->The insertion of missing values may seem odd, but it avoids several problems that result from having longitude values that jump suddenly (e.g, from 20 to 320).</p>
</li>
<li>
<p>In <a href="#generatedatasetsxml">GenerateDatasetsXml</a>, there is a special &quot;dataset type&quot;, EDDGridLon0360FromErddapCatalog, that lets you generate the datasets.xml for EDDGridLon0360 datasets from each of the EDDGrid datasets in an ERDDAP that have any longitude values greater than 180. This facilitates offering two versions of these datasets:<br>
<!-- -->the original, with longitude values in the range 0 to 360,<br>
<!-- -->and the new dataset, with longitude values in the range -180 to 180.</p>
<p>The child dataset within each EDDGridLon0360 dataset will be an EDDGridFromErddap dataset which points to the original dataset.<br>
<!-- -->The new dataset&#x27;s datasetID will be the name of the original dataset plus &quot;_Lon0360&quot;.<br>
<!-- -->For example,</p>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;dataset type=&quot;EDDGridLon0360&quot; datasetID=&quot;erdMBsstdmday\_Lon0360&quot; active=&quot;true&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;dataset type=&quot;EDDGridFromErddap&quot; datasetID=&quot;erdMBsstdmday\_Lon0360Child&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;!-- SST, Aqua MODIS, NPP, 0.025 degrees, Pacific Ocean, Daytime </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          (Monthly Composite) minLon=-40.0 maxLon=20.0 --&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceUrl&gt;https://coastwatch.pfeg.noaa.gov/erddap/griddap/erdMBsstdmday</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/sourceUrl&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/dataset&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/dataset&gt; </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Put the EDDGridLon0360 dataset <strong>below</strong> the original dataset in datasets.xml. That avoids some possible problems.</p>
<p>Alternatively, you can replace the EDDGridFromErddap child dataset with the original dataset&#x27;s datasets.xml. Then, there will be only one version of the dataset: the one with longitude values within 0 to 360. We discourage this because there are times when each version of the dataset is more convenient.</p>
<ul>
<li>If you offer two versions of a dataset, for example, one with longitude 0 to 360 and one with longitude -180 to 180:<!-- -->
<ul>
<li>You can use the optional <a href="#accessibleviawms">&lt;accessibleViaWMS&gt;false&lt;/accessibleViaWMS&gt;</a> with the 0 to 360 dataset to forcibly disable the WMS service for that dataset. Then, only the -180 to 180 version of the dataset will be accessible via WMS.</li>
<li>There are a couple of ways to keep the Lon0360 dataset up-to-date with changes to the underlying dataset:<!-- -->
<ul>
<li>If the child dataset is a EDDGridFromErddap dataset that references a dataset in the same ERDDAP™, the Lon0360 dataset will try to directly subscribe to the underlying dataset so that it is always up-to-date. Direct subscriptions don&#x27;t generate emails asking you to validate the subscription - validation should be done automatically.</li>
<li>If the child dataset is not an EDDGridFromErddap dataset that is on the same ERDDAP™, the Lon0360 dataset will try to use the regular subscription system to subscribe to the underlying dataset. If you have the subscription system in your ERDDAP™ turned on, you should get emails asking you to validate the subscription. Please do so.</li>
<li>If you have the subscription system in your ERDDAP™ turned off, the Lon0360 dataset may sometimes have outdated metadata until the Lon0360 dataset is reloaded. So if the subscription system is turned off, you should set the <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a> setting of the Lon0360 dataset to a smaller number, so that it is more likely to catch changes to the child dataset sooner.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridlon0360-skeleton-xml">EDDGridLon0360 skeleton XML<a href="#eddgridlon0360-skeleton-xml" class="hash-link" aria-label="Direct link to EDDGridLon0360 skeleton XML" title="Direct link to EDDGridLon0360 skeleton XML">​</a></h4>
<blockquote>
<p>  &lt;dataset type=&quot;EDDGridLon0360&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#updateeverynmillis">&lt;updateEveryNMillis&gt;</a>...&lt;/updateEveryNMillis&gt; &lt;!-- 0 or 1. For<br>
<!-- -->        EDDGridFromDap, this gets the remote .dds and then gets the new<br>
<!-- -->        leftmost (first) dimension values. --&gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#accessibleviawms">&lt;accessibleViaWMS&gt;</a>...&lt;/accessibleViaWMS&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#nthreads">&lt;nThreads&gt;</a>...&lt;/nThreads&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#dimensionvaluesinmemory">&lt;dimensionValuesInMemory&gt;</a>...&lt;/dimensionValuesInMemory&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->      &lt;dataset&gt;...&lt;/dataset&gt; &lt;!-- The child EDDGrid dataset. --&gt;<br>
<!-- -->  &lt;/dataset&gt;</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridsidebyside">EDDGridSideBySide<a href="#eddgridsidebyside" class="hash-link" aria-label="Direct link to EDDGridSideBySide" title="Direct link to EDDGridSideBySide">​</a></h3>
<p><a href="#eddgridsidebyside"><strong>EDDGridSideBySide</strong></a> aggregates two or more EDDGrid datasets (the children) side by side.</p>
<ul>
<li>The resulting dataset has all of the variables from all of the child datasets.</li>
<li>The parent dataset and all of the child datasets MUST have different datasetIDs. If any names in a family are exactly the same, the dataset will fail to load (with the error message that the values of the aggregated axis are not in sorted order).</li>
<li>All children MUST have the same source values for axisVariables[1+] (for example, latitude, longitude). The precision of the testing is determined by <a href="#matchaxisndigits">matchAxisNDigits</a>.</li>
<li>The children may have different source values for axisVariables[0] (for example, time), but they are usually largely the same.</li>
<li>The parent dataset will appear to have all of the axisVariables[0] source values from all of the children.</li>
<li>For example, this lets you combine a source dataset with a vector&#x27;s u-component and another source dataset with a vector&#x27;s v-component, so the combined data can be served.</li>
<li>Children created by this method are held privately. They are not separately accessible datasets (for example, by client data requests or by <a href="/docs/server-admin/additional-information#flag">flag files</a>).</li>
<li>The global metadata and settings for the parent comes from the global metadata and settings for the first child.</li>
<li>If there is an exception while creating the first child, the parent will not be created.</li>
<li>If there is an exception while creating other children, this sends an email to emailEverythingTo (as specified in <a href="/docs/server-admin/deploy-install#setupxml">setup.xml</a>) and continues with the other children.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridsidebyside-skeleton-xml">EDDGridSideBySide skeleton XML<a href="#eddgridsidebyside-skeleton-xml" class="hash-link" aria-label="Direct link to EDDGridSideBySide skeleton XML" title="Direct link to EDDGridSideBySide skeleton XML">​</a></h4>
<blockquote>
<p>  &lt;dataset type=&quot;EDDGridSideBySide&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#accessibleviawms">&lt;accessibleViaWMS&gt;</a>...&lt;/accessibleViaWMS&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#matchaxisndigits">&lt;matchAxisNDigits&gt;</a>...&lt;/matchAxisNDigits&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#nthreads">&lt;nThreads&gt;</a>...&lt;/nThreads&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#dimensionvaluesinmemory">&lt;dimensionValuesInMemory&gt;</a>...&lt;/dimensionValuesInMemory&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->      &lt;dataset&gt;...&lt;/dataset&gt; &lt;!-- 2 or more --&gt;<br>
<!-- -->  &lt;/dataset&gt;</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridaggregateexistingdimension">EDDGridAggregateExistingDimension<a href="#eddgridaggregateexistingdimension" class="hash-link" aria-label="Direct link to EDDGridAggregateExistingDimension" title="Direct link to EDDGridAggregateExistingDimension">​</a></h3>
<p><a href="#eddgridaggregateexistingdimension"><strong>EDDGridAggregateExistingDimension</strong></a> aggregates two or more EDDGrid datasets each of which has a different range of values for the first dimension, but identical values for the other dimensions.</p>
<ul>
<li>
<p>For example, one child dataset might have 366 values (for 2004) for the time dimension and another child might have 365 values (for 2005) for the time dimension.</p>
</li>
<li>
<p>All the values for all of the other dimensions (for example, latitude, longitude) MUST be identical for all of the children. The precision of the testing is determined by <a href="#matchaxisndigits">matchAxisNDigits</a>.</p>
</li>
<li>
<p>Sorted Dimension Values - The values for each dimension MUST be in sorted order (ascending or descending). The values can be irregularly spaced. There can be no ties. This is a requirement of the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF metadata standard</a>. If any dimension&#x27;s values aren&#x27;t in sorted order, the dataset won&#x27;t be loaded and ERDDAP™ will identify the first unsorted value in the log file, <em>bigParentDirectory</em>/logs/log.txt .</p>
<p>Unsorted dimension values almost always indicate a problem with the source dataset. This most commonly occurs when a misnamed or inappropriate file is included in the aggregation, which leads to an unsorted time dimension. To solve this problem, see the error message in the ERDDAP™ log.txt file to find the offending time value. Then look in the source files to find the corresponding file (or one before or one after) that doesn&#x27;t belong in the aggregation.</p>
</li>
<li>
<p>The parent dataset and the child dataset MUST have different datasetIDs. If any names in a family are exactly the same, the dataset will fail to load (with the error message that the values of the aggregated axis are not in sorted order).</p>
</li>
<li>
<p>Currently, the child dataset MUST be an EDDGridFromDap dataset and MUST have the lowest values of the aggregated dimension (usually the oldest time values). All of the other children MUST be almost identical datasets (differing just in the values for the first dimension) and are specified by just their sourceUrl.</p>
</li>
<li>
<p>The aggregate dataset gets its metadata from the first child.</p>
</li>
<li>
<p>The <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> can make a rough draft of the datasets.xml for an EDDGridAggregateExistingDimension based on a set of files served by a Hyrax or THREDDS server. For example, use this input for the program (the &quot;/1988&quot; in the URL makes the example run faster):</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  EDDType? EDDGridAggregateExistingDimension  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Server type (hyrax, thredds, or dodsindex)? hyrax  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Parent URL (for example, for hyrax, ending in &quot;contents.html&quot;;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for thredds, ending in &quot;catalog.xml&quot;)  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ? https://opendap.jpl.nasa.gov/opendap/ocean\_wind/ccmp/L3.5a/data/  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    flk/1988/contents.html  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File name regex (for example, &quot;.\*\\.nc&quot;)? month.\*flk\\.nc\\.gz  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ReloadEveryNMinutes (for example, 10080)? 10080  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can use the resulting &lt;sourceUrl&gt; tags or delete them and uncomment the &lt;sourceUrl&gt; tag (so that new files are noticed each time the dataset is reloaded.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridaggregateexistingdimension-skeleton-xml">EDDGridAggregateExistingDimension skeleton XML<a href="#eddgridaggregateexistingdimension-skeleton-xml" class="hash-link" aria-label="Direct link to EDDGridAggregateExistingDimension skeleton XML" title="Direct link to EDDGridAggregateExistingDimension skeleton XML">​</a></h4>
<blockquote>
<p>  &lt;dataset type=&quot;EDDGridAggregateExistingDimension&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot;<br>
<!-- -->        <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      &lt;dataset&gt;...&lt;/dataset&gt; &lt;!-- This is a regular <a href="#eddgridfromdap">EDDGridFromDap</a> dataset<br>
<!-- -->        description child with the lowest values for the aggregated<br>
<!-- -->        dimensions. --&gt;<br>
<!-- -->      <a href="#sourceurl">&lt;sourceUrl&gt;</a>...&lt;/sourceUrl&gt; &lt;!-- 0 or many; the sourceUrls for<br>
<!-- -->        other children.  These children must be listed in order of<br>
<!-- -->        ascending values for the aggregated dimension. --&gt;<br>
<!-- -->      &lt;sourceUrls serverType=&quot;...&quot; regex=&quot;...&quot; recursive=&quot;true&quot;<br>
<!-- -->        <a href="#pathregex">pathRegex</a>=&quot;.*&quot;<br>
<!-- -->        &gt;https://<em>someServer/someDirectory/someSubdirectory</em>/catalog.xml&lt;/sourceUrls&gt;<br>
<!-- -->        &lt;!-- 0 or 1. This specifies how to find the other children,<br>
<!-- -->        instead of using separate sourceUrl tags for each child.  The<br>
<!-- -->        advantage of this is: new children will be detected each time<br>
<!-- -->        the dataset is reloaded. The serverType must be &quot;thredds&quot;,<br>
<!-- -->        &quot;hyrax&quot;, or &quot;dodsindex&quot;.
        An example of a <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" target="_blank" rel="noopener noreferrer">regular expression</a> (regex)  (<a href="https://www.vogella.com/tutorials/JavaRegularExpressions/article.html" target="_blank" rel="noopener noreferrer">tutorial</a>) is .*\.nc<br>
<!-- -->        recursive can be &quot;true&quot; or &quot;false&quot;.<br>
<!-- -->        Only directory names which match the<br>
<!-- -->        <a href="#pathregex">&lt;pathRegex&gt;</a><br>
<!-- -->        (default=&quot;.*&quot;) will be accepted.<br>
<!-- -->        A thredds catalogUrl MUST include &quot;/thredds/catalog/&quot;.<br>
<!-- -->        An example of a thredds catalogUrl is<br>
<!-- -->        <a href="https://thredds1.pfeg.noaa.gov/thredds/catalog/Satellite/aggregsatMH/chla/catalog.xml" target="_blank" rel="noopener noreferrer">https://thredds1.pfeg.noaa.gov/thredds/catalog/Satellite/aggregsatMH/<br>
<!-- -->          chla/catalog.xml</a><br>
<!-- -->        An example of a hyrax catalogUrl is<br>
<!-- -->        <a href="https://opendap.jpl.nasa.gov/opendap/allData/ccmp/L3.5a/monthly/flk/1988/contents.html" target="_blank" rel="noopener noreferrer">https://opendap.jpl.nasa.gov/opendap/allData/ccmp/L3.5a/monthly/<br>
<!-- -->        flk/1988/contents.html</a><br>
<!-- -->        An example of a dodsindex URL is<br>
<!-- -->        <a href="https://opendap.jpl.nasa.gov/opendap/GeodeticsGravity/tellus/L3/mascon/RL06/JPL/v02/CRI/netcdf/contents.html" target="_blank" rel="noopener noreferrer">https://opendap.jpl.nasa.gov/opendap/GeodeticsGravity/tellus/L3/mascon/RL06/JPL/v02/CRI/netcdf/contents.html</a><br>
<!-- -->        (Note the &quot;OPeNDAP logo at the top of the page.)<br>
<!-- -->        When these children are sorted by filename, they must be in<br>
<!-- -->        order of ascending values for the aggregated dimension. --&gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#accessibleviawms">&lt;accessibleViaWMS&gt;</a>...&lt;/accessibleViaWMS&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#matchaxisndigits">&lt;matchAxisNDigits&gt;</a>...&lt;/matchAxisNDigits&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#nthreads">&lt;nThreads&gt;</a>...&lt;/nThreads&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#dimensionvaluesinmemory">&lt;dimensionValuesInMemory&gt;</a>...&lt;/dimensionValuesInMemory&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->  &lt;/dataset&gt;</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridcopy">EDDGridCopy<a href="#eddgridcopy" class="hash-link" aria-label="Direct link to EDDGridCopy" title="Direct link to EDDGridCopy">​</a></h3>
<p><a href="#eddgridcopy"><strong>EDDGridCopy</strong></a> makes and maintains a local copy of another EDDGrid&#x27;s data and serves data from the local copy.</p>
<ul>
<li>
<p>EDDGridCopy (and for tabular data, <a href="#eddtablecopy">EDDTableCopy</a>) is a very easy to use and a very effective<br>
<strong>solution to some of the biggest problems with serving data from a remote data source:</strong></p>
<ul>
<li>Accessing data from a remote data source can be slow.<!-- -->
<ul>
<li>It may be slow because it is inherently slow (for example, an inefficient type of server),</li>
<li>because it is overwhelmed by too many requests,</li>
<li>or because your server or the remote server is bandwidth limited.</li>
</ul>
</li>
<li>The remote dataset is sometimes unavailable (again, for a variety of reasons).</li>
<li>Relying on one source for the data doesn&#x27;t scale well (for example, when many users and many ERDDAPs utilize it).<br>
<!-- --> </li>
</ul>
</li>
<li>
<p>How It Works -- EDDGridCopy solves these problems by automatically making and maintaining a local copy of the data and serving data from the local copy. ERDDAP™ can serve data from the local copy very, very quickly. And making a local copy relieves the burden on the remote server. And the local copy is a backup of the original, which is useful in case something happens to the original.</p>
<p>There is nothing new about making a local copy of a dataset. What is new here is that this class makes it *easy* to create and *maintain* a local copy of data from a *variety* of types of remote data sources and *add metadata* while copying the data.</p>
</li>
<li>
<p>Chunks of Data -- EDDGridCopy makes the local copy of the data by requesting chunks of data from the remote &lt;dataset&gt; . There will be a chunk for each value of the leftmost (first) axis variable. EDDGridCopy doesn&#x27;t rely on the remote dataset&#x27;s index numbers for the axis -- those may change.</p>
<p>WARNING: If the size of a chunk of data is so big (&gt; 2GB) that it causes problems, EDDGridCopy can&#x27;t be used. (Sorry, we hope to have a solution for this problem in the future.)</p>
</li>
<li>
<p>[An alternative to EDDGridCopy -<br>
<!-- -->If the remote data is available via downloadable files, not a web service, use <a href="#cachefromurl">cacheFromUrl option for EDDGridFromFiles</a>, which makes a local copy of the remote files and serves the data from the local files.]</p>
</li>
<li>
<p>Local Files -- Each chunk of data is stored in a separate NetCDF file in a subdirectory of <em>bigParentDirectory</em>/copy/<em>datasetID</em>/ (as specified in <a href="/docs/server-admin/deploy-install#setupxml">setup.xml</a>). Filenames created from axis values are modified to make them file-name-safe (for example, hyphens are replaced by &quot;x2D&quot;) -- this doesn&#x27;t affect the actual data.<br>
<!-- --> </p>
</li>
<li>
<p>New Data -- Each time EDDGridCopy is reloaded, it checks the remote &lt;dataset&gt; to see what chunks are available. If the file for a chunk of data doesn&#x27;t already exist, a request to get the chunk is added to a queue. ERDDAP&#x27;s taskThread processes all the queued requests for chunks of data, one-by-one. You can see statistics for the taskThread&#x27;s activity on the <a href="/docs/server-admin/additional-information#status-page">Status Page</a> and in the <a href="/docs/server-admin/additional-information#daily-report">Daily Report</a>. (Yes, ERDDAP™ could assign multiple tasks to this process, but that would use up lots of the remote data source&#x27;s bandwidth, memory, and CPU time, and lots of the local ERDDAP&#x27;s bandwidth, memory, and CPU time, neither of which is a good idea.)</p>
<p>NOTE: The very first time an EDDGridCopy is loaded, (if all goes well) lots of requests for chunks of data will be added to the taskThread&#x27;s queue, but no local data files will have been created. So the constructor will fail but taskThread will continue to work and create local files. If all goes well, the taskThread will make some local data files and the next attempt to reload the dataset (in ~15 minutes) will succeed, but initially with a very limited amount of data.</p>
<p>NOTE: After the local dataset has some data and appears in your ERDDAP, if the remote dataset is temporarily or permanently not accessible, the local dataset will still work.</p>
<p>WARNING: If the remote dataset is large and/or the remote server is slow (that&#x27;s the problem, isn&#x27;t it?!), it will take a long time to make a complete local copy. In some cases, the time needed will be unacceptable. For example, transmitting 1 TB of data over a T1 line (0.15 GB/s) takes at least 60 days, under optimal conditions. Plus, it uses lots of bandwidth, memory, and CPU time on the remote and local computers. The solution is to mail a hard drive to the administrator of the remote data set so that s/he can make a copy of the dataset and mail the hard drive back to you. Use that data as a starting point and EDDGridCopy will add data to it. (That is one way that <a href="https://aws.amazon.com/importexport/" target="_blank" rel="noopener noreferrer">Amazon&#x27;s EC2 Cloud Service</a> handles the problem, even though their system has lots of bandwidth.)</p>
<p>WARNING: If a given value for the leftmost (first) axis variable disappears from the remote dataset, EDDGridCopy does NOT delete the local copied file. If you want to, you can delete it yourself.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="grid-copy-checksourcedata">Grid Copy checkSourceData<a href="#grid-copy-checksourcedata" class="hash-link" aria-label="Direct link to Grid Copy checkSourceData" title="Direct link to Grid Copy checkSourceData">​</a></h4>
<p>The datasets.xml for this dataset can have an optional tag</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;checkSourceData&gt;true&lt;/checkSourceData&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The default value is true. If/when you set it to false, the dataset won&#x27;t ever check the source dataset to see if there is additional data available.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="onlysince">onlySince<a href="#onlysince" class="hash-link" aria-label="Direct link to onlySince" title="Direct link to onlySince">​</a></h4>
<p>You can tell EDDGridCopy to make a copy of a subset of the source dataset, instead of the entire source dataset, by adding a tag in the form &lt;onlySince&gt;<em>someValue</em>&lt;/onlySince&gt; to the dataset&#x27;s datasets.xml chunk. EDDGridCopy will only download data values related to the values of the first dimension (usually the time dimension) which are greater than <em>someValue</em>. <em>someValue</em> can be:</p>
<ul>
<li>
<p>A relative time specified via now-<em>nUnits</em>.<br>
<!-- -->For example, &lt;onlySince&gt;now-2years&lt;/onlySince&gt; tells the dataset to only make local copies of the data for data where the outer dimension&#x27;s values (usually time values) are within the last 2 years (which is re-evaluated each time the dataset is reloaded, which is when it looks for new data to copy). See the <a href="https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#now" target="_blank" rel="noopener noreferrer">now-<em>nUnits</em> syntax description</a>. This is useful if the first dimension has time data, which it usually does.</p>
<p>EDDGridCopy does not delete local data files which have data that, over time, becomes older than now-<em>nUnits</em>. You can delete those files any time if you choose to. If you do, we strongly recommend that you set a <a href="/docs/server-admin/additional-information#flag">flag</a> after you delete the files to tell EDDGridCopy to update the list of cached files.</p>
</li>
<li>
<p>A fixed point in time specified as an ISO 8601 string yyyy-MM-ddTHH:mm<!-- -->:ssZ<!-- --> .<br>
<!-- -->For example, &lt;onlySince&gt;2000-01-01T00:00:00Z&lt;/onlySince&gt; tells the dataset only to make local copies of data where the first dimension&#x27;s value is &gt;=2000-01-01T00:00:00Z . This is useful if the first dimension has time data, which it usually does.<br>
<!-- --> </p>
</li>
<li>
<p>A floating point number.<br>
<!-- -->For example, &lt;onlySince&gt;946684800.0&lt;/onlySince&gt; . The units will be the destination units of the first dimension. For example, for time dimensions, the units in ERDDAP™ are always &quot;seconds since 1970-01-01T00:00:00Z&quot;. So 946684800.0 &quot;seconds since 1970-01-01T00:00:00Z&quot; is equivalent to 2000-01-01T00:00:00Z. This is always a useful option, but is especially useful when the first dimension doesn&#x27;t have time data.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridcopy-recomended-use">EDDGridCopy Recomended use<a href="#eddgridcopy-recomended-use" class="hash-link" aria-label="Direct link to EDDGridCopy Recomended use" title="Direct link to EDDGridCopy Recomended use">​</a></h4>
<ol>
<li>Create the &lt;dataset&gt; entry (the native type, not EDDGridCopy) for the remote data source.<br>
<strong>Get it working correctly, including all of the desired metadata.</strong></li>
<li>If it is too slow, add XML code to wrap it in an EDDGridCopy dataset.<!-- -->
<ul>
<li>Use a different datasetID (perhaps by changing the datasetID of the old datasetID slightly).</li>
<li>Copy the &lt;accessibleTo&gt;, &lt;reloadEveryNMinutes&gt; and &lt;onChange&gt; from the remote EDDGrid&#x27;s XML to the EDDGridCopy&#x27;s XML. (Their values for EDDGridCopy matter; their values for the inner dataset become irrelevant.)</li>
</ul>
</li>
<li>ERDDAP™ will make and maintain a local copy of the data.<br>
<!-- --> </li>
</ol>
<ul>
<li>WARNING: EDDGridCopy assumes that the data values for each chunk don&#x27;t ever change. If/when they do, you need to manually delete the chunk files in <em>bigParentDirectory</em>/copy/<em>datasetID</em>/ which changed and <a href="/docs/server-admin/additional-information#flag">flag</a> the dataset to be reloaded so that the deleted chunks will be replaced. If you have an email subscription to the dataset, you will get two emails: one when the dataset first reloads and starts to copy the data, and another when the dataset loads again (automatically) and detects the new local data files.<br>
<!-- --> </li>
<li>All axis values must be equal.<br>
<!-- -->For each of the axes except the leftmost (first), all of the values must be equal for all children. The precision of the testing is determined by <a href="#matchaxisndigits">matchAxisNDigits</a>.<br>
<!-- --> </li>
<li>Settings, Metadata, Variables -- EDDGridCopy uses settings, metadata, and variables from the enclosed source dataset.<br>
<!-- --> </li>
<li>Change Metadata -- If you need to change any addAttributes or change the order of the variables associated with the source dataset:<!-- -->
<ol>
<li>Change the addAttributes for the source dataset in datasets.xml, as needed.</li>
<li>Delete one of the copied files.</li>
<li>Set a <a href="/docs/server-admin/additional-information#flag">flag</a> to reload the dataset immediately. If you do use a flag and you have an email subscription to the dataset, you will get two emails: one when the dataset first reloads and starts to copy the data, and another when the dataset loads again (automatically) and detects the new local data files.</li>
<li>The deleted file will be regenerated with the new metadata. If the source dataset is ever unavailable, the EDDGridCopy dataset will get metadata from the regenerated file, since it is the youngest file.</li>
</ol>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddgridcopy-skeleton-xml">EDDGridCopy skeleton XML<a href="#eddgridcopy-skeleton-xml" class="hash-link" aria-label="Direct link to EDDGridCopy skeleton XML" title="Direct link to EDDGridCopy skeleton XML">​</a></h4>
<blockquote>
<p>  &lt;dataset type=&quot;EDDGridCopy&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#accessibleviafiles">&lt;accessibleViaFiles&gt;</a>true|false(default)&lt;/accessibleViaFiles&gt;<br>
<!-- -->        &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#accessibleviawms">&lt;accessibleViaWMS&gt;</a>...&lt;/accessibleViaWMS&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->      <a href="#matchaxisndigits">&lt;matchAxisNDigits&gt;</a>...&lt;/matchAxisNDigits&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#filetableinmemory">&lt;fileTableInMemory&gt;</a>...&lt;/fileTableInMemory&gt; &lt;!-- 0 or 1 (true or false<br>
<!-- -->        (the default)) --&gt;<br>
<!-- -->      <a href="#grid-copy-checksourcedata">&lt;checkSourceData&gt;</a>...&lt;/checkSourceData&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onlysince">&lt;onlySince&gt;</a>...&lt;/onlySince&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      &lt;dataset&gt;...&lt;/dataset&gt; &lt;!-- 1 --&gt;<br>
<!-- -->  &lt;/dataset&gt;</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromcassandra">EDDTableFromCassandra<a href="#eddtablefromcassandra" class="hash-link" aria-label="Direct link to EDDTableFromCassandra" title="Direct link to EDDTableFromCassandra">​</a></h3>
<p><a href="#eddtablefromcassandra"><strong>EDDTableFromCassandra</strong></a> handles data from one <a href="https://cassandra.apache.org/" target="_blank" rel="noopener noreferrer">Cassandra</a> table. Cassandra is a NoSQL database.</p>
<ul>
<li>ERDDAP™ can work with Cassandra v2 and v3 with no changes or differences in setup. We have tested with <a href="https://cassandra.apache.org/download/" target="_blank" rel="noopener noreferrer">Cassandra v2 and v3 from Apache</a>. It is likely that ERDDAP™ can also work with Cassandra downloaded from DataStax.<br>
<!-- --> </li>
<li>For Aug 2019 - May 2021, we had trouble getting Cassandra to work with AdoptOpenJdk Java v8. It threw an EXCEPTION_ACCESS_VIOLATION). But now (May 2021), that problem is gone: we can successfully use Cassandra v2.1.22 and AdoptOpenJdk jdk8u292-b10.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="one-table">One Table<a href="#one-table" class="hash-link" aria-label="Direct link to One Table" title="Direct link to One Table">​</a></h4>
<p>Cassandra doesn&#x27;t support &quot;joins&quot; in the way that relational databases do. One ERDDAP™ EDDTableFromCassandra dataset maps to one (perhaps a subset of one) Cassandra table.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cassandra-datasetsxml">Cassandra datasets.xml<a href="#cassandra-datasetsxml" class="hash-link" aria-label="Direct link to Cassandra datasets.xml" title="Direct link to Cassandra datasets.xml">​</a></h4>
<ul>
<li>
<p>ERDDAP™ comes with the Cassandra Java driver, so you don&#x27;t need to install it separately.</p>
</li>
<li>
<p>Carefully read all of this document&#x27;s information about EDDTableFromCassandra. Some of the details are very important.</p>
</li>
<li>
<p>The Cassandra Java driver is intended to work with Apache Cassandra (1.2+) and DataStax Enterprise (3.1+). If you are using Apache Cassandra 1.2.x, you must edit the cassandra.yaml file for each node to set start_native_transport: true, then restart each node.</p>
</li>
<li>
<p>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. You can then edit that to fine tune it (especially <a href="#partitionkeysourcenames">&lt;partitionKeySourceNames&gt;</a>). You can gather most of the information you need to create the XML for an EDDTableFromCassandra dataset by contacting the Cassandra administrator and by searching the web.</p>
<p>GenerateDatasetsXml has two special options for EDDTableFromCassandra:</p>
<ol>
<li>If you enter &quot;!!!LIST!!!&quot; (without the quotes) for the keyspace, the program will display a list of keyspaces</li>
<li>If you enter a specific keyspace and then enter &quot;!!!LIST!!!&quot; (without the quotes) for the tablename, the program will display a list of tables in that keyspace and their columns.</li>
</ol>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="case-sensitivity">Case sensitivity<a href="#case-sensitivity" class="hash-link" aria-label="Direct link to Case sensitivity" title="Direct link to Case sensitivity">​</a></h5>
<ul>
<li>Case-insensitive Keyspace and Table Names -<br>
<!-- -->Cassandra treats keyspace and table names in a case-insensitive way. Because of this, you MUST NEVER use a reserved word (but with a different case) as a Cassandra keyspace or table name.</li>
<li>Case-insensitive Column Names --<br>
<!-- -->By default, Cassandra treats column names in a case-insensitive way. If you use one of Cassandra&#x27;s reserved words as a column name (please don&#x27;t!), you MUST use</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;columnNameQuotes&gt;&quot;&lt;columnNameQuotes&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>in datasets.xml for this dataset so that Cassandra and ERDDAP™ will treat the column names in a case-sensitive way. This will likely be a massive headache for you, because it is hard to determine the case-sensitive versions of the column names -- Cassandra almost always displays the column names as all lower-case, regardless of the true case.</p>
<ul>
<li>Work closely with the Cassandra administrator, who may have relevant experience. If the dataset fails to load, read the <a href="#troubleshooting-tips">error message</a> carefully to find out why.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cassandra-connectionproperty">Cassandra &lt;connectionProperty&gt;<a href="#cassandra-connectionproperty" class="hash-link" aria-label="Direct link to Cassandra &lt;connectionProperty&gt;" title="Direct link to Cassandra &lt;connectionProperty&gt;">​</a></h4>
<p>Cassandra has connection properties which can be specified in datasets.xml. Many of these will affect the performance of the Cassandra-ERDDAP™ connection. Unfortunately, Cassandra properties must be set programmatically in Java, so ERDDAP™ must have code for each property ERDDAP™ supports. Currently, ERDDAP™ supports these properties:<br>
<!-- -->(The defaults shown are what we see. Your system&#x27;s defaults may be different.)</p>
<ul>
<li><strong>General Options</strong><br>
<!-- -->&lt;connectionProperty name=&quot;<strong>compression</strong>&quot;&gt;<em>none|LZ4|snappy</em>&lt;/connectionProperty&gt; (case-insensitive, default=none)<br>
<!-- -->(General compression advice: use &#x27;none&#x27; if the connection between Cassandra and ERDDAP™ is local/fast and use &#x27;LZ4&#x27; if the connection is remote/slow.)<br>
<!-- -->&lt;connectionProperty name=&quot;<strong>credentials</strong>&quot;&gt;<em>username/password</em>&lt;/connectionProperty&gt; (that&#x27;s a literal &#x27;/&#x27;)<br>
<!-- -->&lt;connectionProperty name=&quot;<strong>metrics</strong>&quot;&gt;<em>true|false</em>&lt;/connectionProperty&gt; (2021-01-25 was default=true, now ignored and always false)<br>
<!-- -->&lt;connectionProperty name=&quot;<strong>port</strong>&quot;&gt;<em>anInteger</em>&lt;/connectionProperty&gt; (default for native binary protocol=9042)<br>
<!-- -->&lt;connectionProperty name=&quot;<strong>ssl</strong>&quot;&gt;<em>true|false</em>&lt;/connectionProperty&gt; (default=false)<br>
<!-- -->(My quick attempt to use ssl failed. If you succeed, please tell me how you did it.)</li>
<li><strong>Query Options</strong><br>
<!-- -->&lt;connectionProperty name=&quot;<strong>consistencyLevel</strong>&quot;&gt;<em>all|any|each_quorum|local_one|local_quorum| local_serial|one|quorum|serial|three|two</em>&lt;/connectionProperty&gt; (case-insensitive, default=ONE)<br>
<!-- -->&lt;connectionProperty name=&quot;<strong>fetchSize</strong>&quot;&gt;<em>anInteger</em>&lt;/connectionProperty&gt; (default=5000)<br>
<!-- -->(Do not set fetchSize to a smaller value.)<br>
<!-- -->&lt;connectionProperty name=&quot;<strong>serialConsistencyLevel</strong>&quot;&gt;<em>all|any|each_quorum|local_one|local_quorum| local_serial|one|quorum|serial|three|two</em>&lt;/connectionProperty&gt; (case-insensitive, default=SERIAL)</li>
<li><strong>Socket Options</strong><br>
<!-- -->&lt;connectionProperty name=&quot;<strong>connectTimeoutMillis</strong>&quot;&gt;<em>anInteger</em>&lt;/connectionProperty&gt; (default=5000)<br>
<!-- -->(Do not set connectTimeoutMillis to a smaller value.)<br>
<!-- -->&lt;connectionProperty name=&quot;<strong>keepAlive</strong>&quot;&gt;<em>true|false</em>&lt;/connectionProperty&gt;<br>
<!-- -->&lt;connectionProperty name=&quot;<strong>readTimeoutMillis</strong>&quot;&gt;<em>anInteger</em>&lt;/connectionProperty&gt;<br>
<!-- -->(Cassandra&#x27;s default readTimeoutMillis is 12000, but ERDDAP™ changes the default to 120000. If Cassandra is throwing readTimeouts, increasing this may not help, because Cassandra sometimes throws them before this time. The problem is more likely that you are storing too much data per partitionKey combination.)<br>
<!-- -->&lt;connectionProperty name=&quot;<strong>receiveBufferSize</strong>&quot;&gt;<em>anInteger</em>&lt;/connectionProperty&gt;<br>
<!-- -->(It is unclear what the default receiveBufferSize is. Don&#x27;t set this to a small value.)<br>
<!-- -->&lt;connectionProperty name=&quot;<strong>soLinger</strong>&quot;&gt;<em>anInteger</em>&lt;/connectionProperty&gt;<br>
<!-- -->&lt;connectionProperty name=&quot;<strong>tcpNoDelay</strong>&quot;&gt;<em>true|false</em>&lt;/connectionProperty&gt; (default=null)</li>
</ul>
<p>If you need to be able to set other connection properties, see our <a href="/docs/intro#support">section on getting additional support</a>.</p>
<p>For a given startup of Tomcat, connectionProperties are only used the first time a dataset is created for a given Cassandra URL. All reloads of that dataset and all subsequent datasets that share the same URL will use those original connectionProperties.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cql">CQL<a href="#cql" class="hash-link" aria-label="Direct link to CQL" title="Direct link to CQL">​</a></h4>
<p>The Cassandra Query Language (CQL) is superficially like SQL, the query language used by traditional databases. Because OPeNDAP&#x27;s tabular data requests were designed to mimic SQL tabular data requests, it is possible for ERDDAP™ to convert tabular data requests into CQL Bound/PreparedStatements. ERDDAP™ logs the statement in <a href="/docs/server-admin/additional-information#log">log.txt</a> as<br>
<!-- -->statement as text: <em>theStatementAsText</em><br>
<!-- -->The version of the statement you see will be a text representation of the statement and will only have &quot;?&quot; where constraint values will be placed.<br>
<!-- --> <br>
<!-- -->Not so simple -- Unfortunately, CQL has many restrictions on which columns can be queried with which types of constraints, for example, partition key columns can be constrained with = and IN, so ERDDAP™ sends some constraints to Cassandra and applies all constraints after the data is received from Cassandra. To help ERDDAP™ deal efficiently with Cassandra, you need to specify <a href="#partitionkeysourcenames">&lt;partitionKeySourceNames&gt;</a>, <a href="#clustercolumnsourcenames">&lt;clusterColumnSourceNames&gt;</a>, and <a href="#indexcolumnsourcenames">&lt;indexColumnSourceNames&gt;</a> in datasets.xml for this dataset. These are the most important ways to help ERDDAP™ work efficiently with Cassandra. If you don&#x27;t tell ERDDAP™ this information, the dataset will be painfully slow in ERDDAP™ and use tons of Cassandra resources.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="partitionkeysourcenames">&lt;partitionKeySourceNames&gt;<a href="#partitionkeysourcenames" class="hash-link" aria-label="Direct link to &lt;partitionKeySourceNames&gt;" title="Direct link to &lt;partitionKeySourceNames&gt;">​</a></h4>
<p>Because partition keys play a central role in Cassandra tables, ERDDAP™ needs to know their sourceNames and, if relevant, other information about how to work with them.</p>
<ul>
<li>You MUST specify a comma-separated list of partition key source column names in datasets.xml via &lt;partitionKeySourceNames&gt;.<br>
<!-- -->Simple example,</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;partitionKeySourceNames&gt;station, deviceid&lt;partitionKeySourceNames&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>More complex example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;partitionKeySourceNames&gt;deviceid=1007, date/sampletime/1970-01-01&lt;partitionKeySourceNames&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>TimeStamp Partition Keys -- If one of the partition key columns is a timestamp column that has a coarser version of another timestamp column, specify this via<br>
<em>partitionKeySourcName/otherColumnSourceName/time_precision</em><br>
<!-- -->where time_precision is one of the <a href="#time_precision">time_precision</a> strings used elsewhere in ERDDAP.<br>
<!-- -->The trailing Z in the time_precision string is the default, so it doesn&#x27;t matter if the time_precision string ends in Z or not.<br>
<!-- -->For example, ERDDAP™ will interpret date/sampletime/1970-01-01 as &quot;Constraints for date can be constructed from constraints on sampletime by using this time_precision.&quot; The actual conversion of constraints is more complex, but that is the overview.<br>
<strong>Use this whenever it is relevant.</strong> It enables ERDDAP™ to work efficiently with Cassandra. If this relationship between columns exists in a Cassandra table and you don&#x27;t tell ERDDAP™, the dataset will be painfully slow in ERDDAP™ and use tons of Cassandra resources.</li>
<li>Single Value Partition Keys -- If you want an ERDDAP™ dataset to work with only one value of one partition key, specify <em>partitionKeySourceName=value</em>.<br>
<!-- -->Don&#x27;t use quotes for a numeric column, for example, deviceid=1007<br>
<!-- -->Do use quotes for a String column, for example, stationid=&quot;Point Pinos&quot;</li>
<li>Dataset Default Sort Order -- The order of the partition key &lt;dataVariable&gt;&#x27;s in datasets.xml determines the default sort order of the results from Cassandra. Of course, users can request a different sort order for a given set of results by appending &amp;orderBy(&quot;<em>comma-separated list of variables</em>&quot;) to the end of their query.</li>
<li>By default, Cassandra and ERDDAP™ treat column names in a case-insensitive way. But if you set <a href="#case-sensitivity">columnNameQuotes</a> to &quot;, ERDDAP™ will treat Cassandra column names a in case-sensitive way.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="partitionkeycsv">&lt;partitionKeyCSV&gt;<a href="#partitionkeycsv" class="hash-link" aria-label="Direct link to &lt;partitionKeyCSV&gt;" title="Direct link to &lt;partitionKeyCSV&gt;">​</a></h4>
<p>If this is specified, ERDDAP™ will use it instead of asking Cassandra for the partitionKey information each time the dataset is reloaded. This provides the list of distinct partition key values, in the order they&#x27;ll be used. Times must be specified as seconds since 1970-01-01T00:00:00Z. But there are also two special alternate ways to specify times (each encoded as a string):</p>
<ol>
<li>time(aISO8601Time) (MAY be encoded as a string)</li>
<li>&quot;times(anISO8601StartTime, strideSeconds, stopTime)&quot; (MUST be encoded as a string)<br>
<!-- -->stopTime can be an ISO8601Time or a &quot;now-nUnits&quot; time (e.g., &quot;now-3minutes&quot;).<br>
<!-- -->stopTime doesn&#x27;t have to be an exact match of startTime + x strideSeconds.<br>
<!-- -->A row with a times() value gets expanded into multiple rows before every query, so the list of partitionKeys can be always perfectly up-to-date.<br>
<!-- -->For example,</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;partitionKeyCSV&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deviceid,date</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1001,&quot;times(2014-11-01T00:00:00Z, 86400, 2014-11-02T00:00:00Z)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1007,&quot;time(2014-11-07T00:00:00Z)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1008,time(2014-11-08T00:00:00Z)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1009,1.4154912E9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/partitionKeyCSV&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>expands into this table of partition key combinations:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    deviceid,date</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1001,1.4148E9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1001,1.4148864E9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1007,1.4153184E9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1008,1.4154048E9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1009,1.4154912E9 </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="clustercolumnsourcenames">&lt;clusterColumnSourceNames&gt;<a href="#clustercolumnsourcenames" class="hash-link" aria-label="Direct link to &lt;clusterColumnSourceNames&gt;" title="Direct link to &lt;clusterColumnSourceNames&gt;">​</a></h4>
<p>Cassandra accepts SQL-like constraints on cluster columns, which are the columns that form the second part of the primary key (after the partition key(s)). So, it is essential that you identify these columns via &lt;clusterColumnSourceNames&gt;. This enables ERDDAP™ to work efficiently with Cassandra. If there are cluster columns and you don&#x27;t tell ERDDAP, the dataset will be painfully slow in ERDDAP™ and use tons of Cassandra resources.</p>
<ul>
<li>For example, &lt;clusterColumnSourceNames&gt;<em>myClusterColumn1, myClusterColumn2</em>&lt;/clusterColumnSourceNames&gt;</li>
<li>If a Cassandra table has no cluster columns, either don&#x27;t specify &lt;clusterColumnSourceNames&gt;, or specify it with no value.</li>
<li>By default, Cassandra and ERDDAP™ treat column names in a case-insensitive way. But if you set <a href="#case-sensitivity">columnNameQuotes</a> to &quot;, ERDDAP™ will treat Cassandra column names in a case-sensitive way.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="indexcolumnsourcenames">&lt;indexColumnSourceNames&gt;<a href="#indexcolumnsourcenames" class="hash-link" aria-label="Direct link to &lt;indexColumnSourceNames&gt;" title="Direct link to &lt;indexColumnSourceNames&gt;">​</a></h4>
<p>Cassandra accepts &#x27;=&#x27; constraints on secondary index columns, which are the columns that you have explicitly created indexes for via</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    CREATE INDEX *indexName* ON *keyspace.tableName* (*columnName*);  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>(Yes, the parentheses are required.)<br>
<!-- -->So, it is very useful if you identify these columns via &lt;indexColumnSourceNames&gt;. This enables ERDDAP™ to work efficiently with Cassandra. If there are index columns and you don&#x27;t tell ERDDAP, some queries will be needlessly, painfully slow in ERDDAP™ and use tons of Cassandra resources.</p>
<ul>
<li>For example, &lt;indexColumnSourceNames&gt;<em>myIndexColumn1, myIndexColumn2</em>&lt;/indexColumnSourceNames&gt;</li>
<li>If a Cassandra table has no index columns, either don&#x27;t specify &lt;indexColumnSourceNames&gt;, or specify it with no value.</li>
<li>WARNING: Cassandra indexes aren&#x27;t like database indexes. Cassandra indexes only help with &#x27;=&#x27; constraints. And they are only <a href="https://cassandra.apache.org/doc/latest/cql/indexes.html" target="_blank" rel="noopener noreferrer">recommended</a> for columns that have far fewer distinct values than total values.</li>
<li>By default, Cassandra and ERDDAP™ treat column names in a case-insensitive way. But if you set <a href="#case-sensitivity">columnNameQuotes</a> to &quot;, ERDDAP™ will treat Cassandra column names in a case-sensitive way.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="maxrequestfraction">&lt;maxRequestFraction&gt;<a href="#maxrequestfraction" class="hash-link" aria-label="Direct link to &lt;maxRequestFraction&gt;" title="Direct link to &lt;maxRequestFraction&gt;">​</a></h4>
<p>When ERDDAP™ (re)loads a dataset, ERDDAP™ gets from Cassandra the list of distinct combinations of the partition keys. For a huge dataset, the number of combinations will be huge. If you want to prevent users requests from requesting most or all of the dataset (or even a request that asks ERDDAP™ to download most or all of the data in order to further filter it), you can tell ERDDAP™ only to allow requests that reduce the number of combinations by some amount via &lt;maxRequestFraction&gt;, which is a floating point number between 1e-10 (which means that the request can&#x27;t need more than 1 combination in a billion) and 1 (the default, which means that the request can be for the entire dataset).<br>
<!-- -->For example, if a dataset has 10000 distinct combinations of the partition keys and maxRequestFraction is set to 0.1,<br>
<!-- -->then requests which need data from 1001 or more combinations will generate an error message,<br>
<!-- -->but requests which need data from 1000 or fewer combinations will be allowed.</p>
<p>Generally, the larger the dataset, the lower you should set &lt;maxRequestFraction&gt;. So you might set it to 1 for a small dataset, 0.1 for a medium-sized dataset, 0.01 for a large dataset, and 0.0001 for a huge dataset.</p>
<p>This approach is far from perfect. It will lead to some reasonable requests being rejected and some too-big requests being allowed. But it is a difficult problem and this solution is much better than nothing.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cassandra-subsetvariables">Cassandra subsetVariables<a href="#cassandra-subsetvariables" class="hash-link" aria-label="Direct link to Cassandra subsetVariables" title="Direct link to Cassandra subsetVariables">​</a></h4>
<p>As with other EDDTable datasets, you can specify a comma-separated list of &lt;dataVariable&gt; destinationNames in a global attribute called &quot;<a href="#subsetvariables">subsetVariables</a>&quot; to identify variables which have a limited number of values. The dataset will then have a .subset web page and show lists of distinct values for those variables in drop-down lists on many web pages.</p>
<p>Including just partition key variables and static columns in the list is STRONGLY ENCOURAGED. Cassandra will be able to generate the list of distinct combinations very quickly and easily each time the dataset is reloaded. One exception is timestamp partition keys that are coarse versions of some other timestamp column -- it is probably best to leave these out of the list of subsetVariables since there are a large number of values and they aren&#x27;t very useful to users.</p>
<p>If you include non-partition key, non-static variables in the list, it will probably be <strong>very</strong> computationally expensive for Cassandra each time the dataset is reloaded, because ERDDAP™ has to look through every row of the dataset to generate the information. In fact, the query is likely to fail. So, except for very small datasets, this is STRONGLY DISCOURAGED.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cassandra-datatypes">Cassandra DataTypes<a href="#cassandra-datatypes" class="hash-link" aria-label="Direct link to Cassandra DataTypes" title="Direct link to Cassandra DataTypes">​</a></h4>
<p>Because there is some ambiguity about which <a href="https://cassandra.apache.org/doc/latest/cql/types.html" target="_blank" rel="noopener noreferrer">Cassandra data types</a> map to which ERDDAP™ data types, you need to specify a <a href="#datatype">&lt;dataType&gt;</a> tag for each <a href="#datavariable">&lt;dataVariable&gt;</a> to tell ERDDAP™ which dataType to use. The standard ERDDAP™ dataTypes (and the most common corresponding Cassandra data types) are:</p>
<ul>
<li><a href="#boolean-data">boolean</a> (boolean), which ERDDAP™ then stores as bytes</li>
<li>byte (int, if the range is -128 to 127)</li>
<li>short (int, if the range is -32768 to 32767)</li>
<li>int (int, counter?, varint?, if the range is -2147483648 to 2147483647)</li>
<li>long (bigint, counter?, varint?, if the range is -9223372036854775808 to 9223372036854775807)</li>
<li>float (float)</li>
<li>double (double, decimal (with possible loss of precision), timestamp)</li>
<li>char (ascii or text, if they never have more than 1 character)</li>
<li>String (ascii, text, varchar, inet, uuid, timeuuid, blob, map, set, list?)</li>
</ul>
<p>Cassandra&#x27;s <a href="#cassandra-timestamp-data">timestamp</a> is a special case: use ERDDAP&#x27;s double dataType.</p>
<p>If you specify a String dataType in ERDDAP™ for a Cassandra map, set or list, the map, set or list on each Cassandra row will be converted to a single string on a single row in the ERDDAP™ table. ERDDAP™ has an alternative system for lists; see below.</p>
<p><em>type</em>Lists -- ERDDAP&#x27;s <a href="#datatype">&lt;dataType&gt;</a> tag for Cassandra dataVariables can include the regular ERDDAP™ dataTypes (see above) plus several special dataTypes that can be used for Cassandra list columns: booleanList, byteList, ubyteList, shortList, ushortList, intList, uintList, longList, ulongList, floatList, doubleList, charList, StringList. When one of these list columns is in the results being passed to ERDDAP™, each row of source data will be expanded to list.size() rows of data in ERDDAP; simple dataTypes (for example, int) in that source data row will be duplicated list.size() times. If the results contain more than one list variable, all lists on a given row of data MUST have the same size and MUST be &quot;parallel&quot; lists, or ERDDAP™ will generate an error message. For example, for currents measurements from an ADCP,<br>
<!-- -->  depth[0], uCurrent[0], vCurrent[0], and zCurrent[0] are all related, and<br>
<!-- -->  depth[1], uCurrent[1], vCurrent[1], and zCurrent[1] are all related, ...<br>
<!-- -->Alternatively, if you don&#x27;t want ERDDAP™ to expand a list into multiple rows in the ERDDAP™ table, specify String as the dataVariable&#x27;s dataType so the entire list will be represented as one String on one row in ERDDAP.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cassandra-timestamp-data">Cassandra TimeStamp Data<a href="#cassandra-timestamp-data" class="hash-link" aria-label="Direct link to Cassandra TimeStamp Data" title="Direct link to Cassandra TimeStamp Data">​</a></h4>
<p>Cassandra&#x27;s timestamp data is always aware of time zones. If you enter timestamp data without specifying a timezone, Cassandra assumes the timestamp uses the local time zone.</p>
<p>ERDDAP™ supports timestamp data and always presents the data in the Zulu/GMT time zone. So if you enter timestamp data in Cassandra using a time zone other than Zulu/GMT, remember that you need to do all queries for timestamp data in ERDDAP™ using the Zulu/GMT time zone. So don&#x27;t be surprised when the timestamp values that come out of ERDDAP are shifted by several hours because of the time zone switch from local to Zulu/GMT time.</p>
<ul>
<li>In ERDDAP&#x27;s datasets.xml, in the &lt;dataVariable&gt; tag for a timestamp variable, set</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;dataType&gt;double&lt;/dataType&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and in &lt;addAttributes&gt; set</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;att name=&quot;units&quot;&gt;seconds since 1970-01-01T00:00:00Z&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Suggestion: If the data is a time range, it is useful to have the timestamp values refer to the center of the implied time range (for example, noon). For example, if a user has data for 2010-03-26T13:00Z from another dataset and they want the closest data from this Cassandra dataset that has data for each day, then the data for 2010-03-26T12:00Z (representing Cassandra data for that date) is obviously the best (as opposed to the midnight before or after, where it is less obvious which is best).</li>
<li>ERDDAP™ has a utility to <a href="https://coastwatch.pfeg.noaa.gov/erddap/convert/time.html" target="_blank" rel="noopener noreferrer">Convert a Numeric Time to/from a String Time</a>.</li>
<li>See <a href="https://coastwatch.pfeg.noaa.gov/erddap/convert/time.html#erddap" target="_blank" rel="noopener noreferrer">How ERDDAP™ Deals with Time</a>.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="integer-nulls">Integer nulls<a href="#integer-nulls" class="hash-link" aria-label="Direct link to Integer nulls" title="Direct link to Integer nulls">​</a></h4>
<p>Cassandra supports nulls in Cassandra int (ERDDAP™ int) and bigint (ERDDAP™ long) columns, but ERDDAP™ doesn&#x27;t support true nulls for any integer data type.<br>
<!-- -->By default, Cassandra integer nulls will be converted in ERDDAP™ to 2147483647 for int columns, or 9223372036854775807 for long columns. These will appear as &quot;NaN&quot; in some types of text output files (for example, .csv), &quot;&quot; in other types of text output files (for example, .htmlTable), and the specific number (2147483647 for missing int values) in other types of files (for example, binary files like .nc and mat). A user can search for rows of data with this type of missing value by referring to &quot;NaN&quot;, e.g, &quot;&amp;windSpeed=NaN&quot;.</p>
<p>If you use some other integer value to indicate missing values in your Cassandra table, please identify that value in datasets.xml:</p>
<blockquote>
<p>&lt;att name=&quot;missing_value&quot; <a href="#attributetype">type=&quot;int&quot;</a>&gt;-999&lt;/att&gt;</p>
</blockquote>
<p>For Cassandra floating point columns, nulls get converted to NaNs in ERDDAP. For Cassandra data types that are converted to Strings in ERDDAP™, nulls get converted to empty Strings. That shouldn&#x27;t be a problem.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="warning-re-preparing-already-prepared-query">&quot;WARNING: Re-preparing already prepared query&quot;<a href="#warning-re-preparing-already-prepared-query" class="hash-link" aria-label="Direct link to &quot;WARNING: Re-preparing already prepared query&quot;" title="Direct link to &quot;WARNING: Re-preparing already prepared query&quot;">​</a></h4>
<ul>
<li>
<p>&quot;WARNING: Re-preparing already prepared query&quot; in <em>tomcat</em>/logs/catalina.out (or some other Tomcat log file)<br>
<!-- -->Cassandra documentation says there is trouble if the same query is made into a PreparedStatement twice (or more). (See this <a href="https://datastax-oss.atlassian.net/browse/JAVA-236" target="_blank" rel="noopener noreferrer">bug report</a>.) To avoid making Cassandra mad, ERDDAP™ caches all PreparedStatements so it can reuse them. That cache is lost if/when Tomcat/ERDDAP™ is restarted, but I think that is okay because the PreparedStatements are associated with a given session (between Java and Cassandra), which is also lost. So, you may see these messages. I know of no other solution. Fortunately, it is a warning, not an error (although Cassandra threatens that it may lead to performance problems).</p>
<p>Cassandra claims that PreparedStatements are good forever, so ERDDAP&#x27;s cached PreparedStatements should never become out-of-date/invalid. If that isn&#x27;t true, and you get errors about certain PreparedStatements being out-of-date/invalid, then you need to restart ERDDAP™ to clear ERDDAP&#x27;s cache of PreparedStatements.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cassandra-security">Cassandra Security<a href="#cassandra-security" class="hash-link" aria-label="Direct link to Cassandra Security" title="Direct link to Cassandra Security">​</a></h4>
<p>See <a href="https://cassandra.apache.org/doc/latest/operating/security.html" target="_blank" rel="noopener noreferrer">Securing Cassandra</a></p>
<p>When working with Cassandra, you need to do things as safely and securely as possible to avoid allowing a malicious user to damage your Cassandra or gain access to data they shouldn&#x27;t have access to. ERDDAP™ tries to do things in a secure way, too.</p>
<ul>
<li>We encourage you to set up ERDDAP™ to connect to Cassandra as a Cassandra user that only has access to the <strong>relevant</strong> table(s) and only has READ privileges.</li>
<li>We encourage you to set up the connection from ERDDAP™ to Cassandra so that it<!-- -->
<ul>
<li>always uses SSL,</li>
<li>only allows connections from one IP address (or one block of addresses) and from the one ERDDAP™ user, and</li>
<li>only transfers passwords in their MD5 hashed form.</li>
</ul>
</li>
<li>[KNOWN PROBLEM] The connectionProperties (including the password!) are stored as plain text in datasets.xml. We haven&#x27;t found a way to allow the administrator to enter the Cassandra password during ERDDAP&#x27;s startup in Tomcat (which occurs without user input), so the password must be accessible in a file. To make this more secure:<!-- -->
<ul>
<li>You (the ERDDAP™ administrator) should be the owner of datasets.xml and have READ and WRITE access.</li>
<li>Make a group that includes only user=tomcat. Use chgrp to make that the group for datasets.xml, with just READ privileges.</li>
<li>Use chmod to assign o-rwx privileges (no READ or WRITE access for &quot;other&quot; users) for datasets.xml.</li>
</ul>
</li>
<li>When in ERDDAP™, the password and other connection properties are stored in &quot;private&quot; Java variables.</li>
<li>Requests from clients are parsed and checked for validity before generating the CQL requests for Cassandra.</li>
<li>Requests to Cassandra are made with CQL Bound/PreparedStatements, to prevent CQL injection. In any case, Cassandra is inherently less susceptible to CQL injection than traditional databases are to <a href="https://en.wikipedia.org/wiki/SQL_injection" target="_blank" rel="noopener noreferrer">SQL injection</a>.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cassandra-speed">Cassandra Speed<a href="#cassandra-speed" class="hash-link" aria-label="Direct link to Cassandra Speed" title="Direct link to Cassandra Speed">​</a></h4>
<p>Cassandra can be fast or slow. There are some things you can do to make it fast:</p>
<ul>
<li>
<p>In General -<br>
<!-- -->The nature of CQL is that queries are <a href="https://en.wikipedia.org/wiki/Declarative_programming" target="_blank" rel="noopener noreferrer">declarative</a>. They just specify what the user wants. They don&#x27;t include a specification or hints for how the query is to be handled or optimized. So there is no way for ERDDAP™ to generate the query in such a way that it helps Cassandra optimize the query (or in any way specifies how the query is to be handled). In general, it is up to the Cassandra administrator to set things up (for example, indexes) to optimize for certain types of queries.<br>
<!-- --> </p>
</li>
<li>
<p>Specifying the timestamp columns that are related to coarser-precision timestamp partition keys via <a href="#partitionkeysourcenames">&lt;partitionKeySourceNames&gt;</a> is the most important way to help ERDDAP™ work efficiently with Cassandra. If this relationship exists in a Cassandra table and you don&#x27;t tell ERDDAP™, the dataset will be painfully slow in ERDDAP™ and use tons of Cassandra resources.<br>
<!-- --> </p>
</li>
<li>
<p>Specifying the cluster columns via <a href="#clustercolumnsourcenames">&lt;clusterColumnSourceNames&gt;</a> is the second most important way to help ERDDAP™ work efficiently with Cassandra. If there are cluster columns and you don&#x27;t tell ERDDAP, a large subset of the possible queries for data will be needlessly, painfully slow in ERDDAP™ and use tons of Cassandra resources.<br>
<!-- --> </p>
</li>
<li>
<p>Make <a href="https://cassandra.apache.org/doc/latest/cql/indexes.html" target="_blank" rel="noopener noreferrer">Indexes</a> for Commonly Constrained Variables --<br>
<!-- -->You can speed a few queries by creating indexes for Cassandra columns that are often constrained with &quot;=&quot; constraints.</p>
<p>Cassandra can&#x27;t make indexes for list, set, or map columns.</p>
</li>
<li>
<p>Specifying the index columns via <a href="#indexcolumnsourcenames">&lt;indexColumnSourceNames&gt;</a> is an important way to help ERDDAP™ work efficiently with Cassandra. If there are index columns and you don&#x27;t tell ERDDAP, some queries for data will be needlessly, painfully slow in ERDDAP™ and use tons of Cassandra resources.<br>
<!-- --> </p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cassandra-stats">Cassandra Stats<a href="#cassandra-stats" class="hash-link" aria-label="Direct link to Cassandra Stats" title="Direct link to Cassandra Stats">​</a></h4>
<ul>
<li><a href="#cassandra-stats">&quot;Cassandra stats&quot; Diagnostic Messages</a> -- For every ERDDAP™ user query to a Cassandra dataset, ERDDAP™ will print a line in the log file, <em>bigParentDirectory</em>/logs/log.txt, with some statistics related to the query, for example,</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        \* Cassandra stats: partitionKeyTable: 2/10000=2e-4 &lt; 0.1 nCassRows=1200 nErddapRows=12000 nRowsToUser=7405  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Using the numbers in the example above, this means:</p>
<ul>
<li>When ERDDAP™ last (re)loaded this dataset, Cassandra told ERDDAP™ that there were 10000 distinct combinations of the partition keys. ERDDAP™ cached all of the distinct combinations in a file.</li>
<li>Due to the user&#x27;s constraints, ERDDAP™ identified 2 combinations out of the 10000 that might have the desired data. So, ERDDAP™ will make 2 calls to Cassandra, one for each combination of the partition keys. (That&#x27;s what Cassandra requires.) Clearly, it is troublesome if a large dataset has a large number of combinations of the partition keys and a given request doesn&#x27;t drastically reduce that. You can require that each request reduce the key space by setting <a href="#maxrequestfraction">&lt;maxRequestFraction&gt;</a>. Here, 2/10000=2e-4, which is less than the maxRequestFraction (0.1), so the request was allowed.</li>
<li>After applying the constraints on the partition keys, <a href="#clustercolumnsourcenames">cluster columns</a>, and <a href="#indexcolumnsourcenames">index columns</a> which were sent by ERDDAP™, Cassandra returned 1200 rows of data to ERDDAP™ in the ResultSet.</li>
<li>The ResultSet must have had <a href="#cassandra-datatypes">dataType=<em>sometype</em>List</a> columns (with an average of 10 items per list), because ERDDAP™ expanded the 1200 rows from Cassandra into 12000 rows in ERDDAP.</li>
<li>ERDDAP™ always applies all of the user&#x27;s constraints to the data from Cassandra. In this case, constraints which Cassandra had not handled reduced the number of rows to 7405. That is the number of rows sent to the user.</li>
</ul>
<p>The most important use of these diagnostic messages is to make sure that ERDDAP™ is doing what you think it is doing. If it isn&#x27;t (for example, is it not reducing the number of distinct combinations as expected?), then you can use the information to try to figure out what&#x27;s going wrong.<br>
<!-- --> </p>
<ul>
<li>Research and experiment to find and set better <a href="#cassandra-connectionproperty">&lt;connectionProperty&gt;</a>&#x27;s.<br>
<!-- --> </li>
<li>Check the speed of the network connection between Cassandra and ERDDAP. If the connection is slow, see if you can improve it. The best situation is when ERDDAP™ is running on a server attached to the same (fast) switch as the server running the Cassandra node to which you are connecting.<br>
<!-- --> </li>
<li>Please be patient. Read the information here and in the Cassandra documentation carefully. Experiment. Check your work. If the Cassandra-ERDDAP™ connection is still slower than you expect, please include your Cassandra table&#x27;s schema and your ERDDAP™ chunk of datasets.xml and see our <a href="/docs/intro#support">section on getting additional support</a>.
 </li>
<li>If all else fails,<br>
<!-- -->consider storing the data in a collection of NetCDF v3 .nc files (especially .nc files that use the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#discrete-sampling-geometries" target="_blank" rel="noopener noreferrer">CF Discrete Sampling Geometries (DSG)</a> Contiguous Ragged Array data structures and so can be handled with ERDDAP&#x27;s <a href="#eddtablefromnccffiles">EDDTableFromNcCFFiles</a>). If they are logically organized (each with data for a chunk of space and time), ERDDAP™ can extract data from them very quickly.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromcassandra-skeleton-xml">EDDTableFromCassandra skeleton XML<a href="#eddtablefromcassandra-skeleton-xml" class="hash-link" aria-label="Direct link to EDDTableFromCassandra skeleton XML" title="Direct link to EDDTableFromCassandra skeleton XML">​</a></h4>
<blockquote>
<p>  &lt;dataset type=&quot;EDDTableFromCassandra&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      <a href="#sourceurl">&lt;ipAddress&gt;</a>...&lt;/ipAddress&gt;<br>
<!-- -->        &lt;!-- The Cassandra URL without the port number, for example,<br>
<!-- -->        127.0.0.1 REQUIRED. --&gt;<br>
<!-- -->      &lt;<a href="#cassandra-connectionproperty">connectionProperty</a> name=&quot;<em>name</em>&quot;&gt;<em>value</em>&lt;/connectionProperty&gt;<br>
<!-- -->        &lt;!-- The names (for example, &quot;readTimeoutMillis&quot;) and values<br>
<!-- -->          of the Cassandra properties that ERDDAP™ needs to change.<br>
<!-- -->          0 or more. --&gt;<br>
<!-- -->      &lt;keyspace&gt;...&lt;/keyspace&gt; &lt;!-- The name of the keyspace that has<br>
<!-- -->        the table. REQUIRED. --&gt;<br>
<!-- -->      &lt;tableName&gt;...&lt;/tableName&gt; &lt;!-- The name of the table, default = &quot;&quot;.<br>
<!-- -->        REQUIRED. --&gt;<br>
<!-- -->      <a href="#partitionkeysourcenames">&lt;partitionKeySourceNames&gt;</a>...&lt;partitionKeySourceNames&gt;<br>
<!-- -->        &lt;!-- REQUIRED. --&gt;<br>
<!-- -->      <a href="#clustercolumnsourcenames">&lt;clusterColumnSourceNames&gt;</a>...&lt;clusterColumnSourceNames&gt;<br>
<!-- -->        &lt;!-- OPTIONAL. --&gt;<br>
<!-- -->      <a href="#indexcolumnsourcenames">&lt;indexColumnSourceNames&gt;</a>...&lt;indexColumnSourceNames&gt; &lt;!-- OPTIONAL. --&gt;<br>
<!-- -->      <a href="#maxrequestfraction">&lt;maxRequestFraction&gt;</a>...&lt;maxRequestFraction&gt;<br>
<!-- -->        &lt;!-- OPTIONAL double between 1e-10 and 1 (the default). --&gt;<br>
<!-- -->      <a href="#case-sensitivity">&lt;columnNameQuotes&gt;</a>...&lt;columnNameQuotes&gt; &lt;!-- OPTIONAL.<br>
<!-- -->        Options: [nothing] (the default) or &quot;. --&gt;<br>
<!-- -->      <a href="#sourceneedsexpandedfp_eq">&lt;sourceNeedsExpandedFP_EQ&gt;</a>true(default)|false&lt;/sourceNeedsExpandedFP_EQ&gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#addvariableswhere">&lt;addVariablesWhere&gt;</a>...&lt;/addVariablesWhere&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->      <a href="#global-attributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#datavariable">&lt;dataVariable&gt;</a>...&lt;/dataVariable&gt; &lt;!-- 1 or more.<br>
<!-- -->         Each dataVariable MUST include a <a href="#datatype">&lt;dataType&gt;</a> tag. See<br>
<!-- -->           <a href="#cassandra-datatypes">Cassandra DataTypes</a>.<br>
<!-- -->         For <a href="#cassandra-timestamp-data">Cassandra timestamp columns</a>, set dataType=double and<br>
<!-- -->         units=seconds since 1970-01-01T00:00:00Z --&gt;<br>
<!-- -->  &lt;/dataset&gt;</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromdapsequence">EDDTableFromDapSequence<a href="#eddtablefromdapsequence" class="hash-link" aria-label="Direct link to EDDTableFromDapSequence" title="Direct link to EDDTableFromDapSequence">​</a></h3>
<p><a href="#eddtablefromdapsequence"><strong>EDDTableFromDapSequence</strong></a> handles variables within 1- and 2-level sequences from <a href="https://www.opendap.org/" target="_blank" rel="noopener noreferrer">DAP</a> servers such as DAPPER (was at <a href="https://www.pmel.noaa.gov/epic/software/dapper/" target="_blank" rel="noopener noreferrer">https://www.pmel.noaa.gov/epic/software/dapper/</a>, now discontinued).</p>
<ul>
<li>
<p>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. You can then edit that to fine tune it. You can gather the information you need by looking at the source dataset&#x27;s DDS and DAS files in your browser (by adding .das and .dds to the sourceUrl (an example was at <a href="https://dapper.pmel.noaa.gov/dapper/epic/tao%5C_time%5C_series.cdp.dds" target="_blank" rel="noopener noreferrer">https://dapper.pmel.noaa.gov/dapper/epic/tao\_time\_series.cdp.dds</a> ).</p>
</li>
<li>
<p>A variable is in a DAP sequence if the .dds response indicates that the data structure holding the variable is a &quot;sequence&quot; (case insensitive).</p>
</li>
<li>
<p>In some cases, you will see a sequence within a sequence, a 2-level sequence -- EDDTableFromDapSequence handles these, too.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromdapsequence-skeleton-xml">EDDTableFromDapSequence skeleton XML<a href="#eddtablefromdapsequence-skeleton-xml" class="hash-link" aria-label="Direct link to EDDTableFromDapSequence skeleton XML" title="Direct link to EDDTableFromDapSequence skeleton XML">​</a></h4>
<blockquote>
<p>  &lt;dataset type=&quot;EDDTableFromDapSequence&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      <a href="#sourceurl">&lt;sourceUrl&gt;</a>...&lt;/sourceUrl&gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#addvariableswhere">&lt;addVariablesWhere&gt;</a>...&lt;/addVariablesWhere&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->      &lt;outerSequenceName&gt;...&lt;/outerSequenceName&gt;<br>
<!-- -->        &lt;!-- The name of the outer sequence for DAP sequence data.<br>
<!-- -->        This tag is REQUIRED. --&gt;<br>
<!-- -->      &lt;innerSequenceName&gt;...&lt;/innerSequenceName&gt;<br>
<!-- -->        &lt;!-- The name of the inner sequence for DAP sequence data.<br>
<!-- -->        This tag is OPTIONAL; use it if the DAP data is a two level<br>
<!-- -->        sequence. --&gt;<br>
<!-- -->      <a href="#sourceneedsexpandedfp_eq">&lt;sourceNeedsExpandedFP_EQ&gt;</a>true(default)|false&lt;/sourceNeedsExpandedFP_EQ&gt;<br>
<!-- -->      <a href="#sourcecanconstrainstringeqne">&lt;sourceCanConstrainStringEQNE&gt;</a>true|false&lt;/sourceCanConstrainStringEQNE&gt;<br>
<!-- -->      <a href="#sourcecanconstrainstringgtlt">&lt;sourceCanConstrainStringGTLT&gt;</a>true|false&lt;/sourceCanConstrainStringGTLT&gt;<br>
<!-- -->      <a href="#sourcecanconstrainstringregex">&lt;sourceCanConstrainStringRegex&gt;</a>...&lt;/sourceCanConstrainStringRegex&gt;<br>
<!-- -->      &lt;skipDapperSpacerRows&gt;...&lt;/skipDapperSpacerRows&gt;<br>
<!-- -->        &lt;!-- skipDapperSpacerRows specifies whether the dataset<br>
<!-- -->        will skip the last row of each innerSequence other than the<br>
<!-- -->        last innerSequence (because Dapper servers put NaNs in the<br>
<!-- -->        row to act as a spacer).  This tag is OPTIONAL. The default<br>
<!-- -->        is false.  It is recommended that you set this to true for<br>
<!-- -->        all Dapper sources and false for all other data sources. --&gt;<br>
<!-- -->      <a href="#global-attributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#datavariable">&lt;dataVariable&gt;</a>...&lt;/dataVariable&gt; &lt;!-- 1 or more --&gt;<br>
<!-- -->    &lt;/dataset&gt;</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromdatabase">EDDTableFromDatabase<a href="#eddtablefromdatabase" class="hash-link" aria-label="Direct link to EDDTableFromDatabase" title="Direct link to EDDTableFromDatabase">​</a></h3>
<p><a href="#eddtablefromdatabase"><strong>EDDTableFromDatabase</strong></a> handles data from one relational database table or <a href="https://en.wikipedia.org/wiki/View_(database)" target="_blank" rel="noopener noreferrer">view</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="one-table-or-view">One Table or View<a href="#one-table-or-view" class="hash-link" aria-label="Direct link to One Table or View" title="Direct link to One Table or View">​</a></h4>
<p>If the data you want to serve is in two or more tables (and thus needs a JOIN to extract data from both tables at once), you need to make one <a href="https://en.wikipedia.org/wiki/Denormalization" target="_blank" rel="noopener noreferrer">denormalized</a> (already joined) table or <a href="https://en.wikipedia.org/wiki/View_(SQL)" target="_blank" rel="noopener noreferrer">view</a> with all of the data that you want to make available as one dataset in ERDDAP.</p>
<p>For large, complex databases, it may make sense to separate out several chunks as denormalized tables, each with a different type of data, which will become separate datasets in ERDDAP.</p>
<p>Making a denormalized table for use in ERDDAP™ may sound like a crazy idea to you. Please trust us. There are several reasons why ERDDAP™ works with denormalized tables:</p>
<ul>
<li>It&#x27;s vastly easier for users.<br>
<!-- -->When ERDDAP™ presents the dataset as one, simple, denormalized, single table, it is very easy for anyone to understand the data. Most users have never heard of normalized tables, and very few understand keys, foreign keys, or table joins, and they almost certainly don&#x27;t know the details of the different types of joins, or how to specify the SQL to do a join (or multiple joins) correctly. Using a denormalized table avoids all those problems. This reason alone justifies the use of a denormalized single table for the presentation of a dataset to ERDDAP™ users.<br>
<!-- --> </li>
<li>Normalized tables (multiple tables related by key columns) are great for storing data in a database.<br>
<!-- -->But even in SQL, the result that is returned to the user is a denormalized (joined) single table. So it seems reasonable to present the dataset to users as a huge, denormalized, single table from which they can then request subsets (e.g., show me rows of the table where temperature&gt;30).<br>
<!-- --> </li>
<li>You can make changes for ERDDAP™ without changing your tables.<br>
<!-- -->ERDDAP™ has a few requirements that may be different from how you have set up your database.<br>
<!-- -->For example, ERDDAP™ requires that timestamp data be stored in &#x27;timestamp with timezone&#x27; fields.<br>
<!-- -->By making a separate table/view for ERDDAP  ™, you can make these changes when you make the denormalized table for ERDDAP. Thus, you don&#x27;t have to make any changes to your tables.<br>
<!-- --> </li>
<li>ERDDAP™ will recreate some of the structure of the normalized tables.<br>
<!-- -->You can specify which columns of data come from the &#x27;outer&#x27; tables and therefore have a limited number of distinct values. ERDDAP™ will collect all of the different combinations of values in these columns and present them to users on a special .subset web page that helps users quickly select subsets of the dataset. The distinct values for each column are also shown in drop-down lists on the dataset&#x27;s other web pages.<br>
<!-- --> </li>
<li>A denormalized table makes the data hand-off from you to the ERDDAP administrator easy.<br>
<!-- -->You&#x27;re the expert for this dataset, so it makes sense that you make the decisions about which tables and which columns to join and how to join them. So you don&#x27;t have to hand us (or worse, the end users) several tables and detailed instructions for how to join them, you just have to give us access to the denormalized table.<br>
<!-- --> </li>
<li>A denormalized table allows for efficient access to the data.<br>
<!-- -->The denormalized form is usually faster to access than the normalized form. Joins can be slow. Multiple joins can be very slow.<br>
<!-- --> </li>
</ul>
<p>In order to get the data from two or more tables in the database into ERDDAP™, there are three options:<br>
<!-- --> </p>
<ul>
<li>
<p>Recommended Option:<br>
<!-- -->You can create a comma- or tab-separated-value file with the data from the denormalized table.<br>
<!-- -->If the dataset is huge, then it makes sense to create several files, each with a cohesive subset of the denormalized table (for example, data from a smaller time range).</p>
<p>The big advantage here is that ERDDAP™ will be able to handle user requests for data without any further effort by your database. So ERDDAP™ won&#x27;t be a burden on your database or a security risk. This is the best option under almost all circumstances because ERDDAP™ can usually get data from files faster than from a database (if we convert the .csv files to .ncCF files). (Part of the reason is that ERDDAP+files is a read-only system and doesn&#x27;t have to deal with making changes while providing <a href="https://en.wikipedia.org/wiki/ACID" target="_blank" rel="noopener noreferrer">ACID</a> (Atomicity, Consistency, Isolation, Durability).) Also, you probably won&#x27;t need a separate server since we can store the data on one of our RAIDs and access it with an existing ERDDAP™ on an existing server.</p>
</li>
<li>
<p>Okay Option:<br>
<!-- -->You set up a new database on a different computer with just the denormalized table.<br>
<!-- -->Since that database can be a free and open source database like MariaDB, MySQL, and PostgreSQL, this option needn&#x27;t cost a lot.</p>
<p>The big advantage here is that ERDDAP™ will be able to handle user requests for data without any further effort by your current database. So ERDDAP™ won&#x27;t be a burden on your current database. This also eliminates a lot of security concerns since ERDDAP™ will not have access to your current database.</p>
</li>
<li>
<p>Discouraged Option:<br>
<!-- -->We can connect ERDDAP™ to your current database.<br>
<!-- -->To do this, you need to:</p>
<ul>
<li>Create a separate table or view with the denormalized table of data.</li>
<li>Create an &quot;erddap&quot; user who has read-only access to only the denormalized table(s).<br>
<!-- --> </li>
</ul>
<p>This is an option if the data changes very frequently and you want to give ERDDAP™ users instant access to those changes; however, even so, it may make sense to use the file option above and periodically (every 30 minutes?) replace the file that has today&#x27;s data.<br>
<!-- -->The huge disadvantages of this approach are that ERDDAP™ user requests will probably place an unbearably large burden on your database and that the ERDDAP™ connection is a security risk (although we can minimize/manage the risk).</p>
</li>
</ul>
<p>Making the denormalized table or view for ERDDAP™ is a good opportunity to make a few changes that ERDDAP™ needs, in a way that doesn&#x27;t affect your original tables:</p>
<ul>
<li>Change the date and timestamp fields/columns to use the dataType that Postgres calls <a href="#database-date-time-data">timestamp with time zone</a> (or the equivalent in your database).<br>
<!-- -->Timestamps without time zone information don&#x27;t work correctly in ERDDAP.</li>
<li>Make indexes for the columns that users often search.</li>
<li>Be very aware of <a href="#quotes-for-names-and-case-sensitivity">the case of the field/column names</a> (for example, use all lowercase) when you type them.</li>
<li>Don&#x27;t use reserved words for the table and for the field/column names.</li>
</ul>
<p>If you need help making the denormalized table or view, please contact your database administrator.<br>
<!-- -->If you want to talk about this whole approach or strategize how best to do it, please email Chris.John at noaa.gov .</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="database-in-datasetsxml">database in datasets.xml<a href="#database-in-datasetsxml" class="hash-link" aria-label="Direct link to database in datasets.xml" title="Direct link to database in datasets.xml">​</a></h4>
<p>It is difficult to create the correct datasets.xml information needed for ERDDAP™ to establish a connection to the database. Be patient. Be methodical.</p>
<ul>
<li>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. You can then edit that to fine tune it.</li>
</ul>
<p>GenerateDatasetsXml has three special options for EDDTableFromDatabase:</p>
<ol>
<li>If you enter &quot;!!!LIST!!!&quot; (without the quotes) for the catalog name, the program will display a list of the catalog names.</li>
<li>If you enter &quot;!!!LIST!!!&quot; (without the quotes) for the schema name, the program will display a list of the schema names.</li>
<li>If you enter &quot;!!!LIST!!!&quot; (without the quotes) for the tablename, the program will display a list of tables and their columns.The first &quot;!!!LIST!!!&quot; entry that you make is the one that will be used.</li>
</ol>
<ul>
<li>Carefully read all of this document&#x27;s information about EDDTableFromDatabase.</li>
<li>You can gather most of the information you need to create the XML for an EDDTableFromDatabase dataset by contacting the database administrator and by searching the web.</li>
<li>Although databases often treat column names and table names in a case-insensitive way, they are case-sensitive in ERDDAP. So if an error message from the database says that a column name is unknown (for example, &quot;Unknown identifier=&#x27;<em>column_name</em>&#x27;&quot;) even though you know it exists, try using all capitals, for example, <em>COLUMN_NAME</em>, which is often the true, case-sensitive version of the column name.</li>
<li>Work closely with the database administrator, who may have relevant experience. If the dataset fails to load, read the <a href="#troubleshooting-tips">error message</a> carefully to find out why.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="jdbc-driver">JDBC Driver<a href="#jdbc-driver" class="hash-link" aria-label="Direct link to JDBC Driver" title="Direct link to JDBC Driver">​</a></h4>
<ul>
<li>
<p><a href="#jdbc-driver">JDBC Driver and &lt;driverName&gt;</a> -- You must get the appropriate JDBC 3 or JDBC 4 driver .jar file for your database and<br>
<!-- -->put it in <em>tomcat</em>/webapps/erddap/WEB-INF/lib after you install ERDDAP. Then, in your datasets.xml for this dataset, you must specify the &lt;driverName&gt; for this driver, which is (unfortunately) different from the filename. Search on the web for the JDBC driver for your database and the driverName that Java needs to use it.</p>
<ul>
<li>For MariaDB, try <a href="https://mariadb.com/kb/en/about-the-mariadb-java-client/" target="_blank" rel="noopener noreferrer">https://mariadb.com/kb/en/about-the-mariadb-java-client/</a><br>
<!-- -->The &lt;driverName&gt; to use in datasets.xml (see below) is probably org.mariadb.jdbc.Driver .</li>
<li>For MySQL and Amazon RDS, try <a href="https://dev.mysql.com/downloads/connector/j/" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/downloads/connector/j/</a><br>
<!-- -->The &lt;driverName&gt; to use in datasets.xml (see below) is probably com.mysql.jdbc.Driver .</li>
<li>For Oracle, try <a href="https://www.oracle.com/database/technologies/appdev/jdbc-downloads.html" target="_blank" rel="noopener noreferrer">https://www.oracle.com/database/technologies/appdev/jdbc-downloads.html</a>.<br>
<!-- -->The &lt;driverName&gt; to use in datasets.xml (see below) is probably oracle.jdbc.driver.OracleDriver .</li>
<li>For Postgresql, we got the JDBC 4 driver from <a href="https://mvnrepository.com/artifact/org.postgresql/postgresql" target="_blank" rel="noopener noreferrer">https://mvnrepository.com/artifact/org.postgresql/postgresql</a><br>
<!-- -->The &lt;driverName&gt; to use in datasets.xml (see below) is probably org.postgresql.Driver .</li>
<li>For SQL Server, you can get the JTDS JDBC driver from <a href="https://jtds.sourceforge.net" target="_blank" rel="noopener noreferrer">https://jtds.sourceforge.net</a>.<br>
<!-- -->The &lt;driverName&gt; to use in datasets.xml (see below) is probably net.sourceforge.jtds.jdbc.Driver .</li>
</ul>
<p>After you put the JDBC driver .jar in ERDDAP™ lib directory, you need to add a reference to that .jar file in the .bat and/or .sh script files for GenerateDatasetsXml, DasDds, and ArchiveADataset which are in the <em>tomcat</em>/webapps/erddap/WEB-INF/ directory; otherwise, you&#x27;ll get a ClassNotFoundException when you run those scripts.</p>
<p>Unfortunately, JDBC is sometimes the source of trouble. In its role as intermediary between ERDDAP™ and the database, it sometimes makes subtle changes to the standard/generic database SQL request that ERDDAP™ creates, thereby causing problems (for example, related to <a href="#quotes-for-names-and-case-sensitivity">upper/lowercase identifiers</a> and related to <a href="#database-date-time-data">date/time timezones</a>). Please be patient, read the information here carefully, check your work, and see our <a href="/docs/intro#support">section on getting additional support</a>.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="database-connectionproperty">Database &lt;connectionProperty&gt;<a href="#database-connectionproperty" class="hash-link" aria-label="Direct link to Database &lt;connectionProperty&gt;" title="Direct link to Database &lt;connectionProperty&gt;">​</a></h4>
<ul>
<li><a href="#database-connectionproperty">&lt;connectionProperty&gt;</a> -- In the datasets.xml for your dataset, you must define several connectionProperty tags to tell ERDDAP™ how to connect to your database (for example, to specify the user name, password, ssl connection, and <a href="#set-the-fetch-size">fetch size</a>). These are different for every situation and are a little hard to figure out. Search the web for examples of using a JDBC driver to connect to your database. The &lt;connectionProperty&gt; names (for example, &quot;user&quot;, &quot;password&quot;, and &quot;ssl&quot;), and some of the connectionProperty values can be found by searching the web for &quot;JDBC connection properties <em>databaseType</em>&quot; (for example, Oracle, MySQL, Amazon RDS, MariaDB, PostgreSQL).<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="quotes-for-names-and-case-sensitivity">Quotes for Names and Case Sensitivity<a href="#quotes-for-names-and-case-sensitivity" class="hash-link" aria-label="Direct link to Quotes for Names and Case Sensitivity" title="Direct link to Quotes for Names and Case Sensitivity">​</a></h4>
<ul>
<li>
<p><a href="#quotes-for-names-and-case-sensitivity">Quotes for Field/Column Names; Case Sensitivity</a> - By default, EDDTableFromDatabase puts ANSI-SQL-standard double quotes around field/column names in SELECT statements in case you have used a reserved word as a field/column name, or a special character in a field/column name. The double quotes also thwart certain types of SQL injection attacks. You can tell ERDDAP™ to use &quot;, &#x27;, or no quotes via &lt;columnNameQuotes&gt; in datasets.xml for this dataset.</p>
<p>For many databases, using any type of quotes causes the database to work with field/column names in a case sensitive way (instead of the default database case insensitive way). Databases often display file/column names as all upper-case, when in reality the case sensitive form is different. In ERDDAP™, please always treat database column names as case sensitive.</p>
<ul>
<li>For MariaDB, you need to run the database with <a href="https://mariadb.com/kb/en/mysql-command-line-client/" target="_blank" rel="noopener noreferrer">--sql-mode=ANSI_QUOTES</a> .</li>
<li>For MySQL and Amazon RDS, you need to run the database with <a href="https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html#sqlmode_ansi_quotes" target="_blank" rel="noopener noreferrer">--sql-mode=ANSI_QUOTES</a> .</li>
<li>Oracle supports ANSI-SQL-standard double quotes <a href="https://docs.oracle.com/database/121/SQLRF/sql_elements008.htm#SQLRF00223" target="_blank" rel="noopener noreferrer">by default</a>.</li>
<li>PostgreSQL supports ANSI-SQL-standard double quotes by default.</li>
</ul>
<p>Don&#x27;t use a reserved word for a database, catalog, schema or table&#x27;s name. ERDDAP™ doesn&#x27;t put quotes around them.</p>
<p>If possible, use all lower-case for database, catalog, schema, table names and field names when creating the database table (or view) and when referring to the field/column names in datasets.xml in ERDDAP. Otherwise, you may get an error message saying the database, catalog, schema, table, and/or field wasn&#x27;t found. If you do get that error message, try using the case-sensitive version, the all upper-case version, and the all lower-case version of the name in ERDDAP. One of them may work. If not, you need to change the name of database, catalog, schema, and/or table to all lower-case.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="database-datatype">Database &lt;dataType&gt;<a href="#database-datatype" class="hash-link" aria-label="Direct link to Database &lt;dataType&gt;" title="Direct link to Database &lt;dataType&gt;">​</a></h4>
<ul>
<li><a href="#database-datatype">Database</a> <a href="#datatype">&lt;dataType&gt;</a> Tags -- Because there is some ambiguity about which <a href="https://www.w3schools.com/sql/sql_datatypes_general.asp" target="_blank" rel="noopener noreferrer">database data types</a> map to which ERDDAP™ data types, you need to specify a <a href="#datatype">&lt;dataType&gt;</a> tag for each <a href="#datavariable">&lt;dataVariable&gt;</a> to tell ERDDAP™ which dataType to use. Part of the problem is that different datasets use different terms for the various data types -- so always try to match the definitions, not just the names. See the description of the <a href="#data-types">standard ERDDAP™ dataTypes</a>, which includes references to the corresponding SQL data types. <a href="#database-date-time-data">Date and timestamp</a> are special cases: use ERDDAP&#x27;s double dataType.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="database-date-time-data">Database Date Time Data<a href="#database-date-time-data" class="hash-link" aria-label="Direct link to Database Date Time Data" title="Direct link to Database Date Time Data">​</a></h4>
<p>Some database date time columns have no explicit time zone. Such columns are trouble for ERDDAP. Databases support the concept of a date (with or without a time) without a time zone, as an approximate range of time. But Java (and thus ERDDAP) only deals with instantaneous date+times with a timezone. So you may know that the date time data is based on a local time zone (with or without daylight saving time) or the GMT/Zulu time zone, but Java (and ERDDAP) don&#x27;t. We originally thought we could work around this problem (e.g, by specifying a time zone for the column), but the database+JDBC+Java interactions made this an unreliable solution.</p>
<ul>
<li>
<p>So, ERDDAP™ requires that you store all date and date time data in the database table with a database data type that corresponds to the JDBC type &quot;timestamp with time zone&quot; (ideally, that uses the GMT/Zulu time zone).</p>
</li>
<li>
<p>In ERDDAP&#x27;s datasets.xml, in the &lt;dataVariable&gt; tag for a timestamp variable, set</p>
<blockquote>
<p>  <a href="#datatype">&lt;dataType&gt;double&lt;/dataType&gt;</a></p>
</blockquote>
<p>and in &lt;addAttributes&gt; set</p>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;att name=&quot;units&quot;&gt;seconds since 1970-01-01T00:00:00Z&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Suggestion: If the data is a time range, it is useful to have the timestamp values refer to the center of the implied time range (for example, noon). For example, if a user has data for 2010-03-26T13:00Z from another dataset and they want the closest data from a database dataset that has data for each day, then the database data for 2010-03-26T12:00Z (representing data for that date) is obviously the best (as opposed to the midnight before or after, where it is less obvious which is best).</li>
<li>ERDDAP™ has a utility to <a href="https://coastwatch.pfeg.noaa.gov/erddap/convert/time.html" target="_blank" rel="noopener noreferrer">Convert a Numeric Time to/from a String Time</a>.</li>
<li>See <a href="https://coastwatch.pfeg.noaa.gov/erddap/convert/time.html#erddap" target="_blank" rel="noopener noreferrer">How ERDDAP Deals with Time</a>.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="integer-nulls-1">Integer nulls<a href="#integer-nulls-1" class="hash-link" aria-label="Direct link to Integer nulls" title="Direct link to Integer nulls">​</a></h4>
<p>Databases support nulls in integer (int, smallint, tinyint) columns, but ERDDAP™ doesn&#x27;t support true nulls.<br>
<!-- -->Database nulls will be converted in ERDDAP™ 127 for byte columns, 255 for ubyte columns, 32767 for short columns, 65535 for ushort columns, 2147483647 for int columns, 4294967295 for uint columns, 9,223,372,036,854,775,807 for long columns, or 18446744073709551615 for ulong columns. If you use those defaults, please identify those missing_values for the dataset&#x27;s users in ERDDAP™ with</p>
<blockquote>
<p>&lt;att name=&quot;_FillValue&quot; <a href="#attributetype">type=&quot;int&quot;</a>&gt;2147483647&lt;/att&gt;</p>
</blockquote>
<p>or</p>
<blockquote>
<p>&lt;att name=&quot;_FillValue&quot; <a href="#attributetype">type=&quot;short&quot;</a>&gt;32767&lt;/att&gt;</p>
</blockquote>
<p>Alternatively, you can use the &quot;missing_value&quot; attribute instead of &quot;_FillValue&quot;.<br>
<!-- -->GenerateDatasetsXml automatically adds these _FillValue attributes when it generates the suggested datasets.xml for database datasets.</p>
<p>For database floating point columns, nulls get converted to NaNs in ERDDAP.<br>
<!-- -->For database data types that are converted to Strings in ERDDAP™, nulls get converted to empty Strings.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="database-security">Database Security<a href="#database-security" class="hash-link" aria-label="Direct link to Database Security" title="Direct link to Database Security">​</a></h4>
<ul>
<li>When working with databases, you need to do things as safely and securely as possible to avoid allowing a malicious user to damage your database or gain access to data they shouldn&#x27;t have access to. ERDDAP™ tries to do things in a secure way, too.<!-- -->
<ul>
<li>Consider replicating, on a different computer, the database and database tables with the data that you want ERDDAP™ to serve. (Yes, for commercial databases like Oracle, this involves additional licensing fees. But for open source databases, like PostgreSQL, MySQL, Amazon RDS, and MariaDB, this costs nothing.) This gives you a high level of security and also prevents ERDDAP™ requests from slowing down the original database.</li>
<li>We encourage you to set up ERDDAP™ to connect to the database as a database user that only has access to the <strong>relevant</strong> database(s) and only has READ privileges.</li>
<li>We encourage you to set up the connection from ERDDAP™ to the database so that it<!-- -->
<ul>
<li>always uses SSL,</li>
<li>only allows connections from one IP address (or one block of addresses) and from the one ERDDAP™ user, and</li>
<li>only transfers passwords in their MD5 hashed form.</li>
</ul>
</li>
<li>[KNOWN PROBLEM]The connectionProperties (including the password!) are stored as plain text in datasets.xml. We haven&#x27;t found a way to allow the administrator to enter the database password during ERDDAP&#x27;s startup in Tomcat (which occurs without user input), so the password must be accessible in a file. To make this more secure:<!-- -->
<ul>
<li>You (the ERDDAP™ administrator) should be the owner of datasets.xml and have READ and WRITE access.</li>
<li>Make a group that includes only user=tomcat. Use chgrp to make that the group for datasets.xml, with just READ privileges.</li>
<li>Use chmod to assign o-rwx privileges (no READ or WRITE access for &quot;other&quot; users) for datasets.xml.</li>
</ul>
</li>
<li>When in ERDDAP™, the password and other connection properties are stored in &quot;private&quot; Java variables.</li>
<li>Requests from clients are parsed and checked for validity before generating the SQL requests for the database.</li>
<li>Requests to the database are made with SQL PreparedStatements, to prevent <a href="https://en.wikipedia.org/wiki/SQL_injection" target="_blank" rel="noopener noreferrer">SQL injection</a>.</li>
<li>Requests to the database are submitted with executeQuery (not executeStatement) to limit requests to be read-only (so attempted SQL injection to alter the database will fail for this reason, too).<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sql">SQL<a href="#sql" class="hash-link" aria-label="Direct link to SQL" title="Direct link to SQL">​</a></h4>
<ul>
<li>Because OPeNDAP&#x27;s tabular data requests were designed to mimic SQL tabular data requests, it is easy for ERDDAP™ to convert tabular data requests into simple SQL PreparedStatements. For example, the ERDDAP™ request</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    time,temperature&amp;time&gt;=2008-01-01T00:00:00Z&amp;time&amp;lt;=2008-02-01T00:00:00Z  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>will be converted into the SQL PreparedStatement</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    SELECT &quot;time&quot;, &quot;temperature&quot; FROM *tableName*  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    WHERE &quot;time&quot; &gt;= 2008-01-01T00:00:00Z AND &quot;time&quot; &amp;lt;= 2008-02-01T00:00:00Z  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ERDDAP™ requests with &amp;distinct() and/or &amp;orderBy(<em>variables</em>) will add DISTINCT and/or ORDER BY <em>variables</em> to the SQL prepared statement. In general, this will greatly slow down the response from the database.<br>
<!-- -->ERDDAP™ logs the PreparedStatement in <a href="/docs/server-admin/additional-information#log">log.txt</a> as</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    statement=*thePreparedStatement*  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will be a text representation of the PreparedStatement, which may be slightly different from the actual PreparedStatement. For example, in the PreparedStatement, times are encoded in a special way. But in the text representation, they appear as ISO 8601 date times.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="database-speed">Database Speed<a href="#database-speed" class="hash-link" aria-label="Direct link to Database Speed" title="Direct link to Database Speed">​</a></h4>
<ul>
<li>Databases can be slow. There are some things you can do:<!-- -->
<ul>
<li>In General -<br>
<!-- -->The nature of SQL is that queries are <a href="https://en.wikipedia.org/wiki/Declarative_programming" target="_blank" rel="noopener noreferrer">declarative</a>. They just specify what the user wants. They don&#x27;t include a specification or hints for how the query is to be handled or optimized. So there is no way for ERDDAP™ to generate the query in such a way that it helps the database optimize the query (or in any way specifies how the query is to be handled). In general, it is up to the database administrator to set things up (for example, indexes) to optimize for certain types of queries.</li>
</ul>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="set-the-fetch-size">Set the Fetch Size<a href="#set-the-fetch-size" class="hash-link" aria-label="Direct link to Set the Fetch Size" title="Direct link to Set the Fetch Size">​</a></h5>
<p>Databases return the data to ERDDAP™ in chunks. By default, different databases return a different number of rows in the chunks. Often this number is very small and so very inefficient. For example, the default for Oracle is 10! Read the JDBC documentation for your database&#x27;s JDBC driver to find the connection property to set in order to increase this, and add this to the dataset&#x27;s description in datasets.xml. For example,<br>
<!-- -->For MySQL and Amazon RDS, use</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;connectionProperty name=&quot;defaultFetchSize&quot;&gt;10000&lt;/connectionProperty&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For MariaDB, there is currently no way to change the fetch size. But it is a requested feature, so search the web to see if this has been implemented.<br>
<!-- -->For Oracle, use</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;connectionProperty name=&quot;defaultRowPrefetch&quot;&gt;10000&lt;/connectionProperty&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For PostgreSQL, use</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;connectionProperty name=&quot;defaultRowFetchSize&quot;&gt;10000&lt;/connectionProperty&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>but feel free to change the number. Setting the number too big will cause ERDDAP™ to use lots of memory and be more likely to run out of memory.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="connectionproperties">ConnectionProperties<a href="#connectionproperties" class="hash-link" aria-label="Direct link to ConnectionProperties" title="Direct link to ConnectionProperties">​</a></h4>
<p>Each database has other connection properties which can be specified in datasets.xml. Many of these will affect the performance of the database to ERDDAP™ connection. Please read the documentation for your database&#x27;s JDBC driver to see the options. If you find connection properties that are useful, please send an email with the details to erd dot data at noaa dot gov.</p>
<ul>
<li>Make a Table --<br>
<!-- -->You will probably get faster responses if you periodically (everyday? whenever there is new data?) generate an actual table (similarly to how you generated the VIEW) and tell ERDDAP™ to get data from the table instead of the VIEW. Since any request to the table can then be fulfilled without JOINing another table, the response will be much faster.</li>
<li>Vacuum the Table -<br>
<!-- -->MySQL and Amazon RDS will respond much faster if you use <a href="https://dev.mysql.com/doc/refman/5.7/en/optimize-table.html" target="_blank" rel="noopener noreferrer">OPTIMIZE TABLE</a>.<br>
<!-- -->MariaDB will respond much faster if you use <a href="https://mariadb.com/kb/en/optimize-table/" target="_blank" rel="noopener noreferrer">OPTIMIZE TABLE</a>.<br>
<!-- -->PostgreSQL will respond much faster if you <a href="https://www.postgresql.org/docs/8.3/static/sql-vacuum.html" target="_blank" rel="noopener noreferrer">VACUUM</a> the table.<br>
<!-- -->Oracle doesn&#x27;t have or need an analogous command.</li>
<li>Make <a href="https://en.wikipedia.org/wiki/Database_index" target="_blank" rel="noopener noreferrer">Indexes</a> for Commonly Constrained Variables --<br>
<!-- -->You can speed up many/most queries by creating indexes in the database for the variables (which databases call &quot;columns&quot;) that are often constrained in the user&#x27;s query. In general, these are the same variables specified by <a href="#subsetvariables">&lt;subsetVariables&gt;</a> and/or the latitude, longitude, and time variables.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="use-connection-pooling">Use Connection Pooling<a href="#use-connection-pooling" class="hash-link" aria-label="Direct link to Use Connection Pooling" title="Direct link to Use Connection Pooling">​</a></h5>
<p>Normally, ERDDAP™ makes a separate connection to the database for each request. This is the most reliable approach. The faster alternative is to use a DataSource which supports connection pooling. To set it up, specify (for example)</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dataSourceName&gt;java:comp/env/jdbc/postgres/erddap&lt;/dataSourceName&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>right next to &lt;sourceUrl&gt;, &lt;driverName&gt;, and &lt;connectionProperty&gt;.<br>
<!-- -->And in <em>tomcat</em>/conf/context.xml, define a resource with the same information, for example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;Resource  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        name=&quot;jdbc/postgres/erddap&quot; auth=&quot;Container&quot; type=&quot;javax.sql.DataSource&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        driverClassName=&quot;org.postgresql.Driver&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        url=&quot;*jdbc:postgresql://somehost:5432/myDatabaseName*&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        username=&quot;*myUsername*&quot; password=&quot;*myPassword*&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        initialSize=&quot;0&quot; maxActive=&quot;8&quot; minIdle=&quot;0&quot; maxIdle=&quot;0&quot; maxWait=&quot;-1&quot;/&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>General information about using a DataSource is at <a href="https://docs.oracle.com/javase/tutorial/jdbc/basics/sqldatasources.html" target="_blank" rel="noopener noreferrer">https://docs.oracle.com/javase/tutorial/jdbc/basics/sqldatasources.html</a>.<br>
<!-- -->See <a href="https://tomcat.apache.org/tomcat-7.0-doc/jndi-resources-howto.html#JDBC_Data_Sources" target="_blank" rel="noopener noreferrer">Tomcat DataSource information</a> and <a href="https://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html" target="_blank" rel="noopener noreferrer">Tomcat DataSource examples</a> or search the web for examples of using DataSources with other application servers.</p>
<ul>
<li>If all else fails,<br>
<!-- -->consider storing the data in a collection of NetCDF v3 .nc files (especially .nc files that use the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#discrete-sampling-geometries" target="_blank" rel="noopener noreferrer">CF Discrete Sampling Geometries (DSG)</a> Contiguous Ragged Array data structures and so can be handled with ERDDAP&#x27;s <a href="#eddtablefromnccffiles">EDDTableFromNcCFFiles</a>). If they are logically organized (each with data for a chunk of space and time), ERDDAP™ can extract data from them very quickly.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromdatabase-skeleton-xml">EDDTableFromDatabase skeleton XML<a href="#eddtablefromdatabase-skeleton-xml" class="hash-link" aria-label="Direct link to EDDTableFromDatabase skeleton XML" title="Direct link to EDDTableFromDatabase skeleton XML">​</a></h4>
<blockquote>
<p>  &lt;dataset type=&quot;EDDTableFromDatabase&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      <a href="#sourceurl">&lt;sourceUrl&gt;</a>...&lt;/sourceUrl&gt;<br>
<!-- -->        &lt;!-- The format varies for each type of database, but will be<br>
<!-- -->          something like:<br>
<!-- -->          For MariaDB:    jdbc:mariadb://<em>xxx.xxx.xxx.xxx</em>:3306/<em>databaseName</em><br>
<!-- -->          For MySql       jdbc:mysql://<em>xxx.xxx.xxx.xxx</em>:3306/<em>databaseName</em><br>
<!-- -->          For Amazon RDS: jdbc:mysql://<em>xxx.xxx.xxx.xxx</em>:3306/<em>databaseName</em><br>
<!-- -->          For Oracle:     jdbc:oracle:thin:@<em>xxx.xxx.xxx.xxx</em>:1521:<em>databaseName</em><br>
<!-- -->          For Postgresql: jdbc:postgresql://<em>xxx.xxx.xxx.xxx</em>:5432/<em>databaseName</em><br>
<!-- -->          where <em>xxx.xxx.xxx.xxx</em> is the host computer&#x27;s numeric IP address<br>
<!-- -->          followed by :<em>PortNumber</em> (4 digits), which may be different for your<br>
<!-- -->          database.  REQUIRED. --&gt;<br>
<!-- -->      &lt;<a href="#jdbc-driver">driverName</a>&gt;...&lt;/driverName&gt;<br>
<!-- -->        &lt;!-- The high-level name of the database driver, for example,<br>
<!-- -->          &quot;org.postgresql.Driver&quot;.  You need to put the actual database<br>
<!-- -->          driver .jar file (for example, postgresql.jdbc.jar) in<br>
<!-- -->          <em>tomcat</em>/webapps/erddap/WEB-INF/lib.  REQUIRED. --&gt;<br>
<!-- -->      &lt;<a href="#database-connectionproperty">connectionProperty</a> name=&quot;<em>name</em>&quot;&gt;<em>value</em>&lt;/connectionProperty&gt;<br>
<!-- -->        &lt;!-- The names (for example, &quot;user&quot;, &quot;password&quot;, and &quot;ssl&quot;)<br>
<!-- -->          and values of the properties needed for ERDDAP™ to establish<br>
<!-- -->          the connection to the database.  0 or more. --&gt;<br>
<!-- -->      <a href="#use-connection-pooling">&lt;dataSourceName&gt;</a>...&lt;/dataSourceName&gt;  &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      &lt;catalogName&gt;...&lt;/catalogName&gt;<br>
<!-- -->        &lt;!-- The name of the catalog which has the schema which has the<br>
<!-- -->          table, default = &quot;&quot;.  OPTIONAL.  Some databases don&#x27;t use<br>
<!-- -->          this. --&gt;<br>
<!-- -->      &lt;schemaName&gt;...&lt;/schemaName&gt; &lt;!-- The name of the<br>
<!-- -->        schema which has the table, default = &quot;&quot;.  OPTIONAL. --&gt;<br>
<!-- -->      &lt;tableName&gt;...&lt;/tableName&gt;  &lt;!-- The name of the<br>
<!-- -->        table, default = &quot;&quot;.  REQUIRED. --&gt;<br>
<!-- -->      <a href="#quotes-for-names-and-case-sensitivity">&lt;columnNameQuotes&gt;</a>&lt;columnNameQuotes&gt; &lt;!-- OPTIONAL. Options:<br>
<!-- -->        &quot; (the default), &#x27;, [nothing]. --&gt;<br>
<!-- -->      &lt;orderBy&gt;...&lt;/orderBy&gt;  &lt;!-- A comma-separated list of<br>
<!-- -->        <a href="#sourcename">sourceName</a>s to be used in an ORDER BY clause at the end of the<br>
<!-- -->        every query sent to the database (unless the user&#x27;s request<br>
<!-- -->        includes an &amp;orderBy() filter, in which case the user&#x27;s<br>
<!-- -->        orderBy is used).  The order of the sourceNames is important.<br>
<!-- -->        The leftmost (first) sourceName is most important; subsequent<br>
<!-- -->        sourceNames are only used to break ties.  Only relevant<br>
<!-- -->        sourceNames are included in the ORDER BY clause for a given user<br>
<!-- -->        request.  If this is not specified, the order of the returned<br>
<!-- -->        values is not specified. Default = &quot;&quot;.  OPTIONAL. --&gt;<br>
<!-- -->      <a href="#sourcecanorderby">&lt;sourceCanOrderBy&gt;</a>no(default)|partial|yes&lt;/sourceCanOrderBy&gt;<br>
<!-- -->        &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#sourcecandodistinct">&lt;sourceCanDoDistinct&gt;</a>no(default)|partial|yes&lt;/sourceCanDoDistinct&gt;<br>
<!-- -->        &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#sourceneedsexpandedfp_eq">&lt;sourceNeedsExpandedFP_EQ&gt;</a>true(default)|false&lt;/sourceNeedsExpandedFP_EQ&gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#addvariableswhere">&lt;addVariablesWhere&gt;</a>...&lt;/addVariablesWhere&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->      <a href="#global-attributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#datavariable">&lt;dataVariable&gt;</a>...&lt;/dataVariable&gt; &lt;!-- 1 or more.<br>
<!-- -->        Each dataVariable MUST include a <a href="#datatype">&lt;dataType&gt;</a> tag.<br>
<!-- -->        See <a href="#database-datatype">Database DataTypes</a>.<br>
<!-- -->        For <a href="#database-date-time-data">database date and timestamp columns</a>, set dataType=double and<br>
<!-- -->        units=seconds since 1970-01-01T00:00:00Z --&gt;<br>
<!-- -->  &lt;/dataset&gt;</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromeddgrid">EDDTableFromEDDGrid<a href="#eddtablefromeddgrid" class="hash-link" aria-label="Direct link to EDDTableFromEDDGrid" title="Direct link to EDDTableFromEDDGrid">​</a></h3>
<p><a href="#eddtablefromeddgrid"><strong>EDDTableFromEDDGrid</strong></a> lets you create an EDDTable dataset from any EDDGrid dataset.</p>
<ul>
<li>
<p>Some common reasons for doing this are:</p>
<ul>
<li>This allows the dataset to be queried with OPeNDAP selection constraints, which is a type of &quot;query by value&quot; (which a user may have requested).</li>
<li>The dataset is inherently a tabular dataset.</li>
</ul>
</li>
<li>
<p>The value of the global attribute &quot;maxAxis0&quot; (usually of type=&quot;int&quot;), (the default is 10) will be used to limit the number of axis[0] (usually the &quot;time&quot; axis) values of the enclosed EDDGrid dataset that can be accessed per request for data. If you don&#x27;t want there to be any limit, specify a value of 0. This setting is important because, otherwise, it would be too easy for a user to ask EDDTableFromEDDGrid to look through all of the gridded dataset&#x27;s data. That would take a long time and would almost certainly fail with a timeout error. This is the setting that makes it safe to have EDDTableFromEDDGrid datasets in your ERDDAP without fear that they will lead to an unreasonable use of computing resources.</p>
</li>
<li>
<p>If the enclosed EDDGrid is an <a href="#eddfromerddap">EDDGridFromErddap</a> and the ERDDAP™ is the same ERDDAP, then EDDTableFromEDDGrid will always use the currently available version of the referenced dataset directly. This is a very efficient way for EDDTableFromEDDGrid to access the gridded data.</p>
</li>
<li>
<p>This class&#x27;s <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a> is what counts. The enclosed EDDGrid&#x27;s &lt;reloadEveryNMinutes&gt; is ignored.</p>
</li>
<li>
<p>If a value for <a href="#updateeverynmillis">&lt;updateEveryNMillis&gt;</a> is supplied for this dataset, it is ignored. The enclosed EDDGrid&#x27;s &lt;updateEveryNMillis&gt; is what matters.</p>
</li>
<li>
<p><a href="#generatedatasetsxml">GenerateDatasetsXml</a> has an option for dataset type=EDDTableFromEDDGrid which asks for the URL of an ERDDAP (usually the same ERDDAP) (ending in &quot;/erddap/&quot;) and a regular expression. GenerateDatasetsXml will then generate the XML for an EDDTableFromEDDGrid dataset for each gridded dataset in the ERDDAP™ which has a datasetID which matches the regular expression (use .* to match all datasetIDs for gridded datasets).</p>
<p>The chunk of XML that is generated by GenerateDatasetsXml for each dataset includes:</p>
<ul>
<li>A datasetID which is the EDDGrid&#x27;s datasetID plus &quot;_AsATable&quot;.</li>
<li>A new summary global attribute which is the EDDGrid&#x27;s summary plus a new first paragraph describing what this dataset is.</li>
<li>A new title global attribute which is the EDDGrid&#x27;s title plus &quot;, (As A Table)&quot;.</li>
<li>A new maxAxis0 global attribute with a value of 10.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromeddgrid-skeleton-xml">EDDTableFromEDDGrid skeleton XML<a href="#eddtablefromeddgrid-skeleton-xml" class="hash-link" aria-label="Direct link to EDDTableFromEDDGrid skeleton XML" title="Direct link to EDDTableFromEDDGrid skeleton XML">​</a></h4>
<blockquote>
<p>  &lt;dataset type=&quot;EDDTableFromEDDGrid&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#updateeverynmillis">&lt;updateEveryNMillis&gt;</a>...&lt;/updateEveryNMillis&gt; &lt;!-- 0 or 1.<br>
<!-- -->        For EDDTableFromEDDGrid, this calls lowUpdate() of the underlying<br>
<!-- -->        EDDGrid. --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#addvariableswhere">&lt;addVariablesWhere&gt;</a>...&lt;/addVariablesWhere&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->      <a href="#global-attributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt;  &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#eddgrid">&lt;dataset&gt;</a>...&lt;/dataset&gt; &lt;!-- 1<br>
<!-- -->         Any type of EDDGrid dataset.  You can even use an<br>
<!-- -->         EDDGridFromERDDAP™ to access an independent EDDGrid dataset on<br>
<!-- -->         this server. --&gt;<br>
<!-- -->    &lt;/dataset&gt;</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromfilenames">EDDTableFromFileNames<a href="#eddtablefromfilenames" class="hash-link" aria-label="Direct link to EDDTableFromFileNames" title="Direct link to EDDTableFromFileNames">​</a></h3>
<p><a href="#eddtablefromfilenames"><strong>EDDTableFromFileNames</strong></a> creates a dataset from information about a group of files in the server&#x27;s file system, including a URL for each file so that users can download the files via ERDDAP&#x27;s <a href="https://coastwatch.pfeg.noaa.gov/erddap/files/documentation.html" target="_blank" rel="noopener noreferrer">&quot;files&quot; system</a>. Unlike all of the <a href="#eddtablefromfiles">EDDTableFromFiles</a> subclasses, this dataset type does not serve data from within the files.</p>
<ul>
<li>EDDTableFromFileNames is useful when:<!-- -->
<ul>
<li>You have a group of files that you want to distribute as whole files because they don&#x27;t contain &quot;data&quot; in the same way that regular data files have data. For example, image files, video files, Word documents, Excel spreadsheet files, PowerPoint presentation files, or text files with unstructured text.</li>
<li>You have a group of files which have data in a format that ERDDAP™ can&#x27;t yet read. For example, a project-specific, custom, binary format.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromfilenames-data">EDDTableFromFileNames Data<a href="#eddtablefromfilenames-data" class="hash-link" aria-label="Direct link to EDDTableFromFileNames Data" title="Direct link to EDDTableFromFileNames Data">​</a></h4>
<ul>
<li><a href="#eddtablefromfilenames-data">The data in an EDDTableFromFileNames dataset</a> is a table that ERDDAP™ creates on-the-fly with information about a group of local files. In the table, there is a row for each file. Four special attributes in the <a href="#eddtablefromfilenames-skeleton-xml">datasets.xml for this dataset</a> determine which files will be included in this dataset:</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="filedir">fileDir<a href="#filedir" class="hash-link" aria-label="Direct link to fileDir" title="Direct link to fileDir">​</a></h5>
<ul>
<li>
<p>&lt;fileDir&gt; -- This specifies the source directory in the server&#x27;s file system with the files for this dataset. The files that are actually located in the server&#x27;s file system in &lt;fileDir&gt; will appear in the url column of this dataset within a virtual directory named https://<em>serverUrl</em>/erddap/files/<em>datasetID/</em> .<br>
<!-- -->For example, if the datasetID is jplMURSST,<br>
<!-- -->and the &lt;fileDir&gt; is /home/data/mur/ ,<br>
<!-- -->and that directory has a file named jplMURSST20150103000000.png,<br>
<!-- -->then the URL that will be shown to users for that file will be<br>
<!-- -->https://<em>serverUrl</em>/erddap/jplMURSST/jplMURSST20150103000000.png .</p>
<p>In addition to using a local directory for the &lt;fileDir&gt;, you can also specify the URL of a remote, directory-like web page. This works with:</p>
<ul>
<li>Unaggregated datasets in THREDDS, e.g.,<br>
<a href="https://data.nodc.noaa.gov/thredds/catalog/aquarius/nodc%5C_binned%5C_V3.0/monthly/" target="_blank" rel="noopener noreferrer">https://data.nodc.noaa.gov/thredds/catalog/aquarius/nodc\_binned\_V3.0/monthly/</a> [2020-10-21 This server is no longer reliably available.]</li>
<li>Unaggregated datasets in Hyrax, e.g.,<br>
<a href="https://podaac-opendap.jpl.nasa.gov/opendap/allData/ccmp/L3.5a/monthly/flk/" target="_blank" rel="noopener noreferrer">https://podaac-opendap.jpl.nasa.gov/opendap/allData/ccmp/L3.5a/monthly/flk/</a></li>
<li>Most Apache-like directory listings, e.g.,<br>
<a href="https://www1.ncdc.noaa.gov/pub/data/cmb/ersst/v5/netcdf/" target="_blank" rel="noopener noreferrer">https://www1.ncdc.noaa.gov/pub/data/cmb/ersst/v5/netcdf/</a></li>
</ul>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="fromonthefly">fromOnTheFly<a href="#fromonthefly" class="hash-link" aria-label="Direct link to fromOnTheFly" title="Direct link to fromOnTheFly">​</a></h5>
<p><a href="#fromonthefly">***fromOnTheFly</a> -- For some huge S3 buckets (like noaa-goes17, which has 26 million files), it may take ERDDAP™ up to 12 hours to download all the information about the contents of the bucket (and then there are other problems). To get around this, there is a special way to use &lt;fileDir&gt; in EDDTableFromFileNames to make a dataset with the directory and file names from an AWS S3 bucket. The dataset won&#x27;t have the list of all of the S3 bucket&#x27;s directories and file names that a user can search via requests to the dataset. But the dataset will get the names of directories and files on-the-fly if the user traverses the directory hierarchy with the dataset&#x27;s &quot;files&quot; option. Thus, this allows users to browse the S3 bucket&#x27;s file hierarchy and files via the dataset&#x27;s &quot;files&quot; system. To do this, instead of specifying the URL for the S3 bucket as the &quot;Starting directory&quot; (in GenerateDatasetsXml) or &lt;fileDir&gt; (in datasets.xml), use:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">\*\*\*fromOnTheFly,*theS3BucketUrl*  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>for example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">\*\*\*fromOnTheFly,https://noaa-goes17.s3.us-east-1.amazonaws.com/  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>See the documentation for <a href="#working-with-aws-s3-files">working with S3 Buckets in ERDDAP™</a>, notably the description of the specific format that must be used for S3 bucket URL. And see<br>
<a href="#making-an-eddtablefromfilenames-dataset-with-an-aws-s3-bucket">these details and an example</a> of using ***fromOnTheFly.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="recursive">recursive<a href="#recursive" class="hash-link" aria-label="Direct link to recursive" title="Direct link to recursive">​</a></h5>
<ul>
<li>&lt;recursive&gt; -- Files in subdirectories of &lt;fileDir&gt; with names which match &lt;fileRegex&gt; will appear in the same subdirectories in the &quot;files&quot; URL if &lt;recursive&gt; is set to true. The default is false.</li>
<li><a href="#pathregex">&lt;pathRegex&gt;</a> -- If recursive=true, Only directory names which match the pathRegex (default=&quot;.*&quot;) will be accepted. If recursive=false, this is ignored. This is rarely used, but can be very useful in unusual circumstances. (See this <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" target="_blank" rel="noopener noreferrer">regex documentation</a> and <a href="https://www.vogella.com/tutorials/JavaRegularExpressions/article.html" target="_blank" rel="noopener noreferrer">regex tutorial</a>.)</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="fileregex">fileRegex<a href="#fileregex" class="hash-link" aria-label="Direct link to fileRegex" title="Direct link to fileRegex">​</a></h5>
<ul>
<li>&lt;fileRegex&gt; -- Only the filenames where the whole filename (not including the directory name) match the &lt;fileRegex&gt; will be included in this dataset. For example, jplMURSST.<!-- -->14<!-- -->\.png . (See this <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" target="_blank" rel="noopener noreferrer">regex documentation</a> and <a href="https://www.vogella.com/tutorials/JavaRegularExpressions/article.html" target="_blank" rel="noopener noreferrer">regex tutorial</a>.)<br>
<!-- --> </li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="from-file-names-data-table-contents">From File Names Data table Contents<a href="#from-file-names-data-table-contents" class="hash-link" aria-label="Direct link to From File Names Data table Contents" title="Direct link to From File Names Data table Contents">​</a></h5>
<p>In the table, there will be columns with:</p>
<ul>
<li>
<p>url -- The URL that users can use to download the file via ERDDAP&#x27;s <a href="https://coastwatch.pfeg.noaa.gov/erddap/files/documentation.html" target="_blank" rel="noopener noreferrer">&quot;files&quot; system</a>.</p>
</li>
<li>
<p>name -- The file&#x27;s name (without a directory name).</p>
</li>
<li>
<p>lastModified -- The time the file was last modified (stored as doubles with &quot;seconds since 1970-01-01T00:00:00Z&quot;). This variable is useful because users can see if/when the contents of a given file last changed. This variable is a <a href="#timestamp-variables">timeStamp variable</a>, so the data may appear as numeric values (seconds since 1970-01-01T00:00:00Z) or a String value (ISO 8601:2004(E) format), depending on the situation.</p>
</li>
<li>
<p>size -- The size of the file in bytes, stored as doubles. They are stored as doubles because some files may be larger than ints allow and longs are not supported in some response file types. Doubles will give the exact size, even for very large files.</p>
</li>
<li>
<p>addition columns defined by the ERDDAP™ administrator with information extracted from the filename (for example, the time associated with the data in the file) based on two attributes that you specify in the metadata for each additional column/dataVariable:</p>
<ul>
<li>extractRegex -- This is a <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" target="_blank" rel="noopener noreferrer">regular expression</a> (<a href="https://www.vogella.com/tutorials/JavaRegularExpressions/article.html" target="_blank" rel="noopener noreferrer">tutorial</a>). The entire regex must match the entire filename (not including the directory name). The regex must include at least one capture group (a section of a regular expression that is enclosed by parentheses) which ERDDAP™ uses to determine which section of the filename to extract to become data.</li>
<li>extractGroup -- This is the number of the capture group (#1 is the first capture group) in the regular expression. The default is 1. A capture group is a section of a regular expression that is enclosed by parentheses.</li>
</ul>
<p>Here are two examples:</p>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;dataVariable&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;sourceName&gt;time&lt;/sourceName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;destinationName&gt;time&lt;/destinationName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;dataType&gt;String&lt;/dataType&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;addAttributes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;att name=&quot;extractRegex&quot;&gt;jplMURSST(.{14})\\.png&lt;/att&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;att name=&quot;extractGroup&quot; type=&quot;int&quot;&gt;1&lt;/att&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;att name=&quot;units&quot;&gt;yyyyMMddHHmmss&lt;/att&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/addAttributes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/dataVariable&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;dataVariable&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;sourceName&gt;day&lt;/sourceName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;destinationName&gt;day&lt;/destinationName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;dataType&gt;int&lt;/dataType&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;addAttributes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;att name=&quot;extractRegex&quot;&gt;jplMURSST.{6}(..).{6}\\.png&lt;/att&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;att name=&quot;extractGroup&quot; type=&quot;int&quot;&gt;1&lt;/att&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;att name=&quot;ioos\_category&quot;&gt;Time&lt;/att&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;/addAttributes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/dataVariable&gt; </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the case of the time variable, if a file has the name jplMURSST20150103000000.png, the extractRegex will match the filename, extract the characters which match the first capture group (&quot;20150103000000&quot;) as dataType=String, then use the <a href="#string-time-units">units suitable for string times</a> to parse the strings into time data values (2015-01-03T00:00:00Z).</p>
<p>In the case of the day variable, if a file has the name jplMURSST20150103000000.png, the extractRegex will match the filename, extract the characters which match the first capture group (&quot;03&quot;) as <a href="#datatype">&lt;dataType&gt;</a>=int, yielding a data value of 3.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="other-information">Other Information<a href="#other-information" class="hash-link" aria-label="Direct link to Other Information" title="Direct link to Other Information">​</a></h4>
<ul>
<li>No <a href="#updateeverynmillis">&lt;updateEveryNMillis&gt;</a> -- This type of dataset doesn&#x27;t need and can&#x27;t use the &lt;updateEveryNMillis&gt; tag because the information served by EDDTableFromFileNames is always perfectly up-to-date because ERDDAP™ queries the file system in order to respond to each request for data. Even if there are a huge number of files, this approach should work reasonably well. A response may be slow if there are a huge number of files and the dataset hasn&#x27;t been queried for a while. But for several minutes after that, the operating system keeps the information in a cache, so responses should be very fast.<br>
<!-- --> </li>
<li>You can use the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make the datasets.xml chunk for this type of dataset. You can add/define additional columns with information extracted from the filename, as shown above.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromfilenames-skeleton-xml">EDDTableFromFileNames skeleton XML<a href="#eddtablefromfilenames-skeleton-xml" class="hash-link" aria-label="Direct link to EDDTableFromFileNames skeleton XML" title="Direct link to EDDTableFromFileNames skeleton XML">​</a></h4>
<blockquote>
<p>  &lt;dataset type=&quot;EDDTableFromFileNames&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#addvariableswhere">&lt;addVariablesWhere&gt;</a>...&lt;/addVariablesWhere&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->      <a href="#eddtablefromfilenames-data">&lt;fileDir&gt;</a>...&lt;/fileDir&gt;<br>
<!-- -->      <a href="#eddtablefromfilenames-data">&lt;recursive&gt;</a>...&lt;/recursive&gt;  &lt;!-- true or false (the default) --&gt;<br>
<!-- -->      <a href="#pathregex">&lt;pathRegex&gt;</a>...&lt;/pathRegex&gt;  &lt;!-- 0 or 1. Only directory names which<br>
<!-- -->        match the pathRegex (default=&quot;.*&quot;) will be accepted. --&gt;<br>
<!-- -->      <a href="#eddtablefromfilenames-data">&lt;fileNameRegex&gt;</a>...&lt;/fileNameRegex&gt;<br>
<!-- -->      <a href="#global-attributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#datavariable">&lt;dataVariable&gt;</a>...&lt;/dataVariable&gt; &lt;!-- 1 or more.<br>
<!-- -->         Each dataVariable MUST include <a href="#datatype">&lt;dataType&gt;</a> tag. --&gt;<br>
<!-- -->  &lt;/dataset&gt;</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromfiles">EDDTableFromFiles<a href="#eddtablefromfiles" class="hash-link" aria-label="Direct link to EDDTableFromFiles" title="Direct link to EDDTableFromFiles">​</a></h3>
<p><a href="#eddtablefromfiles"><strong>EDDTableFromFiles</strong></a> is the superclass of all EDDTableFrom...Files classes. You can&#x27;t use EDDTableFromFiles directly. Instead, use a subclass of EDDTableFromFiles to handle the specific file type:</p>
<ul>
<li><a href="#eddtablefromasciifiles">EDDTableFromAsciiFiles</a> aggregates data from comma-, tab-, semicolon-, or space-separated tabular ASCII data files.</li>
<li><a href="#eddfromaudiofiles">EDDTableFromAudioFiles</a> aggregates data from a group of local audio files.</li>
<li><a href="#eddtablefromawsxmlfiles">EDDTableFromAwsXmlFiles</a> aggregates data from a set of Automatic Weather Station (AWS) XML files.</li>
<li><a href="#eddtablefromcolumnarasciifiles">EDDTableFromColumnarAsciiFiles</a> aggregates data from tabular ASCII data files with fixed-width data columns.</li>
<li><a href="#eddtablefromhyraxfiles">EDDTableFromHyraxFiles</a> (DEPRECATED) aggregates data with several variables, each with shared dimensions (for example, time, altitude (or depth), latitude, longitude), and served by a <a href="https://www.opendap.org/software/hyrax-data-server" target="_blank" rel="noopener noreferrer">Hyrax OPeNDAP server</a>.</li>
<li><a href="#eddtablefrominvalidcrafiles">EDDTableFromInvalidCRAFiles</a> aggregates data from NetCDF (v3 or v4) .nc files which use a specific, invalid, variant of the CF DSG Contiguous Ragged Array (CRA) files. Although ERDDAP™ supports this file type, it is an invalid file type that no one should start using. Groups that currently use this file type are strongly encouraged to use ERDDAP™ to generate valid CF DSG CRA files and stop using these files.</li>
<li><a href="#eddtablefromjsonlcsvfiles">EDDTableFromJsonlCSVFiles</a> aggregates data from <a href="https://jsonlines.org/examples/" target="_blank" rel="noopener noreferrer">JSON Lines CSV files</a>.</li>
<li><a href="#eddtablefrommultidimncfiles">EDDTableFromMultidimNcFiles</a> aggregates data from NetCDF (v3 or v4) .nc (or <a href="#ncml-files">.ncml</a>) files with several variables, each with shared dimensions (for example, time, altitude (or depth), latitude, longitude).</li>
<li><a href="#eddtablefromncfiles">EDDTableFromNcFiles</a> aggregates data from NetCDF (v3 or v4) .nc (or <a href="#ncml-files">.ncml</a>) files with several variables, each with shared dimensions (for example, time, altitude (or depth), latitude, longitude). It is fine to continue using this dataset type for existing datasets, but for new datasets we recommend using EDDTableFromMultidimNcFiles instead.</li>
<li><a href="#eddtablefromnccffiles">EDDTableFromNcCFFiles</a> aggregates data from NetCDF (v3 or v4) .nc (or <a href="#ncml-files">.ncml</a>) files which use one of the file formats specified by the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#discrete-sampling-geometries" target="_blank" rel="noopener noreferrer">CF Discrete Sampling Geometries (DSG)</a> conventions. But for files using one of the multidimensional CF DSG variants, use <a href="#eddtablefrommultidimncfiles">EDDTableFromMultidimNcFiles</a> instead.</li>
<li><a href="#eddtablefromnccsvfiles">EDDTableFromNccsvFiles</a> aggregates data from <a href="/docs/user/nccsv-1.00">NCCSV</a> ASCII .csv files.</li>
<li><a href="#eddtablefromparquetfiles">EDDTableFromParquetFiles</a> handles data from <a href="https://parquet.apache.org/" target="_blank" rel="noopener noreferrer">Parquet</a>.</li>
<li><a href="#eddtablefromthreddsfiles">EDDTableFromThreddsFiles</a> (DEPRECATED) aggregates data from files with several variables with shared dimensions served by a <a href="https://www.unidata.ucar.edu/software/tds/" target="_blank" rel="noopener noreferrer">THREDDS OPeNDAP server</a>.</li>
<li><a href="#eddtablefromwfsfiles">EDDTableFromWFSFiles</a> (DEPRECATED) makes a local copy of all of the data from an ArcGIS MapServer WFS server so the data can then be re-served quickly to ERDDAP™ users.</li>
</ul>
<p>Currently, no other file types are supported. But it is usually relatively easy to add support for other file types. Contact us if you have a request. Or, if your data is in an old file format that you would like to move away from, we recommend converting the files to be NetCDF v3 .nc files (and especially .nc files with the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#discrete-sampling-geometries" target="_blank" rel="noopener noreferrer">CF Discrete Sampling Geometries (DSG)</a> Contiguous Ragged Array data structure -- ERDDAP™ can extract data from them very quickly). NetCDF is a widely supported, binary format, allows fast random access to the data, and is already supported by ERDDAP.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="fromfiles-details">FromFiles Details<a href="#fromfiles-details" class="hash-link" aria-label="Direct link to FromFiles Details" title="Direct link to FromFiles Details">​</a></h4>
<p>The following information applies to all of the subclasses of EDDTableFromFiles.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="aggregation">Aggregation<a href="#aggregation" class="hash-link" aria-label="Direct link to Aggregation" title="Direct link to Aggregation">​</a></h5>
<p>This class aggregates data from local files. Each file holds a (relatively) small table of data.</p>
<ul>
<li>The resulting dataset appears as if all of the file&#x27;s tables had been combined (all of the rows of data from file #1, plus all of the rows from file #2, ...).</li>
<li>The files don&#x27;t all have to have all of the specified variables. If a given file doesn&#x27;t have a specified variable, ERDDAP™ will add missing values as needed.</li>
<li>The variables in all of the files MUST have the same values for the <a href="#scale_factor">add_offset</a>, <a href="#missing_value">missing_value</a>, <a href="#missing_value">_FillValue</a>, <a href="#scale_factor">scale_factor</a>, and <a href="#units">units</a> attributes (if any). ERDDAP  ™ checks, but it is an imperfect test -- if there are different values, ERDDAP doesn&#x27;t know which is correct and therefore which files are invalid. If this is a problem, you may be able to use <a href="#ncml-files">NcML</a> or <a href="#netcdf-operators-nco">NCO</a> to fix the problem.<br>
<!-- --> </li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="compressed-files">Compressed Files<a href="#compressed-files" class="hash-link" aria-label="Direct link to Compressed Files" title="Direct link to Compressed Files">​</a></h5>
<p>The source data files for all EDDTableFromFiles subclasses can be externally compressed (e.g., .tgz, .tar.gz, .tar.gzip, .gz, .gzip, .zip, .bz2, or .Z). See the <a href="#externally-compressed-files">Externally Compressed Files documentation</a>.<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="cached-file-information-1">Cached File Information<a href="#cached-file-information-1" class="hash-link" aria-label="Direct link to Cached File Information" title="Direct link to Cached File Information">​</a></h5>
<ul>
<li>When an EDDTableFromFiles dataset is first loaded, EDDTableFromFiles reads information from all of the relevant files and creates tables (one row for each file) with information about each valid file and each &quot;bad&quot; (different or invalid) file.<!-- -->
<ul>
<li>The tables are also stored on disk, as NetCDF v3 .nc files in <em>bigParentDirectory</em>/dataset/<em>last2CharsOfDatasetID</em>/<em>datasetID</em>/ in files named:<br>
<!-- -->  dirTable.nc (which holds a list of unique directory names),<br>
<!-- -->  fileTable.nc (which holds the table with each valid file&#x27;s information),<br>
<!-- -->  badFiles.nc (which holds the table with each bad file&#x27;s information).</li>
<li>To speed up access to an EDDTableFromFiles dataset (but at the expense of using more memory), you can use<br>
<a href="#filetableinmemory">&lt;fileTableInMemory&gt;true&lt;/fileTableInMemory&gt;</a><br>
<!-- -->to tell ERDDAP™ to keep a copy of the file information tables in memory.</li>
<li>The copy of the file information tables on disk is also useful when ERDDAP™ is shut down and restarted: it saves EDDTableFromFiles from having to re-read all of the data files.</li>
<li>When a dataset is reloaded, ERDDAP™ only needs to read the data in new files and files that have changed.</li>
<li>If a file has a different structure from the other files (for example, a different data type for one of the variables, or a different value for the &quot;<a href="#units">units</a>&quot; attribute), ERDDAP adds the file to the list of &quot;bad&quot; files. Information about the problem with the file will be written to the <em>bigParentDirectory</em>/logs/log.txt file.</li>
<li>You shouldn&#x27;t ever need to delete or work with these files. One exception is: if you are still making changes to a dataset&#x27;s datasets.xml setup, you may want to delete these files to force ERDDAP™ to reread all of the files since the files will be read/interpreted differently. If you ever do need to delete these files, you can do it when ERDDAP™ is running. (Then set a <a href="/docs/server-admin/additional-information#set-dataset-flag">flag</a> to reload the dataset ASAP.) However, ERDDAP™ usually notices that the datasets.xml information doesn&#x27;t match the fileTable information and deletes the file tables automatically.</li>
<li>If you want to encourage ERDDAP™ to update the stored dataset information (for example, if you just added, removed, or changed some files to the dataset&#x27;s data directory), use the <a href="/docs/server-admin/additional-information#flag">flag system</a> to force ERDDAP™ to update the cached file information.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="handling-requests-1">Handling Requests<a href="#handling-requests-1" class="hash-link" aria-label="Direct link to Handling Requests" title="Direct link to Handling Requests">​</a></h5>
<ul>
<li>ERDDAP™ tabular data requests can put constraints on any variable.<!-- -->
<ul>
<li>When a client&#x27;s request for data is processed, EDDTableFromFiles can quickly look in the table with the valid file information to see which files might have relevant data. For example, if each source file has the data for one fixed-location buoy, EDDTableFromFiles can very efficiently determine which files might have data within a given longitude range and latitude range.</li>
<li>Because the valid file information table includes the minimum and maximum value of every variable for every valid file, EDDTableFromFiles can often handle other queries quite efficiently. For example, if some of the buoys don&#x27;t have an air pressure sensor, and a client requests data for airPressure!=NaN, EDDTableFromFiles can efficiently determine which buoys have air pressure data.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="updating-the-cached-file-information-1">Updating the Cached File Information<a href="#updating-the-cached-file-information-1" class="hash-link" aria-label="Direct link to Updating the Cached File Information" title="Direct link to Updating the Cached File Information">​</a></h5>
<p>Whenever the dataset is reloaded, the cached file information is updated.</p>
<ul>
<li>The dataset is reloaded periodically as determined by the &lt;reloadEveryNMinutes&gt; in the dataset&#x27;s information in datasets.xml.</li>
<li>The dataset is reloaded as soon as possible whenever ERDDAP™ detects that you have added, removed, <a href="https://en.wikipedia.org/wiki/Touch_(Unix)" target="_blank" rel="noopener noreferrer">touch&#x27;d</a> (to change the file&#x27;s lastModified time), or changed a datafile.</li>
<li>The dataset is reloaded as soon as possible if you use the <a href="/docs/server-admin/additional-information#flag">flag system</a>.</li>
</ul>
<p>When the dataset is reloaded, ERDDAP™ compares the currently available files to the cached file information table. New files are read and added to the valid files table. Files that no longer exist are dropped from the valid files table. Files where the file timestamp has changed are read and their information is updated. The new tables replace the old tables in memory and on disk.<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="bad-files-1">Bad Files<a href="#bad-files-1" class="hash-link" aria-label="Direct link to Bad Files" title="Direct link to Bad Files">​</a></h5>
<p>The table of bad files and the reasons the files were declared bad (corrupted file, missing variables, incorrect axis values, etc.) is emailed to the emailEverythingTo email address (probably you) every time the dataset is reloaded. You should replace or repair these files as soon as possible.<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="missing-variables-1">Missing Variables<a href="#missing-variables-1" class="hash-link" aria-label="Direct link to Missing Variables" title="Direct link to Missing Variables">​</a></h5>
<p>If some of the files don&#x27;t have some of the dataVariables defined in the dataset&#x27;s datasets.xml chunk, that&#x27;s okay. When EDDTableFromFiles reads one of those files, it will act as if the file had the variable, but with all missing values.<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="near-real-time-data">Near Real Time Data<a href="#near-real-time-data" class="hash-link" aria-label="Direct link to Near Real Time Data" title="Direct link to Near Real Time Data">​</a></h5>
<ul>
<li>EDDTableFromFiles treats requests for very recent data as a special case. The problem: If the files making up the dataset are updated frequently, it is likely that the dataset won&#x27;t be updated every time a file is changed. So EDDTableFromFiles won&#x27;t be aware of the changed files. (You could use the <a href="/docs/server-admin/additional-information#flag">flag system</a>, but this might lead to ERDDAP™ reloading the dataset almost continually. So in most cases, we don&#x27;t recommend it.) Instead, EDDTableFromFiles deals with this by the following system: When ERDDAP™ gets a request for data within the last 20 hours (for example, 8 hours ago until Now), ERDDAP™ will search all files which have any data in the last 20 hours. Thus, ERDDAP™ doesn&#x27;t need to have perfectly up-to-date data for all of the files in order to find the latest data. You should still set <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a> to a reasonably small value (for example, 60), but it doesn&#x27;t have to be tiny (for example, 3).<br>
<!-- --> <!-- -->
<ul>
<li>
<p><strong>Not recommended</strong> organization of near-real-time data in the files: If, for example, you have a dataset that stores data for numerous stations (or buoy, or trajectory, ...) for many years, you could arrange the files so that, for example, there is one file per station. But then, every time new data for a station arrives, you have to read a large old file and write a large new file. And when ERDDAP™ reloads the dataset, it notices that some files have been modified, so it reads those files completely. That is inefficient.<br>
<!-- --> </p>
</li>
<li>
<p><strong>Recommended</strong> organization of near-real-time data in the files: Store the data in chunks, for example, all data for one station/buoy/trajectory for one year (or one month). Then, when a new datum arrives, only the file with this year&#x27;s (or month&#x27;s) data is affected.</p>
<ul>
<li>Best: Use NetCDF v3 .nc files with an unlimited dimension (time). Then, to add new data, you can just append the new data without having to read and rewrite the entire file. The change is made very efficiently and essentially atomically, so the file isn&#x27;t ever in an inconsistent state.</li>
<li>Otherwise: If you don&#x27;t/can&#x27;t use .nc files with an unlimited dimension (time), then, when you need to add new data, you have to read and rewrite the entire affected file (hopefully small because it just has a year&#x27;s (or month&#x27;s) worth of data). Fortunately, all of the files for previous years (or months) for that station remain unchanged.</li>
</ul>
<p>In both cases, when ERDDAP™ reloads the dataset, most files are unchanged; only a few, small files have changed and need to be read.<br>
<!-- --> </p>
</li>
</ul>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="directories-1">Directories<a href="#directories-1" class="hash-link" aria-label="Direct link to Directories" title="Direct link to Directories">​</a></h5>
<p>The files can be in one directory, or in a directory and its subdirectories (recursively). If there are a large number of files (for example, &gt;1,000), the operating system (and thus EDDTableFromFiles) will operate much more efficiently if you store the files in a series of subdirectories (one per year, or one per month for datasets with very frequent files), so that there are never a huge number of files in a given directory.<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="remote-directories-and-http-range-requests-1">Remote Directories and HTTP Range Requests<a href="#remote-directories-and-http-range-requests-1" class="hash-link" aria-label="Direct link to Remote Directories and HTTP Range Requests" title="Direct link to Remote Directories and HTTP Range Requests">​</a></h5>
<ul>
<li>
<p><strong>Remote Directories and HTTP Range Requests</strong> (AKA Byte Serving, Byte Range Requests) --<br>
<!-- -->EDDGridFromNcFiles, EDDTableFromMultidimNcFiles, EDDTableFromNcFiles, and EDDTableFromNcCFFiles, can sometimes serve data from .nc files on remote servers and accessed via HTTP if the server supports <a href="https://en.wikipedia.org/wiki/Byte_serving" target="_blank" rel="noopener noreferrer">Byte Serving</a> via HTTP range requests (the HTTP mechanism for byte serving). This is possible because netcdf-java (which ERDDAP™ uses to read .nc files) supports reading data from remote .nc files via HTTP range requests.</p>
<p><strong>Don&#x27;t do this!</strong><br>
<!-- -->Instead, use the <a href="#cachefromurl">&lt;cacheFromUrl&gt; system</a>.</p>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="cachefromurl">CacheFromUrl<a href="#cachefromurl" class="hash-link" aria-label="Direct link to CacheFromUrl" title="Direct link to CacheFromUrl">​</a></h5>
<ul>
<li><a href="#cachefromurl"><strong>&lt;cacheFromUrl&gt;</strong></a> -<br>
<!-- -->All EDDGridFromFiles and all EDDTableFromFiles datasets support a set of tags which tell ERDDAP™ to download and maintain a copy of all of a remote dataset&#x27;s files, or a cache of a few files (downloaded as needed). <strong>This is an incredibly useful feature.</strong>
<ul>
<li>
<p>The &lt;cacheFromUrl&gt; tag lets you specify a URL with a list of a remote dataset&#x27;s files from a remote file list.</p>
<ul>
<li>Unaggregated datasets in THREDDS, e.g.,<br>
<a href="https://data.nodc.noaa.gov/thredds/catalog/aquarius/nodc%5C_binned%5C_V3.0/monthly/" target="_blank" rel="noopener noreferrer">https://data.nodc.noaa.gov/thredds/catalog/aquarius/nodc\_binned\_V3.0/monthly/</a> [2020-10-21 This server is no longer reliably available.]</li>
<li>Unaggregated datasets in Hyrax, e.g.,<br>
<a href="https://podaac-opendap.jpl.nasa.gov/opendap/allData/ccmp/L3.5a/monthly/flk/" target="_blank" rel="noopener noreferrer">https://podaac-opendap.jpl.nasa.gov/opendap/allData/ccmp/L3.5a/monthly/flk/</a></li>
<li>Most Apache-like directory listings, e.g.,<br>
<a href="https://www.ncei.noaa.gov/data/global-precipitation-climatology-project-gpcp-daily/" target="_blank" rel="noopener noreferrer">https://www.ncei.noaa.gov/data/global-precipitation-climatology-project-gpcp-daily/</a></li>
<li>S3 buckets, e.g,<br>
<a href="https://noaa-goes17.s3.us-east-1.amazonaws.com/" target="_blank" rel="noopener noreferrer">https://noaa-goes17.s3.us-east-1.amazonaws.com/</a><br>
<!-- -->However, this may require an AWS account and more setup.<br>
<!-- -->See <a href="#working-with-aws-s3-files">working with S3 Buckets in ERDDAP™</a>.<br>
<!-- -->Also, you usually don&#x27;t need to use cacheFromUrl with files in S3 buckets if the files are ASCII files (e.g., .csv), because ERDDAP™ can efficiently read the data from the bucket directly via a stream.</li>
</ul>
<p>ERDDAP™ will copy or cache these files in the dataset&#x27;s &lt;fileDir&gt; directory. If you need support for another type of remote file list (e.g., FTP), please email your request to Chris.John at noaa.gov .</p>
<ul>
<li>The default value for the &lt;cacheFromUrl&gt; tag is null. If you don&#x27;t specify a value for the &lt;cacheFromUrl&gt; tag, the copy/cache system won&#x27;t be used for this dataset.</li>
<li>If the dataset&#x27;s &lt;fileRegex&gt; setting is something other than .*, ERDDAP™ will only download files that match the fileRegex.</li>
<li>If the dataset&#x27;s &lt;recursive&gt; setting is true and the remote files are in subdirectories, ERDDAP™ will look in remote subdirectories that match the dataset&#x27;s <a href="#pathregex">&lt;pathRegex&gt;</a>, create the same directory structure locally, and put the local files in the same subdirectories.</li>
<li>In GenerateDatasetsXml, if you specify a &lt;cacheFromUrl&gt; value, GenerateDatasetsXml will create the local &lt;fileDir&gt; directory and copy 1 remote file into it. GenerateDatasetsXml will then generate the datasets.xml chunk based on that sample file (specify sampleFile=nothing).</li>
<li>If the data source is a remote ERDDAP™, use <a href="#eddfromerddap">EDDGridFromErddap</a> or <a href="#eddfromerddap">EDDTableFromErddap</a> instead of &lt;cacheFromUrl&gt;. That way, your local ERDDAP™ will appear to have the dataset but won&#x27;t need to store any of the data locally. The only reason to use &lt;cacheFromUrl&gt; to get data from a remote ERDDAP™ is when you have some other reason why you want to have a local copy of the data files. In that case:<!-- -->
<ul>
<li>This dataset will try to subscribe to the dataset on the remote ERDDAP so that changes to that dataset will call this dataset&#x27;s flagUrl, causing this local dataset to reload and download the changed remote files. Thus, the local dataset will be up-to-date very soon after changes are made to the remote dataset.</li>
<li>You should email the administrator of the remote ERDDAP™ to ask for the datasets.xml for the remote dataset so that you can make the dataset in your local ERDDAP™ look like the dataset in the remote ERDDAP.</li>
</ul>
</li>
<li>If the data source is a remote ERDDAP™, the local dataset will try to subscribe to the remote dataset.<!-- -->
<ul>
<li>If the subscription succeeds, whenever the remote ERDDAP reloads and has new data, it will contact the flagURL for this dataset, causing it to reload and download the new and/or changed data files.</li>
<li>If the subscription fails (for whatever reason) or if you simply want to ensure that the local dataset is up-to-date, you can set a <a href="/docs/server-admin/additional-information#flag">flag</a> for the local dataset, so it will reload, so it will check for new and/or changed remote data files.</li>
</ul>
</li>
<li>If the data source isn&#x27;t a remote ERDDAP: the dataset will check for new and/or changed remote files whenever it reloads. Normally, this is controlled by <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>. But if you know when there are new remote files, you can set a <a href="/docs/server-admin/additional-information#flag">flag</a> for the local dataset, so it will reload and check for new and/or changed remote data files. If this happens routinely at a certain time of day (e.g., at 7am), you can make a cron job to use curl to contact the flagUrl for this dataset, so it will reload and check for new and/or changed remote data files.</li>
</ul>
</li>
<li>
<p>The &lt;cacheSizeGB&gt; tag specifies the size of the local cache. You probably only need to use this when working with cloud storage systems like <a href="https://aws.amazon.com/s3/" target="_blank" rel="noopener noreferrer">Amazon S3</a> which is a commonly used storage system that is part of <a href="https://aws.amazon.com/" target="_blank" rel="noopener noreferrer">Amazon Web Services (AWS)</a>. The default is -1.</p>
<ul>
<li>If the value is &lt;=0 (e.g., the default value of -1),<br>
<!-- -->ERDDAP™ will download and maintain a <strong>complete copy</strong> of all of the remote dataset&#x27;s files in the dataset&#x27;s &lt;fileDir&gt;.<!-- -->
<ul>
<li>This is the setting which is recommended whenever possible.</li>
<li>Everytime the dataset is reloaded, it compares the names, sizes, and lastModified times of the remote files and the local files, and downloads any remote files which are new or have changed.</li>
<li>If a file that was on the remote server disappears, ERDDAP™ will not delete the corresponding local file (otherwise, if something was temporarily wrong with the remote server, ERDDAP™ might delete some or all of the local files!).</li>
<li>With this setting, usually you will set &lt;updateEveryNMillis&gt; to -1, since the dataset is aware of when it has copied new data files into place.</li>
</ul>
</li>
<li>If the value is &gt;0,<br>
<!-- -->ERDDAP™ will download files from the remote dataset as needed into a local <strong>cache</strong> (in the dataset&#x27;s &lt;fileDir&gt;) with a threshold size of that specified number of GB.<!-- -->
<ul>
<li>The cache must be large enough to hold at least several data files.</li>
<li>In general, the larger the cache, the better, because the next requested data file will be more likely to already be in the cache.</li>
<li>Caching should only be used when ERDDAP™ is running in a cloud computing server (e.g., an AWS compute instance) and the remote files in a cloud storage system (e.g., AWS S3).</li>
<li>When the disk space used by the local files exceeds cacheSizeGB, ERDDAP™ will soon (maybe not immediately) delete some of the cached files (currently, based on the Least Recently Used (LRU) algorithm) until the disk space used by the local files is &lt;0.75*cacheSizeGB (the &quot;goal&quot;). Yes, there are cases where LRU performs very badly -- there is no perfect algorithm.</li>
<li>ERDDAP™ will never try to delete a cached file that ERDDAP™ started to use in the last 10 seconds. This is an imperfect system to deal with the cache system and the data file reader system being only loosely integrated. Because of this rule, ERDDAP™ may not be able to delete enough files to reach its goal, in which case it will print a WARNING to the log.txt file, and the system will waste a lot of time trying to prune the cache, and it is possible that the size of the files in the cache may greatly exceed the cacheSizeGB. If this ever occurs, use a larger cacheSizeGB setting for that dataset.</li>
<li>Currently, ERDDAP™ never checks if the remote server has a newer version of a file that is in the local cache. If you need this feature, please email Chris.John at noaa.gov .</li>
</ul>
</li>
<li>Although the use of the same tag names might imply that the copy system and the cache system use the same underlying system, that is not correct.<!-- -->
<ul>
<li>The copy system proactively starts taskThread tasks to download new and changed files every time the dataset is reloaded. Only files that have actually been copied to the local directory are available via the ERDDAP™ dataset.</li>
<li>The cache system gets the remote file list every time the dataset is reloaded and pretends that all of those files are available via the ERDDAP™ dataset. Interestingly, all of the remote files even appear in the dataset&#x27;s /files/ web pages and are available for downloading (although perhaps only after a delay while the file is first downloaded from the remote server to the local cache.)</li>
</ul>
</li>
<li>Datasets that use cacheSizeGB may benefit from using an <a href="#nthreads">nThreads</a> setting greater than 1, because this will enable the dataset to download more than 1 remote file at a time.</li>
</ul>
</li>
<li>
<p>The &lt;cachePartialPathRegex&gt; tag is a rarely used tag that can specify an alternative for the dataset&#x27;s <a href="#pathregex">&lt;pathRegex&gt;</a>. The default is null.</p>
<ul>
<li>Only use this if you are copying the entire dataset via the default &lt;cacheSizeGB&gt; value of -1. With &lt;cacheSizeGB&gt; values of &gt;1, this will be ignored because it is nonsensical.</li>
<li>See <a href="#pathregex">the documentation for &lt;pathRegex&gt;</a> for guidance on how to construct the regex.</li>
<li>If this is specified, it will be used every time the dataset is reloaded, except the first time a dataset is reloaded at the beginning of a month.</li>
<li>This is useful when the remote dataset is stored in a labyrinth of subdirectories and when the vast majority of those files rarely, if ever, change. (&lt;cough&gt;NASA&lt;cough&gt;) You could, for example, specify a &lt;cachePartialPathRegex&gt; which just matches the current year or the current month. These regexes are very tricky to specify, because all of the partial and full path names must match the &lt;cachePartialPathRegex&gt; and because the &lt;cachePartialPathRegex&gt; must work with the remote URLs and the local directories. A real life example is:</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;cacheFromUrl&gt;https://data.nodc.noaa.gov/ghrsst/GDS2/L4/GLOB/JPL/MUR/v4.1/&lt;/cacheFromUrl&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            \&gt;!-- \[2020-10-21 This server is no longer reliably available.\] For most types of remote directories, omit the filename (e.g., contents.html for Hyrax). --&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;fileDir&gt;/u00/satellite/MUR41/&lt;/fileDir&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;fileNameRegex&gt;\*\\.nc&lt;/fileNameRegex&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;recursive&gt;true&lt;/recursive&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;pathRegex&gt;.\*&lt;/pathRegex&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;cachePartialPathRegex&gt;.\*/v4\\.1/(|2018/(|01./))&lt;/cachePartialPathRegex&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The sample URL above has files in subdirectories based on year (e.g., 2018) and day of year (e.g., 001, 002, ..., 365 or 366).<br>
<!-- -->Note that the &lt;cachePartialPathRegex&gt; starts with .*,<br>
<!-- -->then has a specific subdirectory which is common to the remote URLs and the local directories, e.g., /v4\.1/<br>
<!-- -->then has a series of nested capture groups where the first option is nothing<br>
<!-- -->and the second option is a specific value.</p>
<p>The example above will only match directories for the second 10 days of 2018, e.g.,<br>
<a href="https://data.nodc.noaa.gov/ghrsst/GDS2/L4/GLOB/JPL/MUR/v4.1/2018/010/" target="_blank" rel="noopener noreferrer">https://data.nodc.noaa.gov/ghrsst/GDS2/L4/GLOB/JPL/MUR/v4.1/2018/010/</a> [2020-10-21 This server is no longer reliably available.]<br>
<!-- -->and day 011, 012, ..., 019.<br>
<!-- -->(See this <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" target="_blank" rel="noopener noreferrer">regex documentation</a> and <a href="https://www.vogella.com/tutorials/JavaRegularExpressions/article.html" target="_blank" rel="noopener noreferrer">regex tutorial</a>.)<br>
<!-- -->If you need help creating &lt;cachePartialPathRegex&gt;, please email the &lt;cacheFromUrl&gt; to Chris.John at noaa.gov .</p>
<ul>
<li>A common approach: If you want to use &lt;cachePartialPathRegex&gt;, don&#x27;t use it initially, because you want ERDDAP™ to download all of the files initially. After ERDDAP™ has downloaded all of the files, add it to the dataset&#x27;s chunk of datasets.xml.<br>
<!-- --> </li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="thousands-of-files">Thousands of Files<a href="#thousands-of-files" class="hash-link" aria-label="Direct link to Thousands of Files" title="Direct link to Thousands of Files">​</a></h5>
<p>If your dataset has many thousands of files, ERDDAP™ may be slow to respond to requests for data from that dataset. There are two issues here:<br>
<!-- --> </p>
<ol>
<li>
<p>The number of files per directory.<br>
<!-- -->Internally, ERDDAP™ operates at the same speed regardless of whether n files are in one directory or dispersed in several directories.<br>
<!-- --> 
But there is a problem: The more files in a given directory, the slower the operating system is at returning the list of files in the directory (per file) to ERDDAP. The response time might be O(n log n). It is hard to say how many files in one directory is too many, but 10,000 is probably too many. So if your setup is generating lots of files, a recommendation here might be: put the files in logically organized subdirectories (e.g., station or station/year).</p>
<p>Another reason to use subdirectories: if a user wants to use ERDDAP&#x27;s &quot;files&quot; system to find the name of the oldest file for station X, it is faster and more efficient if the files are in station/year subdirectories, because much less information needs to be transferred.</p>
</li>
<li>
<p>The total number of files.<br>
<!-- -->For tabular datasets, ERDDAP™ keeps track of the range of values for each variable in each file. When a user makes a request, ERDDAP™ has to read all the data from all of the files that might have data matching the user&#x27;s request. If the user asks for data from a limited time (e.g., one day or one month), then ERDDAP™ won&#x27;t have to open too many files in your dataset. But there are extreme cases where almost every file might have matching data (e.g., when waterTemperature=13.2C). Since it takes ERDDAP™ a little bit of time (partly the seek time on the HDD, partly the time to read the file&#x27;s header) just to open a given file (and more if there are lots of files in the directory), there is a significant time penalty if the total number of files that ERDDAP™ has to open is very large. Even opening 1000 files takes significant time. So there are benefits to periodically consolidating the daily files into larger chunks (e.g., 1 station for 1 year). I understand that you might not want to do this for various reasons, but it does lead to much faster responses. In extreme cases (e.g., I deal with a GTSPP dataset that has ~35 million source files), serving data from a huge number of source files is impractical because ERDDAP&#x27;s response to simple queries can take hours and use tons of memory. By consolidating source files into a smaller number (for GTSPP, I have 720 now, 2 per month), ERDDAP™ can respond reasonably quickly. See <a href="#millions-of-files">Millions of Files</a><br>
<!-- --> </p>
</li>
</ol>
<p>N.B. Solid State Drives are great! The fastest, easiest, cheapest way to help ERDDAP™ deal with a huge number of (small) files is to use a solid state drive. See <a href="/docs/server-admin/additional-information#solid-state-drives">Solid State Drives are great!</a><br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="millions-of-files">Millions of Files<a href="#millions-of-files" class="hash-link" aria-label="Direct link to Millions of Files" title="Direct link to Millions of Files">​</a></h5>
<ul>
<li>
<p>Some datasets have millions of source files. ERDDAP™ can handle this, but with mixed results.</p>
<ul>
<li>For requests that just involve variables listed in <a href="#subsetvariables">&lt;subsetVariables&gt;</a>, ERDDAP™ has all of the needed information already extracted from the datafiles and stored in one file, so it can respond very, very quickly.</li>
<li>For other requests, ERDDAP™ can scan the dataset&#x27;s <a href="#cached-file-information">cached file information</a> and figure out that only a few of the files might have data which is relevant to the request and thus respond quickly.</li>
<li>But for other requests (for example, waterTemperature=18 degree_C) where any file might have relevant data, ERDDAP™ has to open a large number of files to see if each of the files has any data which is relevant to the request. The files are opened sequentially. On any operating system and any file system (other than solid state drives), this takes a long time (so ERDDAP™ responds slowly) and really ties up the file system (so ERDDAP™ responds slowly to other requests).</li>
</ul>
<p>Fortunately, there is a solution.</p>
<ol>
<li>Set up the dataset on a non-public ERDDAP™ (your personal computer?).</li>
<li>Create and run a script which requests a series of .ncCF files, each with a large chunk of the dataset, usually a time period (for example, all of the data for a given month). Choose the time period so that all of the resulting files are less than 2GB (but hopefully greater than 1GB). If the dataset has near-real-time data, run the script to regenerate the file for the current time period (e.g., this month) frequently (every 10 minutes? every hour?). Requests to ERDDAP™ for .ncCF files create a NetCDF v3 .nc file that uses the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#discrete-sampling-geometries" target="_blank" rel="noopener noreferrer">CF Discrete Sampling Geometries (DSG)</a> Contiguous Ragged Array data structures).</li>
<li>Set up an <a href="#eddtablefromnccffiles">EDDTableFromNcCFFiles</a> dataset on your public ERDDAP™ which gets data from the .nc(CF) files. ERDDAP™ can extract data from these files very quickly. And since there are now dozens or hundreds (instead of millions) of files, even if ERDDAP™ has to open all of the files, it can do so quickly.</li>
</ol>
<p>Yes, this system takes some time and effort to set up, but it works very, very well. Most data requests can be handled 100 times faster than before.<br>
<!-- -->[Bob knew this was a possibility, but it was Kevin O&#x27;Brien who first did this and showed that it works well. Now, Bob uses this for the GTSPP dataset which has about 18 million source files and which ERDDAP™ now serves via about 500 .nc(CF) files.]</p>
<p>N.B. Solid State Drives are great! The fastest, easiest, cheapest way to help ERDDAP™ deal with a huge number of (small) files is to use a solid state drive. See <a href="/docs/server-admin/additional-information#solid-state-drives">Solid State Drives are great!</a><br>
<!-- --> </p>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="huge-files">Huge Files<a href="#huge-files" class="hash-link" aria-label="Direct link to Huge Files" title="Direct link to Huge Files">​</a></h5>
<ul>
<li>A single huge data file (notably huge ASCII data files) can cause an OutOfMemoryError. If this is the problem, it should be obvious because ERDDAP™ will fail to load the dataset. The solution, if feasible, is to split the file into multiple files. Ideally, you can split the file into logical chunks. For example, if the file has 20 month&#x27;s worth of data, split it into 20 files, each with 1 month&#x27;s worth of data. But there are advantages even if the main file is split up arbitrarily. This approach has multiple benefits: a) This will reduce the memory needed to read the data files to 1/20th, because only one file is read at a time. b) Often, ERDDAP™ can deal with requests much faster because it only has to look in one or a few files to find the data for a given request. c) If data collection is ongoing, then the existing 20 files can remain unchanged, and you only need to modify one, small, new file to add the next month&#x27;s worth of data to the dataset.<br>
<!-- --> </li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="ftp-troubleadvice-1">FTP Trouble/Advice<a href="#ftp-troubleadvice-1" class="hash-link" aria-label="Direct link to FTP Trouble/Advice" title="Direct link to FTP Trouble/Advice">​</a></h5>
<ul>
<li>If you FTP new data files to the ERDDAP™ server while ERDDAP™ is running, there is the chance that ERDDAP™ will be reloading the dataset during the FTP process. It happens more often than you might think! If it happens, the file will appear to be valid (it has a valid name), but the file isn&#x27;t valid. If ERDDAP™ tries to read data from that invalid file, the resulting error will cause the file to be added to the table of invalid files. This is not good. To avoid this problem, use a temporary filename when FTP&#x27;ing the file, for example, ABC2005.nc_TEMP . Then, the fileNameRegex test (see below) will indicate that this is not a relevant file. After the FTP process is complete, rename the file to the correct name. The renaming process will cause the file to become relevant in an instant.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="file-name-extracts">File Name Extracts<a href="#file-name-extracts" class="hash-link" aria-label="Direct link to File Name Extracts" title="Direct link to File Name Extracts">​</a></h5>
<p>[This feature is DEPRECATED. Please use <a href="#filename-sourcenames">***fileName pseudo sourceName</a> instead.]<br>
<!-- -->EDDTableFromFiles has a system for extracting a String from each filename and using that to make a pseudo data variable. Currently, there is no system to interpret these Strings as dates/times. There are several XML tags to set up this system. If you don&#x27;t need part or all of this system, just don&#x27;t specify these tags or use &quot;&quot; values.</p>
<ul>
<li>preExtractRegex is a <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" target="_blank" rel="noopener noreferrer">regular expression</a> (<a href="https://www.vogella.com/tutorials/JavaRegularExpressions/article.html" target="_blank" rel="noopener noreferrer">tutorial</a>) used to identify text to be removed from the start of the filename. The removal only occurs if the regex is matched. This usually begins with &quot;^&quot; to match the beginning of the filename.</li>
<li>postExtractRegex is a regular expression used to identify text to be removed from the end of the filename. The removal only occurs if the regex is matched. This usually ends with &quot;$&quot; to match the end of the filename.</li>
<li>extractRegex If present, this regular expression is used after preExtractRegex and postExtractRegex to identify a string to be extracted from the filename (for example, the stationID). If the regex isn&#x27;t matched, the entire filename is used (minus preExtract and postExtract). Use &quot;.*&quot; to match the entire filename that is left after preExtractRegex and postExtractRegex.</li>
<li>columnNameForExtract is the data column source name for the extracted Strings. A dataVariable with this <a href="#sourcename">sourceName</a> must be in the dataVariables list (with any data type, but usually String).</li>
</ul>
<p>For example, if a dataset has files with names like XYZAble.nc, XYZBaker.nc, XYZCharlie.nc, ..., and you want to create a new variable (stationID) when each file is read which will have station ID values (Able, Baker, Charlie, ...) extracted from the filenames, you could use these tags:</p>
<ul>
<li>&lt;preExtractRegex&gt;^XYZ&lt;/preExtractRegex&gt;<br>
<!-- -->The initial ^ is a regular expression special character which forces ERDDAP™ to look for XYZ at the beginning of the filename. This causes XYZ, if found at the beginning of the filename, to be removed (for example, the filename XYZAble.nc becomes Able.nc).</li>
<li>&lt;postExtractRegex&gt;\.nc$&lt;/postExtractRegex&gt;<br>
<!-- -->The $ at the end is a regular expression special character which forces ERDDAP™ to look for .nc at the end of the filename. Since . is a regular expression special character (which matches any character), it is encoded as \. here (because 2E is the hexadecimal character number for a period). This causes .nc, if found at the end of the filename, to be removed (for example, the partial filename Able.nc becomes Able).</li>
<li>&lt;extractRegex&gt;.*&lt;/extractRegex&gt;<br>
<!-- -->The .* regular expression matches all remaining characters (for example, the partial filename Able becomes the extract for the first file).</li>
<li>&lt;columnNameForExtract&gt;stationID&lt;/columnNameForExtract&gt;<br>
<!-- -->This tells ERDDAP™ to create a new source column called stationID when reading each file. Every row of data for a given file will have the text extracted from its filename (for example, Able) as the value in the stationID column.</li>
</ul>
<p>In most cases, there are numerous values for these extract tags that will yield the same results -- regular expressions are very flexible. But in a few cases, there is just one way to get the desired results.<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="pseudo-sourcenames">Pseudo sourceNames<a href="#pseudo-sourcenames" class="hash-link" aria-label="Direct link to Pseudo sourceNames" title="Direct link to Pseudo sourceNames">​</a></h5>
<p>Every variable in every dataset in ERDDAP™ has a <a href="#sourcename">&lt;sourceName&gt;</a> which specifies the source&#x27;s name for the variable. EDDTableFromFiles supports a few pseudo sourceNames which extract a value from some other place (e.g., the file&#x27;s name or the value of a global attribute) and promote that value to be a column of constant values for that chunk of data (e.g., the table of that file&#x27;s data). For these variables, you must specify the variable&#x27;s data type via the <a href="#datatype">&lt;dataType&gt;</a> tag. If the extracted information is a dateTime string, you specify the format of the dateTime string in the <a href="#string-time-units">units attribute</a>. The pseudo sourceName options are:<br>
<!-- --> </p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="global-sourcenames">global: sourceNames<a href="#global-sourcenames" class="hash-link" aria-label="Direct link to global: sourceNames" title="Direct link to global: sourceNames">​</a></h6>
<p>A global metadata attribute in each source data file can be promoted to be a column of data. If a variable&#x27;s &lt;sourceName&gt; has the format</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceName&gt;global:*attributeName*&lt;/sourceName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>then when ERDDAP™ is reading the data from a file, ERDDAP™ will look for a global attribute of that name (for example, PI) and create a column filled with the attribute&#x27;s value. This is useful when the attribute has different values in different source files, because otherwise, users would only see one of those values for the whole dataset. For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceName&gt;global:PI&lt;/sourceName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When you promote an attribute to be data, ERDDAP™ removes the corresponding attribute. This is appropriate because the value is presumably different in every file; whereas in the aggregated dataset in ERDDAP™ it will have only one value. If you want, you can add a new value for the attribute for the whole dataset by adding &lt;att name=&quot;<em>attributeName</em>&quot;&gt;<em>newValue</em>&lt;/att&gt; to the dataset&#x27;s global <a href="#addattributes">&lt;addAttributes&gt;</a>. For global attributes that ERDDAP™ requires, for example, institution, you MUST add a new value for the attribute.<br>
<!-- --> </p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="variable-sourcenames">variable: sourceNames<a href="#variable-sourcenames" class="hash-link" aria-label="Direct link to variable: sourceNames" title="Direct link to variable: sourceNames">​</a></h6>
<p>A variable&#x27;s metadata attribute in each file can be promoted to be a column of data. If a variable&#x27;s &lt;<a href="#sourcename">sourceName</a>&gt; has the format</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceName&gt;variable:*variableName*:*attributeName*&lt;sourceName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>then when ERDDAP™ is reading the data from a file, ERDDAP™ will look for the specified attribute (for example, ID) of the specified variable (for example, instrument) and create a column filled with the attribute&#x27;s value. The parent variable (for example, instrument) needn&#x27;t be one of the dataVariables included in the dataset&#x27;s definition in ERDDAP. For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceName&gt;variable:instrument:ID&lt;/sourceName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is useful when the attribute has different values in different source files, because otherwise, users would only see one of those values for the whole dataset.</p>
<p>When you promote an attribute to be data, ERDDAP™ removes the corresponding attribute. This is appropriate because the value is presumably different in every file; whereas in the aggregated dataset in ERDDAP™ it will have only one value. If you want, you can add a new value for the attribute for the whole dataset by adding &lt;att name=&quot;<em>attributeName</em>&quot;&gt;<em>newValue</em>&lt;/att&gt; to the variable&#x27;s <a href="#addattributes">&lt;addAttributes&gt;</a>. For attributes that ERDDAP™ requires, for example, ioos_category (depending on your setup), you MUST add a new value for the attribute.</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="filename-sourcenames">fileName sourceNames<a href="#filename-sourcenames" class="hash-link" aria-label="Direct link to fileName sourceNames" title="Direct link to fileName sourceNames">​</a></h6>
<p>You can extract part of a file&#x27;s fileName and promote that to be a column of data. The format for this pseudo <a href="#sourcename">&lt;sourceName&gt;</a> is</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceName&gt;\*\*\*fileName,*regex*,*captureGroupNumber*&lt;/sourceName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceName&gt;\*\*\*fileName,A(\\d{12})\\.slcpV1.nc,1&lt;/sourceName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When EDDTableFromFiles is reading the data from a file, it will make sure the fileName (for example, A201807041442.slcpV1.nc) matches the specified regular expression (&quot;regex&quot;) and extract the specified (in this case, the first) capture group (which is a part surrounded by parentheses), for example, &quot;201807041442&quot;. (See this <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" target="_blank" rel="noopener noreferrer">regex documentation</a> and <a href="https://www.vogella.com/tutorials/JavaRegularExpressions/article.html" target="_blank" rel="noopener noreferrer">regex tutorial</a>.) The regex may be specified as a string with or without surrounding quotes. If the regex is specified as a string with surrounding quotes, the string must be <a href="https://www.json.org/json-en.html" target="_blank" rel="noopener noreferrer">JSON-style string</a> (with special characters escaped with \ characters). The capture group number is usually 1 (the first capture group), but may be any number.<br>
<!-- --> </p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="pathname-sourcenames">pathName sourceNames<a href="#pathname-sourcenames" class="hash-link" aria-label="Direct link to pathName sourceNames" title="Direct link to pathName sourceNames">​</a></h6>
<p>You can extract part of a file&#x27;s full pathName (/directories/fileName.ext) and promote that to be a column of data. The format for this pseudo <a href="#sourcename">&lt;sourceName&gt;</a> is</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceName&gt;\*\*\*pathName,*regex*,*captureGroupNumber*&lt;sourceName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceName&gt;\*\*\*pathName,/data/myDatasetID/(\[A-Z0-9\]\*)/B(\\d{12}).nc,1&lt;/sourceName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When EDDTableFromFiles is reading the data from a file, it will make sure the full pathName (for example, /data/myDatasetID/BAY17/B201807041442.nc . For this test, the directory separators will always be &#x27;/&#x27;, never &#x27;\&#x27;) matches the specified regular expression (&quot;regex&quot;) and extract the specified (in this case, the first) capture group (which is a part surrounded by parentheses), for example, &quot;BAY17&quot;. (See this <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" target="_blank" rel="noopener noreferrer">regex documentation</a> and <a href="https://www.vogella.com/tutorials/JavaRegularExpressions/article.html" target="_blank" rel="noopener noreferrer">regex tutorial</a>.) The regex may be specified as a string with or without surrounding quotes. If the regex is specified as a string with surrounding quotes, the string must be a <a href="https://www.json.org/json-en.html" target="_blank" rel="noopener noreferrer">JSON-style string</a> (with special characters escaped with \ characters). The capture group number is usually 1 (the first capture group), but may be any number.<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="0-files-error-message-2">&quot;0 files&quot; Error Message<a href="#0-files-error-message-2" class="hash-link" aria-label="Direct link to &quot;0 files&quot; Error Message" title="Direct link to &quot;0 files&quot; Error Message">​</a></h5>
<ul>
<li>If you run <a href="#generatedatasetsxml">GenerateDatasetsXml</a> or <a href="#dasdds">DasDds</a>, or if you try to load an EDDTableFrom...Files dataset in ERDDAP™, and you get a &quot;0 files&quot; error message indicating that ERDDAP™ found 0 matching files in the directory (when you think that there are matching files in that directory):<!-- -->
<ul>
<li>Check that the files really are in that directory.</li>
<li>Check the spelling of the directory name.</li>
<li>Check the fileNameRegex. It&#x27;s really, really easy to make mistakes with regexes. For test purposes, try the regex .* which should match all filenames. (See this <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" target="_blank" rel="noopener noreferrer">regex documentation</a> and <a href="https://www.vogella.com/tutorials/JavaRegularExpressions/article.html" target="_blank" rel="noopener noreferrer">regex tutorial</a>.)</li>
<li>Check that the user who is running the program (e.g., user=tomcat (?) for Tomcat/ERDDAP) has &#x27;read&#x27; permission for those files.</li>
<li>In some operating systems (for example, SELinux) and depending on system settings, the user who ran the program must have &#x27;read&#x27; permission for the whole chain of directories leading to the directory that has the files.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="standardizewhat">standardizeWhat<a href="#standardizewhat" class="hash-link" aria-label="Direct link to standardizeWhat" title="Direct link to standardizeWhat">​</a></h5>
<ul>
<li>
<p>When any subclass of EDDTableFromFiles is aggregating a set of source files, for a given variable, all of the source files MUST have identical attribute values for several attributes: scale_factor, add_offset, _Unsigned, missing_value, _FillValue, and units). Think about it: if one file has windSpeed units=knots and another has windSpeed units=m/s, then the data values from the two files shouldn&#x27;t be included in the same aggregated dataset. So, when EDDTableFromFiles first creates the dataset, it reads the attribute values from one file, then rejects all of the files that have different values for those important attributes. For most collections of files, this is not a problem because the attributes of all the variables are consistent. However, for other collections of files, this can lead to 1%, 10%, 50%, 90%, or even 99% of the files being rejected as &quot;bad&quot; files. That is trouble.</p>
<p>EDDTableFrom files has a system to deal with this problem: standardizeWhat. The standardizeWhat setting tells EDDTableFromFiles to standardize the files as soon as it reads them, before EDDTableFromFiles looks at the attributes to see if they are consistent.</p>
<p>The flip side is: if the dataset doesn&#x27;t have this problem, don&#x27;t use standardizeWhat. standardizeWhat has some potential risks (discussed below) and inefficiencies. So if you don&#x27;t actually need the features of standardizeWhat, there is no need to face the potential risks and inefficiencies. The biggest inefficiency is: When various standardizeWhat options are used by a dataset, it implies that the source files are storing data in significantly different ways (e.g., with different scale_factor and add_offset, or with time strings using different formats). Thus, for a given constraint in a user request, there is no way for ERDDAP™ to make a single source-level constraint that can be applied to all source files. So ERDDAP™ can only apply the affected constraints at a higher level. So ERDDAP™ has to read the data from more files before applying the higher, destination-level constraints. So requests to datasets that use standardizeWhat take longer to be processed.</p>
<p>To use this system, you need to specify</p>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;standardizeWhat&gt;*standardizeWhat*&lt;/standardizeWhat&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>in the <a href="#eddtablefromfiles-skeleton-xml">datasets.xml for the EDDTableFrom...Files dataset</a> (within the &lt;dataset&gt; tag).</p>
<p>The <em>standardizeWhat</em> value specifies which changes EDDTableFromFiles should try to apply. The changes are the sum of some combination of:</p>
<ol>
<li>Unpack<br>
<!-- -->This does many common and safe operations to standardize numeric columns in the files:<!-- -->
<ul>
<li>If scale_factor and/or add_offset attributes are present, remove them and apply them to unpack the data values.</li>
<li>Unpack packed attributes (e.g., actual_min, actual_max, actual_range, data_min, data_max, data_range, valid_min, valid_max, valid_range), if present, if the variable was packed, and if the attribute values were packed (this is tricky, but reasonably reliable).</li>
<li>If _FillValue and/or missing_value are present, convert those data values to ERDDAP&#x27;s &quot;standard&quot; missing values: MAX_VALUE for integer types (e.g., 127 for bytes, 32,767 for short, and 2,147,483,647 for ints, 9223372036854775807 for longs) and NaN for doubles and floats.</li>
<li>Remove the old _FillValue and/or missing_value attributes (if any), and replace them with just _FillValue=[the ERDDAP™ standard missing value].<br>
<!-- --> </li>
</ul>
</li>
<li>Standardize Numeric Times<br>
<!-- -->If a numeric column has CF-style numeric time units (&quot;<em>timeUnits</em> since <em>baseTime</em>&quot;, e.g., &quot;days since 1900-01-01&quot;), this converts the dateTime values into &quot;seconds since 1970-01-01T00:00:00Z&quot; values and changes the units attribute to indicate that.<br>
<!-- -->If this is selected and there is a chance that this variable has scale_factor or add_offset, #1 MUST be selected also.<br>
<!-- --> </li>
<li>Apply String missing_value<br>
<!-- -->If a String column has _FillValue and/or missing_value attributes, this converts those values to &quot;&quot; and removes the attributes.<br>
<!-- --> </li>
<li>Find Numeric missing_value<br>
<!-- -->If a numeric column doesn&#x27;t have _FillValue or missing_value attributes, this tries to identify an undefined numeric missing_value (e.g., -999, 9999, 1e37f) and convert instances of it to the &quot;standard&quot; values (MAX_VALUE for integer types, and NAN for doubles and floats).<br>
<strong>This option has a risk:</strong> if the largest or smallest valid data value looks like a missing value (e.g., 999), then those valid data values will be converted to missing values (e.g., NaN).<br>
<!-- --> </li>
<li>Change String &quot;N/A&quot; to &quot;&quot;<br>
<!-- -->For each String column, convert several strings commonly used to indicate a missing String value to &quot;&quot;. Currently, this looks for &quot;.&quot;, &quot;...&quot;, &quot;-&quot;, &quot;?&quot;, &quot;???&quot;, &quot;N/A&quot;, &quot;NA&quot;, &quot;none&quot;, &quot;not applicable&quot;, &quot;null&quot;, &quot;unknown&quot;, &quot;unspecified&quot;. The string search is case-insensitive and applied after the strings are trim&#x27;d. &quot;nd&quot; and &quot;other&quot; are specifically not on the list.<br>
<strong>This option has a risk:</strong> Strings that you consider to be valid values may be converted to &quot;&quot;.<br>
<!-- --> </li>
<li>Standardize to String ISO 8601 DateTimes<br>
<!-- -->For each String column, try to convert not-purely-numeric String dateTimes (e.g., &quot;Jan 2, 2018&quot;) to ISO 8601 String dateTimes (&quot;2018-01-02&quot;).<br>
<strong>Note</strong> that all data values for the column must use the same format, otherwise, this option won&#x27;t make any changes to a given column.<br>
<strong>This option has a risk:</strong> If there is a column with string values that just happen to look like a common dateTime format, they will be converted to ISO 8601 String dateTimes.<br>
<!-- --> </li>
<li>Standardize Compact DateTimes To ISO 8601 DateTimes<br>
<!-- -->For each String or integer-type column, try to convert purely-numeric String dateTimes (e.g., &quot;20180102&quot;) to ISO 8601 String dateTimes (&quot;2018-01-02&quot;).<br>
<strong>Note</strong> that all data values for the column must use the same format, otherwise, this option won&#x27;t make any changes to a given column.<br>
<strong>This option has a risk:</strong> If there is a column with values that aren&#x27;t compact dateTimes but look like compact dateTimes, they will be converted to ISO 8601 String dateTimes.<br>
<!-- --> </li>
<li>Standardize Units<br>
<!-- -->This tries to standardize the units string for each variable. For example, &quot;meters per second&quot;, &quot;meter/second&quot;, &quot;m.s^-1&quot;, &quot;m s-1&quot;, &quot;m.s-1&quot; will all be converted to &quot;m.s-1&quot;. This doesn&#x27;t change the data values. This works well for valid UDUNITS units strings, but can have problems with invalid or complex strings. You can deal with problems by specifying specific from-to pairs in &lt;standardizeUdunits&gt; in ERDDAP&#x27;s<br>
<!-- -->[tomcat]/webapps/erddap/WEB-INF/classes/gov/noaa/pfel/erddap/util/messages.xml file. Please email any changes you make to Chris.John at noaa.gov so they can be incorporated into the default messages.xml.<br>
<strong>This option has a risk:</strong> This may mangle some complex or invalid units; however, you can use the work-around described above to circumvent problems if they occur.<br>
<!-- --> </li>
</ol>
<p>The default value of standardizeWhat is 0, which doesn&#x27;t do anything.</p>
<p>If/when you change the value of standardizeWhat, the next time the dataset is reloaded, ERDDAP™ will reread all of the data files for the dataset in order to rebuild the mini-database with information about each file. If the dataset has lots of files, this will take a long time.</p>
<p>Notes:</p>
<ul>
<li>
<p>A tricky thing is -<br>
<!-- -->The standardizeWhat setting is used for all columns in the source file. So, for example, using #2048 might successfully convert a column of compact String dateTimes into ISO 8601 String dateTimes, but it might also mistakenly convert a column with Strings that just happen to look like compact dateTimes.<br>
<!-- --> </p>
</li>
<li>
<p>datasets.xml and GenerateDatasetsXml -<br>
<!-- -->It is especially tricky to get the settings correct in datasets.xml to make your dataset work the way you want it to. The best approach (as always) is:</p>
<ol>
<li>Use <a href="#generatedatasetsxml">GenerateDatasetsXml</a> and specify the value of standardizeWhat that you would like to use.</li>
<li>Use <a href="#dasdds">DasDds</a> to ensure that the dataset loads correctly and reflects the standardizeWhat setting that you specified.</li>
<li>Test the dataset by hand when it is in ERDDAP™ to ensure that the affected variables work as expected.<br>
<!-- --> </li>
</ol>
</li>
<li>
<p>Risks -<br>
<!-- -->Options #256 and above are more risky, i.e., there is a greater chance that ERDDAP™ will make a change that shouldn&#x27;t be made. For example, option #2048 might accidentally convert a variable with station ID strings that all just happen to look ISO 8601 &quot;compact&quot; dates (e.g., 20180102) into ISO 8601 &quot;extended&quot; dates (&quot;2018-01-02&quot;).<br>
<!-- --> </p>
</li>
<li>
<p>Slow after a change --<br>
<!-- -->Since the value of standardizeWhat changes the data values that EDDTableFromFiles sees for each data file, if you change the standardizeWhat setting, EDDTableFromFiles will throw away all the cached information about each file (which includes the min and max for each data variable in each file) and re-read each data file. If a dataset has a large number of files, this can be very time consuming, so it will take a long time for the dataset to reload the first time ERDDAP™ reloads it after you make the change.<br>
<!-- --> </p>
</li>
<li>
<p>Heuristics -<br>
<!-- -->Options #256 and above use heuristics to make their changes. If you come across a situation where the heuristics make a bad decision, please email a description of the problem to Chris.John at noaa.gov so we can improve the heuristics.<br>
<!-- --> </p>
</li>
<li>
<p>Alternatives --<br>
<!-- -->If one of the standardizeWhat options doesn&#x27;t solve a problem for a given dataset, you may be able to solve the problem by making an <a href="#ncml-files">.ncml file</a> to parallel every data file and define changes to things in the files so that the files are consistent. Then, tell the EDDTableFrom...Files dataset to aggregate the .ncml files.</p>
<p>Or, use <a href="#netcdf-operators-nco">NCO</a> to actually make changes to the files so that the files are consistent.</p>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="separate-columns-for-year-month-date-hour-minute-second">Separate Columns for Year, Month, Date, Hour, Minute, Second<a href="#separate-columns-for-year-month-date-hour-minute-second" class="hash-link" aria-label="Direct link to Separate Columns for Year, Month, Date, Hour, Minute, Second" title="Direct link to Separate Columns for Year, Month, Date, Hour, Minute, Second">​</a></h5>
<p>It is fairly common for tabular data files to have separate columns for year, month, date, hour, minute, second. Before ERDDAP™ v2.10, the only solution was to edit the data file to combine those columns into a unified time column. With ERDDAP™ 2.10+, you can use the<br>
<a href="#sourcename">&lt;sourceName&gt;=<em>expression</em>&lt;sourceName&gt;</a> to tell ERDDAP™ how to combine the source columns to make a unified time column, so you no longer have to edit the source file.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="skipheadertoregex">&lt;skipHeaderToRegex&gt;<a href="#skipheadertoregex" class="hash-link" aria-label="Direct link to &lt;skipHeaderToRegex&gt;" title="Direct link to &lt;skipHeaderToRegex&gt;">​</a></h5>
<ul>
<li><a href="#skipheadertoregex">&lt;skipHeaderToRegex&gt;</a> --<br>
<!-- -->OPTIONAL. (For EDDTableFromAsciiFiles and EDDTableFromColumnarAsciiFiles datasets only.)<br>
<!-- -->When EDDTableFromAsciiFiles reads a data file, it will ignore all of the lines up to and including the line that matches this regular expression. The default is &quot;&quot;, which doesn&#x27;t use this option. An example is</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;skipHeaderToRegex&gt;\\\*\\\*\\\* END OF HEADER.\*&lt;skipHeaderToRegex&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>which will ignore all lines up to and including a line that starts with &quot;*** END OF HEADER&quot;.</p>
<p>When you use this tag, &lt;columnNamesRow&gt; and &lt;firstDataRow&gt; act as if the header has been removed before the file is read. For example, you would use columnNamesRow=0 if the column names are on the row right after the header.</p>
<p>If you want to use generateDatasetsXml with a dataset that needs this tag:</p>
<ol>
<li>Make a new, temporary, sample file by copying an existing file and removing the header.</li>
<li>Run generateDatasetsXml and specify that sample file.</li>
<li>Manually add the &lt;skipHeaderToRegex&gt; tag to the datasets.xml chunk.</li>
<li>Delete the temporary, sample file.</li>
<li>Use the dataset in ERDDAP.</li>
</ol>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="skiplinesregex">&lt;skipLinesRegex&gt;<a href="#skiplinesregex" class="hash-link" aria-label="Direct link to &lt;skipLinesRegex&gt;" title="Direct link to &lt;skipLinesRegex&gt;">​</a></h5>
<p>OPTIONAL. (For EDDTableFromAsciiFiles and EDDTableFromColumnarAsciiFiles datasets only.)<br>
<!-- -->When EDDTableFromAsciiFiles reads a data file, it will ignore all lines which match this regular expression. The default is &quot;&quot;, which doesn&#x27;t use this option. An example is</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;skipLinesRegex&gt;#.\*&lt;skipLinesRegex&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>which will ignore all lines which start with &quot;#&quot;.</p>
<p>When you use this tag, &lt;columnNamesRow&gt; and &lt;firstDataRow&gt; act as if all of the matching lines had been removed before the file is read. For example, you would use columnNamesRow=0 even if there are several lines starting with, for example, &quot;#&quot; at the start of the file.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromfiles-skeleton-xml">EDDTableFromFiles skeleton XML<a href="#eddtablefromfiles-skeleton-xml" class="hash-link" aria-label="Direct link to EDDTableFromFiles skeleton XML" title="Direct link to EDDTableFromFiles skeleton XML">​</a></h4>
<blockquote>
<p>  &lt;dataset type=&quot;EDDTableFrom...Files&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      &lt;nDimensions&gt;...&lt;/nDimensions&gt;  &lt;!-- This was used prior to ERDDAP™<br>
<!-- -->        version 1.30, but is now ignored. --&gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#updateeverynmillis">&lt;updateEveryNMillis&gt;</a>...&lt;/updateEveryNMillis&gt; &lt;!-- 0 or 1. For<br>
<!-- -->        EDDTableFromFiles subclasses, this uses Java&#x27;s WatchDirectory system<br>
<!-- -->        to notice new/deleted/changed files quickly and efficiently. --&gt;<br>
<!-- -->      <a href="#standardizewhat">&lt;standardizeWhat&gt;</a>...&lt;/standardizeWhat&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#addvariableswhere">&lt;addVariablesWhere&gt;</a>...&lt;/addVariablesWhere&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#nthreads">&lt;nThreads&gt;</a>...&lt;/nThreads&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->      &lt;specialMode&gt;<em>mode</em>&lt;/specialMode&gt;  &lt;-- This rarely-used, OPTIONAL tag<br>
<!-- -->        can be used with EDDTableFromThreddsFiles to specify that special,<br>
<!-- -->        hard-coded rules should be used to determine which files should<br>
<!-- -->        be downloaded from the server. Currently, the only valid <em>mode</em><br>
<!-- -->        is SAMOS which is used with datasets from<br>
<!-- -->        <a href="https://tds.coaps.fsu.edu/thredds/catalog/samos" target="_blank" rel="noopener noreferrer">https://tds.coaps.fsu.edu/thredds/catalog/samos</a> to download only the<br>
<!-- -->        files with the last version number. --&gt;<br>
<!-- -->      &lt;sourceUrl&gt;...&lt;/sourceUrl&gt;  &lt;-- For subclasses like<br>
<!-- -->        EDDTableFromHyraxFiles and EDDTableFromThreddsFiles, this is where<br>
<!-- -->        you specify the base URL for the files on the remote server.<br>
<!-- -->        For subclasses that get data from local files, ERDDAP™ doesn&#x27;t use<br>
<!-- -->        this information to get the data, but does display the<br>
<!-- -->        information to users. So I usually use &quot;(local files)&quot;. --&gt;<br>
<!-- -->      &lt;fileDir&gt;...&lt;/fileDir&gt; &lt;-- The directory (absolute) with the data<br>
<!-- -->        files. --&gt;<br>
<!-- -->      &lt;recursive&gt;true|false&lt;/recursive&gt; &lt;!-- 0 or 1. Indicates if<br>
<!-- -->        subdirectories of fileDir have data files, too. --&gt;<br>
<!-- -->      <a href="#pathregex">&lt;pathRegex&gt;</a>...&lt;/pathRegex&gt;  &lt;!-- 0 or 1. Only directory names which<br>
<!-- -->        match the pathRegex (default=&quot;.*&quot;) will be accepted. --&gt;<br>
<!-- -->      &lt;fileNameRegex&gt;...&lt;/fileNameRegex&gt; &lt;-- 0 or 1. A <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" target="_blank" rel="noopener noreferrer">regular expression</a><br>
<!-- -->        (<a href="https://www.vogella.com/tutorials/JavaRegularExpressions/article.html" target="_blank" rel="noopener noreferrer">tutorial</a>) describing valid data file names, for example,<br>
<!-- -->            &quot;.*\.nc&quot; for all .nc files. --&gt;<br>
<!-- -->      <a href="#accessibleviafiles">&lt;accessibleViaFiles&gt;</a>true|false(default)&lt;/accessibleViaFiles&gt;<br>
<!-- -->        &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      &lt;metadataFrom&gt;...&lt;/metadataFrom&gt; &lt;-- The file to get metadata<br>
<!-- -->        from (&quot;first&quot; or &quot;last&quot; (the default) based on file&#x27;s<br>
<!-- -->        lastModifiedTime). --&gt;<br>
<!-- -->      &lt;charset&gt;...&lt;/charset&gt;<br>
<!-- -->        &lt;!-- (For EDDTableFromAsciiFiles and EDDTableFromColumnarAsciiFiles<br>
<!-- -->        only) This OPTIONAL tag specifies the character set (case<br>
<!-- -->        sensitive!) of the source files, for example, ISO-8859-1<br>
<!-- -->        (the default) and UTF-8.  --&gt;<br>
<!-- -->      <a href="#skipheadertoregex">&lt;skipHeaderToRegex&gt;</a>...&lt;/skipHeaderToRegex&gt;<br>
<!-- -->      <a href="#skiplinesregex">&lt;skipLinesRegex&gt;</a>...&lt;/skipLinesRegex&gt;<br>
<!-- -->      &lt;columnNamesRow&gt;...&lt;/columnNamesRow&gt; &lt;-- (For EDDTableFromAsciiFiles<br>
<!-- -->        only) This specifies the number of the row with the column<br>
<!-- -->        names in the files. (The first row of the file is &quot;1&quot;.<br>
<!-- -->        Default = 1.)  If you specify 0, ERDDAP™ will not look for<br>
<!-- -->        column names and will assign names: Column#1, Column#2, ... --&gt;<br>
<!-- -->      &lt;firstDataRow&gt;...&lt;/firstDataRow&gt;<br>
<!-- -->        &lt;-- (For EDDTableFromAsciiFiles and EDDTableFromColumnarAsciiFiles<br>
<!-- -->        only) This specifies the number of the first row with data in the<br>
<!-- -->        files. (The first row of the file is &quot;1&quot;. Default = 2.) --&gt;<br>
<!-- -->      &lt;dimensionsCSV&gt;...&lt;/dimensionsCSV&gt; &lt;-- (For EDDTableFromNcFiles<br>
<!-- -->        and EDDTableFromMultidimNcFiles only) This is a comma-separated<br>
<!-- -->        list of dimension fullNames. If specified, ERDDAP™ will only read<br>
<!-- -->        variables in the source files which use some or all of these<br>
<!-- -->        dimensions, plus all of the scalar variables. If a dimension<br>
<!-- -->        is in a group, you must specify its fullName,<br>
<!-- -->        e.g., &quot;<em>groupName/dimensionName</em>&quot;. --&gt;<br>
<!-- -->      &lt;-- The next four tags are DEPRECATED. For more information, see<br>
<!-- -->        <a href="#filename-sourcenames">File Name Extracts</a>. --&gt;<br>
<!-- -->      &lt;preExtractRegex&gt;...&lt;/preExtractRegex&gt;<br>
<!-- -->      &lt;postExtractRegex&gt;...&lt;/postExtractRegex&gt;<br>
<!-- -->      &lt;extractRegex&gt;...&lt;/extractRegex&gt;<br>
<!-- -->      &lt;columnNameForExtract&gt;...&lt;/columnNameForExtract&gt;<br>
<!-- -->      &lt;sortedColumnSourceName&gt;...&lt;/sortedColumnSourceName&gt;<br>
<!-- -->        &lt;-- The <a href="#sourcename">sourceName</a> of the numeric column that the data files are<br>
<!-- -->        usually already sorted by within each file, for example, &quot;time&quot;.<br>
<!-- -->        Don&#x27;t specify this or use an empty string if no variable is<br>
<!-- -->        suitable. It is ok if not all files are sorted by this column.<br>
<!-- -->        If present, this can greatly speed up some data requests.<br>
<!-- -->        For EDDTableFromHyraxFiles, EDDTableFromNcFiles and<br>
<!-- -->        EDDTableFromThreddsFiles, this must be the leftmost (first) axis variable.<br>
<!-- -->        EDDTableFromMultidimNcFiles ignores this because it has a better<br>
<!-- -->        system. --&gt;<br>
<!-- -->      &lt;sortFilesBySourceNames&gt;...&lt;/sortFilesBySourceNames&gt;<br>
<!-- -->        &lt;-- This is a space-separated list of <a href="#sourcename">sourceName</a>s<br>
<!-- -->        which specifies how the internal list of files should be sorted<br>
<!-- -->        (in ascending order), for example &quot;id time&quot;.<br>
<!-- -->        It is the minimum value of the specified columns in each file<br>
<!-- -->        that is used for sorting.<br>
<!-- -->        When a data request is filled, data is obtained from the files<br>
<!-- -->        in this order. Thus it determines the overall order of the data<br>
<!-- -->        in the response.  If you specify more than one column name, the<br>
<!-- -->        second name is used if there is a tie for the first column; the<br>
<!-- -->        third is used if there is a tie for the first and second<br>
<!-- -->        columns; ... This is OPTIONAL (the default is<br>
<!-- -->        fileDir+fileName order). --&gt;<br>
<!-- -->        <br>
<!-- -->      <a href="#sourceneedsexpandedfp_eq">&lt;sourceNeedsExpandedFP_EQ&gt;</a>true(default)|false&lt;/sourceNeedsExpandedFP_EQ&gt;<br>
<!-- -->      <a href="#filetableinmemory">&lt;fileTableInMemory&gt;</a>...&lt;/fileTableInMemory&gt; &lt;!-- 0 or 1 (true or<br>
<!-- -->        false (the default)) --&gt;<br>
<!-- -->      <a href="#cachefromurl">&lt;cacheFromUrl&gt;</a>...&lt;/cacheFromUrl&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#cachefromurl">&lt;cacheSizeGB&gt;</a>...&lt;/cacheSizeGB&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#global-attributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#datavariable">&lt;dataVariable&gt;</a>...&lt;/dataVariable&gt; &lt;!-- 1 or more --&gt;<br>
<!-- -->        &lt;-- For EDDTableFromHyraxFiles, EDDTableFromMultidimNcFiles,<br>
<!-- -->        EDDTableFromNcFiles, EDDTableFromNccsvFiles, and<br>
<!-- -->        EDDTableFromThreddsFiles, the source&#x27;s axis variables (for<br>
<!-- -->        example, time) needn&#x27;t be first or in any specific order. --&gt;<br>
<!-- -->  &lt;/dataset&gt;</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromasciiservice">EDDTableFromAsciiService<a href="#eddtablefromasciiservice" class="hash-link" aria-label="Direct link to EDDTableFromAsciiService" title="Direct link to EDDTableFromAsciiService">​</a></h3>
<p><a href="#eddtablefromasciiservice"><strong>EDDTableFromAsciiService</strong></a> is essentially a screen scraper. It is intended to deal with data sources which have a simple web service for requesting data (often an HTML form on a web page) and which can return the data in some structured ASCII format (for example, a comma-separated-value or columnar ASCII text format, often with other information before and/or after the data).</p>
<p>EDDTableFromAsciiService is the superclass of all EDDTableFromAsciiService... classes. You can&#x27;t use EDDTableFromAsciiService directly. Instead, use a subclass of EDDTableFromAsciiService to handle specific types of services:</p>
<ul>
<li><a href="#eddtablefromasciiservicenos">EDDTableFromAsciiServiceNOS</a> gets data from NOAA NOS&#x27;s ASCII services.</li>
</ul>
<p>Currently, no other service types are supported. But it is usually relatively easy to support other services if they work in a similar way. Contact us if you have a request.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="details">Details<a href="#details" class="hash-link" aria-label="Direct link to Details" title="Direct link to Details">​</a></h4>
<p>The following information applies to all of the subclasses of EDDTableFromAsciiService.</p>
<ul>
<li>Constraints -- ERDDAP™ tabular data requests can put constraints on any variable. The underlying service may or may not allow constraints on all variables. For example, many services only support constraints on station names, latitude, longitude, and time. So when a subclass of EDDTableFromAsciiService gets a request for a subset of a dataset, it passes as many constraints as possible to the source data service and then applies the remaining constraints to the data returned by the service, before handing the data to the user.</li>
<li>Valid Range -- Unlike many other dataset types, EDDTableFromAsciiService usually doesn&#x27;t know the range of data for each variable, so it can&#x27;t quickly reject requests for data outside of the valid range.</li>
<li>Parsing the ASCII Text Response -- When EDDTableFromAsciiService gets a response from an ASCII Text Service, it must validate that the response has the expected format and information, and then extract the data. You can specify the format by using various special tags in the chunk of XML for this dataset:<!-- -->
<ul>
<li>&lt;beforeData1&gt; through &lt;beforeData10&gt; tags -- You can specify a series of pieces of text (as many as you want, up to 10) that EDDTableFromAsciiService must look for in the header of the ASCII text returned by the service with &lt;beforeData1&gt; through &lt;beforeData10&gt;. For example, this is useful for verifying that the response includes the expected variables using the expected units. The last beforeData tag that you specify identifies the text that occurs right before the data starts.</li>
<li>&lt;afterData&gt; -- This specifies the text that EDDTableFromAsciiService will look for in the ASCII text returned by the service which signifies the end of the data.</li>
<li>&lt;noData&gt; -- If EDDTableFromAsciiService finds this text in the ASCII text returned by the service, it concludes that there is no data which matches the request.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromasciiservice-skeleton-xml">EDDTableFromAsciiService skeleton XML<a href="#eddtablefromasciiservice-skeleton-xml" class="hash-link" aria-label="Direct link to EDDTableFromAsciiService skeleton XML" title="Direct link to EDDTableFromAsciiService skeleton XML">​</a></h4>
<blockquote>
<p>  &lt;dataset type=&quot;EDDTableFromAsciiService...&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#addvariableswhere">&lt;addVariablesWhere&gt;</a>...&lt;/addVariablesWhere&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->      &lt;sourceUrl&gt;...&lt;/sourceUrl&gt;<br>
<!-- -->      &lt;beforeData1&gt;...&lt;beforeData1&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      ...<br>
<!-- -->      &lt;beforeData10&gt;...&lt;beforeData10&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      &lt;afterData&gt;...&lt;afterData&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      &lt;noData&gt;...&lt;noData&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#global-attributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#datavariable">&lt;dataVariable&gt;</a>...&lt;/dataVariable&gt; &lt;!-- 1 or more --&gt;<br>
<!-- -->  &lt;/dataset&gt;</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromasciiservicenos">EDDTableFromAsciiServiceNOS<a href="#eddtablefromasciiservicenos" class="hash-link" aria-label="Direct link to EDDTableFromAsciiServiceNOS" title="Direct link to EDDTableFromAsciiServiceNOS">​</a></h3>
<p><a href="#eddtablefromasciiservicenos"><strong>EDDTableFromAsciiServiceNOS</strong></a> makes EDDTable datasets from the ASCII text data services offered by NOAA&#x27;s <a href="https://oceanservice.noaa.gov/" target="_blank" rel="noopener noreferrer">National Ocean Service (NOS)</a>. For information on how this class works and how to use it, see this class&#x27;s superclass <a href="#eddtablefromasciiservice">EDDTableFromAsciiService</a>. It is unlikely that anyone other than Bob Simons will need to use this subclass.</p>
<p>Since the data within the response from a NOS service uses a columnar ASCII text format, data variables other than latitude and longitude must have a special attribute which specifies which characters of each data line contain that variable&#x27;s data, for example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;responseSubstring&quot;&gt;17, 25&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromalldatasets">EDDTableFromAllDatasets<a href="#eddtablefromalldatasets" class="hash-link" aria-label="Direct link to EDDTableFromAllDatasets" title="Direct link to EDDTableFromAllDatasets">​</a></h3>
<p><a href="#eddtablefromalldatasets"><strong>EDDTableFromAllDatasets</strong></a> is a higher-level dataset which has information about all of the other datasets which are currently loaded in your ERDDAP. Unlike other types of datasets, there is no specification for the allDatasets dataset in datasets.xml. ERDDAP™ automatically creates one EDDTableFromAllDatasets dataset (with datasetID=allDatasets). Thus, an allDatasets dataset will be created in each ERDDAP™ installation and will work the same way in each ERDDAP™ installation.</p>
<p>The allDatasets dataset is a tabular dataset. It has a row of information for each dataset. It has columns with information about each dataset, e.g., datasetID, accessible, institution, title, minLongitude, maxLongitude, minLatitude, maxLatitude, minTime, maxTime, etc. Because allDatasets is a tabular dataset, you can query it the same way you can query any other tabular dataset in ERDDAP™, and you can specify the file type for the response. This lets users search for datasets of interest in very powerful ways.<br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromasciifiles">EDDTableFromAsciiFiles<a href="#eddtablefromasciifiles" class="hash-link" aria-label="Direct link to EDDTableFromAsciiFiles" title="Direct link to EDDTableFromAsciiFiles">​</a></h3>
<p><a href="#eddtablefromasciifiles"><strong>EDDTableFromAsciiFiles</strong></a> aggregates data from comma-, tab-, semicolon-, or space-separated tabular ASCII data files.</p>
<ul>
<li>Most often, the files will have column names on the first row and data starting on the second row. (Here, the first row of the file is called row number 1.) But you can use &lt;columnNamesRow&gt; and &lt;firstDataRow&gt; in your datasets.xml file to specify a different row number.</li>
<li>ERDDAP™ allows the rows of data to have different numbers of data values. ERDDAP™ assumes that the missing data values are the final columns in the row. ERDDAP™ assigns the standard missing value values for the missing data values. (added v1.56)</li>
<li>ASCII files are easy to work with, but they are not the most efficient way to store/retrieve data. For greater efficiency, save the files as NetCDF v3 .nc files (with one dimension, &quot;row&quot;, shared by all variables) instead. You can <a href="#millions-of-files">use ERDDAP™ to generate the new files</a>.</li>
<li>See this class&#x27; superclass, <a href="#eddtablefromfiles">EDDTableFromFiles</a>, for information on how this class works and how to use it.</li>
<li>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. Because of the total lack of metadata in ASCII files, you will always need to edit the results of GenerateDatasetsXml.</li>
<li>WARNING: When ERDDAP™ reads ASCII data files, if it finds an error on a given line (e.g., incorrect number of items), it logs a warning message (&quot;WARNING: Bad line(s) of data&quot; ... with a list of the bad lines on subsequent lines) to the <a href="/docs/server-admin/additional-information#log">log.txt file</a> and then continues to read the rest of the data file. Thus, it is your responsibility to look periodically (or write a script to do so) for that message in the log.txt so that you can fix the problems in the data files. ERDDAP™ is set up this way so that users can continue to read all of the available valid data even though some lines of the file have flaws.<br>
<!-- --> </li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromawsxmlfiles">EDDTableFromAwsXmlFiles<a href="#eddtablefromawsxmlfiles" class="hash-link" aria-label="Direct link to EDDTableFromAwsXmlFiles" title="Direct link to EDDTableFromAwsXmlFiles">​</a></h3>
<p><a href="#eddtablefromawsxmlfiles"><strong>EDDTableFromAwsXmlFiles</strong></a> aggregates data from a set of Automatic Weather Station (AWS) XML data files using the WeatherBug Rest XML API (which is no longer active).</p>
<ul>
<li>This type of file is a simple but inefficient way to store the data, because each file usually seems to contain the observation from just one time point. So there may be a large number of files. If you want to improve performance, consider consolidating groups of observations (a week&#x27;s worth?) in NetCDF v3 .nc files (best: .nc files with the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#discrete-sampling-geometries" target="_blank" rel="noopener noreferrer">CF Discrete Sampling Geometries (DSG) Contiguous Ragged Array format</a>) and using <a href="#eddtablefrommultidimncfiles">EDDTableFromMultidimNcFiles</a> (or <a href="#eddtablefromnccffiles">EDDTableFromNcCFFiles</a>) to serve the data. You can <a href="#millions-of-files">use ERDDAP™ to generate the new files</a>.</li>
<li>See this class&#x27; superclass, <a href="#eddtablefromfiles">EDDTableFromFiles</a>, for information on how this class works and how to use it.<br>
<!-- --> </li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromcolumnarasciifiles">EDDTableFromColumnarAsciiFiles<a href="#eddtablefromcolumnarasciifiles" class="hash-link" aria-label="Direct link to EDDTableFromColumnarAsciiFiles" title="Direct link to EDDTableFromColumnarAsciiFiles">​</a></h3>
<p><a href="#eddtablefromcolumnarasciifiles"><strong>EDDTableFromColumnarAsciiFiles</strong></a> aggregates data from tabular ASCII data files with fixed-width columns.</p>
<ul>
<li>
<p>Most often, the files will have column names on the first row and data starting on the second row. The first line/row in the file is called row #1. But you can use &lt;columnNamesRow&gt; and &lt;firstDataRow&gt; in your datasets.xml file to specify a different row number.</p>
</li>
<li>
<p>The &lt;addAttributes&gt; for each &lt;dataVariable&gt; for these datasets MUST include these two special attributes:</p>
<ul>
<li>&lt;att name=&quot;startColumn&quot;&gt;<em>integer</em>&lt;att&gt; -- specifies the character column in each line that is the start of this data variable.</li>
<li>&lt;att name=&quot;stopColumn&quot;&gt;<em>integer</em>&lt;att&gt; -- specifies the character column in each line that is the 1 after the end of this data variable.</li>
</ul>
<p>The first character column is called column #0.<br>
<!-- -->For example, for this file that has time values abutting temperature values :</p>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      0         1         2        &lt;-- character column number 10&#x27;s digit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      0123456789012345678901234567 &lt;-- character column number 1&#x27;s digit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      time                temp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      2014-12-01T12:00:00Z12.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      2014-12-02T12:00:00Z13.6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      2014-12-03T12:00:00Z11.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>the time data variable would have</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;att name=&quot;startColumn&quot;&gt;0&lt;att&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;att name=&quot;stopColumn&quot;&gt;20&lt;att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and the time data variable would have</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;att name=&quot;startColumn&quot;&gt;20&lt;att&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;att name=&quot;stopColumn&quot;&gt;24&lt;att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>These attributes MUST be specified for all variables except <a href="#fixed-value-sourcenames">fixed-value</a> and <a href="#filename-sourcenames">file-name-source-names</a> variables.</p>
<ul>
<li>ASCII files are easy to work with, but they are not an efficient way to store/retrieve data. For greater efficiency, save the files as NetCDF v3 .nc files (with one dimension, &quot;row&quot;, shared by all variables) instead. You can <a href="#millions-of-files">use ERDDAP™ to generate the new files</a>.</li>
<li>See this class&#x27; superclass, <a href="#eddtablefromfiles">EDDTableFromFiles</a>, for information on how this class works and how to use it.</li>
<li>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. Because of the difficulty of determining the start and end positions for each data column and the total lack of metadata in ASCII files, you will always need to edit the results from GenerateDatasetsXml.<br>
<!-- --> </li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromhttpget">EDDTableFromHttpGet<a href="#eddtablefromhttpget" class="hash-link" aria-label="Direct link to EDDTableFromHttpGet" title="Direct link to EDDTableFromHttpGet">​</a></h3>
<p>EDDTableFromHttpGet is different from all other types of datasets in ERDDAP™ in that it has a system whereby specific &quot;authors&quot; can add data, revise data, or delete data from the dataset by regular HTTP GET or <a href="#http-post">POST</a> requests from a computer program, a script or a browser. The dataset is queryable by users in the same way that all other EDDTable datasets are queryable in ERDDAP. See the description of this class&#x27;s superclass, <a href="#eddtablefromfiles">EDDTableFromFiles</a>, to read about the features which are inherited from that superclass.</p>
<p>The unique features of EDDTableFromHttpGet are described below. You need to read all of this initial section and understand it; otherwise, you may have unrealistic expectations or get yourself into trouble that is hard to fix.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="intended-use">Intended Use<a href="#intended-use" class="hash-link" aria-label="Direct link to Intended Use" title="Direct link to Intended Use">​</a></h4>
<p>This system is intended for:</p>
<ul>
<li>Tabular (in situ) data, not gridded data.</li>
<li>Real time data -<br>
<!-- -->The goal is to allow an author (e.g., the sensor, an automated QC script, or a specific human) to make a change to the dataset (via an <a href="#insert-and-delete">.insert or .delete command</a>) and make that change accessible to ERDDAP™ users, all in less than 1 second, and possibly much faster. Most of that 1 second is network time. ERDDAP™ can process the request in about 1 ms and the data is immediately accessible to users. This is a <a href="#httpget-speed">fast</a>, <a href="#robust">robust</a>, and <a href="#system-reliability">reliable system</a>.</li>
<li>Almost any frequency of data -<br>
<!-- -->This system can accept infrequent data (e.g., daily) through very frequent data (e.g., 100 Hz data). If you optimize the system, it can handle higher frequency data (perhaps 10 KHz data if you go to extremes).</li>
<li>Data from one sensor or a collection of similar sensors.</li>
<li><a href="#versioning">Versioning</a> / <a href="https://en.wikipedia.org/wiki/Reproducibility" target="_blank" rel="noopener noreferrer">Reproducible Science</a> / DOIs --<br>
<!-- -->Situations where you need to be able to make changes to the data (e.g., change a quality control flag), know which author made each change, know the timestamp of when the author made the change, and (upon request) be able to see the original data from before the change was made. Thus, these datasets are eligible for <a href="https://en.wikipedia.org/wiki/Digital_object_identifier" target="_blank" rel="noopener noreferrer">DOIs</a>. because they meet the DOI requirement that the dataset is unchanging, except by aggregation. In general, near real time datasets are not eligible for DOIs because the data is often retroactively changed (e.g., for QA/QC purposes).<br>
<!-- --> </li>
</ul>
<p>Once data is in an EDDTableFromHttpGet dataset, any user can request data in the same way that they request data from any other EDDTable dataset.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="experimental-be-careful">Experimental: Be Careful<a href="#experimental-be-careful" class="hash-link" aria-label="Direct link to Experimental: Be Careful" title="Direct link to Experimental: Be Careful">​</a></h4>
<p>Since this system is new and since lost environmental data can&#x27;t be reacquired, you should treat EDDTableFromHttpGet as experimental. If you are transitioning from another system, please run the old system and the new system in parallel until you are confident that the new system works well (weeks or months, not just hours or days). In all cases, please make sure your system separately archives the .insert and .delete URLs that are sent to the EDDTableFromHttpGet dataset (even if just in the Apache and/or Tomcat logs), at least for a while. And in all cases, make sure that the data files created by your EDDTableFromHttpGet dataset are routinely backed up to external data storage devices. (Note that <a href="https://en.wikipedia.org/wiki/Rsync" target="_blank" rel="noopener noreferrer">rsync</a>. can back up the data files created by EDDTableFromHttpGet very efficiently.)<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="insert-and-delete">.insert and .delete<a href="#insert-and-delete" class="hash-link" aria-label="Direct link to .insert and .delete" title="Direct link to .insert and .delete">​</a></h4>
<p>For any dataset in ERDDAP™, when you send a request to ERDDAP™ for a subset of the data in a dataset, you specify the file type that you want for the response, e.g., .csv, .htmlTable, .nc, .json. EDDTableFromHttpGet extends this system to support two additional &quot;file types&quot; which can insert (or change) or delete data in the dataset:</p>
<ul>
<li>
<p>.insert</p>
<ul>
<li>The request is formatted like a standard HTML form response, with key=value pairs, separated by &#x27;&amp;&#x27;. For example,<br>
<!-- -->https://<em>some.erddap.url</em>/erddap/tabledap/myDataset**.insert**?stationID=46088&amp;time=2016-03-30T12:37:55Z&amp;latitude=10.1&amp;longitude=-150.1&amp;airTemp=17.23&amp;waterTemp=12.3&amp;author=JohnSmith_someKey1<br>
<!-- -->tells ERDDAP™ to add or change the data for stationID=46088 for the specified time.</li>
<li>The author of this change is JohnSmith and the key is someKey1.</li>
<li>The URL must include valid values (not missing values) for all of the <a href="#httpgetrequiredvariables-global-attribute">httpGetRequiredVariables</a></li>
<li>If the values of the httpGetRequiredVariables in the request (e.g., stationID and time) match the values on a row already in the dataset, the new values effectively overwrite the old values (although the old values are still accessible if the user requests data from a previous <a href="#versioning">version</a> of the dataset).</li>
<li>The .insert URL must never include &amp;timestamp= (ERDDAP™ generates that value) or &amp;command= (that is specified by .insert (which is command=0) or .delete (which is command=1)).</li>
<li>If the .insert URL doesn&#x27;t specify values for other columns that are in the dataset, they are assumed to be the native missing values (MAX_VALUE for integer data types, NaN for floats and doubles, and &quot;&quot; for Strings).<br>
<!-- --> </li>
<li>.delete<!-- -->
<ul>
<li>The request is formatted like a standard HTML form response, with key=value pairs, separated by &#x27;&amp;&#x27;. For example,<br>
<!-- -->https://<em>some.erddap.url</em>/erddap/tabledap/myDataset**.delete**?stationID=46088&amp;time=2016-03-30T12:37:55Z&amp;author=JohnSmith_someKey1<br>
<!-- -->tells ERDDAP™ to delete the data for stationID=46088 at the specified time.</li>
<li>The author of this change is JohnSmith and the key is someKey1.</li>
<li>The URL must specify the <a href="#httpgetrequiredvariables-global-attribute">httpGetRequiredVariables</a> in the request (e.g., stationID and time). If those values match the values on a row already in the dataset (which they usually will), the old values are effectively deleted (although the old values are still accessible if a user requests data from a previous <a href="#versioning">version</a> of the dataset).</li>
<li>There is no need to specify values for non-HttpGetRequiredVariables, other than author, which is needed to authenticate the request.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<p>Details:</p>
<ul>
<li>.insert and .delete requests are formatted like standard HTML form responses, with key=value pairs, separated by &#x27;&amp;&#x27;. The values must be <a href="https://en.wikipedia.org/wiki/Percent-encoding" target="_blank" rel="noopener noreferrer">percent encoded</a>. Thus, you need to encode special characters into the form %HH, where HH is the 2 digit hexadecimal value of the character. Usually, you just need to convert a few of the punctuation characters: % into %25, &amp; into %26, &quot; into %22, &lt; into %3C, = into %3D, &gt; into %3E, + into %2B, | into %7C, [ into %5B, ] into %5D, space into %20, and convert all characters above #127 into their UTF-8 form and then percent encode each byte of the UTF-8 form into the %HH format (ask a programmer for help).</li>
<li>.insert and .delete requests must include the <a href="#httpgetrequiredvariables-global-attribute">httpGetRequiredVariables</a>, e.g., stationID and time. For .insert requests, variables which are not specified in the request are assumed to be missing values (MAX_VALUE for integer variables, NaN for float and double variables, and an empty String for String variables). For .delete requests, values for non-HttpGetRequiredVariables (other than author, which is required) are ignored.</li>
<li>.insert and .delete requests must include the name of the author and the author&#x27;s key via a parameter in the form author=<em>author_key</em> as the last parameter in the request. Requiring this to be last ensures that the entire request has been received by ERDDAP. Only the author (not the key) will be stored in the data file. You must specify the list of allowed <em>author_key</em>&#x27;s via the global attribute <a href="#httpgetkeys">httpGetKeys</a></li>
<li>.insert and .delete parameters may be scalar (single) values or arrays of any length in the form [value1,value2,value3,...,valueN]. For a given request, all variables with arrays must have arrays with the same number of values (else it is an error). If a request has scalar and array values, the scalar values are replicated to become arrays with the same length as the specified arrays, e.g., &amp;stationID=46088 might be treated as &amp;stationID=[46088,46088,46088]. Arrays are the key to <a href="#httpget-speed">high throughput</a>. Without arrays, it will be challenging to .insert or .delete more than 8 rows of data per second from a remote author (because of all the overhead of the network). With arrays, it will be easy to .insert or .delete more than 1000 rows of data per second from a remote sensor.</li>
<li>.insert and .delete accept (without an error message) floating point numbers when integers are expected. In these cases, the dataset rounds the values to integers.</li>
<li>.insert and .delete accept (without an error message) integer and floating point numbers which are out-of-range of the variable&#x27;s data type. In these cases, the dataset stores the values as ERDDAP&#x27;s native missing values for that data type (MAX_VALUE for integer types and NaN for floats and doubles).<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="response">Response<a href="#response" class="hash-link" aria-label="Direct link to Response" title="Direct link to Response">​</a></h4>
<p>If the .insert or .delete URL succeeds, the HTTP response code will be 200 (OK) and the response will be text with a .json object, e.g.,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;status&quot;:&quot;success&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;nRowsReceived&quot;:1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;stringTimestamp&quot;:&quot;2018-11-05T22:12:19.517Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;numericTimestamp&quot;:1.541455939517+E9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that the timestamps have millisecond precision.</p>
<p>If the .insert or .delete URL fails, you will get an HTTP response code other than 200 (Okay), e.g., Error 403 Forbidden if you submit an incorrect author_key value. ERDDAP™ sends the HTTP response code (not, eg., a .json formatted error) because that&#x27;s how things are done in the internet and because errors can occur anywhere in the system (e.g., in the network, which returns an HTTP error). If the error is from ERDDAP™, the response may include some text (not .json) with a more detailed explanation of what went wrong, but the HTTP response code (200=Okay, anything else is trouble) is the proper way to check if the .insert or .delete succeeded. If checking the HTTP response code isn&#x27;t possible or is inconvenient, search for &quot;status&quot;:&quot;success&quot; in the response text which should be a reliable indication of success.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="log-files">Log Files<a href="#log-files" class="hash-link" aria-label="Direct link to Log Files" title="Direct link to Log Files">​</a></h4>
<p>When EDDTableFromHttpGet receives .insert and .delete commands, it simply appends the information to the relevant file in a set of log files, each of which is a table stored in a <a href="https://jsonlines.org/examples/" target="_blank" rel="noopener noreferrer">JSON Lines CSV file</a>. When a user makes a request for data, ERDDAP™ quickly reads the relevant log files, applies the changes to the dataset in the order they were made, and then filters the request via the user&#x27;s constraints like any other ERDDAP™ data request. The partitioning of the data into various log files, the storage of various pieces of information (e.g., the timestamp of the command, and whether the command was .insert or .delete), and various aspects of the setup of the dataset, all make it possible for ERDDAP to store data to and retrieve data from this dataset very quickly and very efficiently.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="security-and-author">Security and Author<a href="#security-and-author" class="hash-link" aria-label="Direct link to Security and Author" title="Direct link to Security and Author">​</a></h4>
<p>Every .insert and .delete command must include &amp;author=<em>author_key</em> as the last parameter, where author_key is composed of the author&#x27;s identifier (you chose: name, initials, pseudonym, number), an underscore, and a secret key. The ERDDAP™ administrator will work with authors to generate the list of valid author_key values, which can be changed at any time.<br>
<!-- -->When EDDTableFromHttpGet receives an .insert or .delete command, it makes sure that the authorID_key is the last parameter and valid. Because it is the last parameter, it indicates that the entire command line reached ERDDAP™ and wasn&#x27;t truncated. The secret key ensures that only specific authors may insert or delete data in the dataset. ERDDAP™ then extracts the authorID and saves that in the author variable, so that anyone can see who was responsible for a given change to the dataset.<br>
<!-- -->.insert and .delete commands can only be made via https: (secure) ERDDAP™ URLs. This ensures that the information being transferred is kept secret during transit.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="timestamp">timestamp<a href="#timestamp" class="hash-link" aria-label="Direct link to timestamp" title="Direct link to timestamp">​</a></h4>
<p>As part of the log system, EDDTableFromHttpGet adds a timestamp (the time that ERDDAP received the request) to each command that it stores in the log files. Because ERDDAP™ generates the timestamp, not the authors, it doesn&#x27;t matter if different authors are making changes from computers with clocks set to slightly different times. The timestamp reliably indicates the time when the change was made to the dataset.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="http-post">HTTP POST<a href="#http-post" class="hash-link" aria-label="Direct link to HTTP POST" title="Direct link to HTTP POST">​</a></h4>
<ul>
<li><a href="#http-post">&quot;What about HTTP POST?!&quot;</a><br>
<!-- -->HTTP <a href="https://en.wikipedia.org/wiki/POST_(HTTP)" target="_blank" rel="noopener noreferrer">POST</a> is the better alternative (compared to HTTP GET) for sending information from a client to an HTTP server. If you can, or if you really want to improve security, use POST instead of GET to send the information to ERDDAP. POST is more secure because: with GET and https, the URL is transmitted in a secure way, but the entire URL (including parameters, including the author_key) will be written to the Apache, Tomcat, and ERDDAP™ log files, where someone could read them if the files are not properly secured. With POST, the parameters are transmitted in a secure way and aren&#x27;t written to the log files. POST is a little harder for clients to work with and isn&#x27;t supported as widely by client software, but programming languages do support it. The content that you send to the dataset via GET or POST will be the same, just formatted in a different way.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="httpgetrequiredvariables-global-attribute">httpGetRequiredVariables Global Attribute<a href="#httpgetrequiredvariables-global-attribute" class="hash-link" aria-label="Direct link to httpGetRequiredVariables Global Attribute" title="Direct link to httpGetRequiredVariables Global Attribute">​</a></h4>
<p>An essential part of what makes this whole system work is the required global attribute httpGetRequiredVariables, which is a comma-separated list of the dataVariable source names which uniquely identify a row of data. This should be as minimal as possible and will almost always include the time variable. For example, here are the recommended httpGetRequiredVariables for each of the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#discrete-sampling-geometries" target="_blank" rel="noopener noreferrer">CF Discrete Sampling Geometries (DSG)</a> (Of course, the ID names may be different in your dataset.):</p>
<ul>
<li>For TimeSeries: stationID, time</li>
<li>For Trajectory: trajectoryID, time</li>
<li>For Profile: time (assuming time is the profile_id), depth</li>
<li>For TimeSeriesProfile: stationID, time (assuming time is the profile_id), depth</li>
<li>For TrajectoryProfile: trajectoryID, time (assuming time is the profile_id), depth</li>
</ul>
<p>Taking TimeSeries as an example:<br>
<!-- -->Given a .insert command that includes stationID=46088 and time=2016-06-23T19:53:00Z (and other values for other variables):</p>
<ul>
<li>If there is no existing data for that station and that time, then the effect will be to add the data to the dataset.</li>
<li>If there is existing data for that station and that time, then the effect will be to replace the existing row of data with this new data. (Of course, since ERDDAP™ keeps the log of every command it receives, the old data is still in the log. If a user requests data from a version of the dataset before this change, they will see the older data.)<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="httpgetdirectorystructure">httpGetDirectoryStructure<a href="#httpgetdirectorystructure" class="hash-link" aria-label="Direct link to httpGetDirectoryStructure" title="Direct link to httpGetDirectoryStructure">​</a></h4>
<ul>
<li>
<p><a href="#httpgetdirectorystructure">httpGetDirectoryStructure Global Attribute and Data (Log) File Names</a><br>
<!-- -->Part of what makes this whole system work efficiently is that ERDDAP™ creates a set of data (log) files, each with a different chunk of the dataset. If these are set up well, ERDDAP™ will be able to respond quickly to most requests for data. This setup is specified by the httpGetDirectoryStructure global attribute, which is a String that looks like a relative filename, e.g., &quot;stationID/10years&quot;, but is actually a specification for the directory structure. The parts of that indicate how directory and filenames for the data (log) files will be constructed.</p>
<ul>
<li>
<p>If a part is an integer (&gt;= 1) plus a timePeriod (millisecond, second, minute, hour, date, month, year, or their plurals), e.g., 10years, then the EDDTableFromHttpGet dataset will take the time value for the row of data (e.g., 2016-06-23T19:53:00Z), calculate the time truncated to that precision (e.g., 2010), and make a folder or fileName from that.</p>
<p>The goal is to get a reasonably large chunk of data into each file, but far less than 2GB.</p>
</li>
<li>
<p>Otherwise, the part of the specification must be a dataVariable&#x27;s sourceName, e.g., stationID. In this case, EDDTableFromHttpGet will make a folder or filename from the value of that variable for the new row of data (e.g., &quot;46088&quot;).</p>
</li>
</ul>
<p>Because the .insert and .delete command data is stored in specific data (log) files, EDDTableFromHttpGet usually only needs to open one or a few data (log) files to find the data for a given user request. And because each data (log) file has all of the relevant information for its chunk of the dataset, it is fast and easy for EDDTableFromHttpGet to make a specific version (or the current version) of the dataset for the data in that file (and not have to generate the requested version of the entire dataset).</p>
<p>General guidelines are based on the quantity and frequency of the data. If we assume 100 bytes per row of data, then ...</p>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    | Frequency  &lt;br&gt;of measurements | Recommended  &lt;br&gt;httpGetDirectoryStructure |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | --- | --- |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | \&gt;=1 per second | *featureID*/1year/1day |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | \&gt;=1 per minute | *featureID*/2months |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | \&gt;=1 per hour | *featureID*/10years |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    | \&gt;=1 per day | *featureID* |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For example, if the directory structure is stationID/2months and you insert data from two stations (46088 and 46155) with time values from Dec 2015 through May 2016, EDDTableFromHttpGet will create directories named 46088 and 46155 and create files in each named 2015-11.jsonl, 2016-01.jsonl, 2016-03.jsonl, 2016-05.jsonl (each holding 2 months worth of data for the relevant station). At any time in the future, if you use .insert or .delete to change or delete the data for, for example, station 46088 at 2016-04-05T14:45:00Z, EDDTableFromHttpGet will append that command to 46088/2016-03.jsonl, the relevant data (log) file. And clearly, it is fine to add data for other stations at any time in the future, since the dataset will simply create additional directories as needed to hold the data from the new stations.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="httpgetkeys">httpGetKeys<a href="#httpgetkeys" class="hash-link" aria-label="Direct link to httpGetKeys" title="Direct link to httpGetKeys">​</a></h4>
<p>Every EDDTableFromHttpGet dataset must have a global attribute httpGetKeys which specifies the list of allowed authors and their secret keys as a comma-separated list of <em>author_key</em>, e.g., JohnSmith_someKey1, HOBOLogger_someKey2, QCScript59_someKey3 .</p>
<ul>
<li>author_key&#x27;s are case-sensitive and must be entirely ASCII characters (#33 - #126, and without any comma, &quot; or &#x27; characters</li>
<li>Keys are like passwords, so they MUST be &gt;=8 characters, hard to guess, and without internal dictionary words. You should treat them as you would treat passwords -- keep them private.</li>
<li>The first &#x27;_&#x27; character separates the author from the key, so the author name can&#x27;t include a &#x27;_&#x27; character (but a key can).</li>
<li>Any given author can have one or more author_key&#x27;s, e.g., JohnSmith_someKey1, JohnSmith_someKey7, etc.</li>
<li>You can change the value of this attribute any time. The changes take effect the next time the dataset is loaded.</li>
<li>This information will be removed from the dataset&#x27;s globalAttributes before it is made public.</li>
<li>Each request to the dataset to insert or delete data must include an &amp;author=<em>author_key</em> parameter. After verifying the validity of the key, ERDDAP™ only saves the author part (not the key) in the data file.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="set-up">Set Up<a href="#set-up" class="hash-link" aria-label="Direct link to Set Up" title="Direct link to Set Up">​</a></h4>
<p>Here are the recommended steps to setting up an EDDTableFromHttpGet dataset:</p>
<ol>
<li>
<p>Make the main directory to hold this dataset&#x27;s data. For this example, let&#x27;s use /data/testGet/ . The user running GenerateDatasetsXml and the user running ERDDAP™ must both have read-write access to this directory.<br>
<!-- --> </p>
</li>
<li>
<p>Use a text editor to make a sample .jsonl CSV file with the extension .jsonl in that directory.<br>
<!-- -->The name isn&#x27;t important. For example, you could call it sample.jsonl<br>
<!-- -->Make a 2 line .jsonl CSV file, with column names on the first line and dummy/typical values (of the correct data type) on the second line. Here is a sample file that is suitable for a collection of featureType=TimeSeries data that measured air and water temperature.<br>
<!-- -->[For featureType=Trajectory, you might change stationID to be trajectoryID.]<br>
<!-- -->[For featureType=Profile, you might change stationID to be profileID and add a depth variable.]</p>
<p>[&quot;stationID&quot;, &quot;time&quot;, &quot;latitude&quot;, &quot;longitude&quot;, &quot;airTemp&quot;, &quot;waterTemp&quot;, &quot;timestamp&quot;, &quot;author&quot;, &quot;command&quot;]
[&quot;myStation&quot;, &quot;2018-06-25T17:00:00Z&quot;, 0.0, 0.0, 0.0, 0.0, 0.0, &quot;SomeBody&quot;, 0]</p>
<p>Note:</p>
<ul>
<li>The actual data values don&#x27;t matter because you will eventually delete this file, but they should be of the correct data type. Notably, the time variable should use the same format that the actual data from the source will use.</li>
<li>For all variables, the sourceName will equal the destinationName, so use the correct/final variable names now, including time, latitude, longitude and sometimes depth or altitude if variables with that information will be included.</li>
<li>There will almost always be a variable named time which records the time the observation was made. It can be dataType String with <a href="#string-time-units">units suitable for string times</a> (e.g., yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ss<!-- -->.SSSZ) or dataType double with <a href="#time-units">units suitable for numeric times</a> (e.g., seconds since 1970-01-01T00:00:00Z, or some other base time).</li>
<li>Three of the columns (usually the last three) must be timestamp, author, command.</li>
<li>The timestamp column will be used by EDDTableFromHttpGet to add a timestamp indicating when it added a given line of data to the data file. It will have dataType double and units seconds since 1970-01-01T00:00:00Z.</li>
<li>The author column with dataType String will be used to record which authorized author provided this line&#x27;s data. Authorized authors are specified by the <a href="#httpgetkeys">httpGetKeys global attribute</a>. Although the keys are specified as <em>author_key</em> and are in the &quot;request&quot; URL in that form, only the author part is saved in the data file.</li>
<li>The command column with dataType byte will indicate if the data on this line is an insertion (0) or a deletion (1).<br>
<!-- --> </li>
</ul>
</li>
<li>
<p>Run GenerateDatasetsXml and tell it</p>
<ol>
<li>The dataset type is EDDTableFromHttpGet</li>
<li>The directory is (for this example) /data/testGet/</li>
<li>The sample file is (for this example) /data/testGet/startup.jsonl</li>
<li>The httpGetRequiredVariables are (for this example) stationID, time See the description of <a href="#httpgetrequiredvariables-global-attribute">httpGetRequiredVariables</a> below.</li>
<li>If data is collected every 5 minutes, the httpGetDirectoryStructure for this example is stationID/2months . See the description of <a href="#httpgetdirectorystructure">httpGetDirectoryStructure</a> below.</li>
<li>The <a href="#httpgetkeys">httpGetKeys</a></li>
</ol>
<p>Add the output (the chunk of datasets.xml for the dataset) to datasets.xml.<br>
<!-- --> </p>
</li>
<li>
<p>Edit the datasets.xml chunk for this dataset to make it correct and complete.<br>
<!-- -->Notably, replace all the ??? with correct content.<br>
<!-- --> </p>
</li>
<li>
<p>For the &lt;fileTableInMemory&gt; setting:</p>
<ul>
<li>Set this to true if the dataset will usually get frequent .insert and/or .delete requests (e.g,. more often than once every 10 seconds). This helps EDDTableFromHttpGet respond faster to .insert and/or .delete requests. If you set this to true, EDDTableFromHttpGet will still save the fileTable and related information to disk periodically (as needed, roughly every 5 seconds).</li>
<li>Set this to false (the default) if the dataset will usually get infrequent .insert and/or .delete requests (e.g., less than once every 10 seconds).<br>
<!-- --> </li>
</ul>
</li>
<li>
<p>Note: It is possible to use &lt;cacheFromUrl&gt; and related settings in datasets.xml for EDDTableFromHttpGet datasets as a way to make and maintain a local copy of a remote EDDTableFromHttpGet dataset on another ERDDAP. However, in this case, this local dataset will reject any .insert and .delete requests.</p>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-eddtablefromhttpget-datasets">Using EDDTableFromHttpGet Datasets<a href="#using-eddtablefromhttpget-datasets" class="hash-link" aria-label="Direct link to Using EDDTableFromHttpGet Datasets" title="Direct link to Using EDDTableFromHttpGet Datasets">​</a></h4>
<ul>
<li>Authors can make &quot;requests&quot; which <a href="#insert-and-delete">insert data to or delete data from the dataset</a>.<br>
<!-- --> </li>
<li>After real data has been inserted into the dataset, you can and should delete the original sample data file.<br>
<!-- --> </li>
<li>Users can request data from the dataset as they do for any other EDDTable dataset in ERDDAP. If the request doesn&#x27;t include a constraint on the timestamp column, then the request gets data from the current version of the dataset (the log file after processing all of the insertion and deletion commands and re-sorting by the httpGetRequiredVariables).<br>
<!-- --> </li>
<li>Users can also make requests which are specific to EDDTableFromHttpGet datasets:<!-- -->
<ul>
<li>If the request includes a &lt; or &lt;= constraint of the timestamp column, then ERDDAP™ processes rows of the log file up until the specified timestamp. In effect, this temporarily deletes all of the changes made to the dataset since that timestamp value. For more info, see <a href="#versioning">Versioning</a>.</li>
<li>If the request includes a &gt;, &gt;=, or = constraint of the timestamp column, e.g., &amp;timestamp&lt;=0, then ERDDAP™ returns the data from the data files as is, without processing the insertion and deletion commands.</li>
</ul>
</li>
<li>In the future, we envision that tools will be built (by us? by you?) for working with these datasets. For example, there could be a script which reads the raw log files, applies a different calibration equation, and generates/updates a different dataset with that derived information. Note that the script can get the original data via a request to ERDDAP™ (which gets the data in the file format which is easiest for the script to work with) and generate/update the new dataset via .insert &quot;requests&quot; to ERDDAP. The script doesn&#x27;t need direct access to the data files; it can be on any authorized author&#x27;s computer.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="detailed-information-about-eddtablefromhttpget">Detailed Information about EDDTableFromHttpGet<a href="#detailed-information-about-eddtablefromhttpget" class="hash-link" aria-label="Direct link to Detailed Information about EDDTableFromHttpGet" title="Direct link to Detailed Information about EDDTableFromHttpGet">​</a></h4>
<p>The topics are:</p>
<ul>
<li><a href="#dont-change-the-setup">DON&#x27;T change the setup!</a></li>
<li><a href="#crud">CRUD</a></li>
<li><a href="#invalidrequests">InvalidRequests</a></li>
<li><a href="#httpget-speed">Speed</a></li>
<li><a href="#robust">Robust</a></li>
<li><a href="#system-reliability">System Reliability</a></li>
<li><a href="#versioning">Versioning</a></li>
<li><a href="#https-put-and-delete">&quot;What about HTTP PUT and DELETE?!&quot;</a></li>
<li><a href="#httpget-notes">Notes</a></li>
<li><a href="#thanks">Thanks to CHORDS for the basic idea.</a></li>
</ul>
<p>Here is the detailed information:</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="dont-change-the-setup">DON&#x27;T change the setup!<a href="#dont-change-the-setup" class="hash-link" aria-label="Direct link to DON&#x27;T change the setup!" title="Direct link to DON&#x27;T change the setup!">​</a></h5>
<p>Once the dataset has been created and you have added data to it:</p>
<ul>
<li>DON&#x27;T add or remove any dataVariables.</li>
<li>DON&#x27;T change the sourceName or destinationName of the dataVariables.</li>
<li>DON&#x27;T change the dataType of the dataVariables. But you can change the dataVariable&#x27;s metadata.</li>
<li>DON&#x27;T change the httpGetRequiredVariables global attribute.</li>
<li>DON&#x27;T change the httpGetDirectoryStructure global attribute.</li>
</ul>
<p>If you need to change any of these things, make a new dataset and transfer all of the data to the new dataset.<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="crud">CRUD<a href="#crud" class="hash-link" aria-label="Direct link to CRUD" title="Direct link to CRUD">​</a></h5>
<p>In computer science, the four fundamental commands for working with a dataset are <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete" target="_blank" rel="noopener noreferrer">CREATE, READ, UPDATE, DELETE (CRUD)</a>. SQL, the language for working with relational databases, has the equivalent in INSERT, SELECT, UPDATE, and DELETE. In EDDTableFromHttpGet,</p>
<ul>
<li>.insert is a combination of CREATE and UPDATE.</li>
<li>.delete is DELETE.</li>
<li>The regular system for requesting subsets of data is READ.</li>
</ul>
<p>Thus, EDDTableFromHttpGet supports all of the fundamental commands for working with a dataset.<br>
<!-- --> </p>
<ul>
<li>.insert or .delete requests with no errors will return HTTP status code=200 and a JSON object, e.g.,</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;status&quot;:&quot;success&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;nRowsReceived&quot;:1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;stringTimestamp&quot;:&quot;2018-03-26T15:34:05.552Z&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;numericTimestamp&quot;:1.522078445552E9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The two timestamp values refer to the same millisecond, which is the millisecond that will be stored in the timestamp variable for the rows of data that were inserted or deleted. ERDDAP™ won&#x27;t change the name and formatting of these key-value pairs in the future. ERDDAP™ may add additional key-value pairs to the JSON object in the future.<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="invalidrequests">InvalidRequests<a href="#invalidrequests" class="hash-link" aria-label="Direct link to InvalidRequests" title="Direct link to InvalidRequests">​</a></h5>
<p>Invalid .insert or .delete requests will return an HTTP error status code other than status=200 and no change will be made to the dataset. This includes requests with incorrect author information, incorrect variable names, different array lengths for different variables, missing required variables, missing required variable values, etc. If the request involves more than one data file, it is possible that part of the request will succeed and part will fail. However this shouldn&#x27;t be a problem if the sensor sending the request treats any failure as a complete failure. For example, if you tell ERDDAP™ to insert (or delete) the same data twice in a row, the worst case is that that information is stored twice, close together in the log file. It is hard to see how that could cause trouble.<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="httpget-speed">HttpGet Speed<a href="#httpget-speed" class="hash-link" aria-label="Direct link to HttpGet Speed" title="Direct link to HttpGet Speed">​</a></h5>
<p>For .insert or .delete requests (not counting http overhead), ballpark figures the speed of .insert or .delete are<br>
<!-- -->1ms per .insert with 1 row of data<br>
<!-- -->2ms per .insert with 10 rows of data in arrays ([])<br>
<!-- -->3ms per .insert with 100 rows of data in arrays ([])<br>
<!-- -->13ms per .insert with 1000 rows of data in arrays ([])<br>
<!-- -->Clearly arrays are the key to <a href="#httpget-speed">high throughput</a>. Without arrays, it will be challenging to .insert or .delete more than 8 rows of data per second from a remote author (because of all the overhead of the network). With arrays, it will be easy to .insert or .delete more than 1000 rows of data per second from a remote sensor.</p>
<p>With very large amounts of data per request, you will hit Tomcat&#x27;s limit to the maximum query length (default is 8KB?), but that can be increased by editing the maxHttpHeaderSize setting in your <em>tomcat</em>/conf/server.xml&#x27;s HTTP/1.1 Connector entry.</p>
<p>When ERDDAP™ reads the JSON Lines CSV data (log) files, there is a small time penalty compared to reading binary data files. We felt that this time penalty when reading was a reasonable price to pay for the speed and robustness of the system when writing data (which is of primary importance).</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="ssd">SSD<a href="#ssd" class="hash-link" aria-label="Direct link to SSD" title="Direct link to SSD">​</a></h5>
<p><a href="#ssd">For greater speed,</a> use a <a href="https://en.wikipedia.org/wiki/Solid-state_drive" target="_blank" rel="noopener noreferrer">Solid State Drive (SSD)</a> to store the data. They have a much faster file access time (&lt;0.1ms) than hard disk drives (3 - 12 ms). They also have a faster data transfer rate (200 - 2500 MB/s) than hard disk drives (~200 MB/s). Their cost has come down considerably in recent years. Although early SSD&#x27;s had problems after a large number of writes to a given block, this problem is now greatly reduced. If you just use the SSD to write the data once then read it many times, even a consumer-grade SSD (which is considerably less expensive than an enterprise-grade SSD) should last a long time.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="robust">Robust<a href="#robust" class="hash-link" aria-label="Direct link to Robust" title="Direct link to Robust">​</a></h5>
<p>We have tried to make this system as easy-to-work-with and as robust as possible.</p>
<ul>
<li>The system is designed to have multiple threads (e.g., the sensor, an automated QC script, and a human) simultaneously working on the same dataset and even the same file. Much of this is made possible by using a log file approach to storing the data and by using a very simple file type, <a href="https://jsonlines.org/examples/" target="_blank" rel="noopener noreferrer">JSON Lines CSV files</a>, to store the data.</li>
<li>Another huge advantage to JSON Lines CSV is that if a file ever does become corrupted (e.g., invalid because of an error on a line), it is easy to open the file in a text editor and fix the problem.</li>
<li>Another advantage is, if there is an error on a line in a file, the system can still read all the data on lines before and after the error line. And the system can still log additional .insert and .delete information.</li>
<li>A huge advantage of using admin-accessible standard files (compared to a relational database or Cassandra or other software): There is no other software which has to be maintained and which has to be running in order to store or retrieve data. And it is easy to back up standard files at any time and in an incremental way because the data is in chunks (after a while, only the current-time file for each station will be changing). In contrast, it takes considerable effort and system down time to make external backup files from databases and from Cassandra.<br>
<!-- --> </li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="system-reliability">System Reliability<a href="#system-reliability" class="hash-link" aria-label="Direct link to System Reliability" title="Direct link to System Reliability">​</a></h5>
<p>It&#x27;s reasonable to expect one server with ERDDAP™ to have 99.9% uptime -- that&#x27;s about 9 hours of downtime per year (although, you can use that up in one bad night!).<br>
<!-- -->If you are diligent and lucky, you might get 99.99% uptime (53 minutes downtime per year), since just a few restarts for updates will take that much time.<br>
<!-- -->You would have to take extreme measures (a separate backup server, uninterruptible power supply, backup air conditioning, 24x7x365 personnel to monitor the site, etc.) to have a slim chance at 99.999% uptime (5.25 minutes downtime per year). Even then, it is extremely unlikely that you will attain 99.999% uptime (or even 99.99%) because problems are often outside of your control. For example, Amazon Web Service and Google offer astonishingly reliable web services, yet big sections of them are sometimes down for hours.</p>
<p>Face it, everyone wants ERDDAP™ to have 100% uptime, or at least the vaunted &quot;six nines&quot; (99.9999% uptime equals 32 seconds of downtime per year), but there&#x27;s no way you&#x27;re going to get it no matter how much time, effort, and money you spend.</p>
<p>But ERDDAP™ uptime isn&#x27;t the real goal here. The goal is to build a reliable <strong>system</strong>, one that doesn&#x27;t lose any data. This is a solvable problem.</p>
<p>The solution is: build fault-tolerance into the computer software that is sending the data to ERDDAP. Specifically, that software should maintain a queue of data waiting to go to ERDDAP. When data is added to the queue, the software should check the response from ERDDAP. If the response doesn&#x27;t include Data received. No errors., then the software should leave the data in the queue. When more data is generated and added to the queue, the software should again try to .insert the data in the queue (perhaps with the [] system). It will succeed or fail. If it fails, it will try again later. If you write the software to work this way and if the software is prepared to queue a few days worth of data, you actually do have a good chance of uploading 100% of the sensor&#x27;s data to ERDDAP. And you will have done it without going to great effort or expense.</p>
<p>[Background: We didn&#x27;t think this up. <a href="https://en.wikipedia.org/wiki/Reliability_(computer_networking)" target="_blank" rel="noopener noreferrer">This is how computer networks achieve reliability.</a> Computer networks are inherently unreliable. So when you transfer a file from one computer to another, the sending software knows/expects that some packets may be lost. If it doesn&#x27;t get a proper acknowledgment for a given packet from the receiver, it resends the lost packet. With this approach, relatively simple sender and receiver software can build a reliable file transfer system on top of an unreliable network.]</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="why-json-lines-csv-files">Why JSON Lines CSV files?!<a href="#why-json-lines-csv-files" class="hash-link" aria-label="Direct link to Why JSON Lines CSV files?!" title="Direct link to Why JSON Lines CSV files?!">​</a></h5>
<p>EDDTableFromHttpGet uses <a href="https://jsonlines.org/examples/" target="_blank" rel="noopener noreferrer">JSON Lines CSV files</a>. for storing the data. The reasons are:</p>
<ul>
<li>The main reason is: The simplicity of JSON Lines CSV files offers a fast, easy and reliable way to allow multiple threads to write to a given file (e.g., by synchronizing on the filename).</li>
<li>If a JSON Lines CSV file ever did become corrupted (e.g., invalid because of an error on a line), EDDTableFromFromHttpGet could still read all of the data on all of the lines before and after the error line. And the .insert and .delete system could continue to add new data to the data file.</li>
<li>Because the JSON Lines CSV files are ASCII files, if a file ever did become corrupted, it would be easy to fix (in a text editor).</li>
<li>JSON Lines CSV supports Unicode strings.</li>
<li>JSON Lines CSV supports variable length strings (not limited to some max length).</li>
<li>JSON Lines CSV supports 64-bit integers (longs).</li>
<li>The formal nature and extra syntax of JSON Lines CSV (vs old-school CSV) provides some extra assurance that a given line hasn&#x27;t been corrupted.</li>
</ul>
<p>We initially tried to use .nc3 files with an unlimited dimension. However, there were problems:</p>
<ul>
<li>The main problem was: There is no reliable way to allow multiple threads to write to a .nc3 file, even if the threads cooperate by doing the writes in a synchronized way.</li>
<li>If an .nc3 file becomes corrupted, the .insert and .delete system can&#x27;t continue to use the file.</li>
<li>Because the .nc3 files are binary, if a file becomes corrupted (which they do because of the multi-threading problem) they are exceedingly hard or impossible to fix. There are no tools to help with the repair.</li>
<li>CF has no way to specify the encoding of strings, so there is no official way to support Unicode, e.g., the UTF-8 encoding. We tried to get CF to support an _Encoding attribute but were unable to make any progress. (Unidata, to their credit, does support the _Encoding attribute.)</li>
<li>.nc3 files only support fixed length strings. Again, we tried to get CF and Unidata to support variable length strings but were unable to make any progress.</li>
<li>.nc3 files don&#x27;t support an easy way to distinguish single character variables from String variables. Again, we tried to get CF and Unidata to support a system for distinguishing these two data types, but were unable to make any progress.</li>
<li>.nc3 files only support 8-bit characters with an unspecified encoding. Again, we tried to get CF and Unidata to support a system for specifying the encoding, but were unable to make any progress.</li>
<li>.nc3 files don&#x27;t support 64-bit integers (longs). Again, we tried to get CF and Unidata to support a system for longs, but were unable to make any progress.<br>
<!-- --> </li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="versioning">Versioning<a href="#versioning" class="hash-link" aria-label="Direct link to Versioning" title="Direct link to Versioning">​</a></h5>
<p>Because EDDTableFromHttpGet stores a log of all of the changes to the dataset with the timestamp and the author of each change, it can quickly recreate that dataset as of any point in time. In a sense, there is a version for any point in time. If a user&#x27;s request for data includes a timestamp &lt;= constraint, e.g., &amp;timestamp&lt;=2016-06-23T16:32:22.128Z (or any time point), but no constraint of author or command, ERDDAP™ will respond to the request by first generating a version of the dataset as of that point in time. Then, ERDDAP™ applies the user&#x27;s other constraints, as with any other request for data from ERDDAP. EDDTableFromHttpGet is set up so that this process is very fast and efficient, even for very large datasets.</p>
<p>Similarly, a user can find out when the dataset was last updated by requesting ...?timestamp&amp;timestamp=max(timestamp)&amp;distinct()</p>
<p>And for any request for data, for any version of the dataset, users can see which author made which changes, and when they made them.</p>
<p>This versioning system enables <a href="https://en.wikipedia.org/wiki/Reproducibility" target="_blank" rel="noopener noreferrer">Reproducible Science</a> because anyone, at any time, can request data from the version of the dataset at any point in time. This fine-grained versioning is not possible with any other system that we know of. The underlying mechanism is very efficient, in that no extra storage space is needed, and the processing overhead is truly minimal.</p>
<p>Not everyone has a need for this type of fine-grained versioning, but it is exceedingly useful, perhaps necessary, in the context of a large data management organization (e.g., OOI, Earth Cube, Data One, and NOAA&#x27;s NCEI) where a dataset can have multiple authors (e.g., the sensor, an automated QC script, and a human editor).</p>
<p>[History: The need for this type of versioning first came up for me (Bob) when reading about and discussing OOI in 2008. At the time, OOI had a cumbersome, slow, inefficient system for versioning based on Git. Git is great for what it was designed for, but not this. In 2008, while at an OOI discussion, I designed an extensive, efficient alternative-to-OOI system for data management, including many of the features that I have added to ERDDAP™ since then, and including this versioning system. At that time and since, OOI was committed to their versioning system and not interested in alternatives. In 2016, other aspects of this plan fell into place and I started to implement it. Because there were lots of interruptions to work on other projects, I didn&#x27;t finish until 2018. Even now, I&#x27;m not aware of any other scientific data system that offers such quick and easy access to a version of the data from any point in time, for frequently changing datasets. Simple file systems don&#x27;t offer this. Relational databases don&#x27;t. Cassandra doesn&#x27;t.]</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="https-put-and-delete">HTTPS Put and Delete<a href="#https-put-and-delete" class="hash-link" aria-label="Direct link to HTTPS Put and Delete" title="Direct link to HTTPS Put and Delete">​</a></h5>
<ul>
<li><a href="#https-put-and-delete">&quot;What about HTTPS PUT and DELETE?!&quot;</a><br>
<a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" target="_blank" rel="noopener noreferrer">Hypertext Transfer Protocol (HTTP)</a> is the basis of the World Wide Web and the reason that web page URLs begin with &quot;http://&quot; or &quot;https://&quot;. HTTPS is HTTP with an additional security layer. Every day, browsers, scripts and computer programs make billions of HTTP(S) <strong>GET</strong> requests to get information from remote sources. HTTP(S) also includes other <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods" target="_blank" rel="noopener noreferrer">verbs</a>, notably PUT (to push data to the server) and DELETE (to DELETE data from the server). Yes, PUT and DELETE are the proper way to insert data into, and delete data from, a dataset via HTTP(S). GET is supported by every piece of software that can work with HTTP(S). GET is really easy to work with. Everyone already knows how to work with GET and many know how to use POST (which can be used in essentially the same way as GET), so we made EDDTableFromHttpGet work with GET and POST. Very few people (even few computer programmers) have ever worked with PUT and DELETE. PUT and DELETE are generally only supported by computer languages, so using them requires a skillful program. So PUT and DELETE are usually a much more cumbersome approach given the way the tools have evolved.<br>
<!-- --> </li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="httpget-notes">HttpGet Notes<a href="#httpget-notes" class="hash-link" aria-label="Direct link to HttpGet Notes" title="Direct link to HttpGet Notes">​</a></h5>
<ul>
<li><a href="#httpget-notes">Notes</a>
<ul>
<li>No dataVariable may have dataType=char. Use dataType=String instead. If you really need dataType=char, email Chris.John at noaa.gov .<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="thanks">Thanks<a href="#thanks" class="hash-link" aria-label="Direct link to Thanks" title="Direct link to Thanks">​</a></h5>
<ul>
<li><a href="#thanks">Thanks to CHORDS for the basic idea.</a><br>
<!-- -->The basic idea for EDDTableFromHttpGet (i.e., using an HTTP GET request to add data to a dataset) is from UCAR&#x27;s (NCAR&#x27;s?) <a href="https://github.com/earthcubeprojects-chords" target="_blank" rel="noopener noreferrer">Cloud-Hosted Real-time Data Services (CHORDS)</a> project. The format for the parameters in the request (repeated <em>name=value</em>, separated by &amp;&#x27;s) is the same standard format that is used by HTML forms on web pages. It is a simple and brilliant idea and even more so because it meshes so perfectly with ERDDAP&#x27;s existing system for dealing with tabular data. The idea is obvious in hindsight, but I (Bob) didn&#x27;t think of it. EDDTableFromHttpGet uses that basic idea, combined with our ideas of how to implement it, to make a system in ERDDAP™ for uploading data. Other than the basic idea of using GET to push data into the system, the EDDTableFromHttpGet implementation is entirely different and entirely independent of CHORDS and has different features (e.g., log files, chunking of data, different security system, CRUD support, reproducible data). Our exposure to CHORDS was just a webinar. We did not look at their code or read about their project because we immediately knew we wanted to implement the system a different way. But we are grateful to them for the basic idea. The full reference to CHORDS is<br>
<!-- -->Daniels, M. D., Kerkez, B., Chandrasekar, V., Graves, S., Stamps, D. S., Martin, C., Dye, M., Gooch, R., Bartos, M., Jones, J., Keiser, K. (2014). Cloud-Hosted Real-time Data Services for the Geosciences (CHORDS) software. UCAR/NCAR -- Earth Observing Laboratory. <a href="https://doi.org/10.5065/d6v1236q" target="_blank" rel="noopener noreferrer">https://doi.org/10.5065/d6v1236q</a><br>
<!-- --> </li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromhyraxfiles">EDDTableFromHyraxFiles<a href="#eddtablefromhyraxfiles" class="hash-link" aria-label="Direct link to EDDTableFromHyraxFiles" title="Direct link to EDDTableFromHyraxFiles">​</a></h3>
<p><a href="#eddtablefromhyraxfiles"><strong>EDDTableFromHyraxFiles</strong></a> (deprecated) aggregates data files with several variables, each with one or more shared dimensions (for example, time, altitude (or depth), latitude, longitude), and served by a <a href="https://www.opendap.org/software/hyrax-data-server" target="_blank" rel="noopener noreferrer">Hyrax OPeNDAP server</a>.</p>
<ul>
<li>This dataset type is <strong>DEPRECATED</strong>. The newer and more general solution is to use the <a href="#cachefromurl">cacheFromUrl option for EDDTableFromFiles</a> (or a variant), which makes a local copy of the remote files and serves the data from the local files. The &lt;cacheFromUrl&gt; option can be used with any type of tabular data file.**<br>
<!-- -->If you can&#x27;t make that work for some reason, email Chris.John at noaa.gov .<br>
<!-- -->If there are no complaints before 2020, this dataset type may be removed.**</li>
<li>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. You can then edit that to fine tune it.</li>
<li>In most cases, each file has multiple values for the leftmost (first) dimension, for example, time.</li>
<li>The files often (but don&#x27;t have to) have a single value for the other dimensions (for example, altitude (or depth), latitude, longitude).</li>
<li>The files may have character variables with an additional dimension (for example, nCharacters).</li>
<li>Hyrax servers can be identified by the &quot;/dods-bin/nph-dods/&quot; or &quot;/opendap/&quot; in the URL.</li>
<li>This class screen-scrapes the Hyrax web pages with the lists of files in each directory. Because of this, it is very specific to the current format of Hyrax web pages. We will try to adjust ERDDAP™ quickly if/when future versions of Hyrax change how the files are listed.</li>
<li>The &lt;fileDir&gt; setting is ignored. Since this class downloads and makes a local copy of each remote data file, ERDDAP™ forces the fileDir to be <em>bigParentDirectory</em>/copy/<em>datasetID</em>/.</li>
<li>For &lt;sourceUrl&gt;, use the URL of the base directory of the dataset in the Hyrax server, for example,<br>
<!-- -->&lt;sourceUrl&gt;<a href="http://edac-dap.northerngulfinstitute.org/dods-bin/nph-dods/WCOS/nmsp/wcos/&amp;lt;/sourceUrl%3E" target="_blank" rel="noopener noreferrer">http://edac-dap.northerngulfinstitute.org/dods-bin/nph-dods/WCOS/nmsp/wcos/&amp;lt;/sourceUrl&gt;</a><br>
<!-- -->(but put it on one line) (sorry, that server is no longer available).<br>
<!-- -->The sourceUrl web page usually has &quot;OPeNDAP Server Index of [directoryName]&quot; at the top.</li>
<li>Since this class always downloads and makes a local copy of each remote data file, you should never wrap this dataset in <a href="#eddtablecopy">EDDTableCopy</a>.</li>
<li>See this class&#x27; superclass, <a href="#eddtablefromfiles">EDDTableFromFiles</a>, for information on how this class works and how to use it.</li>
<li>See the 1D, 2D, 3D, and 4D examples for <a href="#eddtablefromncfiles">EDDTableFromNcFiles</a>.<br>
<!-- --> </li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefrominvalidcrafiles">EDDTableFromInvalidCRAFiles<a href="#eddtablefrominvalidcrafiles" class="hash-link" aria-label="Direct link to EDDTableFromInvalidCRAFiles" title="Direct link to EDDTableFromInvalidCRAFiles">​</a></h3>
<p><a href="#eddtablefrominvalidcrafiles"><strong>EDDTableFromInvalidCRAFiles</strong></a> aggregates data from NetCDF (v3 or v4) .nc files which use a specific, invalid, variant of the CF DSG Contiguous Ragged Array (CRA) files. Although ERDDAP™ supports this file type, it is an invalid file type that no one should start using. Groups that currently use this file type are strongly encouraged to use ERDDAP™ to generate valid CF DSG CRA files and stop using these files.</p>
<p>Details: These files have multiple row_size variables, each with a sample_dimension attribute. The files are non-CF-standard files because the multiple sample (obs) dimensions are to be decoded and related to each other with this additional rule and promise that is not part of the CF DSG specification: &quot;you can associate a given e.g., temperature value (temp_obs dimension) with a given depth value (z_obs dimension, the dimension with the most values), because: the temperature row_size (for a given cast) will be either 0 or equal to the corresponding depth row_size (for that cast) (that&#x27;s the rule). So, if the temperature row_size isn&#x27;t 0, then the n temperature values for that cast relate directly to the n depth values for that cast (that&#x27;s the promise).&quot;</p>
<p>Another problem with these files: the Principal_Investigator row_size variable doesn&#x27;t have a sample_dimension attribute and doesn&#x27;t follow the above rule.</p>
<p>Sample files for this dataset type can be found at <a href="https://data.nodc.noaa.gov/thredds/catalog/ncei/wod/" target="_blank" rel="noopener noreferrer">https://data.nodc.noaa.gov/thredds/catalog/ncei/wod/</a> [2020-10-21 This server is no longer reliably available].</p>
<p>See this class&#x27; superclass, <a href="#eddtablefromfiles">EDDTableFromFiles</a>, for information on how this class works and how to use it.</p>
<p>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. You can then edit that to fine tune it.</p>
<p>The first thing GenerateDatasetsXml does for this type of dataset after you answer the questions is print the ncdump-like structure of the sample file. So if you enter a few goofy answers for the first loop through GenerateDatasetsXml, at least you&#x27;ll be able to see if ERDDAP™ can read the file and see what dimensions and variables are in the file. Then you can give better answers for the second loop through GenerateDatasetsXml.<br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromjsonlcsvfiles">EDDTableFromJsonlCSVFiles<a href="#eddtablefromjsonlcsvfiles" class="hash-link" aria-label="Direct link to EDDTableFromJsonlCSVFiles" title="Direct link to EDDTableFromJsonlCSVFiles">​</a></h3>
<p><a href="#eddtablefromjsonlcsvfiles"><strong>EDDTableFromJsonlCSVFiles</strong></a> aggregates data from <a href="https://jsonlines.org/examples/" target="_blank" rel="noopener noreferrer">JSON Lines CSV files</a>. See this class&#x27; superclass, <a href="#eddtablefromfiles">EDDTableFromFiles</a>, for information on how this class works and how to use it.</p>
<ul>
<li>
<p>As jsonlines.org says, this format is &quot;Better than CSV&quot; (and legally, as a federal employee, I can&#x27;t agree or disagree with them -- how crazy is that?). CSV has never been formally defined and is hampered by the historical baggage related to its connection to the original spreadsheet programs. JSON Lines CSV, in comparison, is fully defined and benefits from its connection to the widely used JSON standard, which in turn benefits from its connection to JavaScript and Java. Notably, there is full support for long integers and for Unicode characters in strings, and a clear way to include other special characters (notably tabs and newlines) within strings.</p>
<p>This format is particularly good for datasets where you need to periodically append additional rows to the end of a given data file. For that reason and others (see above), <a href="#eddtablefromhttpget">EDDTableFromHttpGet</a> uses Json Lines CSV files for data storage.</p>
</li>
<li>
<p>The input files are assumed to be UTF-8 encoded. However, given the \u<em>dddd</em> format for encoding special characters (e.g., \u20ac is the encoding for the Euro character), you have the option to write the files so that they contain only 7-bit ASCII characters by using \u<em>dddd</em> to encode all characters above #127.<br>
<!-- --> </p>
</li>
<li>
<p>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. You can then edit that to fine tune it.</p>
<p>The first thing GenerateDatasetsXml does for this type of dataset after you answer the questions is print the ncdump-like structure of the sample file. So if you enter a few goofy answers for the first loop through GenerateDatasetsXml, at least you&#x27;ll be able to see if ERDDAP™ can read the file and see what dimensions and variables are in the file. Then you can give better answers for the second loop through GenerateDatasetsXml.</p>
</li>
<li>
<p>WARNING: When ERDDAP™ reads JSON Lines CSV data files, if it finds an error on a given line (e.g., incorrect number of items), it logs a warning message (&quot;WARNING: Bad line(s) of data&quot; ... with a list of the bad lines on subsequent lines) to the <a href="/docs/server-admin/additional-information#log">log.txt file</a> and then continues to read the rest of the data file. Thus, it is your responsibility to look periodically (or write a script to do so) for that message in the log.txt so that you can fix the problems in the data files. ERDDAP™ is set up this way so that users can continue to read all of the available valid data even though some lines of the file have flaws.<br>
<!-- --> </p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefrommultidimncfiles">EDDTableFromMultidimNcFiles<a href="#eddtablefrommultidimncfiles" class="hash-link" aria-label="Direct link to EDDTableFromMultidimNcFiles" title="Direct link to EDDTableFromMultidimNcFiles">​</a></h3>
<p><a href="#eddtablefrommultidimncfiles"><strong>EDDTableFromMultidimNcFiles</strong></a> aggregates data from NetCDF (v3 or v4) .nc (or <a href="#ncml-files">.ncml</a>) files with several variables, each with one or more shared dimensions. The files may have character variables with or without an additional dimension (for example, STRING14). See this class&#x27; superclass, <a href="#eddtablefromfiles">EDDTableFromFiles</a>, for information on how this class works and how to use it.</p>
<ul>
<li>
<p>If the files are multidimensional CF DSG variants, use this dataset type instead of <a href="#eddtablefromncfiles">EDDTableFromNcCFFiles</a>.<br>
<!-- --> </p>
</li>
<li>
<p>For new tabular datasets from .nc files, use this option before trying the older <a href="#eddtablefromncfiles">EDDTableFromNcFiles</a>. Some advantages of this class are:</p>
<ul>
<li>This class can read more variables from a wider variety of file structures. If you specify DimensionsCSV (a comma-separated list of dimension names) in GenerateDatasetsXml (or &lt;dimensionsCSV&gt; in the datasets.xml info for one of these datasets), then ERDDAP™ will only read variables in the source files which use some or all of these dimensions, plus all scalar variables. If a dimension is in a group, you must specify its fullName, e.g., &quot;<em>groupName/dimensionName</em>&quot;.</li>
<li>This class can often reject files very quickly if they don&#x27;t match a request&#x27;s constraints. So reading data from large collections will often go much faster.</li>
<li>This class handles true char variables (non-String variables) correctly.</li>
<li>This class can trim String variables when the creator didn&#x27;t use Netcdf-java&#x27;s writeStrings (which appends char #0 to mark the end of the string).</li>
<li>This class is better at dealing with individual files that lack certain variables or dimensions.</li>
<li>This class can remove blocks of rows with missing values as specified for <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#_incomplete_multidimensional_array_representation" target="_blank" rel="noopener noreferrer">CF Discrete Sampling Geometries (DSG) Incomplete Multidimensional Array files</a><br>
<!-- --> </li>
</ul>
</li>
<li>
<p>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. You can then edit that to fine tune it.</p>
<p>The first thing GenerateDatasetsXml does for this type of dataset after you answer the questions is print the ncdump-like structure of the sample file. So if you enter a few goofy answers for the first loop through GenerateDatasetsXml, at least you&#x27;ll be able to see if ERDDAP™ can read the file and see what dimensions and variables are in the file. Then you can give better answers for the second loop through GenerateDatasetsXml.</p>
<p>Group -- GenerateDatasetsXml will ask for a &quot;Group&quot;. You can enter &quot;&quot; to have it search any/all groups, &quot;<em>someGroup</em>&quot; or &quot;<em>someGroup/someSubGroup</em>&quot; to have it search a specific group, or &quot;[root]&quot; to have it search just the root group. The &quot;Group&quot; string becomes &lt;group&gt; in the datasets.xml info for the dataset (although &quot;[root]&quot; becomes &quot;&quot;).</p>
<p>DimensionsCSV -- GenerateDatasetsXml will ask for a &quot;DimensionsCSV&quot; string. This is a comma-separated-value list of source names of a set of dimensions. GenerateDatasetsXml will only read data variables in sample .nc files which use some or all of those dimensions (and no other dimensions), plus all of the scalar variables in the file, and make the dataset from those data variables. If a dimension is in a group, you must specify its fullName, e.g., &quot;<em>groupName/dimensionName</em>&quot;.<br>
<!-- -->If you specify nothing (an empty string), GenerateDatasetsXml will look for the variables with the most dimensions, on the theory that they will be the most interesting, but there may be times when you will want to make a dataset from some other group of data variables that uses some other group of dimensions.<br>
<!-- -->If you just specify a dimension name that doesn&#x27;t exist (e.g., NO_MATCH), ERDDAP™ will just find all of the scalar variables.<br>
<!-- -->The &quot;DimensionsCSV&quot; string becomes &lt;dimensionsCSV&gt; in the datasets.xml info for the dataset.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="treatdimensionsas">treatDimensionsAs<a href="#treatdimensionsas" class="hash-link" aria-label="Direct link to treatDimensionsAs" title="Direct link to treatDimensionsAs">​</a></h4>
<p>There is a category of invalid .nc files (because they don&#x27;t follow the CF rules) that have multiple dimensions (e.g., lat, lon, time) when they should have used just one dimension (e.g., time), for example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    dimensions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time = UNLIMITED ; // (1437 currently)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        depth = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lat = 1437 ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lon = 1437 ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    variables:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        double time(time) ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        double lat(lat) ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        double lon(lon) ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        float temperature(time, depth) ;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>EDDTableFromMultidimNcFiles has a special feature to deal with these files: if you add the global attribute &quot;treatDimensionsAs&quot; to the datasets global addAttributes, you can tell ERDDAP™ to treat certain dimensions (e.g., lat and lon) as if they were another dimension (e.g., time). The attribute value must be a comma separated list specifying the &quot;from&quot; dimensions and then the &quot;to&quot; dimension, e.g.,<br>
<att name="treatDimensionsAs">lat, lon, time</att><br>
<!-- -->Then ERDDAP™ will read the file as if it were:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    dimensions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time = UNLIMITED ; // (1437 currently)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        depth = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    variables:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        double time(time) ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        double lat(time) ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        double lon(time) ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        float temperature(time, depth) ;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Of course, the current size of each of the dimensions in the list must be the same; otherwise, ERDDAP™ will treat the file as a &quot;Bad File&quot;.</p>
<p>Note that these files are invalid because they don&#x27;t follow CF rules. So even though ERDDAP™ can read them, we strongly recommend that you don&#x27;t create files like this because other CF-based software tools won&#x27;t be able to read them correctly. If you already have such files, we strongly recommend replacing them with valid files as soon as possible.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromncfiles">EDDTableFromNcFiles<a href="#eddtablefromncfiles" class="hash-link" aria-label="Direct link to EDDTableFromNcFiles" title="Direct link to EDDTableFromNcFiles">​</a></h3>
<p><a href="#eddtablefromncfiles"><strong>EDDTableFromNcFiles</strong></a> aggregates data from NetCDF (v3 or v4) .nc (or <a href="#ncml-files">.ncml</a>) files and <a href="https://github.com/zarr-developers/zarr-python" target="_blank" rel="noopener noreferrer">Zarr</a> files (as of version 2.25) with several variables, each with one shared dimension (for example, time) or more than one shared dimensions (for example, time, altitude (or depth), latitude, longitude). The files must have the same dimension names. A given file may have multiple values for each of the dimensions and the values may be different in different source files. The files may have character variables with an additional dimension (for example, STRING14). See this class&#x27; superclass, <a href="#eddtablefromfiles">EDDTableFromFiles</a>, for information on how this class works and how to use it.</p>
<p>Zarr files have slightly different behavior and require either the fileNameRegex or the pathRegex to include &quot;zarr&quot;.</p>
<ul>
<li>
<p>If the .nc files use one of the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#discrete-sampling-geometries" target="_blank" rel="noopener noreferrer">CF Discrete Sampling Geometries (DSG)</a> file formats, try using <a href="#eddtablefromncfiles">EDDTableFromNcCFFiles</a> before trying this.<br>
<!-- --> </p>
</li>
<li>
<p>For new tabular datasets from .nc files, try the newer <a href="#eddtablefrommultidimncfiles">EDDTableFromMultidimNcFiles</a> first.<br>
<!-- --> </p>
</li>
<li>
<p>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. You can then edit that to fine tune it.</p>
<p>The first thing GenerateDatasetsXml does for this type of dataset after you answer the questions is print the ncdump-like structure of the sample file. So if you enter a few goofy answers for the first loop through GenerateDatasetsXml, at least you&#x27;ll be able to see if ERDDAP™ can read the file and see what dimensions and variables are in the file. Then you can give better answers for the second loop through GenerateDatasetsXml.</p>
<p>DimensionsCSV -- GenerateDatasetsXml will ask for a &quot;DimensionsCSV&quot; string. This is a comma-separated-value list of source names of a set of dimensions. GenerateDatasetsXml will find the data variables in the .nc files which use some or all of those dimensions, plus all scalar variables, and make the dataset from those data variables. If you specify nothing (an empty string), GenerateDatasetsXml will look for the variables with the most dimensions, on the theory that they will be the most interesting, but there may be times when you will want to make a dataset from some other group of data variables that uses some other group of dimensions.</p>
</li>
<li>
<p>1D Example: 1D files are somewhat different from 2D, 3D, 4D, ... files.</p>
<ul>
<li>You might have a set of .nc data files where each file has one month&#x27;s worth of data from one drifting buoy.</li>
<li>Each file will have 1 dimension, for example, time (size = [many]).</li>
<li>Each file will have one or more 1D variables which use that dimension, for example, time, longitude, latitude, air temperature, ....</li>
<li>Each file may have 2D character variables, for example, with dimensions (time,nCharacters).<br>
<!-- --> </li>
</ul>
</li>
<li>
<p>2D Example:</p>
<ul>
<li>You might have a set of .nc data files where each file has one month&#x27;s worth of data from one drifting buoy.</li>
<li>Each file will have 2 dimensions, for example, time (size = [many]) and id (size = 1).</li>
<li>Each file will have 2 1D variables with the same names as the dimensions and using the same-name dimension, for example, time(time), id(id). These 1D variables should be included in the list of &lt;dataVariable&gt;&#x27;s in the dataset&#x27;s XML.</li>
<li>Each file will have one or more 2D variables, for example, longitude, latitude, air temperature, water temperature, ...</li>
<li>Each file may have 3D character variables, for example, with dimensions (time,id,nCharacters).<br>
<!-- --> </li>
</ul>
</li>
<li>
<p>3D Example:</p>
<ul>
<li>You might have a set of .nc data files where each file has one month&#x27;s worth of data from one stationary buoy.</li>
<li>Each file will have 3 dimensions, for example, time (size = [many]), lat (size = 1), and lon (size = 1).</li>
<li>Each file will have 3 1D variables with the same names as the dimensions and using the same-name dimension, for example, time(time), lat(lat), lon(lon). These 1D variables should be included in the list of &lt;dataVariable&gt;&#x27;s in the dataset&#x27;s XML.</li>
<li>Each file will have one or more 3D variables, for example, air temperature, water temperature, ...</li>
<li>Each file may have 4D character variables, for example, with dimensions (time,lat,lon,nCharacters).</li>
<li>The file&#x27;s name might have the buoy&#x27;s name within the file&#x27;s name.<br>
<!-- --> </li>
</ul>
</li>
<li>
<p>4D Example:</p>
<ul>
<li>You might have a set of .nc data files where each file has one month&#x27;s worth of data from one station. At each time point, the station takes readings at a series of depths.</li>
<li>Each file will have 4 dimensions, for example, time (size = [many]), depth (size = [many]), lat (size = 1), and lon (size = 1).</li>
<li>Each file will have 4 1D variables with the same names as the dimensions and using the same-name dimension, for example, time(time), depth(depth), lat(lat), lon(lon). These 1D variables should be included in the list of &lt;dataVariable&gt;&#x27;s in the dataset&#x27;s XML.</li>
<li>Each file will have one or more 4D variables, for example, air temperature, water temperature, ...</li>
<li>Each file may have 5D character variables, for example, with dimensions (time,depth,lat,lon,nCharacters).</li>
<li>The file&#x27;s name might have the buoy&#x27;s name within the file&#x27;s name.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromnccffiles">EDDTableFromNcCFFiles<a href="#eddtablefromnccffiles" class="hash-link" aria-label="Direct link to EDDTableFromNcCFFiles" title="Direct link to EDDTableFromNcCFFiles">​</a></h3>
<p><a href="#eddtablefromnccffiles"><strong>EDDTableFromNcCFFiles</strong></a> aggregates data aggregates data from NetCDF (v3 or v4) .nc (or <a href="#ncml-files">.ncml</a>) files which use one of the file formats specified by the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#discrete-sampling-geometries" target="_blank" rel="noopener noreferrer">CF Discrete Sampling Geometries (DSG)</a> conventions. See this class&#x27; superclass, <a href="#eddtablefromfiles">EDDTableFromFiles</a>, for information on how this class works and how to use it.</p>
<p>For files using one of the multidimensional CF DSG variants, use <a href="#eddtablefrommultidimncfiles">EDDTableFromMultidimNcFiles</a> instead.</p>
<p>The CF DSG conventions defines dozens of file formats and includes numerous minor variations. This class deals with all of the variations we are aware of, but we may have missed one (or more). So if this class can&#x27;t read data from your CF DSG files, please <a href="/docs/intro#support">reach out for additional support</a>.</p>
<p>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. You can then edit that to fine tune it.<br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromnccsvfiles">EDDTableFromNccsvFiles<a href="#eddtablefromnccsvfiles" class="hash-link" aria-label="Direct link to EDDTableFromNccsvFiles" title="Direct link to EDDTableFromNccsvFiles">​</a></h3>
<p><a href="#eddtablefromnccsvfiles"><strong>EDDTableFromNccsvFiles</strong></a> aggregates data from <a href="/docs/user/nccsv-1.00">NCCSV</a> ASCII .csv files. See this class&#x27; superclass, <a href="#eddtablefromfiles">EDDTableFromFiles</a>, for information on how this class works and how to use it.</p>
<ul>
<li>
<p>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. You can then edit that to fine tune it.</p>
<p>The first thing GenerateDatasetsXml does for this type of dataset after you answer the questions is print the ncdump-like structure of the sample file. So if you enter a few goofy answers for the first loop through GenerateDatasetsXml, at least you&#x27;ll be able to see if ERDDAP™ can read the file and see what dimensions and variables are in the file. Then you can give better answers for the second loop through GenerateDatasetsXml.</p>
</li>
<li>
<p>WARNING: When ERDDAP™ reads NCCSV data files, if it finds an error on a given line (e.g., incorrect number of items), it logs a warning message (&quot;WARNING: Bad line(s) of data&quot; ... with a list of the bad lines on subsequent lines) to the <a href="/docs/server-admin/additional-information#log">log.txt file</a> and then continues to read the rest of the data file. Thus, it is your responsibility to look periodically (or write a script to do so) for that message in the log.txt so that you can fix the problems in the data files. ERDDAP™ is set up this way so that users can continue to read all of the available valid data even though some lines of the file have flaws.<br>
<!-- --> </p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromnos">EDDTableFromNOS<a href="#eddtablefromnos" class="hash-link" aria-label="Direct link to EDDTableFromNOS" title="Direct link to EDDTableFromNOS">​</a></h3>
<p><a href="#eddtablefromnos"><strong>EDDTableFromNOS</strong></a> (DEPRECATED) handles data from a NOAA <a href="https://opendap.co-ops.nos.noaa.gov/axis/" target="_blank" rel="noopener noreferrer">NOS</a> source, which uses <a href="https://www.w3schools.com/xml/xml_soap.asp" target="_blank" rel="noopener noreferrer">SOAP+XML</a> for requests and responses. It is very specific to NOAA NOS&#x27;s XML. See the sample EDDTableFromNOS dataset in datasets2.xml.<br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromobis">EDDTableFromOBIS<a href="#eddtablefromobis" class="hash-link" aria-label="Direct link to EDDTableFromOBIS" title="Direct link to EDDTableFromOBIS">​</a></h3>
<p><a href="#eddtablefromobis"><strong>EDDTableFromOBIS</strong></a> handles data from an Ocean Biogeographic Information System (OBIS) server (was <a href="http://www.iobis.org" target="_blank" rel="noopener noreferrer">http://www.iobis.org</a> ). It is possible that there are no more active servers which use this now out-of-date type of OBIS server system.</p>
<ul>
<li>OBIS servers expect an XML request and return an XML response.</li>
<li>Because all OBIS servers serve the same variables the same way (was <a href="http://iobis.org/tech/provider/questions" target="_blank" rel="noopener noreferrer">http://iobis.org/tech/provider/questions</a>), you don&#x27;t have to specify much to set up an OBIS dataset in ERDDAP.</li>
<li>You MUST include a &quot;creator_email&quot; attribute in the global addAttributes, since that information is used within the license. A suitable email address can be found by reading the XML response from the sourceURL.</li>
<li>You may or may not be able to get the global attribute <a href="#subsetvariables">&lt;subsetVariables&gt;</a> to work with a given OBIS server. If you try, just try one variable (for example, ScientificName or Genus).</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromobis-skeleton-xml">EDDTableFromOBIS skeleton XML<a href="#eddtablefromobis-skeleton-xml" class="hash-link" aria-label="Direct link to EDDTableFromOBIS skeleton XML" title="Direct link to EDDTableFromOBIS skeleton XML">​</a></h4>
<blockquote>
<p>  &lt;dataset type=&quot;EDDTableFromOBIS&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      <a href="#sourceurl">&lt;sourceUrl&gt;</a>...&lt;/sourceUrl&gt;<br>
<!-- -->      &lt;sourceCode&gt;...&lt;/sourceCode&gt;<br>
<!-- -->        &lt;!-- If you read the XML response from the sourceUrl, the<br>
<!-- -->        source code (for example, GHMP) is the value from one of the<br>
<!-- -->        &lt;resource&gt;&lt;code&gt; tags. --&gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#addvariableswhere">&lt;addVariablesWhere&gt;</a>...&lt;/addVariablesWhere&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->      &lt;-- All ...SourceMinimum and Maximum tags are OPTIONAL --&gt;<br>
<!-- -->      &lt;longitudeSourceMinimum&gt;...&lt;/longitudeSourceMinimum&gt;<br>
<!-- -->      &lt;longitudeSourceMaximum&gt;...&lt;/longitudeSourceMaximum&gt;<br>
<!-- -->      &lt;latitudeSourceMinimum&gt;...&lt;/latitudeSourceMinimum&gt;<br>
<!-- -->      &lt;latitudeSourceMaximum&gt;...&lt;/latitudeSourceMaximum&gt;<br>
<!-- -->      &lt;altitudeSourceMinimum&gt;...&lt;/altitudeSourceMinimum&gt;<br>
<!-- -->      &lt;altitudeSourceMaximum&gt;...&lt;/altitudeSourceMaximum&gt;<br>
<!-- -->      &lt;-- For timeSource... tags, use yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ssZ<!-- --> format. --&gt;<br>
<!-- -->      &lt;timeSourceMinimum&gt;...&lt;/timeSourceMinimum&gt;<br>
<!-- -->      &lt;timeSourceMaximum&gt;...&lt;/timeSourceMaximum&gt;<br>
<!-- -->      <a href="#sourceneedsexpandedfp_eq">&lt;sourceNeedsExpandedFP_EQ&gt;</a>true(default)|false&lt;/sourceNeedsExpandedFP_EQ&gt;<br>
<!-- -->        &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#global-attributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt; &lt;!-- 0 or 1.  This MUST include<br>
<!-- -->        &quot;creator_email&quot; --&gt;<br>
<!-- -->  &lt;/dataset&gt;</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromparquetfiles">EDDTableFromParquetFiles<a href="#eddtablefromparquetfiles" class="hash-link" aria-label="Direct link to EDDTableFromParquetFiles" title="Direct link to EDDTableFromParquetFiles">​</a></h3>
<p><a href="#eddtablefromparquetfiles"><strong>EDDTableFromParquetFiles</strong></a> handles data from <a href="https://parquet.apache.org/" target="_blank" rel="noopener noreferrer">Parquet</a>. See this class&#x27; superclass, <a href="#eddtablefromfiles">EDDTableFromFiles</a>, for information on how this class works and how to use it.</p>
<ul>
<li>Parquet is designed to compress very efficiently, so it may give you smaller file sizes than other formats.</li>
<li>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. You can then edit that to fine tune it.</li>
<li>WARNING: When ERDDAP™ reads Parquet data files, if it finds an error on a given line (e.g., incorrect number of items), it logs a warning message (&quot;WARNING: Bad line(s) of data&quot; ... with a list of the bad lines on subsequent lines) to the <a href="/docs/server-admin/additional-information#log">log.txt file</a> and then continues to read the rest of the data file. Thus, it is your responsibility to look periodically (or write a script to do so) for that message in the log.txt so that you can fix the problems in the data files. ERDDAP™ is set up this way so that users can continue to read all of the available valid data even though some lines of the file have flaws.<br>
<!-- --> </li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromsos">EDDTableFromSOS<a href="#eddtablefromsos" class="hash-link" aria-label="Direct link to EDDTableFromSOS" title="Direct link to EDDTableFromSOS">​</a></h3>
<p><a href="#eddtablefromsos"><strong>EDDTableFromSOS</strong></a> handles data from a Sensor Observation Service (SWE/<a href="https://www.ogc.org/standards/sos" target="_blank" rel="noopener noreferrer">SOS</a>) server.</p>
<ul>
<li>This dataset type aggregates data from a group of stations which are all served by one SOS server.</li>
<li>The stations all serve the same set of variables (although the source for each station doesn&#x27;t have to serve all variables).</li>
<li>SOS servers expect an XML request and return an XML response.</li>
<li>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. You can then edit that to fine tune it. It is not easy to generate the dataset XML for SOS datasets by hand. To find the needed information, you must visit sourceUrl+&quot;?service=SOS&amp;request=GetCapabilities&quot; in a browser; look at the XML; make a GetObservation request by hand; and look at the XML response to the request.</li>
<li>With the occasional addition of new types of SOS servers and changes to the old servers, it is getting harder for ERDDAP™ to automatically detect the server type from the server&#x27;s responses. The use of &lt;sosServerType&gt; (with a value of IOOS_NDBC, IOOS_NOS, OOSTethys, or WHOI) is now STRONGLY RECOMMENDED. If you have problems with any datasets of this type, try re-running GenerateDatasetsXml for the SOS server. GenerateDatasetsXml will let you try out the different &lt;sosServerType&gt; options until you find the right one for a given server.</li>
<li>SOS overview:<!-- -->
<ul>
<li>SWE (Sensor Web Enablement) and SOS (Sensor Observation Service) are <a href="https://www.ogc.org/standards" target="_blank" rel="noopener noreferrer">OpenGIS® standards</a>. That website has the standards documents.</li>
<li>The OGC Web Services Common Specification ver 1.1.0 (OGC 06-121r3) covers construction of GET and POST queries (see section 7.2.3 and section 9).</li>
<li>If you send a getCapabilities xml request to an SOS server (sourceUrl + &quot;?service=SOS&amp;request=GetCapabilities&quot;), you get an xml result with a list of stations and the observedProperties that they have data for.</li>
<li>An observedProperty is a formal URI reference to a property. For example, urn:ogc:phenomenon:longitude<!-- -->:wgs84<!-- --> or <a href="https://mmisw.org/ont/cf/parameter/sea%5C_water%5C_temperature" target="_blank" rel="noopener noreferrer">https://mmisw.org/ont/cf/parameter/sea\_water\_temperature</a></li>
<li>An observedProperty isn&#x27;t a variable.</li>
<li>More than one variable may have the same observedProperty (for example, insideTemp and outsideTemp might both have observedProperty <a href="https://mmisw.org/ont/cf/parameter/air%5C_temperature" target="_blank" rel="noopener noreferrer">https://mmisw.org/ont/cf/parameter/air\_temperature</a>).</li>
<li>If you send a getObservation xml request to an SOS server, you get an xml result with descriptions of field names in the response, field units, and the data. The field names will include longitude, latitude, depth(perhaps), and time.</li>
<li>Each dataVariable for an EDDTableFromSOS must include an &quot;observedProperty&quot; attribute, which identifies the observedProperty that must be requested from the server to get that variable. Often, several dataVariables will list the same composite observedProperty.</li>
<li>The dataType for each dataVariable may not be specified by the server. If so, you must look at the XML data responses from the server and assign appropriate <a href="#datatype">&lt;dataType&gt;s</a> in the ERDDAP™ dataset dataVariable definitions.</li>
<li>(At the time of writing this) some SOS servers respond to getObservation requests for more than one observedProperty by just returning results for the first of the observedProperties. (No error message!) See the constructor parameter requestObservedPropertiesSeparately.</li>
</ul>
</li>
<li>EDDTableFromSOS automatically adds</li>
</ul>
<blockquote>
<p><att name="[subsetVariables](#subsetvariables)">station_id, longitude, latitude</att><br>
<!-- -->to the dataset&#x27;s global attributes when the dataset is created.</p>
</blockquote>
<ul>
<li>SOS servers usually express <a href="#units">units</a> with the <a href="https://unitsofmeasure.org/ucum.html" target="_blank" rel="noopener noreferrer">UCUM</a> system. Most ERDDAP™ servers express units with the <a href="https://www.unidata.ucar.edu/software/udunits/" target="_blank" rel="noopener noreferrer">UDUNITS</a> system. If you need to convert between the two systems, you can use <a href="https://coastwatch.pfeg.noaa.gov/erddap/convert/units.html" target="_blank" rel="noopener noreferrer">ERDDAP&#x27;s web service to convert UCUM units to/from UDUNITS</a>.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromsos-skeleton-xml">EDDTableFromSOS skeleton XML<a href="#eddtablefromsos-skeleton-xml" class="hash-link" aria-label="Direct link to EDDTableFromSOS skeleton XML" title="Direct link to EDDTableFromSOS skeleton XML">​</a></h4>
<blockquote>
<p>  &lt;dataset type=&quot;EDDTableFromSOS&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      <a href="#sourceurl">&lt;sourceUrl&gt;</a>...&lt;/sourceUrl&gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#addvariableswhere">&lt;addVariablesWhere&gt;</a>...&lt;/addVariablesWhere&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->      &lt;sosServerType&gt;...&lt;/sosServerType&gt; &lt;!-- 0 or 1, but STRONGLY<br>
<!-- -->        RECOMMENDED. This lets you specify the type of SOS server<br>
<!-- -->        (so ERDDAP™ doesn&#x27;t have to figure it out).<br>
<!-- -->        Valid values are: IOOS_NDBC, IOOS_NOS, OOSTethys, and WHOI. --&gt;<br>
<!-- -->      &lt;responseFormat&gt;...&lt;/responseFormat&gt; &lt;!-- 0 or 1. Use this only if<br>
<!-- -->        you need to override the default responseFormat for the<br>
<!-- -->        specified sosServerType.  --&gt;<br>
<!-- -->      &lt;stationIdSourceName&gt;...&lt;/stationIdSourceName&gt; &lt;!-- 0 or 1.<br>
<!-- -->        Default=&quot;station_id&quot;. --&gt;<br>
<!-- -->      &lt;longitudeSourceName&gt;...&lt;/longitudeSourceName&gt;<br>
<!-- -->      &lt;latitudeSourceName&gt;...&lt;/latitudeSourceName&gt;<br>
<!-- -->      &lt;altitudeSourceName&gt;...&lt;/altitudeSourceName&gt;<br>
<!-- -->      &lt;altitudeSourceMinimum&gt;...&lt;/altitudeSourceMinimum&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      &lt;altitudeSourceMaximum&gt;...&lt;/altitudeSourceMaximum&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#altitudemeterspersourceunit">&lt;altitudeMetersPerSourceUnit&gt;</a>...&lt;/altitudeMetersPerSourceUnit&gt;<br>
<!-- -->      &lt;timeSourceName&gt;...&lt;/timeSourceName&gt;<br>
<!-- -->      &lt;timeSourceFormat&gt;...&lt;/timeSourceFormat&gt;<br>
<!-- -->        &lt;!-- timeSourceFormat MUST be either<br>
<!-- -->        * For numeric data: a <a href="https://www.unidata.ucar.edu/software/udunits/" target="_blank" rel="noopener noreferrer">UDUnits</a>-compatible string (with the format<br>
<!-- -->          &quot;<em>units</em> since <em>baseTime</em>&quot;) describing how to interpret<br>
<!-- -->          source time values (for example,<br>
<!-- -->          &quot;seconds since 1970-01-01T00:00:00Z&quot;), where the<br>
<!-- -->          base time is an ISO 8601:2004(E) formatted date time<br>
<!-- -->          string (yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ssZ<!-- -->).<br>
<!-- -->        * For String date time data: specify<br>
<!-- -->          <a href="#string-time-units">units suitable for string times</a><br>
<!-- -->          describing how to interpret string times  (for example, the<br>
<!-- -->          ISO8601TZ_FORMAT &quot;yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ssZ<!-- -->&quot;). --&gt;<br>
<!-- -->      &lt;observationOfferingIdRegex&gt;...&lt;/observationOfferingIdRegex&gt;<br>
<!-- -->        &lt;!-- Only observationOfferings with IDs (usually the station names)<br>
<!-- -->        which match this <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" target="_blank" rel="noopener noreferrer">regular expression</a> (<a href="https://www.vogella.com/tutorials/JavaRegularExpressions/article.html" target="_blank" rel="noopener noreferrer">tutorial</a>) will be included<br>
<!-- -->        in the dataset (&quot;.+&quot; will catch all station names). --&gt;<br>
<!-- -->      &lt;requestObservedPropertiesSeparately&gt;true|false(default)<br>
<!-- -->        &lt;/requestObservedPropertiesSeparately&gt;<br>
<!-- -->      <a href="#sourceneedsexpandedfp_eq">&lt;sourceNeedsExpandedFP_EQ&gt;</a>true(default)|false&lt;/sourceNeedsExpandedFP_EQ&gt;<br>
<!-- -->      <a href="#global-attributes">&lt;addAttributes&gt;</a>...&lt;/addAttributes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#datavariable">&lt;dataVariable&gt;</a>...&lt;/dataVariable&gt; &lt;!-- 1 or more.<br>
<!-- -->        * Each dataVariable MUST include the <a href="#datatype">dataType</a> tag.<br>
<!-- -->        * Each dataVariable MUST include the observedProperty attribute.<br>
<!-- -->        * For IOOS SOS servers, *every* variable returned in the text/csv<br>
<!-- -->          response MUST be included in this ERDDAP™ dataset definition. --&gt;<br>
<!-- -->  &lt;/dataset&gt;</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromthreddsfiles">EDDTableFromThreddsFiles<a href="#eddtablefromthreddsfiles" class="hash-link" aria-label="Direct link to EDDTableFromThreddsFiles" title="Direct link to EDDTableFromThreddsFiles">​</a></h3>
<p><a href="#eddtablefromthreddsfiles"><strong>EDDTableFromThreddsFiles</strong></a> (deprecated) aggregates data files with several variables, each with one or more shared dimensions (for example, time, altitude (or depth), latitude, longitude), and served by a <a href="https://www.unidata.ucar.edu/software/tds/" target="_blank" rel="noopener noreferrer">THREDDS OPeNDAP server</a>.</p>
<ul>
<li>This dataset type is <strong>DEPRECATED</strong>. The newer and more general solution is to use the <a href="#cachefromurl">cacheFromUrl option for EDDTableFromFiles</a> (or a variant), which makes a local copy of the remote files and serves the data from the local files. The &lt;cacheFromUrl&gt; option can be used with any type of tabular data file from any web-based source that publishes a directory-like list of files.**<br>
<!-- -->If you can&#x27;t make that work for some reason, email Chris.John at noaa.gov .<br>
<!-- -->If there are no complaints before 2020, this dataset type may be removed.**</li>
<li>We strongly recommend using the <a href="#generatedatasetsxml">GenerateDatasetsXml program</a> to make a rough draft of the datasets.xml chunk for this dataset. You can then edit that to fine tune it.</li>
<li>In most cases, each file has multiple values for the leftmost (first) dimension, for example, time.</li>
<li>The files often (but don&#x27;t have to) have a single value for the other dimensions (for example, altitude (or depth), latitude, longitude).</li>
<li>The files may have character variables with an additional dimension (for example, nCharacters).</li>
<li>THREDDS servers can be identified by the &quot;/thredds/&quot; in the URLs. For example,</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    https://www.ncei.noaa.gov/thredds/catalog/uv/6h\_strs\_agg/catalog.html</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>THREDDS servers have catalogs in various places. This class REQUIRES that the URL include &quot;/thredds/catalog/&quot;. You can usually find this variable by starting in a browser in the root catalog, and then clicking through to the desired subcatalog.</li>
<li>This class reads the catalog.xml files served by THREDDS with the lists of &lt;catalogRefs&gt; (references to additional catalog.xml sub-files) and &lt;dataset&gt;s (data files).</li>
<li>The &lt;fileDir&gt; setting is ignored. Since this class downloads and makes a local copy of each remote data file, ERDDAP™ forces the fileDir to be <em>bigParentDirectory</em>/copy/<em>datasetID</em>/.</li>
<li>For &lt;sourceUrl&gt;, use the URL of the catalog.xml file for the dataset in the THREDDS server, for example: for this URL which may be used in a web browser,<br>
<a href="https://data.nodc.noaa.gov/thredds/catalog/nmsp/wcos/catalog.html" target="_blank" rel="noopener noreferrer">https://data.nodc.noaa.gov/thredds/catalog/nmsp/wcos/catalog.html</a> [2020-10-21 This server is no longer reliably available.],<br>
<!-- -->use &lt;sourceUrl&gt;<a href="https://data.nodc.noaa.gov/thredds/catalog/nmsp/wcos/catalog.xml&amp;lt;/sourceUrl%3E" target="_blank" rel="noopener noreferrer">https://data.nodc.noaa.gov/thredds/catalog/nmsp/wcos/catalog.xml&amp;lt;/sourceUrl&gt;</a><br>
<!-- -->(but put it on one line).</li>
<li>Since this class always downloads and makes a local copy of each remote data file, you should never wrap this dataset in <a href="#eddtablecopy">EDDTableCopy</a>.</li>
<li>This dataset type supports an OPTIONAL, rarely-used, special tag, &lt;specialMode&gt;<em>mode</em>&lt;/specialMode&gt; which can be used to specify that special, hard-coded rules should be used to determine which files should be downloaded from the server. Currently, the only valid <em>mode</em> is SAMOS which is used with datasets from <a href="https://tds.coaps.fsu.edu/thredds/catalog/samos" target="_blank" rel="noopener noreferrer">https://tds.coaps.fsu.edu/thredds/catalog/samos</a> to download only the files with the last version number.</li>
<li>See this class&#x27; superclass, <a href="#eddtablefromfiles">EDDTableFromFiles</a>, for information on how this class works and how to use it.</li>
<li>See the 1D, 2D, 3D, and 4D examples for <a href="#eddtablefromncfiles">EDDTableFromNcFiles</a>.<br>
<!-- --> </li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablefromwfsfiles">EDDTableFromWFSFiles<a href="#eddtablefromwfsfiles" class="hash-link" aria-label="Direct link to EDDTableFromWFSFiles" title="Direct link to EDDTableFromWFSFiles">​</a></h3>
<p><a href="#eddtablefromwfsfiles"><strong>EDDTableFromWFSFiles</strong></a> (DEPRECATED) makes a local copy of all of the data from an ArcGIS MapServer WFS server so the data can then be re-served quickly to ERDDAP™ users.</p>
<ul>
<li>You need to specify a specially formatted sourceUrl global attribute to tell ERDDAP™ how to request feature information from the server. Please use this example as a template:</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;sourceUrl&quot;&gt;http://*someUrl/dir1/dir2*/MapServer/WFSServer?request=GetFeature&amp;amp;service=WFS&amp;amp;typename=aasg:BoreholeTemperature&amp;amp;format=&amp;quot;text/xml;%20subType=gml/3.1.1/profiles/gmlsf/1.0.0/0&quot;&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>(but put it all on one line)</p>
<ul>
<li>You need to add a special global attribute to tell ERDDAP™ how to identify the names of the chunks of data that should be downloaded. This will probably work for all EDDTableFromWFSFiles datasets:</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;rowElementXPath&quot;&gt;/wfs:FeatureCollection/gml:featureMember&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Since this class always downloads and makes a local copy of each remote data file, you should never wrap this dataset in <a href="#eddtablecopy">EDDTableCopy</a>.</li>
<li>See this class&#x27; superclass, <a href="#eddtablefromfiles">EDDTableFromFiles</a>, for additional information on how this class works and how to use it.<br>
<!-- --> </li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtableaggregaterows">EDDTableAggregateRows<a href="#eddtableaggregaterows" class="hash-link" aria-label="Direct link to EDDTableAggregateRows" title="Direct link to EDDTableAggregateRows">​</a></h3>
<p><a href="#eddtableaggregaterows"><strong>EDDTableAggregateRows</strong></a> can make an EDDTable dataset from a group of &quot;child&quot; EDDTable datasets.</p>
<ul>
<li>Here are some uses for EDDTableAggregateRows:<!-- -->
<ul>
<li>You could make an EDDTableAggregateRows dataset from two different kinds of files or data sources, for example, a dataset with data up to the end of last month stored in .ncCF files and a dataset with data for the current month stored in a relational database.</li>
<li>You could make an EDDTableAggregateRows dataset to deal with a change in source files (for example, the time format changed, or a variable name changed, or dataType/scale_factor/add_offset changed). In this case, one child would get data from files made before the change and the other child would get data from files made after the change. This use of EDDTableAggregateRows is an alternative to using <a href="#ncml-files">NcML</a> or <a href="#netcdf-operators-nco">NCO</a>. Unless there is a distinguishing feature in the filenames (so you can use &lt;fileNameRegex&gt; to determine which file belongs to which child dataset), you probably need to store the files for the two child datasets in different directories.</li>
<li>You could make an EDDTableAggregateRows dataset which has a shared subset of variables of one or more similar but different datasets, for example, a dataset which makes a Profile dataset from the combination of a Profile dataset, a TimeSeriesProfile dataset, and a TrajectoryProfile dataset (which have some different variables and some variables in common -- in which case you&#x27;ll have to make special variants for the child datasets, with just the in-common variables).</li>
<li>You could have several standalone datasets, each with the same type of data but from a different station. You could leave those datasets intact, but also create an EDDTableAggregateRows dataset which has data from all of the stations -- each of the child datasets could be a simple <a href="#eddfromerddap">EDDTableFromErddap</a>, which points to one of the existing station datasets. If you do this, give each of the EDDTableFromErddap datasets a different datasetID than the original standalone datasets, e.g., by appending &quot;Child&quot; to the original datasetID.</li>
</ul>
</li>
<li>Each of the child &lt;dataset&gt;&#x27;s specified must be a complete dataset, as if it were a stand-alone dataset. Each must have the same <a href="#datavariable">dataVariables</a>, in the same order, with the same <a href="#destinationname">destinationNames</a>, <a href="#datatype">dataTypes</a>, <a href="#missing_value">missing_values</a>, <a href="#missing_value">_FillValues</a>, and <a href="#units">units</a>. The metadata for each variable for the EDDTableAggregateRows dataset comes from variables in the first child dataset, but EDDTableAggregateRows will update the <a href="#actual_range">actual_range</a> metadata to be the actual range for all of the children.</li>
<li>Recommendation: Get each of the child datasets working as stand-alone datasets. Then try to make the EDDTableAggregateRows dataset by cutting and pasting the datasets.xml chunk for each into the new EDDTableAggregateRows dataset.</li>
<li>Dataset Default Sort Order -- The order of the child datasets determines the overall default sort order of the results. Of course, users can request a different sort order for a given set of results by appending &amp;orderBy(&quot;<em>comma-separated list of variables</em>&quot;) to the end of their query.</li>
<li>The &quot;source&quot; <a href="#global-attributes">globalAttributes</a> for the EDDTableAggregateRows is the combined globalAttributes from the first child dataset. The EDDTableAggregateRows can have a global &lt;addAttributes&gt; to provide additional global attributes or override the source global attributes.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddtableaggregaterows-skeleton-xml">EDDTableAggregateRows skeleton XML<a href="#eddtableaggregaterows-skeleton-xml" class="hash-link" aria-label="Direct link to EDDTableAggregateRows skeleton XML" title="Direct link to EDDTableAggregateRows skeleton XML">​</a></h4>
<blockquote>
<p>  &lt;dataset type=&quot;EDDTableAggregateRows&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#accessibleviafiles">&lt;accessibleViaFiles&gt;</a>true|false(default)&lt;/accessibleViaFiles&gt;<br>
<!-- -->        &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#updateeverynmillis">&lt;updateEveryNMillis&gt;</a>...&lt;/updateEveryNMillis&gt; &lt;!-- 0 or 1. --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#addvariableswhere">&lt;addVariablesWhere&gt;</a>...&lt;/addVariablesWhere&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->      &lt;dataset&gt;...&lt;/dataset&gt; &lt;!-- 1 or more --&gt;<br>
<!-- -->  &lt;/dataset&gt;</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablecopy">EDDTableCopy<a href="#eddtablecopy" class="hash-link" aria-label="Direct link to EDDTableCopy" title="Direct link to EDDTableCopy">​</a></h3>
<p><a href="#eddtablecopy"><strong>EDDTableCopy</strong></a> can make a local copy of many types of EDDTable datasets and then re-serve the data quickly from the local copy.</p>
<ul>
<li>
<p>EDDTableCopy (and for grid data, <a href="#eddgridcopy">EDDGridCopy</a>) is a very easy to use and a very effective <strong>solution to some of the biggest problems with serving data from remote data sources:</strong></p>
<ul>
<li>Accessing data from a remote data source can be slow.<!-- -->
<ul>
<li>They may be slow because they are inherently slow (for example, an inefficient type of server),</li>
<li>because they are overwhelmed by too many requests,</li>
<li>or because your server or the remote server is bandwidth limited.</li>
</ul>
</li>
<li>The remote dataset is sometimes unavailable (again, for a variety of reasons).</li>
<li>Relying on one source for the data doesn&#x27;t scale well (for example, when many users and many ERDDAPs utilize it).<br>
<!-- --> </li>
</ul>
</li>
<li>
<p>How It Works -- EDDTableCopy solves these problems by automatically making and maintaining a local copy of the data and serving data from the local copy. ERDDAP™ can serve data from the local copy very, very quickly. And making and using a local copy relieves the burden on the remote server. And the local copy is a backup of the original, which is useful in case something happens to the original.</p>
<p>There is nothing new about making a local copy of a dataset. What is new here is that this class makes it *easy* to create and *maintain* a local copy of data from a *variety* of types of remote data sources and *add metadata* while copying the data.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablecopy-vs-cachefromurl">EDDTableCopy vs &lt;cacheFromUrl&gt;<a href="#eddtablecopy-vs-cachefromurl" class="hash-link" aria-label="Direct link to EDDTableCopy vs &lt;cacheFromUrl&gt;" title="Direct link to EDDTableCopy vs &lt;cacheFromUrl&gt;">​</a></h4>
<p>&lt;cacheFromUrl&gt; is an alternative to EDDTableCopy. They work differently.</p>
<ul>
<li>EDDTableCopy works by requesting chunks of data from a remote service and storing those chunks in local files. Thus, EDDTableCopy is useful in some cases where the data is accessible via a remote service.</li>
<li><a href="#cachefromurl">&lt;cacheFromUrl&gt;</a> downloads the existing files listed on a remote website. &lt;cacheFromUrl&gt; is easier to use and more reliable since it can easily tell when there is a new remote data file or when a remote data file has changed and thus needs to be downloaded.</li>
</ul>
<p>If there are situations where EDDTableCopy or &lt;cacheFromUrl&gt; could be used, use &lt;cacheFromUrl&gt; because it is easier and more reliable.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="extractdestinationnames">&lt;extractDestinationNames&gt;<a href="#extractdestinationnames" class="hash-link" aria-label="Direct link to &lt;extractDestinationNames&gt;" title="Direct link to &lt;extractDestinationNames&gt;">​</a></h4>
<p>EDDTableCopy makes the local copy of the data by requesting chunks of data from the remote dataset. EDDTableCopy determines which chunks to request by requesting the &amp;distinct() values for the &lt;extractDestinationNames&gt; (specified in the datasets.xml, see below), which are the space-separated destination names of variables in the remote dataset. For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;extractDestinationNames&gt;drifter profile&lt;/extractDestinationNames&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>might yield distinct values combinations of drifter=tig17,profile=1017, drifter=tig17,profile=1095, ... drifter=une12,profile=1223, drifter=une12,profile=1251, ....</p>
<p>In situations where one column (for example, profile) may be all that is required to uniquely identify a group of rows of data, if there are a very large number of, for example, profiles, it may be useful to also specify an additional extractDestinationName (for example, drifter) which serves to subdivide the profiles. That leads to fewer data files in a given directory, which may lead to faster access.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="local-files">Local Files<a href="#local-files" class="hash-link" aria-label="Direct link to Local Files" title="Direct link to Local Files">​</a></h4>
<p>Each chunk of data is stored in a separate NetCDF file in a subdirectory of <em>bigParentDirectory</em>/copy/<em>datasetID</em>/ (as specified in <a href="/docs/server-admin/deploy-install#setupxml">setup.xml</a>). There is one subdirectory level for all but the last extractDestinationName. For example, data for tig17+1017, would be stored in<br>
<em>bigParentDirectory</em>/copy/sampleDataset/tig17/1017.nc .<br>
<!-- -->For example, data for une12+1251, would be stored in<br>
<em>bigParentDirectory</em>/copy/sampleDataset/une12/1251.nc .<br>
<!-- -->Directory and filenames created from data values are modified to make them file-name-safe (for example, spaces are replaced by &quot;x20&quot;) -- this doesn&#x27;t affect the actual data.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-data">New Data<a href="#new-data" class="hash-link" aria-label="Direct link to New Data" title="Direct link to New Data">​</a></h4>
<p>Each time EDDTableCopy is reloaded, it checks the remote dataset to see what distinct chunks are available. If the file for a chunk of data doesn&#x27;t already exist, a request to get the chunk is added to a queue. ERDDAP&#x27;s taskThread processes all the queued requests for chunks of data, one-by-one. You can see statistics for the taskThread&#x27;s activity on the <a href="/docs/server-admin/additional-information#status-page">Status Page</a> and in the <a href="/docs/server-admin/additional-information#daily-report">Daily Report</a>. (Yes, ERDDAP™ could assign multiple tasks to this process, but that would use up lots of the remote data source&#x27;s bandwidth, memory, and CPU time, and lots of the local ERDDAP&#x27;s bandwidth, memory, and CPU time, neither of which is a good idea.)</p>
<p>NOTE: The very first time an EDDTableCopy is loaded, (if all goes well) lots of requests for chunks of data will be added to the taskThread&#x27;s queue, but no local data files will have been created. So the constructor will fail but taskThread will continue to work and create local files. If all goes well, the taskThread will make some local data files and the next attempt to reload the dataset (in ~15 minutes) will succeed, but initially with a very limited amount of data.</p>
<p>NOTE: After the local dataset has some data and appears in your ERDDAP, if the remote dataset is temporarily or permanently not accessible, the local dataset will still work.</p>
<p>WARNING: If the remote dataset is large and/or the remote server is slow (that&#x27;s the problem, isn&#x27;t it?!), it will take a long time to make a complete local copy. In some cases, the time needed will be unacceptable. For example, transmitting 1 TB of data over a T1 line (0.15 GB/s) takes at least 60 days, under optimal conditions. Plus, it uses lots of bandwidth, memory, and CPU time on the remote and local computers. The solution is to mail a hard drive to the administrator of the remote data set so that s/he can make a copy of the dataset and mail the hard drive back to you. Use that data as a starting point and EDDTableCopy will add data to it. (That is how Amazon&#x27;s EC2 Cloud Service used to handle the problem, even though their system has lots of bandwidth.)</p>
<p>WARNING: If a given combination of values disappears from a remote dataset, EDDTableCopy does NOT delete the local copied file. If you want to, you can delete it yourself.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tablecopy-checksourcedata">TableCopy &lt;checkSourceData&gt;<a href="#tablecopy-checksourcedata" class="hash-link" aria-label="Direct link to TableCopy &lt;checkSourceData&gt;" title="Direct link to TableCopy &lt;checkSourceData&gt;">​</a></h4>
<p>The datasets.xml for this dataset can have an optional tag</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;checkSourceData&gt;true&lt;/checkSourceData&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The default value is true. If/when you set it to false, the dataset won&#x27;t ever check the source dataset to see if there is additional data available.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="recommended-use">Recommended Use<a href="#recommended-use" class="hash-link" aria-label="Direct link to Recommended Use" title="Direct link to Recommended Use">​</a></h4>
<ol>
<li>Create the &lt;dataset&gt; entry (the native type, not EDDTableCopy) for the remote data source. <strong>Get it working correctly, including all of the desired metadata.</strong></li>
<li>If it is too slow, add XML code to wrap it in an EDDTableCopy dataset.<!-- -->
<ul>
<li>Use a different datasetID (perhaps by changing the datasetID of the old datasetID slightly).</li>
<li>Copy the &lt;accessibleTo&gt;, &lt;reloadEveryNMinutes&gt; and &lt;onChange&gt; from the remote EDDTable&#x27;s XML to the EDDTableCopy&#x27;s XML. (Their values for EDDTableCopy matter; their values for the inner dataset become irrelevant.)</li>
<li>Create the &lt;extractDestinationNames&gt; tag (see above).</li>
<li>&lt;orderExtractBy&gt; is an OPTIONAL space separated list of destination variable names in the remote dataset. When each chunk of data is downloaded from the remote server, the chunk will be sorted by these variables (by the first variable, then by the second variable if the first variable is tied, ...). In some cases, ERDDAP™ will be able to extract data faster from the local data files if the first variable in the list is a numeric variable (&quot;time&quot; counts as a numeric variable). But choose these variables in a way that is appropriate for the dataset.</li>
</ul>
</li>
<li>ERDDAP™ will make and maintain a local copy of the data.<br>
<!-- --> </li>
</ol>
<ul>
<li>WARNING: EDDTableCopy assumes that the data values for each chunk don&#x27;t ever change. If/when they do, you need to manually delete the chunk files in <em>bigParentDirectory</em>/copy/<em>datasetID</em>/ which changed and <a href="/docs/server-admin/additional-information#flag">flag</a> the dataset to be reloaded so that the deleted chunks will be replaced. If you have an email subscription to the dataset, you will get two emails: one when the dataset first reloads and starts to copy the data, and another when the dataset loads again (automatically) and detects the new local data files.<br>
<!-- --> </li>
<li>Change Metadata -- If you need to change any addAttributes or change the order of the variables associated with the source dataset:<!-- -->
<ol>
<li>Change the addAttributes for the source dataset in datasets.xml, as needed.</li>
<li>Delete one of the copied files.</li>
<li>Set a <a href="/docs/server-admin/additional-information#flag">flag</a> to reload the dataset immediately. If you do use a flag and you have an email subscription to the dataset, you will get two emails: one when the dataset first reloads and starts to copy the data, and another when the dataset loads again (automatically) and detects the new local data files.</li>
<li>The deleted file will be regenerated with the new metadata. If the source dataset is ever unavailable, the EDDTableCopy dataset will get metadata from the regenerated file, since it is the youngest file.<br>
<!-- --> </li>
</ol>
</li>
<li><a href="#eddgridcopy">EDDGridCopy</a> is very similar to EDDTableCopy, but works with gridded datasets.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="eddtablecopy-skeleton-xml">EDDTableCopy skeleton XML<a href="#eddtablecopy-skeleton-xml" class="hash-link" aria-label="Direct link to EDDTableCopy skeleton XML" title="Direct link to EDDTableCopy skeleton XML">​</a></h4>
<blockquote>
<p>  &lt;dataset type=&quot;EDDTableCopy&quot; <a href="#datasetid">datasetID</a>=&quot;...&quot; <a href="#active">active</a>=&quot;...&quot; &gt;<br>
<!-- -->      <a href="#accessibleto">&lt;accessibleTo&gt;</a>...&lt;/accessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#graphsaccessibleto">&lt;graphsAccessibleTo&gt;</a>auto|public&lt;/graphsAccessibleTo&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#accessibleviafiles">&lt;accessibleViaFiles&gt;</a>true|false(default)&lt;/accessibleViaFiles&gt;<br>
<!-- -->        &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>...&lt;/reloadEveryNMinutes&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultdataquery">&lt;defaultDataQuery&gt;</a>...&lt;/defaultDataQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#defaultgraphquery">&lt;defaultGraphQuery&gt;</a>...&lt;/defaultGraphQuery&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#addvariableswhere">&lt;addVariablesWhere&gt;</a>...&lt;/addVariablesWhere&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#fgdcfile">&lt;fgdcFile&gt;</a>...&lt;/fgdcFile&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#iso19115file">&lt;iso19115File&gt;</a>...&lt;/iso19115File&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#onchange">&lt;onChange&gt;</a>...&lt;/onChange&gt; &lt;!-- 0 or more --&gt;<br>
<!-- -->      &lt;extractDestinationNames&gt;...&lt;/extractDestinationNames&gt;  &lt;!-- 1 --&gt;<br>
<!-- -->      &lt;orderExtractBy&gt;...&lt;/orderExtractBy&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      <a href="#filetableinmemory">&lt;fileTableInMemory&gt;</a>...&lt;/fileTableInMemory&gt; &lt;!-- 0 or 1 (true or false<br>
<!-- -->        (the default)) --&gt;<br>
<!-- -->      <a href="#tablecopy-checksourcedata">&lt;checkSourceData&gt;</a>...&lt;/checkSourceData&gt; &lt;!-- 0 or 1 --&gt;<br>
<!-- -->      &lt;dataset&gt;...&lt;/dataset&gt; &lt;!-- 1 --&gt;<br>
<!-- -->  &lt;/dataset&gt;</p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="details-1">Details<a href="#details-1" class="hash-link" aria-label="Direct link to Details" title="Direct link to Details">​</a></h2>
<p>Here are detailed descriptions of common tags and attributes.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="angulardegreeunits">&lt;angularDegreeUnits&gt;<a href="#angulardegreeunits" class="hash-link" aria-label="Direct link to &lt;angularDegreeUnits&gt;" title="Direct link to &lt;angularDegreeUnits&gt;">​</a></h3>
<ul>
<li><a href="#angulardegreeunits"><strong>&lt;angularDegreeUnits&gt;</strong></a> is a rarely used OPTIONAL tag within an &lt;erddapDatasets&gt; tag in datasets.xml which contains a comma-separated list of units strings that ERDDAP™ should treat as angular degrees units. If a variable has one of these units, tabledap&#x27;s orderByMean filter will calculate the mean in a special way, then report the mean as a value from -180 to 180. See ERDDAP&#x27;s EDStatic.java source code file for the current default list. Any changes to this tag&#x27;s value will take effect the next time ERDDAP™ reads datasets.xml, including in response to a dataset <a href="/docs/server-admin/additional-information#flag">flag</a>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="angulardegreetrueunits">&lt;angularDegreeTrueUnits&gt;<a href="#angulardegreetrueunits" class="hash-link" aria-label="Direct link to &lt;angularDegreeTrueUnits&gt;" title="Direct link to &lt;angularDegreeTrueUnits&gt;">​</a></h3>
<ul>
<li><a href="#angulardegreetrueunits"><strong>&lt;angularDegreeTrueUnits&gt;</strong></a> is a rarely used OPTIONAL tag within an &lt;erddapDatasets&gt; tag in datasets.xml which contains a comma-separated list of units strings that ERDDAP™ should treat as angular degrees true units. If a variable has one of these units, tabledap&#x27;s orderByMean filter will calculate the mean in a special way, then report the mean as a value from 0 to 360. See ERDDAP&#x27;s EDStatic.java source file for the current default list. Any changes to this tag&#x27;s value will take effect the next time ERDDAP™ reads datasets.xml, including in response to a dataset <a href="/docs/server-admin/additional-information#flag">flag</a>.<br>
<!-- --> </li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="commonstandardnames">&lt;commonStandardNames&gt;<a href="#commonstandardnames" class="hash-link" aria-label="Direct link to &lt;commonStandardNames&gt;" title="Direct link to &lt;commonStandardNames&gt;">​</a></h3>
<ul>
<li><a href="#commonstandardnames"><strong>&lt;commonStandardNames&gt;</strong></a> is a rarely used OPTIONAL tag within an &lt;erddapDatasets&gt; tag in datasets.xml to specify a comma-separated list of common <a href="https://cfconventions.org/Data/cf-standard-names/current/build/cf-standard-name-table.html" target="_blank" rel="noopener noreferrer">CF standard names</a>. E.g.,</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;commonStandardNames&gt;air\_pressure, ..., wind\_to\_direction&lt;/commonStandardNames&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This list is used in DataProviderForm3.html as a convenience to users.<br>
<!-- -->If you want to provide this information in datasets.xml, start by copying the current default list in &lt;DEFAULT_commonStandardNames&gt; in ERDDAP&#x27;s<br>
<!-- -->[tomcat]/webapps/erddap/WEB-INF/classes/gov/noaa/pfel/erddap/util/messages.xml file.<br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cacheminutes">&lt;cacheMinutes&gt;<a href="#cacheminutes" class="hash-link" aria-label="Direct link to &lt;cacheMinutes&gt;" title="Direct link to &lt;cacheMinutes&gt;">​</a></h3>
<ul>
<li><a href="#cacheminutes"><strong>&lt;cacheMinutes&gt;</strong></a> is a rarely used OPTIONAL tag within an &lt;erddapDatasets&gt; tag in datasets.xml to specify the age (in minutes) at which files in the cache should be deleted (default=60). E.g.,</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;cacheMinutes&gt;60&lt;/cacheMinutes&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In general, only image files (because the same images are often requested repeatedly) and .nc files (because they must be fully created before sending to the user) are cached. Although it might seem like a given request should always return the same response, that isn&#x27;t true. For example, a tabledap request which includes time&gt;<em>someTime</em> will change when new data arrives for the dataset. And a griddap request which includes [last] for the time dimension will change when new data arrives for the dataset. Any changes to this tag&#x27;s value will take effect the next time ERDDAP™ reads datasets.xml, including in response to a dataset <a href="/docs/server-admin/additional-information#flag">flag</a>. Before ERDDAP™ v2.00, this was specified in setup.xml, which is still allowed but discouraged.<br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="convertinterpolaterequestcsvexample">&lt;convertInterpolateRequestCSVExample&gt;<a href="#convertinterpolaterequestcsvexample" class="hash-link" aria-label="Direct link to &lt;convertInterpolateRequestCSVExample&gt;" title="Direct link to &lt;convertInterpolateRequestCSVExample&gt;">​</a></h3>
<ul>
<li><a href="#convertinterpolaterequestcsvexample"><strong>&lt;convertInterpolateRequestCSVExample&gt;</strong></a> is an OPTIONAL tag within an &lt;erddapDatasets&gt; tag in datasets.xml [starting with ERDDAP™ v2.10] which contains an example which will be shown on the Interpolate converter&#x27;s web page. The default value is: jplMURSST41/analysed_sst/Bilinear/4 .</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="convertinterpolatedatasetidvariablelist">&lt;convertInterpolateDatasetIDVariableList&gt;<a href="#convertinterpolatedatasetidvariablelist" class="hash-link" aria-label="Direct link to &lt;convertInterpolateDatasetIDVariableList&gt;" title="Direct link to &lt;convertInterpolateDatasetIDVariableList&gt;">​</a></h3>
<ul>
<li><a href="#convertinterpolatedatasetidvariablelist"><strong>&lt;convertInterpolateDatasetIDVariableList&gt;</strong></a> is an OPTIONAL tag within an &lt;erddapDatasets&gt; tag in datasets.xml [starting with ERDDAP™ v2.10] which contains a CSV list of datasetID/variableName examples which will be used as suggestions by the Interpolate converter&#x27;s web page. The default value is: jplMURSST41/analysed_sst .</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="converttopublicsourceurl">&lt;convertToPublicSourceUrl&gt;<a href="#converttopublicsourceurl" class="hash-link" aria-label="Direct link to &lt;convertToPublicSourceUrl&gt;" title="Direct link to &lt;convertToPublicSourceUrl&gt;">​</a></h3>
<ul>
<li><a href="#converttopublicsourceurl"><strong>&lt;convertToPublicSourceUrl&gt;</strong></a> is an OPTIONAL tag within an &lt;erddapDatasets&gt; tag in datasets.xml which contains a &quot;from&quot; and a &quot;to&quot; attribute which specifies how to convert a matching local sourceUrl (usually an IP number) into a public sourceUrl (a domain name). &quot;from&quot; must have the form &quot;[something]//[something]/&quot;. There can be 0 or more of these tags. For more information see <a href="#sourceurl">&lt;sourceUrl&gt;</a>. For example,</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;convertToPublicSourceUrl from=&quot;https://192.168.31.18/&quot; to=&quot;https://oceanwatch.pfeg.noaa.gov/&quot; /&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>will cause a matching local sourceUrl (such as <a href="https://192.168.31.18/thredds/dodsC/satellite/BA/ssta/5day" target="_blank" rel="noopener noreferrer">https://192.168.31.18/thredds/dodsC/satellite/BA/ssta/5day</a>)<br>
<!-- -->into a public sourceUrl (<a href="https://oceanwatch.pfeg.noaa.gov/thredds/dodsC/satellite/BA/ssta/5day" target="_blank" rel="noopener noreferrer">https://oceanwatch.pfeg.noaa.gov/thredds/dodsC/satellite/BA/ssta/5day</a>).<br>
<!-- -->Any changes to this tag&#x27;s value will take effect the next time ERDDAP™ reads datasets.xml, including in response to a dataset <a href="/docs/server-admin/additional-information#flag">flag</a>.</p>
<p>But, for security reasons and reasons related to the subscription system, <strong>DON&#x27;T USE THIS TAG!</strong><br>
<!-- -->Instead, always use the public domain name in the &lt;sourceUrl&gt; tag and use the <a href="https://linux.die.net/man/5/hosts" target="_blank" rel="noopener noreferrer">/etc/hosts table</a> on your server to convert local domain names to IP numbers without using a DNS server. You can test if a domain name is properly converted into an IP number by using:<br>
<!-- -->ping <em>some.domain.name</em><br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dataimagepngbase64">data<!-- -->:image<!-- -->/png;base64,<a href="#dataimagepngbase64" class="hash-link" aria-label="Direct link to dataimagepngbase64" title="Direct link to dataimagepngbase64">​</a></h3>
<ul>
<li>When a user requests an .htmlTable response from ERDDAP™, if the data in a String cell contains data<!-- -->:image<!-- -->/png;base64, followed by a base64 encoded .png image, ERDDAP™ will display an icon (so the user can see the image if they hover over it) and buttons to save the text or the image to the clipboard. This feature was added in ERDDAP™ v2.19 by Marco Alba.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="drawlandmask">drawLandMask<a href="#drawlandmask" class="hash-link" aria-label="Direct link to drawLandMask" title="Direct link to drawLandMask">​</a></h3>
<ul>
<li>
<p><a href="#drawlandmask"><strong>drawLandMask</strong></a> specifies the default setting which controls when and how the landmask should be drawn when ERDDAP™ draws a map. It can be specified in three different places in datasets.xml (listed from lowest to highest priority):</p>
<ol>
<li>If drawLandMask is specified within &lt;erddapDatasets&gt; (not connected with any specific dataset), then it specifies the default value of drawLandMask for all variables in all datasets. For example,</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;drawLandMask&gt;under&lt;/drawLandMask&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Any changes to this tag&#x27;s value will take effect the next time ERDDAP reads datasets.xml.<br>
<!-- -->If this tag isn&#x27;t present, the underlying default value is under.<br>
<!-- --> 
2.  If drawLandMask is specified as a global attribute of a given dataset, then it specifies the default value of drawLandMask for all variables in that dataset, overriding any lower priority setting. For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;drawLandMask&quot;&gt;under&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Any changes to this tag&#x27;s value will take effect the next time ERDDAP™ reloads that dataset.<br>
<!-- --> 
3.  If drawLandMask is specified as a variable&#x27;s attribute in a given dataset, then it specifies the default value of drawLandMask for that variable in that dataset, overriding any lower priority setting. For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;drawLandMask&quot;&gt;under&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Any changes to this tag&#x27;s value will take effect the next time ERDDAP™ reloads that dataset.</p>
<p>A user can override the default (wherever it is specified) by selecting a value for &quot;Draw land mask&quot; from a dropdown list on the dataset&#x27;s Make A Graph web page, or by including &amp;.land=<em>value</em> in the URL that requests a map from ERDDAP.</p>
<p>In all situations, there are 4 possible values for the attribute:</p>
<ul>
<li>&quot;under&quot; draws the landmask before it draws data on the map.<br>
<!-- -->For gridded datasets, land appears as a constant light gray color.<br>
<!-- -->For tabular datasets, &quot;under&quot; shows topography data over land and oceans.</li>
<li>&quot;over&quot; -- For gridded datasets, &quot;over&quot; draws the landmask after it draws data on maps so that it will mask any data over land. For tabular datasets, &quot;over&quot; shows bathymetry of the ocean and a constant light gray where there is land, both drawn under the data.</li>
<li>&quot;outline&quot; just draws the outline of the landmask, political boundaries, lakes and rivers.</li>
<li>&quot;off&quot; doesn&#x27;t draw anything.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="emaildiagnosticstoerddata">&lt;emailDiagnosticsToErdData&gt;<a href="#emaildiagnosticstoerddata" class="hash-link" aria-label="Direct link to &lt;emailDiagnosticsToErdData&gt;" title="Direct link to &lt;emailDiagnosticsToErdData&gt;">​</a></h3>
<ul>
<li><a href="#emaildiagnosticstoerddata"><strong>&lt;emailDiagnosticsToErdData&gt;</strong></a> is a rarely used OPTIONAL tag within an &lt;erddapDatasets&gt; tag in datasets.xml. The tag&#x27;s value can be true (the default) or false. If true, ERDDAP™ will email the stack trace to Chris.John at noaa.gov (the ERDDAP™ development team). This should be safe and secure since no confidential information (e.g., the requestUrl) is included in the email. This should make it possible to catch any obscure, totally unexpected bugs that lead to NullPointerExceptions. Otherwise, the user sees the exceptions, but the ERDDAP™ development team doesn&#x27;t (so we don&#x27;t know there is a problem that needs to be fixed).<br>
<!-- --> </li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="graphbackgroundcolor">&lt;graphBackgroundColor&gt;<a href="#graphbackgroundcolor" class="hash-link" aria-label="Direct link to &lt;graphBackgroundColor&gt;" title="Direct link to &lt;graphBackgroundColor&gt;">​</a></h3>
<ul>
<li><a href="#graphbackgroundcolor"><strong>&lt;graphBackgroundColor&gt;</strong></a> is a rarely used OPTIONAL tag within an &lt;erddapDatasets&gt; tag in datasets.xml to specify default background color on graphs. This affects almost all graphs. There are a few situations not affected. The color is specified as an 8 digit hexadecimal value in the form 0xAARRGGBB, where AA, RR, GG, and BB are the opacity, red, green and blue components, respectively. &quot;0x&quot; is case sensitive, but the hexadecimal digits are not case sensitive. For example, a fully opaque (ff) greenish-blue color with red=22, green=88, blue=ee would be 0xff2288ee. Opaque white is 0xffffffff. The default is opaque light blue (0xffccccff), which has the advantage of being different from white, which is an important color in many palettes used to draw data. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;graphBackgroundColor&gt;0xffffffff&lt;/graphBackgroundColor&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->Any changes to this tag&#x27;s value will take effect the next time ERDDAP™ reads datasets.xml, including in response to a dataset <a href="/docs/server-admin/additional-information#flag">flag</a>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ipaddressmaxrequests">&lt;ipAddressMaxRequests&gt;<a href="#ipaddressmaxrequests" class="hash-link" aria-label="Direct link to &lt;ipAddressMaxRequests&gt;" title="Direct link to &lt;ipAddressMaxRequests&gt;">​</a></h3>
<ul>
<li>
<p><a href="#ipaddressmaxrequests"><strong>&lt;ipAddressMaxRequests&gt;</strong></a> is a rarely used optional tag (first supported with ERDDAP™ v2.12) within an &lt;erddapDatasets&gt; tag in datasets.xml that is part of a system to limit the ability of overly aggressive legitimate users and malicious users to make a large number of simultaneous requests which would degrade system performance for other users. ipAddressMaxRequests specifies the maximum number of simultaneous requests that will be accepted from any specific IP address. Additional requests will receive an HTTP 429 error: Too Many Requests. The small, static files in erddap/download/ and erddap/images/ are NOT exempt from this count. The default is 15. The maximum allowed is 1000, which is crazy high -- don&#x27;t do it! ERDDAP™ won&#x27;t accept a number less than 6 because many legitimate users (notably web browsers and WMS clients) make up to 6 requests at a time. The ERDDAP™ Daily Report and the similar information written to the log.txt file with each Major Dataset Reload, will now include a tally of the requests by these IP addresses under the title &quot;Requester&#x27;s IP Address (Too Many Requests)&quot;.<br>
<!-- -->Any changes to this tag&#x27;s value will take effect the next time ERDDAP™ reads datasets.xml, including in response to a dataset <a href="/docs/server-admin/additional-information#flag">flag</a>.</p>
<p>The &quot;Major LoadDatasets Time Series&quot; section of status.html includes a &quot;tooMany&quot; column which lists the number of requests which exceeded a user&#x27;s ipAddressMaxRequests setting and thus saw a &quot;Too Many Requests&quot; error. This lets you easily see when there are active overly aggressive legitimate users and malicious users so you can (optionally) look in the log.txt file and decide if you want to blacklist those users.</p>
<p>There&#x27;s nothing specifically wrong with setting this to a higher number. It&#x27;s up to you. But doing so allows/encourages people to set up systems that use a large number of threads to work on projects and then gives them no feedback that what they are doing isn&#x27;t getting them any benefit.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ipaddressmaxrequestsactive">&lt;ipAddressMaxRequestsActive&gt;<a href="#ipaddressmaxrequestsactive" class="hash-link" aria-label="Direct link to &lt;ipAddressMaxRequestsActive&gt;" title="Direct link to &lt;ipAddressMaxRequestsActive&gt;">​</a></h3>
<ul>
<li><a href="#ipaddressmaxrequestsactive"><strong>&lt;ipAddressMaxRequestsActive&gt;</strong></a> is a rarely used optional tag (first supported with ERDDAP™ v2.12) within an &lt;erddapDatasets&gt; tag in datasets.xml that is part of a system to limit the ability of overly aggressive legitimate users and malicious users to make a large number of simultaneous requests which would degrade system performance for other users. ipAddressMaxRequestsActive specifies the maximum number of simultaneous requests that will be actively processed from any specific IP address. Additional requests will sit in a queue until the previous requests have been processed. The small, static files in erddap/download/ and erddap/images/ ARE exempt from this count and the related throttling. The default is 2. The maximum allowed is 100, which is crazy high -- don&#x27;t do it! You can set this to 1 to be strict, especially if you have problems with overly aggressive or malicious users. Users will still quickly get all the data they request (up to ipAddressMaxRequests), but they won&#x27;t be able to hog system resources. We don&#x27;t recommend setting this to a larger number because it allows overly aggressive legitimate users and malicious users to dominate ERDDAP&#x27;s processing capacity.<br>
<!-- -->Any changes to this tag&#x27;s value will take effect the next time ERDDAP™ reads datasets.xml, including in response to a dataset <a href="/docs/server-admin/additional-information#flag">flag</a>.<br>
<!-- --> </li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ipaddressunlimited">&lt;ipAddressUnlimited&gt;<a href="#ipaddressunlimited" class="hash-link" aria-label="Direct link to &lt;ipAddressUnlimited&gt;" title="Direct link to &lt;ipAddressUnlimited&gt;">​</a></h3>
<ul>
<li>
<p><a href="#ipaddressunlimited"><strong>&lt;ipAddressUnlimited&gt;</strong></a> is a rarely used optional tag (first supported with ERDDAP™ v2.12) within an &lt;erddapDatasets&gt; tag in datasets.xml that is part of a system to limit the ability of overly aggressive legitimate users and malicious users to make a large number of simultaneous requests which would degrade system performance for other users. ipAddressUnlimited is a comma-separated list of IP addresses that you want to allow unlimited access to your ERDDAP. Look in your log.txt file to see which format your server is using for the IP addresses. On some servers, the IP addresses will be in the format #.#.#.# (where # is an integer from 0 to 255); whereas on others it will be in the format #:#:#:#:#:#:#:# . Requesters on this list are not subject to either the ipAddressMaxRequests or the ipAddressMaxRequestsActive settings. This might be a secondary ERDDAP™ or for certain users or servers in your system. ERDDAP™ always adds &quot;(unknownIPAddress)&quot;, which ERDDAP™ uses when the requester&#x27;s IP address can&#x27;t be determined, e.g., for other processes running on the same server.<br>
<!-- -->Any changes to this tag&#x27;s value will take effect the next time ERDDAP™ reads datasets.xml, including in response to a dataset <a href="/docs/server-admin/additional-information#flag">flag</a>.</p>
<p>If for some reason all of a user&#x27;s requests get the error message &quot;Timeout waiting for your other requests to process.&quot;, then you can solve the problem by adding the user&#x27;s IP address to the ipAddressUnlimited list, applying that change, then removing it from that list.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="loaddatasetsminminutes">&lt;loadDatasetsMinMinutes&gt;<a href="#loaddatasetsminminutes" class="hash-link" aria-label="Direct link to &lt;loadDatasetsMinMinutes&gt;" title="Direct link to &lt;loadDatasetsMinMinutes&gt;">​</a></h3>
<ul>
<li><a href="#loaddatasetsminminutes"><strong>&lt;loadDatasetsMinMinutes&gt;</strong></a> is a rarely used OPTIONAL tag within an &lt;erddapDatasets&gt; tag in datasets.xml to specify the minimum time (in minutes) between major loadDatasets (when ERDDAP™ reprocesses datasets.xml, including checking each dataset to see if it needs to be reloaded according to its reloadEveryNMinutes setting, default=15). E.g.,</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;loadDatasetsMinMinutes&gt;15&lt;/loadDatasetsMinMinutes&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If a given run of loadDatasets takes less than this time, the loader just repeatedly looks at the flag directory and/or sleeps until the remaining time has passed. The default is 15 minutes, which should be fine for almost everyone. The only disadvantage to setting this to a smaller number is that it will increase the frequency that ERDDAP™ retries datasets that have errors that prevent them from being loaded (e.g., a remote server is down). If there are lots of such datasets and they are retested frequently, the data source might consider it pestering/aggressive behaviour. Any changes to this tag&#x27;s value will take effect the next time ERDDAP™ reads datasets.xml, including in response to a dataset <a href="/docs/server-admin/additional-information#flag">flag</a>. Before ERDDAP™ v2.00, this was specified in setup.xml, which is still allowed but discouraged.<br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="loaddatasetsmaxminutes">&lt;loadDatasetsMaxMinutes&gt;<a href="#loaddatasetsmaxminutes" class="hash-link" aria-label="Direct link to &lt;loadDatasetsMaxMinutes&gt;" title="Direct link to &lt;loadDatasetsMaxMinutes&gt;">​</a></h3>
<ul>
<li><a href="#loaddatasetsmaxminutes"><strong>&lt;loadDatasetsMaxMinutes&gt;</strong></a> is an OPTIONAL tag within an &lt;erddapDatasets&gt; tag in datasets.xml to specify the maximum time (in minutes) a major loadDatasets effort is allowed to take (before the loadDatasets thread treated as &quot;stalled&quot; and is interrupted) (default=60). E.g.,</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;loadDatasetsMaxMinutes&gt;60&lt;/loadDatasetsMaxMinutes&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In general, this should be set to at least twice as long as you reasonably think that reloading all of the datasets (cumulatively) should take (since computers and networks sometimes are slower than expected) This should always be much longer than loadDatasetsMinMinutes. The default is 60 minutes. Some people will set this to longer. Any changes to this tag&#x27;s value will take effect the next time ERDDAP™ reads datasets.xml, including in response to a dataset <a href="/docs/server-admin/additional-information#flag">flag</a>. Before ERDDAP™ v2.00, this was specified in setup.xml, which is still allowed but discouraged.<br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="loglevel">&lt;logLevel&gt;<a href="#loglevel" class="hash-link" aria-label="Direct link to &lt;logLevel&gt;" title="Direct link to &lt;logLevel&gt;">​</a></h3>
<ul>
<li><a href="#loglevel"><strong>&lt;logLevel&gt;</strong></a> is an OPTIONAL tag within an &lt;erddapDatasets&gt; tag in datasets.xml to specify how many diagnostic messages are sent to the log.txt file. It can be set to &quot;warning&quot; (the fewest messages), &quot;info&quot; (the default), or &quot;all&quot; (the most messages). E.g.,</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;logLevel&gt;info&lt;/logLevel&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Any changes to this tag&#x27;s value will take effect the next time ERDDAP™ reads datasets.xml, including in response to a dataset <a href="/docs/server-admin/additional-information#flag">flag</a>. Before ERDDAP™ v2.00, this was specified in setup.xml, which is still allowed but discouraged.<br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="partialrequestmaxbytes-and-partialrequestmaxcells">&lt;partialRequestMaxBytes&gt; and &lt;partialRequestMaxCells&gt;<a href="#partialrequestmaxbytes-and-partialrequestmaxcells" class="hash-link" aria-label="Direct link to &lt;partialRequestMaxBytes&gt; and &lt;partialRequestMaxCells&gt;" title="Direct link to &lt;partialRequestMaxBytes&gt; and &lt;partialRequestMaxCells&gt;">​</a></h3>
<ul>
<li><a href="#partialrequestmaxbytes-and-partialrequestmaxcells"><strong>&lt;partialRequestMaxBytes&gt;</strong></a> and <a href="#partialrequestmaxbytes-and-partialrequestmaxcells"><strong>&lt;partialRequestMaxCells&gt;</strong></a> are rarely used OPTIONAL tags within an &lt;erddapDatasets&gt; tag in datasets.xml. When possible (and it isn&#x27;t always possible), ERDDAP™ breaks large data requests into chunks to conserve memory.</li>
</ul>
<p>With 32 bit Java, in a simplistic sense, the maximum number of simultaneous <em>large</em> requests is roughly 3/4 of the memory available (the -Xmx value passed to Tomcat) divided by the chunk size (e.g., 1200 MB / 100 MB =&gt; 12 requests). Other things require memory, so the actual number of requests will be less. In practice, chunking isn&#x27;t always possible. So one huge or a few very large simultaneous non-chunkable requests could cause problems on 32 bit Java.</p>
<p>With 64 bit Java, the -Xmx value can be much larger. So memory is much less likely to be a constraint.</p>
<p>You can override the default chunk size by defining these tags in datasets.xml (with different values than shown here):<br>
<!-- -->For grids: &lt;partialRequestMaxBytes&gt;100000000&lt;/partialRequestMaxBytes&gt;<br>
<!-- -->For tables: &lt;partialRequestMaxCells&gt;1000000&lt;/partialRequestMaxCells&gt;</p>
<p>partialRequestMaxBytes is the preferred maximum number of bytes for a partial grid data request (a chunk of the total request). default=100000000 (10^8). Larger sizes aren&#x27;t necessarily better (and don&#x27;t go over 500 MB because that is THREDDS&#x27;s default limit for DAP responses). But larger sizes may require fewer accesses of tons of files (think of ERD&#x27;s satellite data with each time point in a separate file - it&#x27;s better to get more data from each file in each partial request).</p>
<p>partialRequestMaxCells is the preferred maximum number of cells (nRows * nColumns in the data table) for a partial TABLE data request (a chunk of the total request). Default = 100000. Larger sizes aren&#x27;t necessarily better. They result in a longer wait for the initial batch of data from the source.</p>
<p>Any changes to this tag&#x27;s value will take effect the next time ERDDAP™ reads datasets.xml, including in response to a dataset <a href="/docs/server-admin/additional-information#flag">flag</a>. Before ERDDAP™ v2.00, these were specified in setup.xml, which is still allowed but discouraged.<br>
<!-- --> </p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="requestblacklist">&lt;requestBlacklist&gt;<a href="#requestblacklist" class="hash-link" aria-label="Direct link to &lt;requestBlacklist&gt;" title="Direct link to &lt;requestBlacklist&gt;">​</a></h3>
<ul>
<li><a href="#requestblacklist"><strong>&lt;requestBlacklist&gt;</strong></a> <a href="/docs/server-admin/additional-information#frequent-crashes-or-freezes">is an OPTIONAL tag</a> within an &lt;erddapDatasets&gt; tag in datasets.xml which contains a comma-separated list of numeric IP addresses which will be blacklisted. Any changes to this tag&#x27;s value will take effect the next time ERDDAP™ reads datasets.xml, including in response to a dataset <a href="/docs/server-admin/additional-information#flag">flag</a>.<!-- -->
<ul>
<li>
<p>This can be used to fend off a <a href="https://en.wikipedia.org/wiki/Denial_of_service" target="_blank" rel="noopener noreferrer">Denial of Service attack</a>, an overly zealous <a href="https://en.wikipedia.org/wiki/Internet_bot" target="_blank" rel="noopener noreferrer">web robot</a>, or any other type of troublesome user.</p>
</li>
<li>
<p>Troublesome User -- If ERDDAP™ slows to a crawl or freezes/stops, the cause is often a troublesome user who is running more than one script at once and/or making a large number of very large, extremely inefficient, or invalid requests, or simultaneous requests. Look in <a href="/docs/server-admin/additional-information#log">log.txt</a> to see if this is the case and to find the numeric IP address of the troublesome user. If this is the problem, you should probably blacklist that user.</p>
<p>When ERDDAP™ gets a request from a blacklisted IP address, it will return HTTP Error 403: Forbidden. The accompanying text error message encourages the user to email you, the ERDDAP administrator, to work out the problems. If they take the time to read the error message (many apparently don&#x27;t) and contact you, you can then work with them to get them to run just one script at a time, make more efficient requests, fix the problems in their script (for example, requesting data from a remote dataset that can&#x27;t respond before timing out), or whatever else was the source of trouble.</p>
<p>Users are often simply unaware that their requests are troublesome. They are often unaware of bugs, gross inefficiencies, or other problems with their scripts. They often think that because your ERDDAP™ offers data for free, that they can ask for as much data as they want, e.g., by running multiple scripts or by using multiple threads simultaneously.</p>
<ul>
<li>You can explain to them that each ERDDAP™, now matter how large and powerful, has finite resources (CPU time, hard drive I/O, network bandwidth, etc.) and it isn&#x27;t fair if one user requests data in a way that crowds out other users or overburdens ERDDAP.</li>
<li>Once a user knows how to make 2 simultaneous requests, they often see no reason not to make 5, 10 or 20 simultaneous requests, since the additional requests cost them nothing. It&#x27;s like asymmetric warfare: here, the offensive weapons have a tremendous advantage (zero cost) over the defensive weapons (a finite installation with real costs).</li>
<li>Point out to them that there are diminishing returns to making more and more simultaneous requests; the additional requests just further block out other user&#x27;s requests; they don&#x27;t yield a huge improvement for them.</li>
<li>Remind them that there are other users (both casual users and other users running scripts), so it isn&#x27;t fair of them to hog all of ERDDAP&#x27;s resources.</li>
<li>Point out that the tech giants have induced users to expect infinite resources from web services. While there are ways to set up <a href="/docs/server-admin/scaling">grids/clusters/federations of ERDDAPs</a> to make an ERDDAP™ system with more resources, most ERDDAP™ administrators don&#x27;t have the money or the manpower to set up such systems, and such a system will still be finite. At ERD for example, there&#x27;s one person (me) writing ERDDAP™, administering two ERDDAPs (with help from my boss), and managing several data sources, all with an annual hardware budget of $0 (we rely on occasional grants to pay for hardware). This isn&#x27;t Google, Facebook, Amazon, etc with 100&#x27;s of engineers, and millions of dollars of revenue to recycle into ever larger systems. And we can&#x27;t just move our ERDDAP™ to, for example, Amazon AWS, because the data storage costs are large and the data egress charges are large and variable, while our budget for external services is a fixed $0.</li>
<li>My request to users is: for non-time-sensitive requests (which is by far the most common case), their system should just make one request at a time. If the requests are time sensitive (e.g., multiple .pngs on a web page, multiple tiles for a WMS client, etc.), then perhaps 4 simultaneous requests should be the max (and just for a very short time).</li>
<li>If you explain the situation to the user, most users will understand and be willing to make the necessary changes so that you can remove their IP address from the blacklist.<br>
<!-- --> </li>
</ul>
</li>
<li>
<p>To blacklist a user, add their numeric IP address to the comma-separated list of IP addresses in &lt;requestBlacklist&gt; in your datasets.xml file. To find the troublesome user&#x27;s IP address, look in the ERDDAP™ <em>bigParentDirectory</em>/logs/log.txt file (<em>bigParentDirectory</em> is specified in <a href="/docs/server-admin/deploy-install#setupxml">setup.xml</a>) to see if this is the case and to find that user&#x27;s IP address. The IP address for every request is listed on the lines starting with &quot;{{{{#&quot; and is 4 numbers separated by periods, for example, 123.45.67.8 . Searching for &quot;ERROR&quot; will help you find problems such as invalid requests.</p>
</li>
<li>
<p>You can also replace the last number in an IP address with * (for example, 202.109.200.*) to block a range of IP addresses, 0-255.</p>
</li>
<li>
<p>You can also replace the last 2 numbers in an IP address with *.* (for example, 121.204.*.*) to block a wider range of IP addresses, 0-255.0-255.</p>
</li>
<li>
<p>For example,</p>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;requestBlacklist&gt;98.76.54.321, 202.109.200.\*, 121.204.\*.\*&lt;/requestBlacklist&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>You don&#x27;t need to restart ERDDAP™ for the changes to &lt;requestBlacklist&gt; to take effect. The changes will be detected the next time ERDDAP™ checks if any datasets need to be reloaded. Or, you can speed up the process by visiting a <a href="/docs/server-admin/additional-information#set-dataset-flag">setDatasetFlag URL</a> for any dataset.</li>
<li>Your ERDDAP™ daily report includes a list/tally of the most active allowed and blocked requesters.</li>
<li>If you want to figure out what domain/institution is related to a numeric IP address, you can use a free, reverse DNS web service like <a href="https://network-tools.com/" target="_blank" rel="noopener noreferrer">https://network-tools.com/</a>.</li>
<li>There may be times when it makes sense to block certain users at a higher level, for example, malicious users. For example, you can block their access to everything on your server, not just ERDDAP. On Linux, one such method is to use <a href="https://www.linode.com/docs/guides/control-network-traffic-with-iptables/" target="_blank" rel="noopener noreferrer">iptables</a>. For example, you can add a rule that will block everything coming from 198.51.100.0 with the command<br>
<!-- -->iptables -I INPUT -s 198.51.100.0 -j DROP</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="slowdowntroublemillis">&lt;slowDownTroubleMillis&gt;<a href="#slowdowntroublemillis" class="hash-link" aria-label="Direct link to &lt;slowDownTroubleMillis&gt;" title="Direct link to &lt;slowDownTroubleMillis&gt;">​</a></h3>
<ul>
<li>
<p><a href="#slowdowntroublemillis"><strong>&lt;slowDownTroubleMillis&gt;</strong></a> is a rarely used OPTIONAL tag within an &lt;erddapDatasets&gt; tag in datasets.xml which contains an integer specifying the number of milliseconds (default=1000) to pause when responding to all failed requests, e.g., unknown dataset, request too large, user on the blacklist. E.g.,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;slowDownTroubleMillis&gt;2000&lt;/slowDownTroubleMillis&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If a script is making one request immediately after another, then it might rapidly make one bad request after another. With this setting, you can slow down a failing script so ERDDAP™ isn&#x27;t flooded with bad requests. If a human makes a bad request, they won&#x27;t even notice this delay. Recommendations:</p>
<ul>
<li>If the trouble is a Distributed Denial Of Service (DDOS) attack from 100+ attackers, set this to a smaller number (100?). Slowing them all down for too long leads to too many active threads.</li>
<li>If the trouble is from 1-10 sources, set this to 1000 ms (the default), but a larger number (like 10000) is also reasonable. That slows them down so they waste fewer network resources. Also, 1000 ms or so won&#x27;t annoy human users who make a bad request.</li>
</ul>
<p>Any changes to this tag&#x27;s value will take effect the next time ERDDAP™ reads datasets.xml, including in response to a dataset <a href="/docs/server-admin/additional-information#flag">flag</a>.<br>
<!-- --> </p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="subscriptionemailblacklist">&lt;subscriptionEmailBlacklist&gt;<a href="#subscriptionemailblacklist" class="hash-link" aria-label="Direct link to &lt;subscriptionEmailBlacklist&gt;" title="Direct link to &lt;subscriptionEmailBlacklist&gt;">​</a></h3>
<ul>
<li><a href="#subscriptionemailblacklist"><strong>&lt;subscriptionEmailBlacklist&gt;</strong></a> is a rarely used OPTIONAL tag within an &lt;erddapDatasets&gt; tag in datasets.xml which contains a comma-separated list of email addresses which are immediately blacklisted from the <a href="https://coastwatch.pfeg.noaa.gov/erddap/subscriptions" target="_blank" rel="noopener noreferrer">subscription system</a>, for example<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;subscriptionEmailBlacklist&gt;bob@badguy.com, john@badguy.com&lt;/subscriptionEmailBlacklist&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->This is a case-insensitive system. If an email address is added to this list, if that email address has subscriptions, the subscriptions will be cancelled. If an email address on the list tries to subscribe, the request will be refused. Any changes to this tag&#x27;s value will take effect the next time ERDDAP™ reads datasets.xml, including in response to a dataset <a href="/docs/server-admin/additional-information#flag">flag</a>.<br>
<!-- --> </li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="standard-text">Standard Text<a href="#standard-text" class="hash-link" aria-label="Direct link to Standard Text" title="Direct link to Standard Text">​</a></h3>
<ul>
<li>
<p><a href="#standard-text"><strong>Standard Text</strong></a> -- There are several OPTIONAL tags (most are rarely used) within an &lt;erddapDatasets&gt; tag in datasets.xml to specify text that appears in various places in ERDDAP. If you want to change the default text, copy the existing value from the tag of the same name in<br>
<em>tomcat</em>/webapps/erddap/WEB-INF/classes/gov/noaa/pfel/erddap/util.messages.xml into datasets.xml, then modify the content. The advantage of having these in datasets.xml is that you can specify new values at any time, even when ERDDAP™ is running. Any changes to these tags&#x27; values will take effect the next time ERDDAP™ reads datasets.xml, including in response to a dataset <a href="/docs/server-admin/additional-information#flag">flag</a>. The tag names describe their purpose, but see the default content in messages.xml for a deeper understanding.</p>
<ul>
<li>&lt;standardLicense&gt;</li>
<li>&lt;standardContact&gt;</li>
<li>&lt;standardDataLicenses&gt;</li>
<li>&lt;standardDisclaimerOfEndorsement&gt;</li>
<li>&lt;standardDisclaimerOfExternalLinks&gt;</li>
<li>&lt;standardGeneralDisclaimer&gt;</li>
<li>&lt;standardPrivacyPolicy&gt;</li>
<li>&lt;startHeadHtml5&gt;</li>
<li>&lt;startBodyHtml5&gt; is a good tag to change in order to customize the appearance of the top of every web page in your ERDDAP. Notably, you can use this to easily add a temporary message on the ERDDAP™ home page (e.g., &quot;Check out the new JPL MUR SST v4.1 dataset ...&quot; or &quot;This ERDDAP™ will be offline for maintenance 2019-05-08T17:00:00 PDT through 2019-05-08T20:00:00 PDT.&quot;). One quirk of putting this tag in datasets.xml is: when you restart ERDDAP, the very first request to ERDDAP™ will return the default startBodyHtml5 HTML, but every subsequent request will use the startBodyHtml5 HTML specified in datasets.xml.</li>
<li>&lt;theShortDescriptionHtml&gt; is a good tag to change in order to customize the description of your ERDDAP. Note that you can easily change this to add a temporary message on the home page (e.g., &quot;This ERDDAP™ will be offline for maintenance 2019-05-08T17:00:00 PDT through 2019-05-08T20:00:00 PDT.&quot;).</li>
<li>&lt;endBodyHtml5&gt;</li>
</ul>
<p>Before ERDDAP™ v2.00, these were specified in setup.xml, which is still allowed but discouraged.<br>
<!-- --> </p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="unusualactivity">&lt;unusualActivity&gt;<a href="#unusualactivity" class="hash-link" aria-label="Direct link to &lt;unusualActivity&gt;" title="Direct link to &lt;unusualActivity&gt;">​</a></h3>
<ul>
<li><a href="#unusualactivity"><strong>&lt;unusualActivity&gt;</strong></a> is a rarely used OPTIONAL tag within an &lt;erddapDatasets&gt; tag in datasets.xml to specify the maximum number of requests between two runs of LoadDatasets that is considered normal (default=10000). If that number is exceeded, an email is sent to emailEverythingTo (as specified in setup.xml). E.g.,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;unusualActivity&gt;10000&lt;/unusualActivity&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->Any changes to this tag&#x27;s value will take effect the next time ERDDAP™ reads datasets.xml, including in response to a dataset <a href="/docs/server-admin/additional-information#flag">flag</a>. Before ERDDAP™ v2.00, this was specified in setup.xml, which is still allowed but discouraged.<br>
<!-- --> </li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="updatemaxevents">&lt;updateMaxEvents&gt;<a href="#updatemaxevents" class="hash-link" aria-label="Direct link to &lt;updateMaxEvents&gt;" title="Direct link to &lt;updateMaxEvents&gt;">​</a></h3>
<ul>
<li><a href="#updatemaxevents"><strong>&lt;updateMaxEvents&gt;</strong></a> is a rarely used OPTIONAL tag within an &lt;erddapDatasets&gt; tag in datasets.xml to specify the maximum number of file change events (default=10) that will be handled by the <a href="#updateeverynmillis">&lt;updateEveryNMillis&gt;</a> system before switching to reloading the dataset instead. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;updateMaxEvents&gt;10&lt;/updateMaxEvents&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->The updateEveryNMillis system is intended to run very quickly right before a user&#x27;s request is processed. If there are a lot of file change events, then presumably it can&#x27;t run quickly, so it instead calls for the dataset to be reloaded. If your ERDDAP™ deals with datasets that must be kept up-to-date even when there are changes to a large number of data files, you can set this to a larger number (100?).</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="user">&lt;user&gt;<a href="#user" class="hash-link" aria-label="Direct link to &lt;user&gt;" title="Direct link to &lt;user&gt;">​</a></h3>
<ul>
<li><a href="#user"><strong>&lt;user&gt;</strong></a> is an OPTIONAL tag within an &lt;erddapDatasets&gt; tag in datasets.xml that identifies a user&#x27;s username, password (if authentication=custom), and roles (a comma-separated list). The use of username and password varies slightly based on the value of <a href="/docs/server-admin/additional-information#authentication">&lt;authentication&gt;</a> in your ERDDAP&#x27;s setup.xml file.<!-- -->
<ul>
<li>This is part of ERDDAP&#x27;s <a href="/docs/server-admin/additional-information#security">security system</a> for restricting access to some datasets to some users.</li>
<li>Make a separate &lt;user&gt; tag for each user. Optionally, if authentication=oauth2, you can set up two &lt;user&gt; tags for each user: one for when the user logs in via Google, one for when the user logs in via Orcid, presumably with the same roles.</li>
<li>If there is no &lt;user&gt; tag for a client, s/he will only be able to access public datasets, i.e., datasets which don&#x27;t have an <a href="#accessibleto">&lt;accessibleTo&gt;</a> tag.</li>
<li>username<br>
<!-- -->For authentication=custom, the username is usually a combination of letters, digits, underscores, and periods.<br>
<!-- -->For authentication=email, the username is the user&#x27;s email address. It may be any email address.<br>
<!-- -->For authentication=google, the username is the user&#x27;s full Google email address. This includes Google-managed accounts like @noaa.gov accounts.<br>
<!-- -->For authentication=orcid, the username is the user&#x27;s Orcid account number (with dashes).<br>
<!-- -->For authentication=oauth2, the username is the user&#x27;s full Google email address or the user&#x27;s Orcid account number (with dashes).</li>
<li>password<br>
<!-- -->For authentication=email, google, orcid, or oauth2, don&#x27;t specify a password attribute.<br>
<!-- -->For authentication=custom, you must specify a password attribute for each user.<!-- -->
<ul>
<li>The passwords that users enter are case sensitive and must have 8 or more characters so they are harder to crack. Nowadays, even 8 characters can be cracked quickly and inexpensively by brute force using a cluster of computers on AWS. ERDDAP™ only enforces the 8-character minimum when the user tries to log in (not when the &lt;user&gt; tag is being processed, because that code only sees the hash digest of the password, not the plaintext password).</li>
<li>setup.xml&#x27;s &lt;passwordEncoding&gt; determines how passwords are stored in the &lt;user&gt; tags in datasets.xml. In order of increasing security, the options are:<!-- -->
<ul>
<li><a href="https://en.wikipedia.org/wiki/MD5" target="_blank" rel="noopener noreferrer">MD5</a> (Don&#x27;t use this!) -- for the password attribute, specify the MD5 hash digest of the user&#x27;s password.</li>
<li>UEPMD5 (Don&#x27;t use this!) -- for the password attribute, specify the MD5 hash digest of <em>username</em>:ERDDAP:<em>password</em> . The username and &quot;ERDDAP&quot; are used to <a href="https://en.wikipedia.org/wiki/Salt_(cryptography)" target="_blank" rel="noopener noreferrer">salt</a> the hash value, making it more difficult to decode.</li>
<li><a href="https://en.wikipedia.org/wiki/SHA-2" target="_blank" rel="noopener noreferrer">SHA256</a> (not recommended) -- for the password attribute, specify the SHA-256 hash digest of the user&#x27;s password.</li>
<li>UEPSHA256 (default, recommended passwordEncoding. But much better: use the google, orchid, or oauth2 authentication options.) -- for the password attribute, specify the SHA-256 hash digest of <em>username</em>:ERDDAP:<em>password</em> . The username and &quot;ERDDAP&quot; are used to salt the hash value, making it more difficult to decode.</li>
</ul>
</li>
<li>On Windows, you can generate MD5 password digest values by downloading an MD5 program (such as <a href="https://www.fourmilab.ch/md5/" target="_blank" rel="noopener noreferrer">MD5</a>) and using (for example):<br>
<!-- -->md5 -djsmith:ERDDAP:<em>actualPassword</em></li>
<li>On Linux/Unix, you can generate MD5 digest values by using the built-in md5sum program (for example):<br>
<!-- -->echo -n &quot;jsmith:ERDDAP:<em>actualPassword</em>&quot; | md5sum</li>
<li>Stored plaintext passwords are case sensitive. The stored forms of MD5 and UEPMD5 passwords are not case sensitive.</li>
<li>For example (using UEPMD5), if username=&quot;jsmith&quot; and password=&quot;myPassword&quot;, the &lt;user&gt; tag is:</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;user username=&quot;jsmith&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            password=&quot;57AB7ACCEB545E0BEB46C4C75CEC3C30&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            roles=&quot;JASmith, JASmithGroup&quot; /&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>where the stored password was generated with<br>
<!-- -->md5 -djsmith:ERDDAP<!-- -->:myPassword</p>
<ul>
<li>
<p>roles is a comma-separated list of roles for which the user is authorized. Any &lt;dataset&gt; may have an <a href="#accessibleto">&lt;accessibleTo&gt;</a> tag which lists the roles which are allowed to access that dataset. For a given user and a given dataset, if one of the roles in the user&#x27;s list of roles matches one of the roles in the dataset&#x27;s list of &lt;accessibleTo&gt; roles, then the user is authorized to access that dataset.</p>
<p>Every user who logs in is automatically given the role [anyoneLoggedIn], whether there is a &lt;user&gt; tag for them in datasets.xml or not. So if a given dataset has</p>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;accessibleTo&gt;\[anyoneLoggedIn\]&lt;/accessibleTo&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>then any user that is logged in will be authorized to access that dataset, even if there is no &lt;user&gt; tag for them in datasets.xml.</p>
<ul>
<li>Any changes to this tag&#x27;s value will take effect the next time ERDDAP™ reads datasets.xml, including in response to a dataset <a href="/docs/server-admin/additional-information#flag">flag</a>.<br>
<!-- --> </li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pathregex">&lt;pathRegex&gt;<a href="#pathregex" class="hash-link" aria-label="Direct link to &lt;pathRegex&gt;" title="Direct link to &lt;pathRegex&gt;">​</a></h3>
<ul>
<li>
<p><a href="#pathregex"><strong>&lt;pathRegex&gt;</strong></a> lets you specify a regular expression which limits which paths (which subdirectories) will be included in the dataset. The default is .*, which matches all paths. This is a rarely used, rarely needed, OPTIONAL tag for EDDGridFromFiles datasets, EDDTableFromFiles datasets, and a few other dataset types. However, when you need it, you really need it.</p>
<p>To make this work, you need to be really good with regular expressions. See this <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Pattern.html" target="_blank" rel="noopener noreferrer">regex documentation</a> and <a href="https://www.vogella.com/tutorials/JavaRegularExpressions/article.html" target="_blank" rel="noopener noreferrer">regex tutorial</a>. In particular, you need to know about capture groups (something inside parentheses), and the &quot;or&quot; symbol &quot;|&quot;.<br>
<!-- -->Together, these let you specify any number of options, e.g., (option1|option2|option3) .<br>
<!-- -->Also, any of the options can be nothing, e.g., (|option2|option3) .<br>
<!-- -->Also, you need to know that capture groups can be nested, i.e., any option in a capture group can contain another capture group, e.g., (|option2(|option2b|option2c)|option3) which says that option2 can be followed by nothing, or option2b, or option2c.<br>
<!-- -->For pathRegexes, each option will be one folder name followed by a /, e.g., bar/ .</p>
<p>The tricky part of the pathRegex is: When ERDDAP™ recursively descends the directory tree, the pathRegex must accept all the paths it encounters on its way to the directories with data. Regex&#x27;s with nested capture groups are a good way to deal with this.</p>
<p>An Example:<br>
<!-- -->Suppose we have the following directory structure:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/foo/bar/D0001/a/\*.nc  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/foo/bar/D0001/b/\*.nc  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/foo/bar/D0002/a/\*.nc  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/foo/bar/D0002/b/\*.nc  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/foo/bar/E0001/a/\*.nc  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and the specified fileDirectory is /foo/bar/, and we just want the .nc files in the D[0-9]<!-- -->4<!-- -->/a/ subdirectories.<br>
<!-- -->The solution is to set pathRegex to /foo/bar/(|D[0-9]<!-- -->4<!-- -->/(|a/))<br>
<!-- -->That says:<br>
<!-- -->The path must start with /foo/bar/<br>
<!-- -->  That may be followed by nothing or D[0-9]<!-- -->4<!-- -->/<br>
<!-- -->    That may be followed by nothing or a/</p>
<p>Yes, pathRegex&#x27;s can be incredibly difficult to formulate. If you get stuck, ask a computer programmer (the closest thing in the real world to a wizard spouting incantations?) or send an email to Chris.John at noaa.gov.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dataset">&lt;dataset&gt;<a href="#dataset" class="hash-link" aria-label="Direct link to &lt;dataset&gt;" title="Direct link to &lt;dataset&gt;">​</a></h3>
<ul>
<li><a href="#dataset"><strong>&lt;dataset&gt;</strong></a> is an OPTIONAL (but always used) tag within an &lt;erddapDatasets&gt; tag in datasets.xml that (if you include all of the information between &lt;dataset&gt; and &lt;/dataset&gt;) completely describes one dataset. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dataset type=&quot;EDDGridFromDap&quot; datasetID=&quot;erdPHssta8day&quot; active=&quot;true&quot;&gt; ... &lt;/dataset&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->There MAY be any number of dataset tags in your datasets.xml file.<br>
<!-- -->Three attributes MAY appear within a &lt;dataset&gt; tag:<br>
<!-- --> <!-- -->
<ul>
<li><strong>type=&quot;<em>aType</em>&quot;</strong> is a REQUIRED attribute within a &lt;dataset&gt; tag in datasets.xml which identifies the dataset type (for example, whether it is an EDDGrid/gridded or EDDTable/tabular dataset) and the source of the data (for example, a database, files, or a remote OPeNDAP server). See the <a href="#list-of-types-datasets"><strong>List of Dataset Types</strong></a>.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="datasetid">datasetId<a href="#datasetid" class="hash-link" aria-label="Direct link to datasetId" title="Direct link to datasetId">​</a></h4>
<ul>
<li><a href="#datasetid"><strong>datasetID=&quot;<em>aDatasetID</em>&quot;</strong></a> is a REQUIRED attribute within a &lt;dataset&gt; tag which assigns a short (usually &lt;15 characters), unique, identifying name to a dataset.<!-- -->
<ul>
<li>The datasetIDs MUST be a letter (A-Z, a-z) followed by any number of A-Z, a-z, 0-9, and _ (but best if &lt;32 characters total).</li>
<li>DatasetIDs are case sensitive, but DON&#x27;T create two datasetIDs that only differ in upper/lowercase letters. It will cause problems on Windows computers (yours and/or a user&#x27;s computer).</li>
<li>Best practices: We recommend using <a href="https://en.wikipedia.org/wiki/CamelCase" target="_blank" rel="noopener noreferrer">camelCase</a>.</li>
<li>Best practices: We recommend that the first part be an acronym or abbreviation of the source institution&#x27;s name and the second part be an acronym or abbreviation of the dataset&#x27;s name. When possible, we create a name which reflects the source&#x27;s name for the dataset. For example, we used datasetID=&quot;erdPHssta8day&quot; for a dataset from the NOAA NMFS SWFSC Environmental Research Division (ERD) which is designated by the source to be satellite/PH/ssta/8day.</li>
<li>If you change a dataset&#x27;s name, the old dataset (with the old name) will still be live in ERDDAP. This is an &quot;orphan&quot; dataset, because the specification for it in datasets.xml is now gone. This must be dealt with:<!-- -->
<ol>
<li>For ERDDAP™ v2.19 and later, you don&#x27;t need to do anything. ERDDAP™ will automatically remove these orphan datasets.</li>
<li>For ERDDAP™ v2.18 and earlier, you need to do something to remove the orphan datasets: Make a active=&quot;false&quot; dataset, e.g.,</li>
</ol>
</li>
</ul>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;dataset type=&quot;EDDTableFromNcFiles&quot; datasetID=&quot;*theOldName*&quot; active=&quot;false&quot; /&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After the next major loadDatasets, You can remove that tag after the old dataset is inactive.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="active">active<a href="#active" class="hash-link" aria-label="Direct link to active" title="Direct link to active">​</a></h4>
<ul>
<li><a href="#active"><strong>active=&quot;<em>boolean</em>&quot;</strong></a> is an OPTIONAL attribute within a &lt;dataset&gt; tag in datasets.xml which indicates if a dataset is active (eligible for use in ERDDAP) or not.<!-- -->
<ul>
<li>Valid values are true (the default) and false.</li>
<li>Since the default is true, you don&#x27;t need to use this attribute until you want to temporarily or permanently remove this dataset from ERDDAP.</li>
<li>If you just remove an active=&quot;true&quot; dataset from datasets.xml, the dataset will still be active in ERDDAP™ but will never be updated. Such a dataset will be an &quot;orphan&quot; and will be listed as such on the status.html web page right below the list of datasets that failed to load.</li>
<li>If you set active=&quot;false&quot;, ERDDAP™ will deactivate the dataset the next time it tries to update the dataset. When you do this, ERDDAP™ doesn&#x27;t throw out any information it may have stored about the dataset and certainly doesn&#x27;t do anything to the actual data.</li>
<li>In order to remove a dataset from ERDDAP™, see <a href="/docs/server-admin/additional-information#removing-datasets">Force Dataset Removal</a>.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<p><strong>Several tags can appear between the &lt;dataset&gt; and &lt;/dataset&gt; tags.</strong><br>
<!-- -->There is some variation in which tags are allowed by which types of datasets. See the documentation for a specific <a href="#list-of-types-datasets">type of dataset</a> for details.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="accessibleto">&lt;accessibleTo&gt;<a href="#accessibleto" class="hash-link" aria-label="Direct link to &lt;accessibleTo&gt;" title="Direct link to &lt;accessibleTo&gt;">​</a></h4>
<ul>
<li><a href="#accessibleto"><strong>&lt;accessibleTo&gt;</strong></a> is an OPTIONAL tag within a &lt;dataset&gt; tag that specifies a comma-separated list of <a href="#user">roles</a> which are allowed to have access to this dataset. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;accessibleTo&gt;RASmith, NEJones&lt;/accessibleTo&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>This is part of ERDDAP&#x27;s <a href="/docs/server-admin/additional-information#security">security system</a> for restricting access to some datasets to some users.</li>
<li>If this tag is not present, all users (even if they haven&#x27;t logged in) will have access to this dataset.</li>
<li>If this tag is present, this dataset will only be visible and accessible to logged-in users who have one of the specified roles. This dataset won&#x27;t be visible to users who aren&#x27;t logged in.</li>
<li>Every user who logs in is automatically given the role [anyoneLoggedIn], whether there is a &lt;user&gt; tag for them in datasets.xml or not. So if a given dataset has</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;accessibleTo&gt;\[anyoneLoggedIn\]&lt;/accessibleTo&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->then any user that is logged in will be authorized to access that dataset, even if there is no &lt;user&gt; tag for them in datasets.xml.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="graphsaccessibleto">&lt;graphsAccessibleTo&gt;<a href="#graphsaccessibleto" class="hash-link" aria-label="Direct link to &lt;graphsAccessibleTo&gt;" title="Direct link to &lt;graphsAccessibleTo&gt;">​</a></h4>
<ul>
<li><a href="#graphsaccessibleto"><strong>&lt;graphsAccessibleTo&gt;</strong></a> is an OPTIONAL tag within a &lt;dataset&gt; tag in datasets.xml which determines whether graphics and metadata for the dataset are available to the public. It offers a way to partially override the dataset&#x27;s <a href="#accessibleto">&lt;accessibleTo&gt;</a> setting. The allowed values are:<!-- -->
<ul>
<li>auto -- This value (or the absence of a &lt;graphsAccessibleTo&gt; tag for the dataset) makes access to graphs and metadata from the dataset mimic the dataset&#x27;s &lt;accessibleTo&gt; setting.<br>
<!-- -->So if the dataset is private, its graphs and metadata will be private.<br>
<!-- -->And if the dataset is public, its graphs and metadata will be public.</li>
<li>public -- This setting makes the dataset&#x27;s graphs and metadata accessible to anyone, even users who aren&#x27;t logged in, even if the dataset is otherwise private because it has an &lt;accessibleTo&gt; tag.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="accessibleviafiles">&lt;accessibleViaFiles&gt;<a href="#accessibleviafiles" class="hash-link" aria-label="Direct link to &lt;accessibleViaFiles&gt;" title="Direct link to &lt;accessibleViaFiles&gt;">​</a></h4>
<ul>
<li>
<p><a href="#accessibleviafiles"><strong>&lt;accessibleViaFiles&gt;</strong></a> is an OPTIONAL tag within a &lt;dataset&gt; tag in datasets.xml for <a href="#eddgridaggregateexistingdimension">EDDGridAggregateExistingDimension</a>, <a href="#eddgridcopy">EDDGridCopy</a>, <a href="#eddgridfromeddtable">EDDGridFromEDDTable</a>, <a href="#eddfromerddap">EDDGridFromErddap</a>, <a href="#eddgridfrometopo">EDDGridFromEtopo</a>, <a href="#eddgridfromfiles">EDDGridFromFiles</a> (including all subclasses), <a href="#eddgridsidebyside">EDDGridSideBySide</a>, <a href="#eddtablecopy">EDDTableCopy</a> <a href="#eddfromerddap">EDDTableFromErddap</a>, <a href="#eddtablefromeddgrid">EDDTableFromEDDGrid</a>, and <a href="#eddtablefromfiles">EDDTableFromFiles</a> (including all subclasses) datasets. It can have a value of true or false. For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;accessibleViaFiles&gt;true&lt;/accessibleViaFiles&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If the value is true, ERDDAP™ will make it so that users can browse and download the dataset&#x27;s source data files via ERDDAP&#x27;s <a href="https://coastwatch.pfeg.noaa.gov/erddap/files/" target="_blank" rel="noopener noreferrer">&quot;files&quot; system</a>. See the &quot;files&quot; system&#x27;s <a href="https://coastwatch.pfeg.noaa.gov/erddap/files/documentation.html" target="_blank" rel="noopener noreferrer">documentation</a> for more information.</p>
<p>The default value of &lt;accessibleViaFiles&gt; comes from &lt;defaultAccessibleViaFiles&gt; in <a href="/docs/server-admin/deploy-install#setupxml">setup.xml</a>. It has a default value of false, but we recommend that you add that tag to your setup.xml with a value of true.</p>
<p>Recommendation -- We recommend making all relevant datasets accessible via the files system by setting &lt;defaultAccessibleViaFiles&gt; to true in setup.xml because there is a group of users for whom this is the preferred way to get the data. Among other reasons, the &quot;files&quot; system makes it easy for users to see which files are available and when they last changed, thus making it easy for a user to maintain their own copy of the entire dataset. If you generally don&#x27;t want to make datasets accessible via the files system, set &lt;defaultAccessibleViaFiles&gt; to false. In either case, just use &lt;accessibleViaFiles&gt; for the few datasets which are exceptions to the general policy set by &lt;defaultAccessibleViaFiles&gt; (for example, when the dataset uses <a href="#ncml-files">.ncml</a> files, which aren&#x27;t really useful to users).<br>
<!-- --> </p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="accessibleviawms">&lt;accessibleViaWMS&gt;<a href="#accessibleviawms" class="hash-link" aria-label="Direct link to &lt;accessibleViaWMS&gt;" title="Direct link to &lt;accessibleViaWMS&gt;">​</a></h4>
<ul>
<li><a href="#accessibleviawms"><strong>&lt;accessibleViaWMS&gt;</strong></a> is an OPTIONAL tag within a &lt;dataset&gt; tag in datasets.xml for all <a href="#eddgrid">EDDGrid</a> subclasses. It can have a value of true (the default) or false. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;accessibleViaWMS&gt;true&lt;/accessibleViaWMS&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->If the value is false, ERDDAP&#x27;s WMS server won&#x27;t be available for this dataset. This is commonly used for datasets that have some longitude values greater than 180 (which technically is invalid for WMS services), and for which you are also offering a variant of the dataset with longitude values entirely in the range -180 to 180 via <a href="#eddgridlonpm180">EDDGridLonPM180</a>.<br>
<!-- -->If the value is true, ERDDAP™ will try to make the dataset available via ERDDAP&#x27;s WMS server. But if the dataset is completely unsuitable for WMS (e.g., there is no longitude or latitude data), then the dataset won&#x27;t be available via ERDDAP&#x27;s WMS server, regardless of this setting.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="addvariableswhere">&lt;addVariablesWhere&gt;<a href="#addvariableswhere" class="hash-link" aria-label="Direct link to &lt;addVariablesWhere&gt;" title="Direct link to &lt;addVariablesWhere&gt;">​</a></h4>
<ul>
<li>
<p><a href="#addvariableswhere">&lt;addVariablesWhere&gt;</a> is an OPTIONAL tag within the &lt;dataset&gt; tag for all EDDTable datasets.</p>
<p>Requests to any EDDTable dataset can include &amp;addVariablesWhere(&quot;<em>attributeName</em>&quot;,&quot;<em>attributeValue</em>&quot;), which tells ERDDAP™ to add all of the variables in the dataset where <em>attributeName=attributeValue</em> to the list of requested variables. For example, if a user adds &amp;addVariablesWhere(&quot;ioos_category&quot;,&quot;Wind&quot;) to a query, ERDDAP will add all variables in the dataset that have an ioos_category=Wind attribute to the list of requested variables (for example, windSpeed, windDirection, windGustSpeed). <em>attributeName</em> and <em>attributeValue</em> are case-sensitive.</p>
<p>In datasets.xml, if the chunk of dataset.xml for a dataset has</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;addVariablesWhere&gt;*attributeNamesCSV*&lt;addVariablesWhere&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>for example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;addVariablesWhere&gt;ioos\_category,units&lt;addVariablesWhere&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>the Data Access Form (.html web page) for the dataset will include a widget (for each attributeName in the comma-separated list) right below the list of variables which lets users specify an attribute value. If the user selects an attribute value for one or more of the attribute names, they will be added to the request via &amp;addVariablesWhere(&quot;<em>attributeName</em>&quot;,&quot;<em>attributeValue</em>&quot;). Thus, this tag in datasets.xml lets you specify the list of attribute names which will appear on the Data Access Form for that dataset and makes it easy for users to add &amp;addVariablesWhere functions to the request. The <em>attributeNamesCSV</em> list is case-sensitive.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="altitudemeterspersourceunit">&lt;altitudeMetersPerSourceUnit&gt;<a href="#altitudemeterspersourceunit" class="hash-link" aria-label="Direct link to &lt;altitudeMetersPerSourceUnit&gt;" title="Direct link to &lt;altitudeMetersPerSourceUnit&gt;">​</a></h4>
<ul>
<li><a href="#altitudemeterspersourceunit"><strong>&lt;altitudeMetersPerSourceUnit&gt;</strong></a> is an OPTIONAL tag within the &lt;dataset&gt; tag in datasets.xxml for EDDTableFromSOS datasets (only!) that specifies a number which is multiplied by the source altitude or depth values to convert them into altitude values (in meters above sea level). For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;altitudeMetersPerSourceUnit&gt;-1&lt;/altitudeMetersPerSourceUnit&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->This tag MUST be used if the dataset&#x27;s vertical axis values aren&#x27;t meters, positive=up. Otherwise, it is OPTIONAL, since the default value is 1. For example,<!-- -->
<ul>
<li>If the source is already measured in meters above sea level, use 1 (or don&#x27;t use this tag, since 1 is the default value).</li>
<li>If the source is measured in meters below sea level, use -1.</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;altitudeMetersPerSourceUnit&gt;-1&lt;/altitudeMetersPerSourceUnit&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>If the source is measured in km above sea level, use 0.001.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="defaultdataquery">&lt;defaultDataQuery&gt;<a href="#defaultdataquery" class="hash-link" aria-label="Direct link to &lt;defaultDataQuery&gt;" title="Direct link to &lt;defaultDataQuery&gt;">​</a></h4>
<ul>
<li><a href="#defaultdataquery"><strong>&lt;defaultDataQuery&gt;</strong></a> is an OPTIONAL tag within a &lt;dataset&gt; tag in datasets.xml that tells ERDDAP™ to use the specified query (the part of the URL after the &quot;?&quot;) if the .html fileType (the Data Access Form) is requested with no query.<!-- -->
<ul>
<li>You will probably rarely need to use this.</li>
<li>You need to XML-encode (not percent-encode) the default queries since they are in an XML document. For example, &amp; becomes &amp; , &lt; becomes &lt; , &gt; becomes &gt; .</li>
<li>Please check your work. It is easy to make a mistake and not get what you want. ERDDAP™ will try to clean up your errors -- but don&#x27;t rely on that, since *how* it is cleaned up may change.</li>
<li>For griddap datasets, a common use of this is to specify a different default depth or altitude dimension value (for example, [0] instead of [last]).<br>
<!-- -->In any case, you should always list all of the variables, always use the same dimension values for all variables, and almost always use [0], [last], or [0<!-- -->:last<!-- -->] for the dimension values.<br>
<!-- -->For example:</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;defaultDataQuery&gt;u\[last\]\[0\]\[0:last\]\[0:last\],v\[last\]\[0\]\[0:last\]\[0:last\]&lt;/defaultDataQuery&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>For tabledap datasets, if you don&#x27;t specify any constraint, the request will return the entire dataset, which may be impractically large, depending on the dataset. If you don&#x27;t want to specify any constraints, rather than have an empty &lt;defaultDataQuery&gt; (which is the same as not specifying a defaultDataQuery), you need to explicitly list all of the variables you want to include in the defaultDataQuery.</li>
<li>For tabledap datasets, the most common use of this is to specify a different default time range (relative to max(time), for example, &amp;time&gt;=max(time)-1day, or relative to now, for example, &amp;time&gt;=now-1day ).<br>
<!-- -->Remember that requesting no data variables is the same as specifying all data variables, so usually you can just specify the new time constraint.<br>
<!-- -->For example:</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;defaultDataQuery&gt;&amp;amp;time&amp;gt;=max(time)-1day&lt;/defaultDataQuery&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->or<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;defaultDataQuery&gt;&amp;amp;time&amp;gt;=now-1day&lt;/defaultDataQuery&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="defaultgraphquery">&lt;defaultGraphQuery&gt;<a href="#defaultgraphquery" class="hash-link" aria-label="Direct link to &lt;defaultGraphQuery&gt;" title="Direct link to &lt;defaultGraphQuery&gt;">​</a></h4>
<ul>
<li><a href="#defaultgraphquery"><strong>&lt;defaultGraphQuery&gt;</strong></a> is an OPTIONAL tag within a &lt;dataset&gt; tag in datasets.xml that tells ERDDAP™ to use the specified query (the part of the URL after the &quot;?&quot;) if the .graph fileType (the Make A Graph Form) is requested with no query.<!-- -->
<ul>
<li>You will probably rarely need to use this.</li>
<li>You need to XML-encode (not percent-encode) the default queries since they are in an XML document. For example, &amp; becomes &amp; , &lt; becomes &lt; , &gt; becomes &gt; .</li>
<li>Please check your work. It is easy to make a mistake and not get what you want. ERDDAP™ will try to clean up your errors -- but don&#x27;t rely on that, since *how* it is cleaned up may change.</li>
<li>For griddap datasets, the most common use of this is to specify a different default depth or altitude dimension value (for example, [0] instead of [last]) and/or to specify that a specific variable be graphed.<br>
<!-- -->In any case, you will almost always use [0], [last], or [0<!-- -->:last<!-- -->] for the dimension values.<br>
<!-- -->For example:</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;defaultGraphQuery&gt;temp\[last\]\[0\]\[0:last\]\[0:last\]&amp;amp;.draw=surface&amp;amp;.vars=longitude|latitude|temp&lt;/defaultGraphQuery&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->(but put it all on one line)<!-- -->
<ul>
<li>For tabledap datasets, if you don&#x27;t specify any constraint, the request will graph the entire dataset, which may take a long time, depending on the dataset.</li>
<li>For tabledap datasets, the most common use of this is to specify a different default time range (relative to max(time), for example, &amp;time&gt;=max(time)-1day, or relative to now, for example, &amp;time&gt;=now-1day ).<br>
<!-- -->Remember that requesting no data variables is the same as specifying all data variables, so usually you can just specify the new time constraint.<br>
<!-- -->For example:</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;defaultGraphQuery&gt;&amp;amp;time&amp;gt;=max(time)-1day&lt;/defaultGraphQuery&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->or<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;defaultGraphQuery&gt;&amp;amp;time&amp;gt;=now-1day&lt;/defaultGraphQuery&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dimensionvaluesinmemory">&lt;dimensionValuesInMemory&gt;<a href="#dimensionvaluesinmemory" class="hash-link" aria-label="Direct link to &lt;dimensionValuesInMemory&gt;" title="Direct link to &lt;dimensionValuesInMemory&gt;">​</a></h4>
<ul>
<li>
<p><a href="#dimensionvaluesinmemory"><strong>&lt;dimensionValuesInMemory&gt;</strong></a> (true (the default) or false) is an OPTIONAL and rarely used tag within the &lt;dataset&gt; tag for any EDDGrid dataset that tells ERDDAP™ where to keep the source values of the dimensions (also known as the axisVariables):</p>
<ul>
<li>true = in memory (which is faster but uses more memory)</li>
<li>false = on disk (which is slower but uses no memory)</li>
</ul>
<p>For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;dimensionValuesInMemory&gt;false&lt;/dimensionValuesInMemory&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You should only use this with the non-default value of false if your ERDDAP™ has a lot of datasets with very large dimensions (e.g., millions of values, e.g., in EDDGridFromAudioFiles datasets) and ERDDAP&#x27;s In Use memory usage is always too high. See the Memory: currently using line at [yourDomain]/erddap/status.html to monitor ERDDAP™ memory usage.<br>
<!-- --> </p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="filetableinmemory">&lt;fileTableInMemory&gt;<a href="#filetableinmemory" class="hash-link" aria-label="Direct link to &lt;fileTableInMemory&gt;" title="Direct link to &lt;fileTableInMemory&gt;">​</a></h4>
<ul>
<li>
<p><a href="#filetableinmemory"><strong>&lt;fileTableInMemory&gt;</strong></a> (true or false (the default)) is an OPTIONAL tag within the &lt;dataset&gt; tag for any EDDGridFromFiles and EDDTableFromFiles dataset that tells ERDDAP™ where to keep the fileTable (which has information about each source data file):</p>
<ul>
<li>true = in memory (which is faster but uses more memory)</li>
<li>false = on disk (which is slower but uses no memory)</li>
</ul>
<p>For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;fileTableInMemory&gt;true&lt;/fileTableInMemory&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you set this to true for any dataset, keep an eye on the Memory: currently using line at [yourDomain]/erddap/status.html to ensure that ERDDAP™ still has plenty of free memory.<br>
<!-- --> </p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="fgdcfile">&lt;fgdcFile&gt;<a href="#fgdcfile" class="hash-link" aria-label="Direct link to &lt;fgdcFile&gt;" title="Direct link to &lt;fgdcFile&gt;">​</a></h4>
<ul>
<li><a href="#fgdcfile"><strong>&lt;fgdcFile&gt;</strong></a> is an OPTIONAL tag within a &lt;dataset&gt; tag in datasets.xml that tells ERDDAP™ to use a pre-made FGDC file instead of having ERDDAP™ try to generate the file. Usage:</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;fgdcFile&gt;*fullFileName*&lt;/fgdcFile&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>fullFileName</em> can refer to a local file (somewhere on the server&#x27;s file system) or the URL of a remote file.<br>
<!-- -->If <em>fullFileName</em>=&quot;&quot; or the file isn&#x27;t found, the dataset will have no FGDC metadata. So this is also useful if you want to suppress the FGDC metadata for a specific dataset.<br>
<!-- -->Or, you can put &lt;fgdcActive&gt;false&lt;/fgdcActive&gt; in setup.xml to tell ERDDAP™ not to offer FGDC metadata for any dataset.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="iso19115file">&lt;iso19115File&gt;<a href="#iso19115file" class="hash-link" aria-label="Direct link to &lt;iso19115File&gt;" title="Direct link to &lt;iso19115File&gt;">​</a></h4>
<ul>
<li><a href="#iso19115file"><strong>&lt;iso19115File&gt;</strong></a> is an OPTIONAL tag within a &lt;dataset&gt; tag in datasets.xml that tells ERDDAP™ to use a pre-made ISO 19115 file instead of having ERDDAP™ try to generate the file. Usage:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;iso19115File&gt;*fullFileName*&lt;/iso19115File&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<em>fullFileName</em> can refer to a local file (somewhere on the server&#x27;s file system) or the URL of a remote file.<br>
<!-- -->If <em>fullFileName</em>=&quot;&quot; or the file isn&#x27;t found, the dataset will have no ISO 19115 metadata. So this is also useful if you want to suppress the ISO 19115 metadata for a specific dataset.<br>
<!-- -->Or, you can put &lt;iso19115Active&gt;false&lt;/iso19115Active&gt; in setup.xml to tell ERDDAP™ not to offer ISO 19115 metadata for any dataset.<br>
<!-- --> </li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="matchaxisndigits">&lt;matchAxisNDigits&gt;<a href="#matchaxisndigits" class="hash-link" aria-label="Direct link to &lt;matchAxisNDigits&gt;" title="Direct link to &lt;matchAxisNDigits&gt;">​</a></h4>
<ul>
<li>
<p><a href="#matchaxisndigits"><strong>&lt;matchAxisNDigits&gt;</strong></a> is an OPTIONAL tag within an EDDGrid &lt;dataset&gt; tag for EDDGrid datasets that are aggregations, e.g., aggregations of files. Each time the dataset is reloaded, ERDDAP™ checks that the axis values of each component of the aggregation are the same. The precision of the testing is determined by the <a href="#matchaxisndigits">matchAxisNDigits</a>, which specifies the total number of digits which must match when testing double precision axis values, 0 - 18 (the default). When testing float axis values, the test is done with matchAxisNDigits/2 digits. A value of 18 or above tells EDDGrid to do an exact test. A value of 0 tells EDDGrid not to do any testing, which is not recommended, except as described below.</p>
<p>Although EDDGrid allows the components of the aggregation to have slightly different axis values, only one set of axis values is shown to the user. The set is from the same component that provides the dataset&#x27;s source metadata. For example, for EDDGridFromFiles datasets, that is specified by the &lt;metadataFrom&gt; setting (default=last).</p>
<p>Use of matchAxisNDigits=0 is strongly discouraged in most cases, because it turns off all checking. Even minimal checking is useful because it ensures that the components are suitable for aggregating. We all assume that all the components are suitable, but it isn&#x27;t always so. This is thus an important sanity test. Even values of matchAxisNDigits1, 2, 3 or 4 are discouraged because the different axis values often indicate that the components were created (binned?) a different way and are thus not suitable for aggregation.</p>
<p>There is one case where using matchAxisNDigits=0 is useful and recommended: with aggregations of remote files, e.g., data in S3 buckets. In this case, if the dataset uses cacheFromUrl, cacheSizeGB, matchAxisNDigits=0, and the EDDGridFromFiles system for <a href="#aggregation-via-file-names-or-global-metadata">Aggregation via File Names</a>, then EDDGrid doesn&#x27;t have to read all of the remote files to do the aggregation. This allows datasets made from data in S3 buckets to load very quickly (as opposed to absurdly slowly if EDDGrid has to download and read all of the files).</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="nthreads">&lt;nThreads&gt;<a href="#nthreads" class="hash-link" aria-label="Direct link to &lt;nThreads&gt;" title="Direct link to &lt;nThreads&gt;">​</a></h4>
<ul>
<li>Starting with ERDDAP™ version 2.00, when any subclass of EDDTableFromFiles or EDDGrid reads data from its source, it can read one chunk of data (e.g., one source file) at a time (in one thread) (that&#x27;s the default) or more than one chunk of data (e.g., 2+ source files) at a time (in 2 or more threads) while processing each request.<br>
<!-- --> <!-- -->
<ul>
<li>
<p>Rule of Thumb:<br>
<!-- -->For most datasets on most systems, use nThreads=1, the default. If you have a powerful computer (lots of CPU cores, lots of memory), then consider setting nThreads to 2, 3, 4, or higher (but never more than the number of CPU cores in the computer) for datasets that might benefit:</p>
<ul>
<li>Most EDDTableFromFiles datasets will benefit.</li>
<li>Datasets where something causes a lag before a chunk of data can actually be processed will benefit, for example:<!-- -->
<ul>
<li>Datasets with <a href="#externally-compressed-files">externally-compressed (e.g., .gz)</a> binary (e.g., .nc) files, because ERDDAP™ has to decompress the whole file before it can start to read the file.</li>
<li>Datasets that use <a href="#cachefromurl">cacheSizeGB</a>, because ERDDAP™ often has to download the file before it can read it.</li>
<li>Datasets with data files stored on a high-bandwidth parallel file system, because it can deliver more data, faster, when requested. Examples of parallel file systems include <a href="https://en.wikipedia.org/wiki/Non-RAID_drive_architectures" target="_blank" rel="noopener noreferrer">JBOD</a>, <a href="http://www.pnfs.com/" target="_blank" rel="noopener noreferrer">pNFS</a>, <a href="https://en.wikipedia.org/wiki/Gluster" target="_blank" rel="noopener noreferrer">GlusterFS</a>, Amazon S3, and Google Cloud Storage.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<p>Warning: When using nThreads&gt;1, keep an eye on ERDDAP&#x27;s memory use, thread use, and overall responsiveness (see <a href="/docs/server-admin/additional-information#status-page">ERDDAP&#x27;s status page</a>). See comments about these issues below.<br>
<!-- --> </p>
</li>
<li>
<p>For a given dataset, this nThreads setting can come from different places:</p>
<ul>
<li>If the datasets.xml chunk for a dataset has an &lt;nThreads&gt; tag (within the &lt;dataset&gt; tag, not as a global attribute) with a value &gt;= 1, that value of nThreads is used. So, you can specify a different number for each dataset.</li>
<li>Otherwise, if datasets.xml has an &lt;nTableThreads&gt; tag (for EDDTableFromFiles datasets) or an &lt;nGridThreads&gt; tag (for EDDGrid datasets) with a value &gt;= 1, outside of a &lt;dataset&gt; tag, that value of nThreads is used.</li>
<li>Otherwise, 1 thread is used, which is a safe choice since it uses the smallest amount of memory.<br>
<!-- --> </li>
</ul>
<p>For the <a href="https://coastwatch.pfeg.noaa.gov/erddap/index.html" target="_blank" rel="noopener noreferrer">original ERDDAP™ installation</a>, we use<br>
<!-- -->&lt;nTableThreads&gt;6&lt;/nTableThreads&gt; (It&#x27;s a powerful server.) Difficult requests now take 30% of the previous time.<br>
<!-- --> </p>
</li>
</ul>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="monitor-resource-usage">Monitor Resource Usage<a href="#monitor-resource-usage" class="hash-link" aria-label="Direct link to Monitor Resource Usage" title="Direct link to Monitor Resource Usage">​</a></h5>
<p>When you are experimenting with different nThreads settings (and perhaps making difficult sample requests to your ERDDAP), you can monitor your computer&#x27;s resource usage:</p>
<ul>
<li>On Macs, use Finder : Applications : Utilities : Activity Monitor</li>
<li>On Linux, use top</li>
<li>On Windows 10, use <em>Ctrl + Shift + Esc</em> to open Task Manager<br>
<!-- --> </li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="warning-decreased-responsiveness">Warning: Decreased Responsiveness<a href="#warning-decreased-responsiveness" class="hash-link" aria-label="Direct link to Warning: Decreased Responsiveness" title="Direct link to Warning: Decreased Responsiveness">​</a></h5>
<p>In isolation, ERDDAP™ will fulfill a request to a dataset with a higher nThreads setting faster than if nThreads=1. But while that request is being processed, other requests from other users will be somewhat crowded out and get a slower response. Also, when ERDDAP™ responds to a given request, other computing resources (e.g., disk drive access, network bandwidth) may be limiting, especially with higher nThreads settings. Thus with higher nThreads settings, the overall system responsiveness will be worse when there are multiple requests being processed -- this can be very annoying to users! Because of this: never set nThreads to more than the number of CPU cores in the computer. nThreads=1 is the fairest setting since each request (among several simultaneous requests) will get an equal share of computing resources. But the more powerful the computer, the less this will be a problem.<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="warning-higher-memory-use-for-eddgrid-datasets">Warning: Higher Memory Use for EDDGrid Datasets<a href="#warning-higher-memory-use-for-eddgrid-datasets" class="hash-link" aria-label="Direct link to Warning: Higher Memory Use for EDDGrid Datasets" title="Direct link to Warning: Higher Memory Use for EDDGrid Datasets">​</a></h5>
<p>Memory use while processing requests is directly proportional to the nThreads setting. A reasonably safe rule of thumb is: you need to set <a href="/docs/server-admin/deploy-install#memory">ERDDAP&#x27;s memory settings</a> to at least 2GB + (2GB * nThreads). Some requests to some datasets will need more memory than that. For example, setting nThreads=3 for any EDDGrid dataset means that the -Xmx setting should be at least -Xmx8000M. If that memory setting is greater than 3/4 the physical memory of the computer, decrease the nThreads setting so that you can decrease the memory setting.</p>
<p>The memory use of threads processing requests to EDDTable datasets is almost always lower because the files are usually much smaller. However, if a given EDDTable dataset has huge (e.g., &gt;=1 GB) data files, then the comments above will apply to those datasets as well.</p>
<p>Whatever the nThreads setting, keep a close eye on the memory usage statistics on your <a href="/docs/server-admin/additional-information#status-page">ERDDAP&#x27;s status page</a>. You shouldn&#x27;t ever come close to maxing out the memory usage in ERDDAP; otherwise there will be serious errors and failures.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="temporarily-set-to-1">Temporarily Set to 1<a href="#temporarily-set-to-1" class="hash-link" aria-label="Direct link to Temporarily Set to 1" title="Direct link to Temporarily Set to 1">​</a></h5>
<p>If current memory usage is even slightly high, ERDDAP™ will set nThreads for this request to 1. Thus, ERDDAP™ conserves memory when memory is scarce.<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="diminishing-returns">Diminishing Returns<a href="#diminishing-returns" class="hash-link" aria-label="Direct link to Diminishing Returns" title="Direct link to Diminishing Returns">​</a></h5>
<p>There are diminishing returns to increasing the nThreads setting: 2 threads will be way better than 1 (if we ignore dynamic overclocking). But 3 will be only a chunk better than 2. And 4 will be only marginally better than 3.</p>
<p>In one test of a difficult query to a large EDDTable dataset, the response time using 1, 2, 3, 4, 5, 6 threads was 38, 36, 20, 18, 13, 11 seconds. (We now use nTableThreads=6 on that server.)</p>
<p>nThreads=2: Although, there is often a significant benefit to specifying nThreads=2 instead of nThreads=1, it often won&#x27;t make much difference in the clock time needed to respond to a given user&#x27;s request. The reason is: with nThreads=1, most modern CPU&#x27;s will often <a href="https://en.wikipedia.org/wiki/Intel_Turbo_Boost" target="_blank" rel="noopener noreferrer">dynamically overclock</a> (turbo boost) to temporarily increase the clock speed of the CPU. Thus with nThreads=1, the one core will often be working at a higher clock speed than each of the two cores if you used nThreads=2. Regardless, we still think it is better to use nThreads=2 rather than nThreads=1, since that setting will yield better results in a wider variety of situations. And of course, if your computer has sufficient CPU cores, an even higher nThreads setting should yield better results.</p>
<p>As discussed above, very high nThreads settings may lead to faster responses to some requests, but the risk of overall decreased ERDDAP™ responsiveness and high memory use (as noted above) while those requests are being processed means it generally isn&#x27;t a good idea.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="cpu-cores">CPU Cores<a href="#cpu-cores" class="hash-link" aria-label="Direct link to CPU Cores" title="Direct link to CPU Cores">​</a></h5>
<p>You shouldn&#x27;t ever set nThreads to a number larger than the number of CPU cores in the computer&#x27;s CPU. Essentially all modern CPUs have multiple cores (e.g., 2, 4, or 8). Some computers even have multiple CPUs (e.g., 2 CPUs * 4 cores/CPU = 8 CPU cores). To find out how many CPUs and cores a computer has:</p>
<ul>
<li>On Macs, use <em>Option key</em> : Apple Menu : System Information</li>
<li>On Linux, use cat /proc/cpuinfo</li>
<li>On Windows 10, use <em>Ctrl + Shift + Esc</em> to open Task Manager : Performance (Logical processors shows the total number of CPU cores)</li>
</ul>
<p>Yes, most processors these days say that they support 2 threads per core (via <a href="https://en.wikipedia.org/wiki/Hyper-threading" target="_blank" rel="noopener noreferrer">hyper-threading</a>), but the 2 threads share computing resources, so you won&#x27;t see twice the throughput on a CPU under heavy load. For example, a computer with one CPU with 4 cores may claim to support up to 8 threads, but you should never exceed nThreads=4 in that ERDDAP. Remember that:</p>
<ul>
<li>The nThreads setting in ERDDAP™ is per request. ERDDAP™ often handles multiple requests simultaneously.</li>
<li>ERDDAP™ does things other than process requests, e.g., reload datasets.</li>
<li>When ERDDAP™ responds to a given request, other computing resources (e.g., disk drive access, network bandwidth) may be limiting. The higher you set nThreads, the more likely that these other resources will be maxed out and will slow down ERDDAP&#x27;s general responsiveness.</li>
<li>The operating system does things other than run ERDDAP.</li>
</ul>
<p>So it is best not to set the nThreads setting to more than the number of cores in the computer&#x27;s CPU.<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="your-mileage-may-vary-ymmv">Your Mileage May Vary (YMMV)<a href="#your-mileage-may-vary-ymmv" class="hash-link" aria-label="Direct link to Your Mileage May Vary (YMMV)" title="Direct link to Your Mileage May Vary (YMMV)">​</a></h5>
<p>The results of different nThreads settings will vary greatly for different requests to different datasets on different systems. If you really want to know the effect of different nThreads settings, run realistic tests.<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="why-nthreads-per-request">Why nThreads per request?<a href="#why-nthreads-per-request" class="hash-link" aria-label="Direct link to Why nThreads per request?" title="Direct link to Why nThreads per request?">​</a></h5>
<p>I can hear some of you thinking &quot;Why is nThreads per request? If I were coding this, I would use one permanent worker thread pool and a messaging queue for better performance.&quot; The problem with using one worker thread pool and a messaging queue is that one difficult request would flood the queue with numerous slow tasks. That would effectively block ERDDAP™ from even starting work on tasks related to other requests until the initial request was (essentially) finished. Thus, even simple subsequent requests would respond super slowly. ERDDAP&#x27;s use of nThreads per request leads to a much fairer use of computing resources.<br>
<!-- --> </p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="nthreads-vs-multiple-worker-computers">nThreads vs. Multiple Worker Computers<a href="#nthreads-vs-multiple-worker-computers" class="hash-link" aria-label="Direct link to nThreads vs. Multiple Worker Computers" title="Direct link to nThreads vs. Multiple Worker Computers">​</a></h5>
<p>Unfortunately, ERDDAP&#x27;s nThreads system will never be as effective as true parallelizing via multiple worker computers, with each working on a chunk of data, in the way that Hadoop or Apache Spark are usually used. When the task is truly parallelized/distributed to multiple computers, each computer can use all of its resources on its part of the task. With ERDDAP&#x27;s nThreads system, each of the threads is competing for the same computer&#x27;s bandwidth, disk drives, memory, etc. Unfortunately, most of us don&#x27;t have the resources or funds to set up or even rent (on Amazon Web Services (AWS) or Google Cloud Platform (GCP)) massive grids of computers. Also, unlike a relational database which is allowed to return the result rows in any order, ERDDAP™ makes a promise to return the result rows in a consistent order. This constraint makes ERDDAP&#x27;s nThreads implementation less efficient. But ERDDAP&#x27;s nThreads is useful in many cases.</p>
<p>However, there are ways to make ERDDAP™ scale to handle a huge number of requests quickly by setting up a <a href="/docs/server-admin/scaling">grid/cluster/federation of ERDDAPs</a>.<br>
<!-- --> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="palettes">&lt;palettes&gt;<a href="#palettes" class="hash-link" aria-label="Direct link to &lt;palettes&gt;" title="Direct link to &lt;palettes&gt;">​</a></h4>
<ul>
<li>
<p>Starting with ERDDAP™ version 2.12, datasets.xml can include a &lt;palettes&gt; tag (within &lt;erddapDatasets&gt;) which overrides the &lt;palettes&gt; tag value from messages.xml (or reverts to the messages.xml value if the tag in datasets.xml is empty). This lets you change the list of available palettes while ERDDAP™ is running. It also lets you make a change and have it persist when you install a new version of ERDDAP.<br>
<!-- -->WARNING: The palettes listed in datasets.xml must be a superset of the palettes listed in messages.xml; otherwise ERDDAP™ will throw an exception and stop processing datasets.xml. This ensures that all ERDDAP™ installations at least support the same core palettes.<br>
<!-- -->WARNING: ERDDAP™ checks that the palettes files specified in messages.xml actually exist, but it doesn&#x27;t check the palette files listed in datasets.xml. It&#x27;s your responsibility to ensure the files are present.</p>
<p>Also starting with ERDDAP™ version 2.12, if you make a cptfiles subdirectory in the ERDDAP™ content directory, ERDDAP™ will copy all the *.cpt files in that directory into the [tomcat]/webapps/erddap/WEB-INF/cptfiles directory each time ERDDAP™ starts up. Thus, if you put custom cpt files in that directory, those files will be used by ERDDAP™, with no extra effort on your part, even when you install a new version of ERDDAP.</p>
<p>WARNING: If you add custom palettes to your ERDDAP™ and you have EDDGridFromErddap and/or EDDTableFromErddap datasets in your ERDDAP™, then users will see your custom palette options on the ERDDAP™ Make A Graph web pages, but if the user tries to use them, they&#x27;ll get a graph with the default (usually Rainbow) palette. This is because the image is made by the remote ERDDAP™ which doesn&#x27;t have the custom palette. The only solutions now are to email the remote ERDDAP™ administrator to add your custom palettes to his/her ERDDAP or email Chris.John at noaa.gov to ask that the palettes be added to the standard ERDDAP™ distribution.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="onchange">&lt;onChange&gt;<a href="#onchange" class="hash-link" aria-label="Direct link to &lt;onChange&gt;" title="Direct link to &lt;onChange&gt;">​</a></h4>
<ul>
<li><a href="#onchange"><strong>&lt;onChange&gt;</strong></a> is an OPTIONAL tag within a &lt;dataset&gt; tag in datasets.xml that specifies an action which will be done when this dataset is created (when ERDDAP™ is restarted) and whenever this dataset changes in any way.<!-- -->
<ul>
<li>Currently, for EDDGrid subclasses, any change to metadata or to an axis variable (for example, a new time point for near-real-time data) is considered a change, but a reloading of the dataset is not considered a change (by itself).</li>
<li>Currently, for EDDTable subclasses, any reloading of the dataset is considered a change.</li>
<li>Currently, only two types of actions are allowed:<!-- -->
<ul>
<li>&quot;http://&quot; or &quot;https://&quot; -- If the action starts with &quot;http://&quot; or &quot;https://&quot;, ERDDAP™ will send an HTTP GET request to the specified URL. The response will be ignored. For example, the URL might tell some other web service to do something.<!-- -->
<ul>
<li>If the URL has a query part (after the &quot;?&quot;), it MUST be already <a href="https://en.wikipedia.org/wiki/Percent-encoding" target="_blank" rel="noopener noreferrer">percent encoded</a>. You need to encode special characters in the constraints (other than the initial &#x27;&amp;&#x27; and the main &#x27;=&#x27; in constraints) into the form %HH, where HH is the 2 digit hexadecimal value of the character. Usually, you just need to convert a few of the punctuation characters: % into %25, &amp; into %26, &quot; into %22, &lt; into %3C, = into %3D, &gt; into %3E, + into %2B, | into %7C, [ into %5B, ] into %5D, space into %20, and convert all characters above #127 into their UTF-8 form and then percent encode each byte of the UTF-8 form into the %HH format (ask a programmer for help).<br>
<!-- -->For example, &amp;stationID&gt;=&quot;41004&quot;<br>
<!-- -->becomes       &amp;stationID%3E=%2241004%22<br>
<!-- -->Percent encoding is generally required when you access ERDDAP via software other than a browser. Browsers usually handle percent encoding for you.<br>
<!-- -->In some situations, you need to percent encode all characters other than A-Za-z0-9_-!.~&#x27;()*, but still don&#x27;t encode the initial &#x27;&amp;&#x27; or the main &#x27;=&#x27; in constraints.<br>
<!-- -->Programming languages have tools to do this (for example, see Java&#x27;s <a href="https://docs.oracle.com/javase/8/docs/api/java/net/URLEncoder.html" target="_blank" rel="noopener noreferrer">java.net.URLEncoder</a> and JavaScript&#x27;s <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent" target="_blank" rel="noopener noreferrer">encodeURIComponent()</a>) and there are<br>
<a href="https://www.url-encode-decode.com/" target="_blank" rel="noopener noreferrer">websites that percent encode/decode for you</a>.</li>
<li>Since datasets.xml is an XML file, you MUST also &amp;-encode ALL &#x27;&amp;&#x27;, &#x27;&lt;&#x27;, and &#x27;&gt;&#x27; in the URL as &#x27;&amp;&#x27;, &#x27;&lt;&#x27;, and &#x27;&gt;&#x27; after percent encoding.</li>
<li>Example: For a URL that you might type into a browser as:<br>
<a href="https://www.company.com/webService?department=R%26D&amp;param2=value2" target="_blank" rel="noopener noreferrer">https://www.company.com/webService?department=R%26D&amp;param2=value2</a><br>
<!-- -->You should specify an &lt;onChange&gt; tag via (on one line)</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;onChange&gt;https://www.company.com/webService?department=R%26D&amp;amp;param2=value2&lt;/onChange&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>mailto: -- If the action starts with &quot;mailto:&quot;, ERDDAP™ will send an email to the subsequent email address indicating that the dataset has been updated/changed.<br>
<!-- -->For example: &lt;onChange&gt;mailto<!-- -->:john<a href="mailto:.smith@company.com" target="_blank" rel="noopener noreferrer">.smith@company.com</a>&lt;/onChange&gt;If you have a good reason for ERDDAP™ to support some other type of action, send us an email describing what you want.</li>
</ul>
</li>
<li>This tag is OPTIONAL. There can be as many of these tags as you want. Use one of these tags for each action to be performed.</li>
<li>This is analogous to ERDDAP&#x27;s email/URL subscription system, but these actions aren&#x27;t stored persistently (i.e., they are only stored in an EDD object).</li>
<li>To remove a subscription, just remove the &lt;onChange&gt; tag. The change will be noted the next time the dataset is reloaded.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="reloadeverynminutes">&lt;reloadEveryNMinutes&gt;<a href="#reloadeverynminutes" class="hash-link" aria-label="Direct link to &lt;reloadEveryNMinutes&gt;" title="Direct link to &lt;reloadEveryNMinutes&gt;">​</a></h4>
<ul>
<li><a href="#reloadeverynminutes"><strong>&lt;reloadEveryNMinutes&gt;</strong></a> is an OPTIONAL tag within a &lt;dataset&gt; tag in datasets.xml of almost all dataset types that specifies how often the dataset should be reloaded. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;reloadEveryNMinutes&gt;60&lt;/reloadEveryNMinutes&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>Generally, datasets that change frequently (for example, get new data files) should be reloaded frequently, for example, every 60 minutes.</p>
</li>
<li>
<p>Datasets that change infrequently should be reloaded infrequently, for example, every 1440 minutes (daily) or 10080 minutes (weekly).</p>
</li>
<li>
<p>This tag is OPTIONAL, but recommended. The default is 10080.</p>
</li>
<li>
<p>An example is: &lt;reloadEveryNMinutes&gt;1440&lt;/reloadEveryNMinutes&gt;</p>
</li>
<li>
<p>When a dataset is reloaded, all files in the <em>bigParentDirectory</em>/cache/<em>datasetID</em> directory are deleted.</p>
</li>
<li>
<p>No matter what this is set to, a dataset won&#x27;t be loaded more frequently than &lt;loadDatasetsMinMinutes&gt; (default = 15), as specified in <a href="/docs/server-admin/deploy-install#setupxml">setup.xml</a>. So if you want datasets to be reloaded very frequently, you need to set both reloadEveryNMinutes and loadDatasetsMinMinutes to small values.</p>
</li>
<li>
<p>Don&#x27;t set reloadEveryNMinutes to the same value as loadDatasetsMinMinutes, because the elapsed time is likely to be (for example) 14:58 or 15:02, so the dataset will only be reloaded in about half of the major reloads. Instead, use a smaller (for example, 10) or larger (for example, 20) reloadEveryNMinutes value.</p>
</li>
<li>
<p>Regardless of reloadEveryNMinutes, you can manually tell ERDDAP™ to reload a specific dataset as soon as possible via a <a href="/docs/server-admin/additional-information#flag">flag file</a>.</p>
</li>
<li>
<p>For Curious Programmers -- In ERDDAP™, the reloading of all datasets is handled by two single purpose threads. One thread initiates a minor reload if it finds a flag file or a major reload (which checks all datasets to see if they need to be reloaded). The other thread does the actual reload of the datasets one at a time. These threads work in the background ensuring that all datasets are kept up-to-date. The thread which actually does the reloads prepares a new version of a dataset then swaps it into place (essentially replacing the old version atomically). So it is very possible that the following sequence of events occurs (it&#x27;s a good thing):</p>
<ol>
<li>ERDDAP™ starts reloading a dataset (making a new version) in the background.</li>
<li>User &#x27;A&#x27; makes a request to the dataset. ERDDAP™ uses the current version of the dataset to create the response. (That is good. There was no delay for the user, and the current version of the dataset should never be very stale.)</li>
<li>ERDDAP™ finishes creating the new reloaded version of the dataset and swaps that new version into production. All subsequent new requests are handled by the new version of the dataset. For consistency, user A&#x27;s request is still being filled by the original version.</li>
<li>User &#x27;B&#x27; makes a request to the dataset and ERDDAP™ uses the new version of the dataset to create the response.</li>
<li>Eventually user A&#x27;s and user B&#x27;s requests are completed (perhaps A&#x27;s finishes first, perhaps B&#x27;s finishes first).</li>
</ol>
<p>I can hear someone saying, &quot;Just two thredds! Ha! That&#x27;s lame! He should set that up so that reloading of datasets uses as many threads as are needed, so it all gets done faster and with little or no lag.&quot; Yes and no. The problem is that loading more than one dataset at a time creates several hard new problems. They all need to be solved or dealt with. The current system works well and has manageable problems (for example, potential for lag before a flag is noticed). (If you need help managing them, see our <a href="/docs/intro#support">section on getting additional support</a>.) The related <a href="#updateeverynmillis">updateEveryNMillis</a>. system works within response threads, so it can and does lead to multiple datasets being updated (not the full reload) simultaneously.</p>
</li>
</ul>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="proactive-vs-reactive">Proactive vs. Reactive<a href="#proactive-vs-reactive" class="hash-link" aria-label="Direct link to Proactive vs. Reactive" title="Direct link to Proactive vs. Reactive">​</a></h5>
<p>ERDDAP&#x27;s reload system is proactive -- datasets are reloaded soon after their reloadEveryNMinutes time is up (i.e., they become &quot;stale&quot;, but never very stale), whether the dataset is getting requests from users or not. So ERDDAP™ datasets are always up-to-date and ready for use. This is in contrast to THREDDS&#x27; reactive approach: a user&#x27;s request is what tells THREDDS to check if a dataset is stale (it may be very stale). If it is stale, THREDDS makes the user wait (often for a few minutes) while the dataset is reloaded.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="updateeverynmillis">&lt;updateEveryNMillis&gt;<a href="#updateeverynmillis" class="hash-link" aria-label="Direct link to &lt;updateEveryNMillis&gt;" title="Direct link to &lt;updateEveryNMillis&gt;">​</a></h4>
<ul>
<li><a href="#updateeverynmillis"><strong>&lt;updateEveryNMillis&gt;</strong></a> is an OPTIONAL tag within a &lt;dataset&gt; tag in datasets.xml of some dataset types that helps ERDDAP™ work with datasets that change very frequently (as often as roughly every second). Unlike ERDDAP&#x27;s regular, proactive, <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a> system for completely reloading each dataset, this OPTIONAL additional system is reactive (triggered by a user request) and quicker because it is incremental (just updating the information that needs to be updated). For example, if a request to an EDDGridFromDap dataset occurs more than the specified number of milliseconds since the last update, ERDDAP™ will see if there are any new values for the leftmost (first, usually &quot;time&quot;) dimension and, if so, just download those new values before handling the user&#x27;s request. This system is very good at keeping a rapidly changing dataset up-to-date with minimal demands on the data source, but at the cost of slightly slowing down the processing of some user requests.<!-- -->
<ul>
<li>To use this system, add (for example):<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;updateEveryNMillis&gt;1000&lt;/updateEveryNMillis&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->right after the &lt;reloadEveryNMinutes&gt; tag for the dataset in datasets.xml. The number of milliseconds that you specify can be as small as 1 (to ensure that the dataset is always up-to-date). A value of 0 (the default) or a negative number turns off the system.</li>
<li>Due to their incremental nature, updates should finish very quickly, so users should never have to wait a long time.</li>
<li>If a second data request arrives before the previous update has finished, the second request won&#x27;t trigger another update.</li>
<li>Throughout the documentation, we will try to use the word &quot;reload&quot; for regular, full dataset reloads, and &quot;update&quot; for these new incremental, partial updates.</li>
<li>For testing purposes, some diagnostics are printed to log.txt if <a href="#loglevel">&lt;logLevel&gt;</a> in datasets.xml is set to &quot;all&quot;.</li>
<li>If you use incremental updates and especially if the leftmost (first), for example, time, axis is large, you may want to set &lt;reloadEveryNMinutes&gt; to a larger number (1440?), so that updates do most of the work to keep the dataset up-to-date, and full reloads are done infrequently.</li>
<li>Note: this new update system updates metadata (for example, time actual_range, time_coverage_end, ...) but doesn&#x27;t trigger onChange (email or touch URL) or change the RSS feed (perhaps it should...).</li>
<li>For all datasets that use subclasses of <a href="#eddgridfromfiles">EDDGridFromFiles</a> and <a href="#eddtablefromfiles">EDDTableFromFiles</a>:<!-- -->
<ul>
<li><strong>WARNING:</strong> when you add a new data file to a dataset by copying it into the directory that ERDDAP™ looks at, there is a danger that ERDDAP™ will notice the partially written file; try to read it, but fail because the file is incomplete; declare the file to be a &quot;bad&quot; file and remove it (temporarily) from the dataset.<br>
<!-- -->To avoid this, we <strong>STRONGLY RECOMMEND</strong> that you copy a new file into the directory with a temporary name (for example, 20150226.ncTmp) that doesn&#x27;t match the datasets fileNameRegex (*\.nc), then rename the file to the correct name (for example, 20150226.nc). If you use this approach, ERDDAP™ will ignore the temporary file and only notice the correctly named file when it is complete and ready to be used.</li>
<li>If you modify existing datafiles in place (for example, to add a new data point), &lt;updateEveryNMillis&gt; will work well if the changes appear atomically (in an instant) and the file is always a valid file. For example, the netcdf-java library allows for additions to the unlimited dimension of a &quot;classic&quot; .nc v3 file to be made atomically.<br>
<!-- -->&lt;updateEveryNMillis&gt; will work badly if the file is invalid while the changes are being made.</li>
<li>&lt;updateEveryNMillis&gt; will work well for datasets where one or a few files change in a short amount of time.</li>
<li>&lt;updateEveryNMillis&gt; will work poorly for datasets where a large number of files change in a short amount of time (unless the changes appear atomically). For these datasets, it is better to not use &lt;updateEveryNMillis&gt; and to set a <a href="/docs/server-admin/additional-information#set-dataset-flag">flag</a> to tell ERDDAP™ to reload the dataset.</li>
<li>&lt;updateEveryNMillis&gt; does not update the information associated with the <a href="#subsetvariables">&lt;subsetVariables&gt;</a>. Normally, this is not a problem, because the subsetVariables have information about things that don&#x27;t change very often (for example, the list of station names, latitudes, and longitudes). If the subsetVariables data changes (for example, when a new station is added to the dataset), then contact the <a href="/docs/server-admin/additional-information#set-dataset-flag">flag URL</a> for the dataset to tell ERDDAP™ to reload the dataset. Otherwise, ERDDAP™ won&#x27;t notice the new subsetVariable information until the next time the dataset is reloaded (&lt;reloadEveryNMinutes&gt;).</li>
<li>Our generic recommendation is to use:</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;reloadEveryNMinutes&gt;1440&lt;/reloadEveryNMinutes&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;updateEveryNMillis&gt;10000&lt;/updateEveryNMillis&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>TROUBLE? On Linux computers, if you are using &lt;updateEveryNMillis&gt; with EDDGridFromFiles or EDDTableFromFiles classes, you may see a problem where a dataset fails to load (occasionally or consistently) with the error message: &quot;IOException: User limit of inotify instances reached or too many open files&quot;. The cause may be a bug in Java which causes inotify instances to be not garbage collected. This problem is avoided in ERDDAP™ v1.66 and higher. So the best solution is to switch the latest version of ERDDAP.<br>
<!-- -->If that doesn&#x27;t solve the problem (that is, if you have a really large number of datasets using &lt;updateEveryNMillis&gt;), you can fix this problem by calling:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo sysctl fs.inotify.max\_user\_watches=65536  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo sysctl fs.inotify.max\_user\_instances=1024  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo sysctl -p  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->Or, use higher numbers if the problem persists. The default for watches is 8192. The default for instances is 128.</li>
</ul>
</li>
<li>You can put &lt;updateMaxEvents&gt;10&lt;/updateMaxEvents&gt; in datasets.xml (in with the other settings near the top) to change the maximum number of file changes (default=10) that will be processed by the updateEveryNMillis system. A larger number may be useful for dataset where it is very important that they be kept always up-to-date. See the <a href="#updatemaxevents">updateMaxEvents documentation</a>.</li>
<li>For Curious Programmers -- these incremental updates, unlike ERDDAP&#x27;s full <a href="#reloadeverynminutes">reloadEveryNMinutes</a> system, occur within user request threads. So, any number of datasets can be updating simultaneously. There is code (and a lock) to ensure that only one thread is working on an update for any given dataset at any given moment. Allowing multiple simultaneous updates was easy; allowing multiple simultaneous full reloads would be harder.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sourcecanconstrainstringeqne">&lt;sourceCanConstrainStringEQNE&gt;<a href="#sourcecanconstrainstringeqne" class="hash-link" aria-label="Direct link to &lt;sourceCanConstrainStringEQNE&gt;" title="Direct link to &lt;sourceCanConstrainStringEQNE&gt;">​</a></h4>
<ul>
<li><a href="#sourcecanconstrainstringeqne"><strong>&lt;sourceCanConstrainStringEQNE&gt;</strong></a> is an OPTIONAL tag within an EDDTable &lt;dataset&gt; tag in datasets.xml that specifies if the source can constrain String variables with the = and != operators.<!-- -->
<ul>
<li>For EDDTableFromDapSequence, this applies to the outer sequence String variables only. It is assumed that the source can&#x27;t handle any constraints on inner sequence variables.</li>
<li>This tag is OPTIONAL. Valid values are true (the default) and false.</li>
<li>For EDDTableFromDapSequence OPeNDAP DRDS servers, this should be set to true (the default).</li>
<li>For EDDTableFromDapSequence Dapper servers, this should be set to false.</li>
<li>An example is:</li>
</ul>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceCanConstrainStringEQNE&gt;true&lt;/sourceCanConstrainStringEQNE&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sourcecanconstrainstringgtlt">&lt;sourceCanConstrainStringGTLT&gt;<a href="#sourcecanconstrainstringgtlt" class="hash-link" aria-label="Direct link to &lt;sourceCanConstrainStringGTLT&gt;" title="Direct link to &lt;sourceCanConstrainStringGTLT&gt;">​</a></h4>
<ul>
<li><a href="#sourcecanconstrainstringgtlt"><strong>&lt;sourceCanConstrainStringGTLT&gt;</strong></a> is an OPTIONAL tag within an EDDTable &lt;dataset&gt; tag that specifies if the source can constrain String variables with the &lt;, &lt;=, &gt;, and &gt;= operators.<!-- -->
<ul>
<li>For EDDTableFromDapSequence, this applies to the outer sequence String variables only. It is assumed that the source can&#x27;t handle any constraints on inner sequence variables.</li>
<li>Valid values are true (the default) and false.</li>
<li>This tag is OPTIONAL. The default is true.</li>
<li>For EDDTableFromDapSequence OPeNDAP DRDS servers, this should be set to true (the default).</li>
<li>For EDDTableFromDapSequence Dapper servers, this should be set to false.</li>
<li>An example is:</li>
</ul>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceCanConstrainStringGTLT&gt;true&lt;/sourceCanConstrainStringGTLT&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sourcecanconstrainstringregex">&lt;sourceCanConstrainStringRegex&gt;<a href="#sourcecanconstrainstringregex" class="hash-link" aria-label="Direct link to &lt;sourceCanConstrainStringRegex&gt;" title="Direct link to &lt;sourceCanConstrainStringRegex&gt;">​</a></h4>
<ul>
<li><a href="#sourcecanconstrainstringregex"><strong>&lt;sourceCanConstrainStringRegex&gt;</strong></a> is an OPTIONAL tag within an EDDTable &lt;dataset&gt; tag that specifies if the source can constrain String variables by regular expressions, and if so, what the operator is.<!-- -->
<ul>
<li>Valid values are &quot;=<del>&quot; (the DAP standard), &quot;</del>=&quot; (mistakenly supported by many DAP servers), or &quot;&quot; (indicating that the source doesn&#x27;t support regular expressions).</li>
<li>This tag is OPTIONAL. The default is &quot;&quot;.</li>
<li>For EDDTableFromDapSequence OPeNDAP DRDS servers, this should be set to &quot;&quot; (the default).</li>
<li>For EDDTableFromDapSequence Dapper servers, this should be set to &quot;&quot; (the default).</li>
<li>An example is:</li>
</ul>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceCanConstrainStringRegex&gt;=~&lt;/sourceCanConstrainStringRegex&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sourcecandodistinct">&lt;sourceCanDoDistinct&gt;<a href="#sourcecandodistinct" class="hash-link" aria-label="Direct link to &lt;sourceCanDoDistinct&gt;" title="Direct link to &lt;sourceCanDoDistinct&gt;">​</a></h4>
<ul>
<li><a href="#sourcecandodistinct"><strong>&lt;sourceCanDoDistinct&gt;</strong></a> is an OPTIONAL tag within an EDDTableFromDatabase &lt;dataset&gt; tag that specifies if the source database should handle &amp;distinct() constraints in user queries.<!-- -->
<ul>
<li>This tag is OPTIONAL. Valid values are no (ERDDAP™ handles distinct; the default), partial (the source handles distinct and ERDDAP™ handles it again), and yes (the source handles distinct).</li>
<li>If you are using no and ERDDAP™ is running out of memory when handling distinct, use yes.</li>
<li>If you are using yes and the source database handles distinct too slowly, use no.</li>
<li>partial gives you the worst of both: it is slow because the database handling of distinct is slow and it may run out of memory in ERDDAP.</li>
<li>Databases interpret DISTINCT as a request for just unique rows of results, whereas ERDDAP™ interprets it as a request for a sorted list of unique rows of results. If you set this to partial or yes, ERDDAP™ automatically also tells the database to sort the results.</li>
<li>One small difference in the results:<br>
<!-- -->With no|partial, ERDDAP™ will sort &quot;&quot; at the start of the results (before non-&quot;&quot; strings).<br>
<!-- -->With yes, the database may (Postgres will) sort &quot;&quot; at the end of the results (after non-&quot;&quot; strings).<br>
<!-- -->I will guess that this will also affect the sorting of short words versus longer words that start with the short word. For example, ERDDAP™ will sort &quot;Simon&quot; before &quot;Simons&quot;.</li>
<li>An example is:</li>
</ul>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceCanDoDistinct&gt;yes&lt;/sourceCanDoDistinct&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sourcecanorderby">&lt;sourceCanOrderBy&gt;<a href="#sourcecanorderby" class="hash-link" aria-label="Direct link to &lt;sourceCanOrderBy&gt;" title="Direct link to &lt;sourceCanOrderBy&gt;">​</a></h4>
<ul>
<li><a href="#sourcecanorderby"><strong>&lt;sourceCanOrderBy&gt;</strong></a> is an OPTIONAL tag within an EDDTableFromDatabase &lt;dataset&gt; tag that specifies if the source database should handle &amp;orderBy(...) constraints in user queries.<!-- -->
<ul>
<li>This tag is OPTIONAL. Valid values are no (ERDDAP™ handles orderBy(...); the default), partial (the source handles orderBy and ERDDAP™ handles it again), and yes (the source handles orderBy(...)).</li>
<li>If you are using no and ERDDAP™ is running out of memory when handling orderBy(...), use yes.</li>
<li>If you are using yes and the source database handles orderBy(...) too slowly, use no.</li>
<li>partial gives you the worst of both: it is slow because the database handling of orderBy(...) is slow and it may run out of memory in ERDDAP.</li>
<li>One small difference in the results:<br>
<!-- -->With no|partial, ERDDAP™ will sort &quot;&quot; at the start of the results (before non-&quot;&quot; strings).<br>
<!-- -->With yes, the database may (Postgres will) sort &quot;&quot; at the end of the results (after non-&quot;&quot; strings).<br>
<!-- -->This may also affect the sorting of short words versus longer words that start with the short word. For example, ERDDAP™ will sort &quot;Simon&quot; before &quot;Simons&quot;, but I&#x27;m not sure about how a database will sort them.</li>
<li>An example is:</li>
</ul>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceCanOrderBy&gt;yes&lt;/sourceCanOrderBy&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p> </p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sourceneedsexpandedfp_eq">&lt;sourceNeedsExpandedFP_EQ&gt;<a href="#sourceneedsexpandedfp_eq" class="hash-link" aria-label="Direct link to &lt;sourceNeedsExpandedFP_EQ&gt;" title="Direct link to &lt;sourceNeedsExpandedFP_EQ&gt;">​</a></h4>
<ul>
<li><a href="#sourceneedsexpandedfp_eq"><strong>&lt;sourceNeedsExpandedFP_EQ&gt;</strong></a> is an OPTIONAL tag within an EDDTable &lt;dataset&gt; tag that specifies (true (the default) or false) if the source needs help with queries with &lt;numericVariable&gt;=&lt;floatingPointValue&gt; (and !=, &gt;=, &lt;=). For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;sourceNeedsExpandedFP\_EQ&gt;false&lt;/sourceNeedsExpandedFP\_EQ&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>For some data sources, numeric queries involving =, !=, &lt;=, or &gt;= may not work as desired with floating point numbers. For example, a search for longitude=220.2 may fail if the value is stored as 220.20000000000001.</li>
<li>This problem arises because floating point numbers are <a href="https://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/" target="_blank" rel="noopener noreferrer">not represented exactly within computers</a>.</li>
<li>If sourceNeedsExpandedFP_EQ is set to true (the default), ERDDAP™ modifies the queries sent to the data source to avoid this problem. It is always safe and fine to leave this set to true.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sourceurl">&lt;sourceUrl&gt;<a href="#sourceurl" class="hash-link" aria-label="Direct link to &lt;sourceUrl&gt;" title="Direct link to &lt;sourceUrl&gt;">​</a></h4>
<ul>
<li><a href="#sourceurl"><strong>&lt;sourceUrl&gt;</strong></a> is a common tag within a dataset&#x27;s global &lt;addAttributes&gt; tag that specifies the URL that is the source of the data.<!-- -->
<ul>
<li>An example is:</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;sourceUrl&gt;https://oceanwatch.pfeg.noaa.gov/thredds/dodsC/satellite/VH/chla/1day&lt;/sourceUrl&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->(but put it all on one line)<!-- -->
<ul>
<li>
<p>In ERDDAP™, all datasets will have a &quot;sourceUrl&quot; in the combined global attributes which are shown to the users.</p>
</li>
<li>
<p>For most dataset types, this tag is REQUIRED. See the dataset type&#x27;s description to find out if this is REQUIRED or not.</p>
</li>
<li>
<p>For some datasets, the separate &lt;sourceUrl&gt; tag is not allowed. Instead, you must provide a &quot;sourceUrl&quot; <a href="#global-attributes">global attribute</a>, usually in the global &gt;addAttributes&lt;. If there is no actual source URL (for example, if the data is stored in local files), this attribute often just has a placeholder value, for example, &lt;att name=&quot;name&quot;&gt;(local files)&lt;/att&gt; .</p>
</li>
<li>
<p>For most datasets, this is the base of the URL that is used to request data. For example, for DAP servers, this is the URL to which .dods, .das, .dds, or .html could be added.</p>
</li>
<li>
<p>Since datasets.xml is an XML file, you MUST also encode &#x27;&amp;&#x27;, &#x27;&lt;&#x27;, and &#x27;&gt;&#x27; in the URL as &#x27;&amp;&#x27;, &#x27;&lt;&#x27;, and &#x27;&gt;&#x27;.</p>
</li>
<li>
<p>For most dataset types, ERDDAP™ adds the original sourceUrl (the &quot;localSourceUrl&quot; in the source code) to the <a href="#global-attributes">global attributes</a> (where it becomes the &quot;publicSourceUrl&quot; in the source code). When the data source is local files, ERDDAP™ adds sourceUrl=&quot;(local files)&quot; to the global attributes as a security precaution. When the data source is a database, ERDDAP™ adds sourceUrl=&quot;(source database)&quot; to the global attributes as a security precaution. If some of your datasets use non-public sourceUrl&#x27;s (usually because their computer is in your DMZ or on a local LAN) you can use <a href="#converttopublicsourceurl">&lt;convertToPublicSourceUrl&gt;</a> tags to specify how to convert the local sourceUrls to public sourceUrls.</p>
</li>
<li>
<p>A sourceUrl may begin with http://, https://, ftp://, and perhaps other prefixes. https connections read and check the source&#x27;s digital certificate to ensure that the source is who they say they are. In rare cases, this check may fail with the error &quot;javax.net.ssl.SSLProtocolException: handshake alert: unrecognized_name&quot;. This is probably due to the domain name on the certificate not matching the domain name that you are using. You can and should read the details of the sourceUrl&#x27;s certificate in your web browser, notably, the list of &quot;DNS Name&quot;s in the &quot;Subject Alternative Name&quot; section.</p>
<p>In some cases, the sourceUrl you are using may be an alias of the domain name on the certificate. For example,<br>
<a href="https://podaac-opendap.jpl.nasa.gov/opendap/allData/ccmp/L3.5a/monthly/flk/" target="_blank" rel="noopener noreferrer">https://podaac-opendap.jpl.nasa.gov/opendap/allData/ccmp/L3.5a/monthly/flk/</a> will throw this error, but<br>
<a href="https://opendap.jpl.nasa.gov/opendap/allData/ccmp/L3.5a/monthly/flk/" target="_blank" rel="noopener noreferrer">https://opendap.jpl.nasa.gov/opendap/allData/ccmp/L3.5a/monthly/flk/</a> , which uses the domain name on the certificate, won&#x27;t. The solution in these cases is therefore to find and use the domain name on the certificate. If you can&#x27;t find it on the certificate, contact the data provider.</p>
<p>In other cases, the domain name on the certificate may be for a group of names. If this occurs or the problem is otherwise unsolvable, please email Chris.John at noaa.gov to report the problem.<br>
<!-- --> </p>
</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="addattributes">&lt;addAttributes&gt;<a href="#addattributes" class="hash-link" aria-label="Direct link to &lt;addAttributes&gt;" title="Direct link to &lt;addAttributes&gt;">​</a></h4>
<ul>
<li><a href="#addattributes"><strong>&lt;addAttributes&gt;</strong></a> is an OPTIONAL tag for each dataset and for each variable which lets ERDDAP administrators control the metadata attributes associated with a dataset and its variables.<!-- -->
<ul>
<li>ERDDAP™ combines the attributes from the dataset&#x27;s source (&quot;sourceAttributes&quot;) and the &quot;addAttributes&quot; which you define in datasets.xml (which have priority) to make the &quot;combinedAttributes&quot;, which are what ERDDAP™ users see. Thus, you can use addAttributes to redefine the values of sourceAttributes, add new attributes, or remove attributes.</li>
<li>The &lt;addAttributes&gt; tag encloses 0 or more <strong>&lt;att&gt;</strong> subtags, which are used to specify individual attributes.</li>
<li>Each attribute consists of a name and a value (which has a specific data type, for example, double).</li>
<li>There can be only one attribute with a given name. If there are more, the last one has priority.</li>
<li>The value can be a single value or a space-separated list of values.</li>
<li>Syntax<!-- -->
<ul>
<li>The order of the &lt;att&gt; subtags within addAttributes is not important.</li>
<li>The &lt;att&gt; subtag format is</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;*name*&quot; \[type=&quot;*type*&quot;\] &gt;*value*&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>The destination name of all attributes MUST start with a letter (A-Z, a-z) and MUST contain only the characters A-Z, a-z, 0-9, or &#x27;_&#x27;.</li>
<li>If an &lt;att&gt; subtag has no value or a value of null, that attribute will be removed from the combined attributes.<br>
<!-- -->For example, &lt;att name=&quot;rows&quot; /&gt; will remove rows from the combined attributes.<br>
<!-- -->For example, &lt;att name=&quot;coordinates&quot;&gt;null&lt;/att&gt; will remove coordinates from the combined attributes.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="attributetype">attributeType<a href="#attributetype" class="hash-link" aria-label="Direct link to attributeType" title="Direct link to attributeType">​</a></h5>
<ul>
<li><a href="#attributetype">The OPTIONAL type value for &lt;att&gt; subtags</a> indicates the data type for the values. The default type is String. An example of a String attribute is:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;creator\_name&quot;&gt;NASA/GSFC OBPG&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>Valid types for single values are byte (8-bit integer), short (16-bit signed integer), int (32-bit signed integer), long (64-bit signed integer), float (32-bit floating point), double (64-bit floating point), char, and String. For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;scale\_factor&quot; type=&quot;float&quot;&gt;0.1&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>See these notes about the <a href="#char">char data type</a>.<br>
<!-- -->See these notes about the <a href="#long">long data type</a>.</p>
</li>
<li>
<p>Valid types for space-separated lists of values (or single values) are byteList, shortList, unsignedShortList, charList, intList, longList, floatList, doubleList. For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;actual\_range&quot; type=&quot;doubleList&quot;&gt;10.34 23.91&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>An unsignedShortList lets you specify a list of unsigned shorts, but they will be converted into a list of the corresponding Unicode characters (e.g., &quot;65 67 69&quot; will be converted into &quot;A C E&quot;.<br>
<!-- -->If you specify a charList, encode any special characters (e.g., space, double quotes, backslash, &lt;#32, or &gt;#127) as you would encode them in the data section of an NCCSV file (e.g., &quot; &quot;, &quot;\&quot;&quot; or &quot;&quot;&quot;&quot;, &quot;\\&quot;, &quot;\n&quot;, &quot;\u20ac&quot;).<br>
<!-- -->There is no stringList. Store the String values as a multi-line String. For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;history&quot;&gt;2011-08-05T08:55:02Z ATAM - made CF-1.6 compliant.  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2012-04-08T08:34:58Z ATAM - Changed &#x27;height&#x27; from double to float.&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p> </p>
</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="global-attributes">Global Attributes<a href="#global-attributes" class="hash-link" aria-label="Direct link to Global Attributes" title="Direct link to Global Attributes">​</a></h4>
<ul>
<li>
<p><a href="#global-attributes"><strong>Global Attributes / Global &lt;addAttributes&gt;</strong></a> --<br>
<!-- -->&lt;addAttributes&gt; is an OPTIONAL tag within the &lt;dataset&gt; tag which is used to change attributes that apply to the entire dataset.</p>
<ul>
<li><strong>Use the global &lt;addAttributes&gt; to change the dataset&#x27;s global attributes.</strong> ERDDAP™ combines the global attributes from the dataset&#x27;s source (<strong>sourceAttributes</strong>) and the global <strong>addAttributes</strong> which you define in datasets.xml (which have priority) to make the global <strong>combinedAttributes</strong>, which are what ERDDAP™ users see. Thus, you can use addAttributes to redefine the values of sourceAttributes, add new attributes, or remove attributes.</li>
<li>See the <a href="#addattributes"><strong>&lt;addAttributes&gt;</strong> information</a> which applies to global and variable <strong>&lt;addAttributes&gt;</strong>.</li>
<li><a href="https://www.fgdc.gov/standards/projects/FGDC-standards-projects/metadata/base-metadata/index_html" target="_blank" rel="noopener noreferrer">FGDC</a> and <a href="https://en.wikipedia.org/wiki/Geospatial_metadata" target="_blank" rel="noopener noreferrer">ISO 19115-2/19139</a> Metadata -- Normally, ERDDAP™ will automatically generate ISO 19115-2/19139 and FGDC (FGDC-STD-001-1998) XML metadata files for each dataset using information from the dataset&#x27;s metadata. So, <strong>good dataset metadata leads to good ERDDAP-generated ISO 19115 and FGDC metadata. Please consider putting lots of time and effort into improving your datasets&#x27; metadata (which is a good thing to do anyway).</strong> Most of the dataset metadata attributes which are used to generate the ISO 19115 and FGDC metadata are from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD metadata standard</a> and are so noted below.</li>
<li>Many global attributes are special in that ERDDAP™ looks for them and uses them in various ways. For example, a link to the infoUrl is included on web pages with lists of datasets, and other places, so that users can find out more about the dataset.</li>
<li>When a user selects a subset of data, globalAttributes related to the variable&#x27;s longitude, latitude, altitude (or depth), and time ranges (for example, Southernmost_Northing, Northernmost_Northing, time_coverage_start, time_coverage_end) are automatically generated or updated.</li>
<li>A simple sample global &lt;addAttributes&gt; is:<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;addAttributes&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;att name=&quot;Conventions&quot;&gt;COARDS, CF-1.6, ACDD-1.3&lt;/att&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;att name=&quot;infoUrl&quot;&gt;https://coastwatch.pfeg.noaa.gov/infog/PH\_ssta\_las.html&lt;/att&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;att name=&quot;institution&quot;&gt;NOAA CoastWatch, West Coast Node&lt;/att&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;att name=&quot;title&quot;&gt;SST, Pathfinder Ver 5.0, Day and Night, Global&lt;/att&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;att name=&quot;cwhdf\_version&quot; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/addAttributes&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->The empty cwhdf_version attribute causes the source cwhdf_version attribute (if any) to be removed from the final, combined list of attributes.</li>
<li>Supplying this information helps ERDDAP™ do a better job and helps users understand the datasets.<br>
<!-- -->Good metadata makes a dataset usable.<br>
<!-- -->Insufficient metadata makes a dataset useless.<br>
<!-- -->Please take the time to do a good job with metadata attributes.</li>
</ul>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="special-global-attributes-in-erddap">Special global attributes in ERDDAP™<a href="#special-global-attributes-in-erddap" class="hash-link" aria-label="Direct link to Special global attributes in ERDDAP™" title="Direct link to Special global attributes in ERDDAP™">​</a></h5>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="acknowledgement">acknowledgement<a href="#acknowledgement" class="hash-link" aria-label="Direct link to acknowledgement" title="Direct link to acknowledgement">​</a></h6>
<ul>
<li><a href="#acknowledgement"><strong>acknowledgement</strong></a> and <strong>acknowledgment</strong> (from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) is a RECOMMENDED way to acknowledge the group or groups that provided support (notably, financial) for the project that created this data. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;acknowledgment&quot;&gt;AVISO&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->Note that ACDD 1.0 and 1.1 used the spelling &quot;acknowledgment&quot; (which is the usual spelling in the U.S.), but ACDD 1.3 changed this to &quot;acknowledgement&quot; (which is the usual spelling in the U.K.). My understanding is that the change was essentially an accident and that they certainly didn&#x27;t recognize the ramifications of the change. What a mess! Now there are millions of data files around the world that have &quot;acknowledgment&quot; and millions that have &quot;acknowledgement&quot;. This highlights the folly of &quot;simple&quot; changes to a standard, and emphasizes the need for stability in standards. Because ACDD 1.3 (which is the version of ACDD that ERDDAP™ supports) says &quot;acknowledgement&quot;, that is what ERDDAP™ (notably GenerateDatasetsXml) encourages.<br>
<!-- --> </li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="cdm_altitude_proxy">cdm_altitude_proxy<a href="#cdm_altitude_proxy" class="hash-link" aria-label="Direct link to cdm_altitude_proxy" title="Direct link to cdm_altitude_proxy">​</a></h6>
<ul>
<li><a href="#cdm_altitude_proxy"><strong>cdm_altitude_proxy</strong></a> is just for EDDTable datasets that don&#x27;t have an altitude or depth variable but do have a variable that is a proxy for altitude or depth (for example, pressure, sigma, bottleNumber), you may use this attribute to identify that variable. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;cdm\_altitude\_proxy&quot;&gt;pressure&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->If the <a href="#cdm_data_type">cdm_data_type</a> is Profile or TrajectoryProfile and there is no altitude or depth variable, cdm_altitude_proxy MUST be defined. If cdm_altitude_proxy is defined, ERDDAP™ will add the following metadata to the variable: _CoordinateAxisType=Height and axis=Z.<br>
<!-- --> </li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="cdm_data_type">cdm_data_type<a href="#cdm_data_type" class="hash-link" aria-label="Direct link to cdm_data_type" title="Direct link to cdm_data_type">​</a></h6>
<ul>
<li><a href="#cdm_data_type"><strong>cdm_data_type</strong></a> (from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) is a global attribute that indicates the Unidata <a href="https://www.unidata.ucar.edu/software/netcdf-java/v4.6/CDM/index.html" target="_blank" rel="noopener noreferrer">Common Data Model</a> data type for the dataset. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;cdm\_data\_type&quot;&gt;Point&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->The CDM is still evolving and may change again. ERDDAP™ complies with the related and more detailed <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#discrete-sampling-geometries" target="_blank" rel="noopener noreferrer">Discrete Sampling Geometries (DSG)</a> chapter of the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF 1.6</a> metadata conventions (previously called the CF Point Observation Conventions).<!-- -->
<ul>
<li>
<p>Either the dataset&#x27;s global <a href="#global-attributes">sourceAttributes</a> or its global &lt;addAttributes&gt; MUST include the cdm_data_type attribute. A few dataset types (like EDDTableFromObis) will set this automatically.</p>
</li>
<li>
<p>For EDDGrid datasets, the cdm_data_type options are Grid (the default and by far the most common type for EDDGrid datasets), MovingGrid, Other, Point, Profile, RadialSweep, TimeSeries, TimeSeriesProfile, Swath, Trajectory, and TrajectoryProfile. Currently, EDDGrid does not require that any related metadata be specified, nor does it check that the data matches the cdm_data_type. That will probably change in the near future.</p>
</li>
<li>
<p>EDDTable uses cdm_data_type in a rigorous way, following CF&#x27;s DSG specification rather than CDM, which for some reason hasn&#x27;t been updated to be consistent with DSG. If a dataset&#x27;s metadata doesn&#x27;t comply with the ERDDAP&#x27;s cdm_data_type&#x27;s requirements (see below), the dataset will fail to load and will generate an <a href="#troubleshooting-tips">error message</a>. (That&#x27;s a good thing, in the sense that the error message will tell you what is wrong so that you can fix it.) And if the dataset&#x27;s data doesn&#x27;t match the dataset&#x27;s metadata setup (e.g., if there is more than one latitude value for a given station in a timeseries dataset), some requests for data will return incorrect data in the response. So make sure you get all of this right.</p>
<p>For all of these datasets, in the Conventions and Metadata_Conventions global attributes, please refer to CF-1.6 (not CF-1.0, 1.1, 1.2, 1.3, 1.4, or 1.5), since CF-1.6 is the first version to include the changes related to Discrete Sampling Geometry (DSG) conventions.</p>
<ul>
<li><strong>ERDDAP ™ has a not-simple relationship to CF DSG</strong></li>
<li>ERDDAP™ can make a valid DSG dataset out of a source dataset that is already a valid DSG file(s), or out of a source dataset that isn&#x27;t set up for DSG but can be made so via changes to metadata (some of which are ERDDAP-specific in order to provide a more general approach to specifying the DSG setup).</li>
<li>ERDDAP™ does a lot of validity tests when it loads a dataset. If the dataset that has a cdm_data_type (or featureType) attribute successfully loads in ERDDAP™, then ERDDAP™ is saying the dataset meets the DSG requirements (otherwise, ERDDAP™ will throw an exception explaining the first problem that it found).<br>
<!-- -->WARNING: A successfully-loaded dataset appears to meet the DSG requirements (it has the right combination of attributes), but still may be incorrectly set up, leading to incorrect results in .ncCF and .ncCFMA response files. (Software is smart in some ways and clueless in others.)</li>
<li>When you look at the dataset&#x27;s metadata in ERDDAP™, the DSG dataset appears to be in ERDDAP&#x27;s internal format (a giant, database-like table). It isn&#x27;t in one of the DSG formats (e.g., the dimensions and metadata aren&#x27;t right), but the information needed to treat the dataset as a DSG dataset is in the metadata (for example, cdm_data_type=TimeSeries and cdm_timeseries_variables=<em>aCsvListOfStationRelatedVarables</em> in the global metadata and cf_role=timeseries_id for some variable).</li>
<li>If a user requests a subset of the dataset in a .ncCF (an .nc file in DSG&#x27;s Contiguous Ragged Array file format) or .ncCFMA file (a .nc file in DSG&#x27;s Multidimensional Array file format), that file will be a valid CF DSG file.<br>
<!-- -->WARNING: However, if the dataset was set up incorrectly (so that the promises made by the metadata aren&#x27;t true), then the response file will be technically valid but will be incorrect in some way.<br>
<!-- --> </li>
</ul>
</li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="eddtable-cdm_data_types">EDDTable cdm_data_types<a href="#eddtable-cdm_data_types" class="hash-link" aria-label="Direct link to EDDTable cdm_data_types" title="Direct link to EDDTable cdm_data_types">​</a></h6>
<ul>
<li>For EDDTable datasets, the cdm_data_type options (and related requirements in ERDDAP) are</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="point">Point<a href="#point" class="hash-link" aria-label="Direct link to Point" title="Direct link to Point">​</a></h6>
<ul>
<li><a href="#point">Point</a> -- is for a set of measurements taken at unrelated times and locations.<!-- -->
<ul>
<li>As with all cdm_data_types other than Other, Point datasets MUST have longitude, latitude, and time variables.</li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="profile">Profile<a href="#profile" class="hash-link" aria-label="Direct link to Profile" title="Direct link to Profile">​</a></h6>
<ul>
<li>
<p><a href="#profile">Profile</a> -- is a set of measurements all taken at one time, at one latitude longitude location, but at more than one depth (or altitude). The dataset may be a collection of these Profiles, for example, 7 profiles from different locations. This cdm_data_type doesn&#x27;t imply any logical connection between any of the profiles.</p>
</li>
<li>
<p>One of the variables (for example, profile_number) MUST have the variable attribute cf_role=profile_id to identify the variable that uniquely identifies the profiles.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;cf\_role&quot;&gt;profile\_id&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If no other variable is suitable, consider using the time variable.</p>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="cdm_profile_variables">cdm_profile_variables<a href="#cdm_profile_variables" class="hash-link" aria-label="Direct link to cdm_profile_variables" title="Direct link to cdm_profile_variables">​</a></h6>
<ul>
<li>The dataset MUST include the globalAttribute <a href="#cdm_profile_variables">cdm_profile_variables</a>, where the value is a comma-separated list of the variables which have the information about each profile. For a given profile, the values of these variables MUST be constant. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;cdm\_profile\_variables&quot;&gt;profile\_number,time,latitude,longitude&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->The list MUST include the cf_role=profile_id variable and all other variables with information about the profile, and time, latitude and longitude.<br>
<!-- -->The list will never include altitude, depth, or any observation variables.<br>
<!-- --> </li>
</ul>
<p>[Opinion: cdm_data_type=Profile should rarely be used. In practice, a given dataset is usually actually either a TimeSeriesProfile (profiles at a fixed position) or a TrajectoryProfile (profiles along a trajectory), and so should be properly identified as such.]</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="timeseries">TimeSeries<a href="#timeseries" class="hash-link" aria-label="Direct link to TimeSeries" title="Direct link to TimeSeries">​</a></h6>
<ul>
<li><a href="#timeseries">TimeSeries</a> -- is a sequence of measurements (e.g., sea water temperature) taken at one, fixed, latitude, longitude, depth (or altitude) location. (Think of it as &quot;station&quot;.) The dataset may be a collection of these TimeSeries, for example, a sequence from each of 3 different locations.<!-- -->
<ul>
<li>One of the variables (for example, station_id) MUST have the variable attribute cf_role=timeseries_id to identify the variable that uniquely identifies the stations.<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;cf\_role&quot;&gt;timeseries\_id&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="cdm_timeseries_variables">cdm_timeseries_variables<a href="#cdm_timeseries_variables" class="hash-link" aria-label="Direct link to cdm_timeseries_variables" title="Direct link to cdm_timeseries_variables">​</a></h6>
<ul>
<li>The dataset MUST include the globalAttribute <a href="#cdm_timeseries_variables">cdm_timeseries_variables</a>, where the value is a comma-separated list of the variables which have the information about each station. For a given station, the values of these variables MUST be constant. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;cdm\_timeseries\_variables&quot;&gt;station\_id,station\_type,latitude,longitude&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->The list MUST include the cf_role=timeseries_id variable and all other variables with information about the station, which almost always includes latitude and longitude (and altitude or depth, if present).<br>
<!-- -->The list will never include time or any observation variables.</li>
<li>For some moored buoys, a dataset may have two sets of latitude and longitude variables:<!-- -->
<ol>
<li>One pair of latitude and longitude values that are constant (i.e., the fixed location of the mooring). In ERDDAP™, give these variables the destinationNames of latitude and longitude, and include these variables in the list of cdm_timeseries_variables.</li>
<li>Precise latitude and longitude values associated with each observation. In ERDDAP™, give these variables different destinationNames (e.g., preciseLat and preciseLon) and don&#x27;t include these variables in the list of cdm_timeseries_variables.<br>
<!-- --> The reasoning for this is: from a theoretical perspective, for a DSG TimeSeries dataset, the latitude and longitude (and altitude or depth, if present) location of the station MUST be constant.</li>
</ol>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="timeseriesprofile">TimeSeriesProfile<a href="#timeseriesprofile" class="hash-link" aria-label="Direct link to TimeSeriesProfile" title="Direct link to TimeSeriesProfile">​</a></h6>
<ul>
<li><a href="#timeseriesprofile">TimeSeriesProfile</a> -- is for a sequence of profiles taken at one, fixed, latitude longitude location. Each profile is a set of measurements taken at multiple altitudes or depths. The dataset may be a collection of these TimeSeriesProfiles, for example, a sequence of profiles taken at each of 12 different locations.<!-- -->
<ul>
<li>One of the variables (for example, station_id) MUST have the variable attribute cf_role=timeseries_id to identify the variable that uniquely identifies the stations.</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;cf\_role&quot;&gt;timeseries\_id&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>One of the variables (for example, profile_number) MUST have the variable attribute cf_role=profile_id to identify the variable that uniquely identifies the profiles.<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;cf\_role&quot;&gt;profile\_id&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->(A given profile_id only has to be unique for a given timeseries_id.) If no other variable is suitable, consider using the time variable.</li>
<li>The dataset MUST include the globalAttribute cdm_timeseries_variables, where the value is a comma-separated list of the variables which have the information about each station. For a given station, the values of these variables MUST be constant. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;cdm\_timeseries\_variables&quot;&gt;station\_id,station\_type,latitude,longitude&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->The list MUST include the cf_role=timeseries_id variable and all other variables with information about the station, which almost always includes latitude and longitude.<br>
<!-- -->The list will never include time, altitude, depth, or any observation variables.</li>
<li>The dataset MUST include the globalAttribute cdm_profile_variables, where the value is a comma-separated list of the variables which have the information about each profile. For a given profile, the values of these variables MUST be constant. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;cdm\_profile\_variables&quot;&gt;profile\_number,time&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->The list MUST include the cf_role=profile_id variable and all other variables with information about the profile, which almost always includes time.<br>
<!-- -->The list will never include latitude, longitude, altitude, depth, or any observation variables.</li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="trajectory">Trajectory<a href="#trajectory" class="hash-link" aria-label="Direct link to Trajectory" title="Direct link to Trajectory">​</a></h6>
<ul>
<li><a href="#trajectory">Trajectory</a> -- is a sequence of measurements taken along a trajectory (a path through space and time) (e.g., sea_water_temperature taken by a ship as it moves through the water). The dataset may be a collection of these Trajectories, for example, a sequence from each of 4 different ships.<!-- -->
<ul>
<li>One of the variables (for example, ship_id) MUST have the attribute cf_role=trajectory_id to identify the variable that uniquely identifies the trajectories.<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;cf\_role&quot;&gt;trajectory\_id&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="cdm_trajectory_variables">cdm_trajectory_variables<a href="#cdm_trajectory_variables" class="hash-link" aria-label="Direct link to cdm_trajectory_variables" title="Direct link to cdm_trajectory_variables">​</a></h6>
<ul>
<li>The dataset MUST include the globalAttribute <a href="#cdm_trajectory_variables">cdm_trajectory_variables</a>, where the value is a comma-separated list of the variables which have the information about each trajectory. For a given trajectory, the values of these variables MUST be constant. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;cdm\_trajectory\_variables&quot;&gt;ship\_id,ship\_type,ship\_owner&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->The list MUST include the cf_role=trajectory_id variable and all other variables with information about the trajectory.<br>
<!-- -->The list will never include time, latitude, longitude, or any observation variables.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="trajectoryprofile">TrajectoryProfile<a href="#trajectoryprofile" class="hash-link" aria-label="Direct link to TrajectoryProfile" title="Direct link to TrajectoryProfile">​</a></h6>
<ul>
<li><a href="#trajectoryprofile">TrajectoryProfile</a> -- is a sequence of profiles taken along a trajectory. The dataset may be a collection of these TrajectoryProfiles, for example, a sequence of profiles taken by 14 different ships.<!-- -->
<ul>
<li>One of the variables (for example, ship_id) MUST have the variable attribute cf_role=trajectory_id to identify the variable that uniquely identifies the trajectories.<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;cf\_role&quot;&gt;trajectory\_id&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>One of the variables (for example, profile_number) MUST have the variable attribute cf_role=profile_id to identify the variable that uniquely identifies the profiles.<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;cf\_role&quot;&gt;profile\_id&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->(A given profile_id only has to be unique for a given trajectory_id.) If no other variable is suitable, consider using the time variable.</li>
<li>The dataset MUST include the globalAttribute cdm_trajectory_variables, where the value is a comma-separated list of the variables which have the information about each trajectory. For a given trajectory, the values of these variables MUST be constant. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;cdm\_trajectory\_variables&quot;&gt;ship\_id,ship\_type,ship\_owner&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->The list MUST include the cf_role=trajectory_id variable and all other variables with information about the trajectory.<br>
<!-- -->The list will never include profile-related variables, time, latitude, longitude, or any observation variables.</li>
<li>The dataset MUST include the globalAttribute cdm_profile_variables, where the value is a comma-separated list of the variables which have the information about each profile. For a given profile, the values of these variables MUST be constant. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;cdm\_profile\_variables&quot;&gt;profile\_number,time,latitude,longitude&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->The list MUST include the cf_role=profile_id variable and all other variables with information about the profile, which almost always includes time, latitude and longitude.<br>
<!-- -->The list will never include altitude, depth, or any observation variables.</li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="other">Other<a href="#other" class="hash-link" aria-label="Direct link to Other" title="Direct link to Other">​</a></h6>
<ul>
<li><a href="#other">Other</a> -- has no requirements. Use it if the dataset doesn&#x27;t fit one of the other options, notably, if the dataset doesn&#x27;t include latitude, longitude and time variables.<br>
<!-- --> </li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="related-notes">Related Notes<a href="#related-notes" class="hash-link" aria-label="Direct link to Related Notes" title="Direct link to Related Notes">​</a></h6>
<ul>
<li>All EDDTable datasets with a cdm_data_type other than &quot;Other&quot; MUST have longitude, latitude, and time variables.</li>
<li>Datasets with profiles MUST have an altitude variable, a depth variable, or an <a href="#cdm_altitude_proxy">cdm_altitude_proxy</a> variable.</li>
<li>If you can&#x27;t make a dataset comply with all of the requirements for the ideal cdm_data_type, use &quot;Point&quot; (which has few requirements) or &quot;Other&quot; (which has no requirements) instead.</li>
<li>This information is used by ERDDAP™ in various ways, for example, but mostly for making .ncCF files (.nc files which comply with the Contiguous Ragged Array Representations associated with the dataset&#x27;s cdm_data_type) and .ncCFMA files (.nc files which comply with the Multidimensional Array Representations associated with the dataset&#x27;s cdm_data_type) as defined in <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#discrete-sampling-geometries" target="_blank" rel="noopener noreferrer">Discrete Sampling Geometries (DSG)</a> chapter of the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF</a> metadata conventions, which were previously named &quot;CF Point Observation Conventions&quot;.</li>
<li>Hint: For these datasets, the correct setting for <a href="#subsetvariables">subsetVariables</a> is usually the combination of all the variables listed in the cdm_..._variables attributes. For example, for TimeSeriesProfile, use the cdm_timeseries_variables plus the cdm_profile_variables.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="contributor_name">contributor_name<a href="#contributor_name" class="hash-link" aria-label="Direct link to contributor_name" title="Direct link to contributor_name">​</a></h6>
<ul>
<li><a href="#contributor_name"><strong>contributor_name</strong></a> (from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) is the RECOMMENDED way to identify a person, organization, or project which contributed to this dataset (for example, the original creator of the data, before it was reprocessed by the creator of this dataset). For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;contributor\_name&quot;&gt;NOAA OceanWatch - Central Pacific&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->If &quot;contributor&quot; doesn&#x27;t really apply to a dataset, omit this attribute. Compared to <a href="#creator_name">creator_name</a>, this is sometimes more focused on the funding source.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="contributor_role">contributor_role<a href="#contributor_role" class="hash-link" aria-label="Direct link to contributor_role" title="Direct link to contributor_role">​</a></h6>
<ul>
<li><a href="#contributor_role"><strong>contributor_role</strong></a> (from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) is the RECOMMENDED way to identify the role of <a href="#creator_name">contributor_name</a>. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;contributor\_role&quot;&gt;Source of Level 2b data&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->If &quot;contributor&quot; doesn&#x27;t really apply to a dataset, omit this attribute.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="conventions">Conventions<a href="#conventions" class="hash-link" aria-label="Direct link to Conventions" title="Direct link to Conventions">​</a></h6>
<ul>
<li>
<p><a href="#conventions"><strong>Conventions</strong></a> (from the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF</a> metadata standard) is STRONGLY RECOMMENDED. (It may be REQUIRED in the future.) The value is a comma-separated list of metadata standards that this dataset follows. For example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;Conventions&quot;&gt;COARDS, CF-1.6, ACDD-1.3&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The common metadata conventions used in ERDDAP™ are:</p>
<ul>
<li><a href="https://ferret.pmel.noaa.gov/noaa_coop/coop_cdf_profile.html" target="_blank" rel="noopener noreferrer">COARDS Conventions</a> is the precursor to CF.</li>
<li><a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">Climate and Forecast (CF) Conventions</a> is the source of many of the recommended and required attributes in ERDDAP. The current version of CF is identified as &quot;CF-1.6&quot;.</li>
<li>The NetCDF Attribute Convention for Dataset Discovery (ACDD) is the source of many of the recommended and required attributes in ERDDAP. The original 1.0 version of ACDD (a brilliant piece of work by Ethan Davis), was identified as <a href="https://wiki.esipfed.org/ArchivalCopyOfVersion1" target="_blank" rel="noopener noreferrer">Unidata Dataset Discovery v1.0</a> The current (starting in 2015) 1.3 version of ACDD is identified as <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD-1.3</a>. If your datasets have been using Unidata Dataset Discovery v1.0, we encourage you to <a href="#switch-to-acdd-13">switch your datasets to use ACDD-1.3</a>.</li>
</ul>
<p>If your dataset follows some additional metadata standard, please add the name to the CSV list in the Conventions attribute.</p>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="coverage_content_type">coverage_content_type<a href="#coverage_content_type" class="hash-link" aria-label="Direct link to coverage_content_type" title="Direct link to coverage_content_type">​</a></h6>
<ul>
<li><a href="#coverage_content_type"><strong>coverage_content_type</strong></a> (from the <a href="https://en.wikipedia.org/wiki/Geospatial_metadata" target="_blank" rel="noopener noreferrer">ISO 19115</a> metadata standard) is the RECOMMENDED way to identify the type of gridded data (in EDDGrid datasets). For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;coverage\_content\_type&quot;&gt;modelResult&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->The only allowed values are auxiliaryInformation, image, modelResult, physicalMeasurement (the default when ISO 19115 metadata is generated), qualityInformation, referenceInformation, and thematicClassification. (Don&#x27;t use this tag for EDDTable datasets.)</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="creator_name">creator_name<a href="#creator_name" class="hash-link" aria-label="Direct link to creator_name" title="Direct link to creator_name">​</a></h6>
<ul>
<li><a href="#creator_name"><strong>creator_name</strong></a> (from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) is the RECOMMENDED way to identify the person, organization, or project (if not a specific person or organization), most responsible for the creation (or most recent reprocessing) of this data. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;creator\_name&quot;&gt;NOAA NMFS SWFSC ERD&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->If the data was extensively reprocessed (for example, satellite data from level 2 to level 3 or 4), then usually the reprocessor is listed as the creator and the original creator is listed via <a href="#contributor_name">contributor_name</a>. Compared to <a href="#project">project</a>, this is more flexible, since it may identify a person, an organization, or a project.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="creator_email">creator_email<a href="#creator_email" class="hash-link" aria-label="Direct link to creator_email" title="Direct link to creator_email">​</a></h6>
<ul>
<li><a href="#creator_email"><strong>creator_email</strong></a> (from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) is the RECOMMENDED way to identify an email address (correctly formatted) that provides a way to contact the creator. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;creator\_email&quot;&gt;erd.data@noaa.gov&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="creator_url">creator_url<a href="#creator_url" class="hash-link" aria-label="Direct link to creator_url" title="Direct link to creator_url">​</a></h6>
<ul>
<li><a href="#creator_url"><strong>creator_url</strong></a> (from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) is the RECOMMENDED way to identify a URL for organization that created the dataset, or a URL with the creator&#x27;s information about this dataset (but that is more the purpose of <a href="#infourl">infoUrl</a>). For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;creator\_url&quot;&gt;https://www.pfeg.noaa.gov&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="date_created">date_created<a href="#date_created" class="hash-link" aria-label="Direct link to date_created" title="Direct link to date_created">​</a></h6>
<ul>
<li><a href="#date_created"><strong>date_created</strong></a> (from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) is the RECOMMENDED way to identify the date on which the data was first created (for example, processed into this form), in ISO 8601 format. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;date\_created&quot;&gt;2010-01-30&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->If data is periodically added to the dataset, this is the first date that the original data was made available.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="date_modified">date_modified<a href="#date_modified" class="hash-link" aria-label="Direct link to date_modified" title="Direct link to date_modified">​</a></h6>
<ul>
<li><a href="#date_modified"><strong>date_modified</strong></a> (from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) is the RECOMMENDED way to identify the date on which the data was last modified (for example, when an error was fixed or when the latest data was added), in ISO 8601 format. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;date\_modified&quot;&gt;2012-03-15&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="date_issued">date_issued<a href="#date_issued" class="hash-link" aria-label="Direct link to date_issued" title="Direct link to date_issued">​</a></h6>
<ul>
<li><a href="#date_issued"><strong>date_issued</strong></a> (from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) is the RECOMMENDED way to identify the date on which the data was first made available to others, in ISO 8601 format, for example, 2012-03-15. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;date\_issued&quot;&gt;2010-07-30&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->For example, the dataset may have a <a href="#date_created">date_created</a> of 2010-01-30, but was only made publicly available 2010-07-30. date_issued is less commonly used than date_created and date_modified. If date_issued is omitted, it is assumed to be the same as the date_created.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="global-drawlandmask">global drawLandMask<a href="#global-drawlandmask" class="hash-link" aria-label="Direct link to global drawLandMask" title="Direct link to global drawLandMask">​</a></h6>
<ul>
<li><a href="#global-drawlandmask"><strong>drawLandMask</strong></a> -- This is an OPTIONAL global attribute used by ERDDAP™ (and no metadata standards) which specifies the default value for the &quot;Draw Land Mask&quot; option on the dataset&#x27;s Make A Graph form (<em>datasetID</em>.graph) and for the &amp;.land parameter in a URL requesting a map of the data. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;drawLandMask&quot;&gt;over&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->See the <a href="#drawlandmask">drawLandMask overview</a>.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="featuretype">featureType<a href="#featuretype" class="hash-link" aria-label="Direct link to featureType" title="Direct link to featureType">​</a></h6>
<ul>
<li>
<p><a href="#featuretype"><strong>featureType</strong></a> (from the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF</a> metadata standard) is IGNORED and/or REPLACED. If the dataset&#x27;s <a href="#cdm_data_type">cdm_data_type</a> is appropriate, ERDDAP™ will automatically use it to create a featureType attribute. So there is no need for you to add it.</p>
<p>However, if you are using <a href="#eddtablefromnccffiles">EDDTableFromNcCFFiles</a> to create a dataset from files that follow the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html#discrete-sampling-geometries" target="_blank" rel="noopener noreferrer">CF Discrete Sampling Geometries (DSG) standard</a>, the files themselves must have featureType correctly defined, so that ERDDAP™ can read the files correctly. That is part of the CF DSG requirements for that type of file.<br>
<!-- --> </p>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="history">history<a href="#history" class="hash-link" aria-label="Direct link to history" title="Direct link to history">​</a></h6>
<ul>
<li><a href="#history"><strong>history</strong></a> (from the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF</a> and <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standards) is a RECOMMENDED multi-line String global attribute with a line for every processing step that the data has undergone. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;history&quot;&gt;2011-08-05T08:55:02Z CMOR: Rewrote data to comply with CF standards.  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2012-04-08T08:34:58Z CMOR: Converted &#x27;height&#x27; type from &#x27;d&#x27; to &#x27;f&#x27;.&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Ideally, each line has an ISO 8601:2004(E) formatted date+timeZ (for example, 2011-08-05T08:55:02Z) followed by a description of the processing step.</li>
<li>ERDDAP™ creates this if it doesn&#x27;t already exist.</li>
<li>If it already exists, ERDDAP™ will append new information to the existing information.</li>
<li>history is important because it allows clients to backtrack to the original source of the data.</li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="infourl">infoUrl<a href="#infourl" class="hash-link" aria-label="Direct link to infoUrl" title="Direct link to infoUrl">​</a></h6>
<ul>
<li><a href="#infourl"><strong>infoUrl</strong></a> is a REQUIRED global attribute with the URL of a web page with more information about this dataset (usually at the source institution&#x27;s website). For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;infoUrl&quot;&gt;http://www.globec.org/&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Either the dataset&#x27;s global <a href="#global-attributes">sourceAttributes</a> or its global &lt;addAttributes&gt; MUST include this attribute.</li>
<li>infoUrl is important because it allows clients to find out more about the data from the original source.</li>
<li>ERDDAP™ displays a link to the infoUrl on the dataset&#x27;s Data Access Form (<em>datasetID</em>.html), Make A Graph web page (<em>datasetID</em>.graph), and other web pages.</li>
<li>If the URL has a query part (after the &quot;?&quot;), it MUST be already <a href="https://en.wikipedia.org/wiki/Percent-encoding" target="_blank" rel="noopener noreferrer">percent encoded</a>. You need to encode special characters in the constraints (other than the initial &#x27;&amp;&#x27; and the main &#x27;=&#x27;, if any) into the form %HH, where HH is the 2 digit hexadecimal value of the character. Usually, you just need to convert a few of the punctuation characters: % into %25, &amp; into %26, &quot; into %22, &lt; into %3C, = into %3D, &gt; into %3E, + into %2B, | into %7C, [ into %5B, ] into %5D, space into %20, and convert all characters above #127 into their UTF-8 form and then percent encode each byte of the UTF-8 form into the %HH format (ask a programmer for help).<br>
<!-- -->For example, &amp;stationID&gt;=&quot;41004&quot;<br>
<!-- -->becomes       &amp;stationID%3E=%2241004%22<br>
<!-- -->Percent encoding is generally required when you access ERDDAP via software other than a browser. Browsers usually handle percent encoding for you.<br>
<!-- -->In some situations, you need to percent encode all characters other than A-Za-z0-9_-!.~&#x27;()*, but still don&#x27;t encode the initial &#x27;&amp;&#x27; or the main &#x27;=&#x27;.<br>
<!-- -->Programming languages have tools to do this (for example, see Java&#x27;s <a href="https://docs.oracle.com/javase/8/docs/api/java/net/URLEncoder.html" target="_blank" rel="noopener noreferrer">java.net.URLEncoder</a><br>
<!-- -->and JavaScript&#x27;s <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent" target="_blank" rel="noopener noreferrer">encodeURIComponent()</a>) and there are<br>
<a href="https://www.url-encode-decode.com/" target="_blank" rel="noopener noreferrer">websites that percent encode/decode for you</a>.</li>
<li>Since datasets.xml is an XML file, you MUST also &amp;-encode ALL &#x27;&amp;&#x27;, &#x27;&lt;&#x27;, and &#x27;&gt;&#x27; in the URL as &#x27;&amp;&#x27;, &#x27;&lt;&#x27;, and &#x27;&gt;&#x27; after percent encoding.</li>
<li>infoUrl is unique to ERDDAP. It is not from any metadata standard.</li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="institution">institution<a href="#institution" class="hash-link" aria-label="Direct link to institution" title="Direct link to institution">​</a></h6>
<ul>
<li><a href="#institution"><strong>institution</strong></a> (from the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF</a> and <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standards) is a REQUIRED global attribute with the short version of the name of the institution which is the source of this data (usually an acronym, usually &lt;20 characters). For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;institution&quot;&gt;NASA GSFC&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Either the dataset&#x27;s global <a href="#global-attributes">sourceAttributes</a> or its global &lt;addAttributes&gt; MUST include this attribute.</li>
<li>ERDDAP™ displays the institution whenever it displays a list of datasets. If an institution&#x27;s name here is longer than 20 characters, only the first 20 characters will be visible in the list of datasets (but the whole institution can be seen by putting the mouse cursor over the adjacent &quot;?&quot; icon).</li>
<li>If you add institution to the list of &lt;categoryAttributes&gt; in ERDDAP&#x27;s <a href="/docs/server-admin/deploy-install#setupxml">setup.xml</a> file, users can easily find datasets from the same institution via ERDDAP&#x27;s &quot;Search for Datasets by Category&quot; on the home page.</li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="keywords">keywords<a href="#keywords" class="hash-link" aria-label="Direct link to keywords" title="Direct link to keywords">​</a></h6>
<ul>
<li>
<p><a href="#keywords"><strong>keywords</strong></a> (from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) is a RECOMMENDED comma-separated list of words and short phrases (for example, <a href="https://wiki.earthdata.nasa.gov/display/CMR/GCMD+Keyword+Access" target="_blank" rel="noopener noreferrer">GCMD Science Keywords</a>) that describe the dataset in a general way, and not assuming any other knowledge of the dataset (for example, for oceanographic data, include ocean). For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;keywords&quot;&gt;ano, circulation, coastwatch, currents, derived, Earth Science &amp;gt; Oceans &amp;gt; Ocean Circulation &amp;gt; Ocean Currents, eastward, eastward\_sea\_water\_velocity, experimental, hf radio, meridional, noaa, northward, northward\_sea\_water\_velocity, nuevo, ocean, oceans, radio, radio-derived, scan, sea, seawater, velocity, water, zonal&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Since datasets.xml is an XML document, the characters &amp;, &lt;, and &gt; in an attribute like keywords (e.g., the &gt; characters in GCMD science keywords) must be encoded as &amp;, &lt;, and &gt;, respectively.<br>
<!-- -->When a dataset is loaded in ERDDAP,</p>
<ul>
<li>&quot;Earth Science &gt; &quot; is added to the start of any GCMD keyword that lacks it.</li>
<li>GCMD keywords are converted to Title Case (i.e., the first letters are capitalized).</li>
<li>The keywords are rearranged into sorted order and any newline characters are removed.
 </li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="keywords_vocabulary">keywords_vocabulary<a href="#keywords_vocabulary" class="hash-link" aria-label="Direct link to keywords_vocabulary" title="Direct link to keywords_vocabulary">​</a></h6>
<ul>
<li><a href="#keywords_vocabulary"><strong>keywords_vocabulary</strong></a> (from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) is a RECOMMENDED attribute: if you are following a guideline for the words/phrases in your keywords attribute (for example, GCMD Science Keywords), put the name of that guideline here. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;keywords\_vocabulary&quot;&gt;GCMD Science Keywords&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="license">license<a href="#license" class="hash-link" aria-label="Direct link to license" title="Direct link to license">​</a></h6>
<ul>
<li><a href="#license"><strong>license</strong></a> (from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) is a STRONGLY RECOMMENDED global attribute with the license and/or usage restrictions. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;license&quot;&gt;\[standard\]&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>If &quot;[standard]&quot; occurs in the attribute value, it will be replaced by the standard ERDDAP™ license from the &lt;standardLicense&gt; tag in ERDDAP&#x27;s<br>
<!-- -->[tomcat]/webapps/erddap/WEB-INF/classes/gov/noaa/pfel/erddap/util/messages.xml file.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="metadata_conventions">Metadata_Conventions<a href="#metadata_conventions" class="hash-link" aria-label="Direct link to Metadata_Conventions" title="Direct link to Metadata_Conventions">​</a></h6>
<ul>
<li><a href="#metadata_conventions"><strong>Metadata_Conventions</strong></a> is from the outdated <a href="https://wiki.esipfed.org/ArchivalCopyOfVersion1" target="_blank" rel="noopener noreferrer">ACDD 1.0</a> (which was identified in Metadata_Conventions as &quot;Unidata Dataset Discovery v1.0&quot;) metadata standard. The attribute value was a comma-separated list of metadata conventions used by this dataset.<br>
<!-- -->If a dataset uses ACDD 1.0, this attribute is STRONGLY RECOMMENDED, for example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;Metadata\_Conventions&quot;&gt;COARDS, CF-1.6, Unidata Dataset Discovery v1.0&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->But ERDDAP™ now recommends ACDD-1.3. If you have <a href="#switch-to-acdd-13">switched your datasets to use ACDD-1.3</a>, use of Metadata_Conventions is STRONGLY DISCOURAGED: just use <a href="#conventions">&lt;Conventions&gt;</a> instead.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="processing_level">processing_level<a href="#processing_level" class="hash-link" aria-label="Direct link to processing_level" title="Direct link to processing_level">​</a></h6>
<ul>
<li><a href="#processing_level"><strong>processing_level</strong></a> (from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) is a RECOMMENDED textual description of the processing (for example, <a href="https://en.wikipedia.org/wiki/Remote_sensing#Data_processing_levels" target="_blank" rel="noopener noreferrer">NASA satellite data processing levels</a>, for example, Level 3) or quality control level (for example, Science Quality) of the data. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;processing\_level&quot;&gt;3&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="project">project<a href="#project" class="hash-link" aria-label="Direct link to project" title="Direct link to project">​</a></h6>
<ul>
<li><a href="#project"><strong>project</strong></a> (from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) is an OPTIONAL attribute to identify the project that the dataset is part of. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;project&quot;&gt;GTSPP&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->If the dataset isn&#x27;t part of a project, don&#x27;t use this attribute. Compared to <a href="#creator_name">creator_name</a>, this is focused on the project (not a person or an organization, which may be involved in multiple projects).</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="publisher_name">publisher_name<a href="#publisher_name" class="hash-link" aria-label="Direct link to publisher_name" title="Direct link to publisher_name">​</a></h6>
<ul>
<li><a href="#publisher_name"><strong>publisher_name</strong></a> (from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) is the RECOMMENDED way to identify the person, organization, or project which is publishing this dataset. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;publisher\_name&quot;&gt;JPL&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->For example, you are the publisher if another person or group <a href="#creator_name">created</a> the dataset and you are just re-serving it via ERDDAP. If &quot;publisher&quot; doesn&#x27;t really apply to a dataset, omit this attribute. Compared to <a href="#creator_name">creator_name</a>, the publisher probably didn&#x27;t significantly modify or reprocess the data; the publisher is just making the data available in a new venue.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="publisher_email">publisher_email<a href="#publisher_email" class="hash-link" aria-label="Direct link to publisher_email" title="Direct link to publisher_email">​</a></h6>
<ul>
<li><a href="#publisher_email"><strong>publisher_email</strong></a> (from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) is the RECOMMENDED way to identify an email address (correctly formatted, for example, <a href="mailto:john_smith@great.org" target="_blank" rel="noopener noreferrer">john_smith@great.org</a>) that provides a way to contact the publisher. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;publisher\_email&quot;&gt;john\_smith@great.org&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->If &quot;publisher&quot; doesn&#x27;t really apply to a dataset, omit this attribute.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="publisher_url">publisher_url<a href="#publisher_url" class="hash-link" aria-label="Direct link to publisher_url" title="Direct link to publisher_url">​</a></h6>
<ul>
<li><a href="#publisher_url"><strong>publisher_url</strong></a> (from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) is the RECOMMENDED way to identify a URL for the organization that published the dataset, or a URL with the publisher&#x27;s information about this dataset (but that is more the purpose of <a href="#infourl">infoUrl</a>). For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;publisher\_url&quot;&gt;https://podaac.jpl.nasa.gov&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->If &quot;publisher&quot; doesn&#x27;t really apply to a dataset, omit this attribute.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="real_time">real_time<a href="#real_time" class="hash-link" aria-label="Direct link to real_time" title="Direct link to real_time">​</a></h6>
<ul>
<li><a href="#real_time"><strong>real_time</strong></a> is a global String attribute (not from any standard) indicating if this is a real time dataset. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;real\_time&quot;&gt;true&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->If this is false (the default), ERDDAP™ will cache responses to requests for file types where the entire file must be created before ERDDAP™ can begin to send the response to the user and reuse them for up to about 15 minutes (e.g., .nc, .png).<br>
<!-- -->If this is set to true, ERDDAP™ will never cache the response files and will always return newly created files.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="sourceurl-attribute">sourceUrl attribute<a href="#sourceurl-attribute" class="hash-link" aria-label="Direct link to sourceUrl attribute" title="Direct link to sourceUrl attribute">​</a></h6>
<ul>
<li><a href="#sourceurl-attribute"><strong>sourceUrl</strong></a> is a global attribute with the URL of the source of the data. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;sourceUrl&quot;&gt;https://opendap.co-ops.nos.noaa.gov/ioos-dif-sos/SOS&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->(but put it all on one line)<!-- -->
<ul>
<li>ERDDAP™ usually creates this global attribute automatically. Two exceptions are EDDTableFromHyraxFiles and EDDTableFromThreddsFiles.</li>
<li>If the source is local files and the files were created by your organization, use</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;sourceUrl&quot;&gt;(local files)&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>If the source is local database and the data was created by your organization, use</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;sourceUrl&quot;&gt;(local database)&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>sourceUrl is important because it allows clients to backtrack to the original source of the data.</li>
<li>sourceUrl is unique to ERDDAP. It is not from any metadata standard.</li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="standard_name_vocabulary">standard_name_vocabulary<a href="#standard_name_vocabulary" class="hash-link" aria-label="Direct link to standard_name_vocabulary" title="Direct link to standard_name_vocabulary">​</a></h6>
<ul>
<li><a href="#standard_name_vocabulary"><strong>standard_name_vocabulary</strong></a> (from the <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) is a RECOMMENDED attribute to identify the name of the controlled vocabulary from which variable <a href="#standard_name">standard_name</a>s are taken. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;standard\_name\_vocabulary&quot;&gt;CF Standard Name Table v77&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->for version 77 of the <a href="https://cfconventions.org/Data/cf-standard-names/current/build/cf-standard-name-table.html" target="_blank" rel="noopener noreferrer">CF standard name table</a>.<br>
<!-- --> </li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="subsetvariables">subsetVariables<a href="#subsetvariables" class="hash-link" aria-label="Direct link to subsetVariables" title="Direct link to subsetVariables">​</a></h5>
<ul>
<li><strong>subsetVariables</strong> (for EDDTable datasets only) is a RECOMMENDED global attribute that lets you specify a comma-separated list of <a href="#datavariable">&lt;dataVariable&gt;</a> <a href="#destinationname">destinationName</a>s to identify variables which have a limited number of values (stated another way: variables for which each of the values has many duplicates). For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;subsetVariables&quot;&gt;station\_id, longitude, latitude&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->If this attribute is present, the dataset will have a <em>datasetID</em>.subset web page (and a link to it on every dataset list) which lets users quickly and easily select various subsets of the data.<!-- -->
<ul>
<li>
<p>Each time a dataset is loaded, ERDDAP loads and stores on disk a table with all of the distinct() combinations of the subsetVariable&#x27;s variable&#x27;s values. ERDDAP™ can read that subsetVariables table and process it very quickly (especially compared to reading lots of data files or getting data from a database or other external service).</p>
</li>
<li>
<p>That allows ERDDAP™ to do 3 things:</p>
<ol>
<li>It allows ERDDAP™ to put a list of possible values in a dropdown list on the Data Access Form, Make A Graph web page, and .subset webpages.</li>
<li>It allows ERDDAP™ to offer a .subset webpage for that dataset. That page is interesting because it makes it easy to find valid combinations of the values of those variables, which for some datasets and some variables is very, very hard (almost impossible). Then, all user requests for distinct() subsetVariable data will be very fast.</li>
<li>If there is a user request that only refers to a subset of those variables, ERDDAP™ can quickly read the subsetVariables table, and respond to the request. That can save a ton of time and effort for ERDDAP.</li>
</ol>
</li>
<li>
<p>The order of the destinationNames you specify determines the sort order on the <em>datasetID</em>.subset web page, so you will usually specify the most important variables first, then the least important. For example, for datasets with time series data for several stations, you might use, for example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;subsetVariables&quot;&gt;station\_id, longitude, latitude&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>so that the values are sorted by station_id.</p>
</li>
<li>
<p>Obviously, it is your choice which variables to include in the subsetVariables list, but the suggested usage is:</p>
<p>In general, include variables for which you want ERDDAP™ to display a drop-down list of options on the dataset&#x27;s Data Access Form (.html) and Make-A-Graph (.graph) web pages.</p>
<p>In general, do include variables with information about the dataset&#x27;s features (the stations, profiles, and/or trajectories, notably from <a href="#cdm_timeseries_variables">cdm_timeseries_variables</a>, <a href="#cdm_profile_variables">cdm_profile_variables</a>, <a href="#cdm_trajectory_variables">cdm_trajectory_variables</a>). There are only a few different values for these variables so they work well with drop-down lists.</p>
<p>Don&#x27;t ever include any data variables associated with individual observations (e.g., time, temperature, salinity, current speed) in the subsetVariables list. There are too many different values for these variables, so a drop-down list would be slow to load and be hard to work with (or not work).</p>
</li>
<li>
<p>If the number of distinct combinations of these variables is greater than about 1,000,000, you should consider restricting the subsetVariables that you specify to reduce the number of distinct combinations to below 1,000,000; otherwise, the <em>datasetID</em>.subset web pages may be generated slowly. In extreme cases, the dataset may not load in ERDDAP™ because generating the list of distinct combinations uses too much memory. If so, you MUST remove some variables from the subsetVariables list.</p>
</li>
<li>
<p>If the number of distinct values of any one subset variable is greater than about 20,000, you should consider not including that variable in the list of subsetVariables; otherwise, it takes a long time to transmit the <em>datasetID</em>.subset, <em>datasetID</em>.graph, and <em>datasetID</em>.html web pages. Also, on a Mac, it is very hard to make selections from a drop down list with more than 500 items because of the lack of a scroll bar. A compromise is: remove variables from the list when users are not likely to select values from a drop down list.</p>
</li>
<li>
<p>You should test each dataset to see if the subsetVariables setting is okay. If the source data server is slow and it takes too long (or fails) to download the data, either reduce the number of variables specified or remove the subsetVariables global attribute.</p>
</li>
<li>
<p>SubsetVariables is very useful. So if your dataset is suitable, please create a subsetVariables attribute.</p>
</li>
<li>
<p>EDDTableFromSOS automatically adds</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;subsetVariables&quot;&gt;station\_id, longitude, latitude&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>when the dataset is created.</p>
<ul>
<li>Possible warning: if a user using the <em>datasetID</em>.subset web page selects a value which has a carriageReturn or newline character, <em>datasetID</em>.subset will fail. ERDDAP™ can&#x27;t work around this issue because of some HTML details. In any case, it is almost always a good idea to remove the carriageReturn and newline characters from the data. To help you fix the problem, if the EDDTable.subsetVariablesDataTable method in ERDDAP detects data values that will cause trouble, it will email a warning with a list of offending values to the emailEverythingTo email addresses specified in setup.xml. That way, you know what needs to be fixed.</li>
<li><strong>Pre-generated subset tables.</strong> Normally, when ERDDAP™ loads a dataset, it requests the distinct() subset variables data table from the data source, just via a normal data request. In some cases, this data is not available from the data source or retrieving from the data source may be hard on the data source server. If so, you can supply a table with the information in a .json or .csv file with the name <em>tomcat</em>/content/erddap/subset/<em>datasetID</em>.json (or .csv). If present, ERDDAP™ will read it once when the dataset is loaded and use it as the source of the subset data.<!-- -->
<ul>
<li>If there is an error while reading it, the dataset will fail to load.</li>
<li>It MUST have exact same column names (for example, same case) as &lt;subsetVariables&gt;, but the columns MAY be in any order.</li>
<li>It MAY have extra columns (they&#x27;ll be removed and newly redundant rows will be removed).</li>
<li>Missing values should be missing values (not fake numbers like -99).</li>
<li>.json files may be a little harder to create but deal with Unicode characters well. .json files are easy to create if you create them with ERDDAP.</li>
<li>.csv files are easy to work with, but suitable for ISO 8859-1 characters only. .csv files MUST have column names on the first row and data on subsequent rows.</li>
</ul>
</li>
<li>For huge datasets or when &lt;subsetVariables&gt; is misconfigured, the table of combinations of values can be large enough to cause Too Much Data or OutOfMemory errors. The solution is to remove variables from the list of &lt;subsetVariables&gt; for which there are a large number of values, or remove variables as needed until the size of that table is reasonable. Regardless of the error, the parts of ERDDAP™ that use the subsetVariables system don&#x27;t work well (e.g., web pages load very slowly) when there are too many rows (e.g., more than a million) in that table.</li>
<li>subsetVariables has nothing to do with specifying which variables users can use in constraints, i.e., how users can request subsets of the dataset. ERDDAP™ always allows constraints to refer to any of the variables.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="time-units">Time Units<a href="#time-units" class="hash-link" aria-label="Direct link to Time Units" title="Direct link to Time Units">​</a></h6>
<p><a href="#time-units">Time and timestamp</a> columns should have ISO 8601:2004(E) formatted date+timeZ strings (for example, 1985-01-31T15:31:00Z).
 </p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="summary">summary<a href="#summary" class="hash-link" aria-label="Direct link to summary" title="Direct link to summary">​</a></h6>
<ul>
<li><a href="#summary"><strong>summary</strong></a> (from the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF</a> and <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standards) is a REQUIRED global attribute with a long description of the dataset (usually &lt;500 characters). For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;summary&quot;&gt;VIIRSN Level-3 Standard Mapped Image, Global, 4km, Chlorophyll a, Daily. The Visible and Infrared Imager/Radiometer Suite (VIIRS) is a multi-disciplinary instrument that flies on the National Polar-orbiting Operational Environmental Satellite System (NPOESS) series of spacecraft, including the NPOESS Preparatory Project (NPP).&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Either the dataset&#x27;s global <a href="#global-attributes">sourceAttributes</a> or its global &lt;addAttributes&gt; MUST include this attribute.</li>
<li>summary is very important because it allows clients to read a description of the dataset that has more information than the title and thus quickly understand what the dataset is.</li>
<li>Advice: please write the summary so it would work to describe the dataset to some random person you meet on the street or to a colleague. Remember to include the <a href="https://en.wikipedia.org/wiki/Five_Ws" target="_blank" rel="noopener noreferrer">Five W&#x27;s and one H</a>: Who created the dataset? What information was collected? When was the data collected? Where was it collected? Why was it collected? How was it collected?</li>
<li>ERDDAP™ displays the summary on the dataset&#x27;s Data Access Form (<em>datasetID</em>.html), Make A Graph web page (<em>datasetID</em>.graph), and other web pages. ERDDAP™ uses the summary when creating FGDC and ISO 19115 documents.</li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="testoutofdate">testOutOfDate<a href="#testoutofdate" class="hash-link" aria-label="Direct link to testOutOfDate" title="Direct link to testOutOfDate">​</a></h6>
<ul>
<li>
<p><a href="#testoutofdate"><strong>testOutOfDate</strong></a> (an optional ERDDAP-specific global metadata attribute, not from any standard) specifies, in a simplistic way, when the data for a near-real-time dataset is considered out-of-date, specified as now-<em>nUnits</em>, for example, now-2days for data that usually appears 24-48 hours after the time value. For forecast data, use now**+**<em>nUnits</em>, for example, now+6days for forecast data that is, at most, 8 days in the future. (See the <a href="https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#now" target="_blank" rel="noopener noreferrer">now-<em>nUnits</em> syntax description</a>.) If the maximum time value for the dataset is more recent than the specified time, the dataset is considered up-to-date. If the maximum time value is older than the specified time, the dataset is considered up-to-date. For out-of-date datasets, there is presumably a problem with the data source, so ERDDAP™ is unable to access data from more recent time points.</p>
<p>The testOutOfDate value is displayed as a column in the <a href="#eddtablefromalldatasets">allDatasets dataset</a> in your ERDDAP. It is also used to calculate the outOfDate index, which is another column in the allDatasets dataset.<br>
<!-- -->If the index is &lt;1, the dataset is considered up-to-date.<br>
<!-- -->If the index is &lt;=1, the dataset is considered out-of-date.<br>
<!-- -->If the index is &lt;=2, the dataset is considered very out-of-date.</p>
<p>The testOutOfDate value is also used by ERDDAP™ to generate the https://<em>yourDomain</em>/erddap/outOfDateDatasets.html web page (<a href="https://coastwatch.pfeg.noaa.gov/erddap/outOfDateDatasets.html" target="_blank" rel="noopener noreferrer">example</a>) which shows the datasets which have &lt;testOutOfDate&gt; tags, with the datasets ranked by how out-of-date they are. If you change the file type (from .html to .csv, .jsonlCSV, .nc, .tsv, ...), you can get that information in different file formats.</p>
<p>When possible, <a href="#generatedatasetsxml">GenerateDatasetsXml</a> adds a testOutOfDate attribute to the global addAttributes of a dataset. This value is a suggestion based on the information available to GenerateDatasetsXml. If the value isn&#x27;t appropriate, change it.</p>
<p>&quot;Out-of-date&quot; here is very different from <a href="#reloadeverynminutes">&lt;reloadEveryNMinutes&gt;</a>, which deals with how up-to-date ERDDAP&#x27;s knowledge of the dataset is. The &lt;testOutOfDate&gt; system assumes that ERDDAP&#x27;s knowledge of the dataset is up-to-date. The question &lt;testOutOfDate&gt; deals with is: does there appear to be something wrong with the source of the data, causing more recent data to be not accessible by ERDDAP?</p>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="title">title<a href="#title" class="hash-link" aria-label="Direct link to title" title="Direct link to title">​</a></h6>
<ul>
<li><a href="#title"><strong>title</strong></a> (from the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF</a> and <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standards) is a REQUIRED global attribute with the short description of the dataset (usually &lt;=95 characters). For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;att name=&quot;title&quot;&gt;VIIRSN Level-3 Mapped, Global, 4km, Chlorophyll a, Daily&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Either the dataset&#x27;s global <a href="#global-attributes">sourceAttributes</a> or its global &lt;addAttributes&gt; MUST include this attribute.</li>
<li>title is important because every list of datasets presented by ERDDAP (other than search results) lists the datasets in alphabetical order, by title. So if you want to specify the order of datasets, or have some datasets grouped together, you have to create titles with that in mind. Many lists of datasets (for example, in response to a category search), show a subset of the full list and in a different order. So the title for each dataset should stand on its own.</li>
<li>If the title contains the word &quot;DEPRECATED&quot; (all capital letters), then the dataset will get a lower ranking in searches.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="axisvariable">&lt;axisVariable&gt;<a href="#axisvariable" class="hash-link" aria-label="Direct link to &lt;axisVariable&gt;" title="Direct link to &lt;axisVariable&gt;">​</a></h5>
<ul>
<li><a href="#axisvariable"><strong>&lt;axisVariable&gt;</strong></a> is used to describe a dimension (also called &quot;axis&quot;).<br>
<!-- -->For EDDGrid datasets, one or more axisVariable tags is REQUIRED, and all <a href="#datavariable">dataVariables</a> always share/use all axis variables. (<a href="#why-just-two-basic-data-structures">Why?</a> <a href="#dimensions">What if they don&#x27;t?</a>)<br>
<!-- -->There MUST be an axis variable for each dimension of the data variables.<br>
<!-- -->Axis variables MUST be specified in the order that the data variables use them.<br>
<!-- -->(EDDTable datasets can NOT use &lt;axisVariable&gt; tags.)<br>
<!-- -->A fleshed out example is:</li>
</ul>
<blockquote>
<p>  &lt;axisVariable&gt;<br>
<!-- -->      &lt;<a href="#sourcename">sourceName</a>&gt;MT&lt;/sourceName&gt;<br>
<!-- -->      &lt;<a href="#destinationname">destinationName</a>&gt;time&lt;/destinationName&gt;<br>
<!-- -->       &lt;addAttributes&gt;<br>
<!-- -->        &lt;att name=&quot;<a href="#units">units</a>&quot;&gt;days since 1902-01-01T12:00:00Z&lt;/att&gt;<br>
<!-- -->      &lt;/addAttributes&gt;<br>
<!-- -->  &lt;/axisVariable&gt;</p>
</blockquote>
<p>&lt;axisVariable&gt; supports the following subtags:</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="sourcename">&lt;sourceName&amp;gt;<a href="#sourcename" class="hash-link" aria-label="Direct link to &lt;sourceName&amp;gt;" title="Direct link to &lt;sourceName&amp;gt;">​</a></h6>
<ul>
<li><a href="#sourcename">&lt;sourceName&gt;</a> -- the data source&#x27;s name for the variable. This is the name that ERDDAP™ will use when requesting data from the data source. This is the name that ERDDAP™ will look for when data is returned from the data source. This is case sensitive. This is REQUIRED.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="destinationname">&lt;destinationName&amp;gt;<a href="#destinationname" class="hash-link" aria-label="Direct link to &lt;destinationName&amp;gt;" title="Direct link to &lt;destinationName&amp;gt;">​</a></h6>
<ul>
<li><a href="#destinationname">&lt;destinationName&gt;</a> is the name for the variable that will be shown to and used by ERDDAP™ users.<!-- -->
<ul>
<li>This is OPTIONAL. If absent, the sourceName is used.</li>
<li>This is useful because it allows you to change a cryptic or odd sourceName.</li>
<li>destinationName is case sensitive.</li>
<li>destinationNames MUST start with a letter (A-Z, a-z) and MUST be followed by 0 or more characters (A-Z, a-z, 0-9, and _). (&#x27;-&#x27; was allowed before ERDDAP™ version 1.10.) This restriction allows axis variable names to be the same in ERDDAP™, in the response files, and in all the software where those files will be used, including programming languages (like Python, Matlab, and JavaScript) where there are similar restrictions on variable names.</li>
<li>In EDDGrid datasets, the <a href="#destinationname">longitude, latitude, altitude, depth, and time</a> axis variables are special.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="axisvariable-addattributes">axisVariable &lt;addAttributes&gt;<a href="#axisvariable-addattributes" class="hash-link" aria-label="Direct link to axisVariable &lt;addAttributes&gt;" title="Direct link to axisVariable &lt;addAttributes&gt;">​</a></h6>
<ul>
<li><a href="#variable-addattributes">&lt;addAttributes&gt;</a> defines an OPTIONAL set of attributes (<em>name</em> = <em>value</em>) which are added to the source&#x27;s attributes for a variable, to make the combined attributes for a variable.<br>
<!-- -->If the variable&#x27;s <a href="#variable-addattributes">sourceAttributes</a> or &lt;addAttributes&gt; include <a href="#scale_factor">scale_factor and/or add_offset</a> attributes, their values will be used to unpack the data from the source before distribution to the client<br>
<!-- -->(resultValue = sourceValue * scale_factor + add_offset) . The unpacked variable will be of the same data type (for example, float) as the scale_factor and add_offset values.<br>
<!-- --> </li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="datavariable">&lt;dataVariable&gt;<a href="#datavariable" class="hash-link" aria-label="Direct link to &lt;dataVariable&gt;" title="Direct link to &lt;dataVariable&gt;">​</a></h5>
<ul>
<li><a href="#datavariable"><strong>&lt;dataVariable&gt;</strong></a> is a REQUIRED (for almost all datasets) tag within the &lt;dataset&gt; tag which is used to describe a data variable. There MUST be 1 or more instances of this tag. A fleshed out example is:</li>
</ul>
<blockquote>
<p>  &lt;dataVariable&gt;<br>
<!-- -->      &lt;<a href="#sourcename">sourceName</a>&gt;waterTemperature&lt;/sourceName&gt;<br>
<!-- -->      &lt;<a href="#destinationname">destinationName</a>&gt;sea_water_temperature&lt;/destinationName&gt;<br>
<!-- -->      <a href="#datatype">&lt;dataType&gt;</a>float&lt;/dataType&gt;<br>
<!-- -->      &lt;addAttributes&gt;<br>
<!-- -->        &lt;att name=&quot;<a href="#ioos_category">ioos_category</a>&quot;&gt;Temperature&lt;/att&gt;<br>
<!-- -->        &lt;att name=&quot;<a href="#long_name">long_name</a>&quot;&gt;Sea Water Temperature&lt;/att&gt;<br>
<!-- -->        &lt;att name=&quot;<a href="#standard_name">standard_name</a>&quot;&gt;sea_water_temperature&lt;/att&gt;<br>
<!-- -->        &lt;att name=&quot;<a href="#units">units</a>&quot;&gt;degree_C&lt;/att&gt;<br>
<!-- -->      &lt;/addAttributes&gt;<br>
<!-- -->  &lt;/dataVariable&gt;</p>
</blockquote>
<p>&lt;dataVariable&gt; supports the following subtags:</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="sourcename-1">&lt;sourceName&gt;<a href="#sourcename-1" class="hash-link" aria-label="Direct link to &lt;sourceName&gt;" title="Direct link to &lt;sourceName&gt;">​</a></h6>
<ul>
<li><a href="#sourcename">&lt;sourceName&gt;</a> -- the data source&#x27;s name for the variable. This is the name that ERDDAP™ will use when requesting data from the data source. This is the name that ERDDAP™ will look for when data is returned from the data source. This is case sensitive. This is REQUIRED.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="groups">Groups<a href="#groups" class="hash-link" aria-label="Direct link to Groups" title="Direct link to Groups">​</a></h6>
<p>CF added support for groups with CF v1.8. Starting in ~2020, NetCDF tools support putting variables into groups in a .nc file. In practice, this just means that the variables have a long name which identifies the group(s) and the variable name, for example, group1a/group2c/varName ). ERDDAP™ supports groups by converting the &quot;/&quot;&#x27;s in the variable&#x27;s &lt;sourceName&gt; into &quot;_&quot;&#x27;s in the variable&#x27;s &lt;destinationName&gt;, for example, group1a_group2c_varName . (When you see that, you should realize that groups are not much more than a syntax convention.) When the variables are listed in ERDDAP™, all the variables in a group will appear together, mimicking the underlying group. [If ERDDAP™, notably GenerateDatasetsXml, doesn&#x27;t perform as well as it could with source files that have groups, please email a sample file to Chris.John at noaa.gov .]</p>
<p>EDDTableFromFiles datasets can use some specially-encoded, pseudo sourceNames to define new data variables, e.g., to promote a global attribute to be a data variable. See <a href="#pseudo-sourcenames">this documentation</a>.</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="hdf-structures">HDF Structures<a href="#hdf-structures" class="hash-link" aria-label="Direct link to HDF Structures" title="Direct link to HDF Structures">​</a></h6>
<p>Starting with ERDDAP™ v2.12, EDDGridFromNcFiles and EDDGridFromNcFilesUnpacked can read data from &quot;structures&quot; in .nc4 and .hdf4 files. To identify a variable that is from a structure, the &lt;sourceName&gt; must use the format: <em>fullStructureName</em>|<em>memberName</em>, for example group1/myStruct|myMember .</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="fixed-value-sourcenames">Fixed Value SourceNames<a href="#fixed-value-sourcenames" class="hash-link" aria-label="Direct link to Fixed Value SourceNames" title="Direct link to Fixed Value SourceNames">​</a></h6>
<p>In an EDDTable dataset, if you want to create a variable (with a single, fixed value) that isn&#x27;t in the source dataset, use:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;sourceName&gt;=*fixedValue*&lt;/sourceName&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The initial equals sign tells ERDDAP™ that a fixedValue will follow.</p>
<ul>
<li>For numeric variables, the fixed value must be a single finite value or NaN (case insensitive, e.g., =NaN ).</li>
<li>For String variables, the fixed value must be single, <a href="https://www.json.org/json-en.html" target="_blank" rel="noopener noreferrer">JSON-style string</a> (with special characters escaped with \ characters), e.g., =&quot;My \&quot;Special\&quot; String&quot; .</li>
<li>For a timestamp variable, specify the fixed value as a number in &quot;seconds since 1970-01-01T00:00:00Z&quot; and use<br>
<!-- -->units=seconds since 1970-01-01T00:00:00Z .</li>
</ul>
<p>The other tags for the &lt;dataVariable&gt; work as if this were a regular variable.<br>
<!-- -->For example, to create a variable called altitude with a fixed value of 0.0 (float), use:</p>
<blockquote>
<p>&lt;sourceName&gt;=0&lt;/sourceName&gt;<br>
<a href="#destinationname">&lt;destinationName&gt;</a>altitude&lt;/destinationName&gt;<br>
<a href="#datatype">&lt;dataType&gt;float&lt;/dataType&gt;</a></p>
</blockquote>
<p>For unusual situations, you can even specify an actual_range addAttribute, which will override the expected values of destinationMin and destinationMax (which would otherwise equal the fixedValue).<br>
<!-- --> </p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="script-sourcenamesderived-variables">Script SourceNames/Derived Variables<a href="#script-sourcenamesderived-variables" class="hash-link" aria-label="Direct link to Script SourceNames/Derived Variables" title="Direct link to Script SourceNames/Derived Variables">​</a></h6>
<p>Starting with ERDDAP™ v2.10, in an <a href="#eddtablefromfiles">EDDTableFromFiles</a>, <a href="#eddtablefromdatabase">EDDTableFromDatabase</a>, or <a href="#eddtablefromfilenames">EDDTableFromFileNames</a> dataset, the &lt;sourceName&gt; can be<br>
<!-- -->an expression (an equation that evaluates to a single value), using the format</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;sourceName&gt;=*expression*&lt;/sourceName&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>or a script (a series of statements that returns a single value), using the format</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;sourceName&gt;=*script*&lt;/sourceName&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ERDDAP™ relies on the <a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer">Apache project&#x27;s</a> <a href="https://commons.apache.org/proper/commons-jexl/" target="_blank" rel="noopener noreferrer">Java Expression Language (JEXL)</a> (license: <a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="noopener noreferrer">Apache</a>) to evaluate the expressions and run the scripts.<br>
<!-- -->The calculation for a given new variable is done within one row of the results, repeatedly for all rows.<br>
<!-- -->The expressions and scripts use a Java- and JavaScript-like syntax and can use any of the<br>
<a href="https://commons.apache.org/proper/commons-jexl/reference/syntax.html" target="_blank" rel="noopener noreferrer">operators and methods which are built into JEXL</a>.<br>
<!-- -->The scripts can also use methods (functions) from these classes:</p>
<ul>
<li><a href="/docs/dokka/-e-r-d-d-a-p/com.cohort.util/-script-calendar2">Calendar2</a>, which is a wrapper for some of the static, time- and calendar-related methods in com.cohort.util.Calendar2 (<a href="/acknowledgements#cohort-software">license</a>). For example,<br>
<!-- -->Calendar2.parseToEpochSeconds(<em>sourceTime, dateTimeFormat</em>) will parse the sourceTime string via the dateTimeFormat string and return a &quot;seconds since 1970-01-01T00:00:00Z&quot; (epochSeconds) double value.</li>
<li><a href="/docs/dokka/-e-r-d-d-a-p/com.cohort.util/-script-math">Math</a>, which is a wrapper for almost all of the static, math-related methods in <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html" target="_blank" rel="noopener noreferrer">java.lang.Math</a>. For example, Math.atan2(<em>y, x</em>) takes in rectangular coordinates (y, x) and returns polar coordinates (an array of doubles with [r, theta]).</li>
<li><a href="/docs/dokka/-e-r-d-d-a-p/com.cohort.util/-script-math2">Math2</a>, which is a wrapper for almost all of the static, math-related methods in com.cohort.util.Math2 (<a href="/acknowledgements#cohort-software">license</a>). For example,<br>
<!-- -->Math2.roundTo(<em>d, nPlaces</em>) will round d to the specified number of digits to the right of the decimal point.</li>
<li>String, which gives you access to all of the static, String-related methods in <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String" target="_blank" rel="noopener noreferrer">java.lang.String</a>. String objects in ERDDAP™ expressions and scripts can use any of their associated Java methods, as described in the java.lang.String documentation. For example, String.valueOf(d) will convert the double value d into a String (although you can also use &quot;&quot;+d).</li>
<li><a href="/docs/dokka/-e-r-d-d-a-p/com.cohort.util/-script-string2">String2</a>, which is a wrapper for most of the static, String- and array-related methods in com.cohort.util.String2 (<a href="/acknowledgements#cohort-software">license</a>). For example, String2.zeroPad(<em>number, nDigits</em>) will add 0&#x27;s to the left of the number String so that the total number of digits is nDigits (e.g., String2.zeroPad(&quot;6&quot;, 2) will return &quot;06&quot;).</li>
<li><a href="/docs/dokka/-e-r-d-d-a-p/com.cohort.util/-script-row">row</a>, which has non-static methods for accessing the data from the various columns in the current row of the source data table. For example, row.columnString(&quot;year&quot;) reads the value from the &quot;year&quot; column as a String, whereas, row.columnInt(&quot;year&quot;) reads the value from the &quot;year&quot; column as an integer.</li>
</ul>
<p>For security reasons, expressions and scripts can&#x27;t use other classes other than those 6. ERDDAP™ enforces this limitation by creating a default blacklist (which blacklists all classes) and then a whitelist (which specifically allows the 6 classes described above). If you need other methods and/or other classes to do your work, please email your requests to Chris.John at noaa.gov .</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="efficiency">Efficiency<a href="#efficiency" class="hash-link" aria-label="Direct link to Efficiency" title="Direct link to Efficiency">​</a></h6>
<p>For EDDTableFromFiles datasets, there is only a very, very minimal (probably not noticeable) slowdown for requests for data from these variables. For EDDTableFromDatabase, there is huge speed penalty for requests that include constraints on these variables (e.g., (&amp;longitude0360&gt;30&amp;longitude0360&lt;40) because the constraints can&#x27;t be passed through to the database, so the database has to return much much more data to ERDDAP™ (which is very time consuming) so that ERDDAP™ can create the new variable and apply the constraint. To avoid the worst case (where there are no constraints being passed to the database), ERDDAP™ throws an error message so that the database doesn&#x27;t have to return the entire contents of the table. (If you want to bypass this, add a constraint to a non-script column which will always be true, e.g., &amp;time&lt;3000-01-01.) For this reason, with EDDTableFromDatabase, it is probably always better to create a derived column in the database rather than use sourceName=script in ERDDAP.</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="overview-of-how-an-expression-or-script-is-used">Overview Of How An Expression (Or Script) Is Used:<a href="#overview-of-how-an-expression-or-script-is-used" class="hash-link" aria-label="Direct link to Overview Of How An Expression (Or Script) Is Used:" title="Direct link to Overview Of How An Expression (Or Script) Is Used:">​</a></h6>
<p>In response to a user&#x27;s request for tabular data, ERDDAP™ gets data from a series of source files. Each source file will generate a table of raw (straight from the source) data. ERDDAP™ will then go through the table of raw data, row by row, and evaluate the expression or script once for every row, in order to create a new column which has that expression or script as a sourceName.</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="generatedatasetsxml">GenerateDatasetsXml<a href="#generatedatasetsxml" class="hash-link" aria-label="Direct link to GenerateDatasetsXml" title="Direct link to GenerateDatasetsXml">​</a></h6>
<p>Note that GenerateDatasetsXml is completely unaware when there is a need to create a variable with &lt;sourceName&gt;=<em>expression</em>&lt;/sourceName&gt;. You have to create the variable in datasets.xml by hand.</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="expression-examples">Expression Examples:<a href="#expression-examples" class="hash-link" aria-label="Direct link to Expression Examples:" title="Direct link to Expression Examples:">​</a></h6>
<p>Here are some complete examples of data variables which use an expression to create a new column of data. We expect that these examples (and variants of them) will cover about 95% of the usage of all expression-derived sourceNames.</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="combining-separate-date-and-time-columns-into-a-unified-time-column">Combining separate &quot;date&quot; and &quot;time&quot; columns into a unified time column:<a href="#combining-separate-date-and-time-columns-into-a-unified-time-column" class="hash-link" aria-label="Direct link to Combining separate &quot;date&quot; and &quot;time&quot; columns into a unified time column:" title="Direct link to Combining separate &quot;date&quot; and &quot;time&quot; columns into a unified time column:">​</a></h6>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;dataVariable&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceName&gt;=Calendar2.parseToEpochSeconds(row.columnString(&quot;date&quot;) + &quot;T&quot; + </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            row.columnString(&quot;time&quot;) + &quot;Z&quot;, &quot;yyyy-MM-dd&#x27;T&#x27;HH:mm:ss&#x27;Z&#x27;&quot;)&lt;/sourceName&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;destinationName&gt;time&lt;/destinationName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dataType&gt;double&lt;/dataType&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;addAttributes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;att name=&quot;units&quot;&gt;seconds since 1970-01-01&lt;/att&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/addAttributes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/dataVariable&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That sourceName expression makes a new &quot;time&quot; column by concatenating the String values from the &quot;date&quot; (yyyy-MM-dd) and &quot;time&quot; (HH:mm<!-- -->:ss<!-- -->) columns on each row of the source file, and by converting that string into a &quot;seconds since 1970-01-01&quot; (epochSeconds) double value.</p>
<p>Or course, you&#x27;ll have to customize the time format string to deal with the specific format in each dataset&#x27;s source date and time columns, see the<br>
<a href="#string-time-units">time units documentation</a>.</p>
<p>Technically, you don&#x27;t have to use Calendar2.parseToEpochSeconds() to convert the combined date+time into epochSeconds. You could just pass the date+time String to ERDDAP™ and specify the format (e.g.,<br>
<!-- -->yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ss<!-- -->&#x27;Z&#x27;) via the units attribute. But there are significant advantages to converting to epochSeconds -- notably, EDDTableFromFiles can then easily keep track of the range of time values in each file and so quickly decide whether to look in a given file when responding to a request which has time constraints.</p>
<p>A related problem is the need to create a unified date+time column from a source with separate year, month, date, hour, minute, second. The solution is very similar, but you will often need to zero-pad many of the fields, so that, for example, month (1 - 12) and date (1 - 31) always have 2 digits. Here&#x27;s an example with year, month, date:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;sourceName&gt;=Calendar2.parseToEpochSeconds(row.columnString(&quot;year&quot;) + </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String2.zeroPad(row.columnString(&quot;month&quot;), 2) + </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String2.zeroPad(row.columnString(&quot;date&quot;), 2), &quot;yyyyMMdd&quot;)&lt;/sourceName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>A related problem is the need to create a unified latitude or longitude column by combining the data in the source table&#x27;s separate degrees, minutes, and seconds columns, each stored as integers. For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;sourceName&gt;=row.columnInt(&quot;deg&quot;) + row.columnInt(&quot;min&quot;)/60.0 + </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        row.columnInt(&quot;sec&quot;)/3660.0&lt;/sourceName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="converting-a-column-named-lon-with-longitude-values-from-0---360-into-a-column-named-longitude-with-values-from--180---180">Converting a column named &quot;lon&quot; with longitude values from 0 - 360° into a column named &quot;longitude&quot; with values from -180 - 180°<a href="#converting-a-column-named-lon-with-longitude-values-from-0---360-into-a-column-named-longitude-with-values-from--180---180" class="hash-link" aria-label="Direct link to Converting a column named &quot;lon&quot; with longitude values from 0 - 360° into a column named &quot;longitude&quot; with values from -180 - 180°" title="Direct link to Converting a column named &quot;lon&quot; with longitude values from 0 - 360° into a column named &quot;longitude&quot; with values from -180 - 180°">​</a></h6>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;dataVariable&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceName&gt;=Math2.anglePM180(row.columnDouble(&quot;lon&quot;))&lt;/sourceName&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;destinationName&gt;longitude&lt;/destinationName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dataType&gt;double&lt;/dataType&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;addAttributes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;att name=&quot;units&quot;&gt;degrees\_east&lt;/att&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/addAttributes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/dataVariable&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That sourceName expression makes a new &quot;longitude&quot; column by converting the double value from the &quot;lon&quot; column on each row of the source file (presumably with 0 - 360 values), and by converting that into a -180 to 180 double value.</p>
<p>If you instead want to convert source longitude values of -180 - 180° into 0 - 360°, use</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;sourceName&gt;=Math2.angle0360(row.columnDouble(&quot;lon&quot;))&lt;/sourceName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Naming the Two Longitude Variables:<br>
<!-- -->If the dataset will have 2 longitude variables, we recommend using destinationName=longitude for the -180 - 180° variable and destinationName=longitude0360 (and longName=\&quot;Longitude 0-360°&quot;) for the 0 - 360° variable. This is important because users sometimes use Advanced Search to search for data within a specific longitude range. That search will work better if longitude consistently has -180 - 180° values for all datasets. Also, the dataset&#x27;s geospatial_lon_min, geospatial_lon_max, Westernmost_Easting and Easternmost_Eastings global attributes will then be set in a consistent way (with longitude values -180 to 180°);</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="converting-a-column-named-tempf-with-temperature-values-in-degree_f-into-a-column-named-tempc-with-temperatures-in-degree_c">Converting a column named &quot;tempF&quot; with temperature values in degree_F into a column named &quot;tempC&quot; with temperatures in degree_C:<a href="#converting-a-column-named-tempf-with-temperature-values-in-degree_f-into-a-column-named-tempc-with-temperatures-in-degree_c" class="hash-link" aria-label="Direct link to Converting a column named &quot;tempF&quot; with temperature values in degree_F into a column named &quot;tempC&quot; with temperatures in degree_C:" title="Direct link to Converting a column named &quot;tempF&quot; with temperature values in degree_F into a column named &quot;tempC&quot; with temperatures in degree_C:">​</a></h6>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;dataVariable&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceName&gt;=(row.columnFloat(&quot;tempF&quot;)-32)\*5/9&lt;/sourceName&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;destinationName&gt;tempC&lt;/destinationName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dataType&gt;float&lt;/dataType&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;addAttributes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;att name=&quot;units&quot;&gt;degrees\_C&lt;/att&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/addAttributes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/dataVariable&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>That sourceName expression makes a new &quot;tempC&quot; column by converting the float degree_F value from the &quot;tempF&quot; column on each row of the source file into a float degree_C value.</p>
<p>Note that your dataset can have both the original tempF variable and the new tempC variable by having another variable with</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;sourceName&gt;tempF&lt;/sourceName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="converting-wind-speed-and-direction-columns-into-two-columns-with-the-uv-components">Converting wind &quot;speed&quot; and &quot;direction&quot; columns into two columns with the u,v components<a href="#converting-wind-speed-and-direction-columns-into-two-columns-with-the-uv-components" class="hash-link" aria-label="Direct link to Converting wind &quot;speed&quot; and &quot;direction&quot; columns into two columns with the u,v components" title="Direct link to Converting wind &quot;speed&quot; and &quot;direction&quot; columns into two columns with the u,v components">​</a></h6>
<ul>
<li>To make a u variable, use</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;sourceName&gt;=row.columnFloat(&quot;speed&quot;) \* Math.cos(row.columnFloat(&quot;direction&quot;))&lt;/sourceName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>To make a v variable, use</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;sourceName&gt;=row.columnFloat(&quot;speed&quot;) \* Math.sin(row.columnFloat(&quot;direction&quot;))&lt;/sourceName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Or, given u,v:</p>
<ul>
<li>To make a speed variable, use</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;sourceName&gt;=Math.atan2(row.columnDouble(&quot;v&quot;), row.columnDouble(&quot;u&quot;))\[0\]&lt;/sourceName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>To make a direction variable, use</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;sourceName&gt;=Math.toDegrees(Math.atan2(row.columnDouble(&quot;v&quot;), row.columnDouble(&quot;u&quot;))\[1\])&lt;/sourceName&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="script-example">Script Example:<a href="#script-example" class="hash-link" aria-label="Direct link to Script Example:" title="Direct link to Script Example:">​</a></h6>
<p>Here is an example of using a script, not just an expression, as a sourceName. We expect that scripts, as opposed to expressions, won&#x27;t be needed often. In this case the goal is to return a non-NaN missing value (-99) for temperature values outside a specific range. Note that the script is the part after the &quot;=&quot;.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;dataVariable&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;sourceName&gt;=var tc=row.columnFloat(&quot;tempC&quot;); return tc&amp;gt;35 || tc&amp;lt;-5? -99.0f : tc\*9/5+32;&lt;/sourceName&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;destinationName&gt;tempF&lt;/destinationName&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;dataType&gt;float&lt;/dataType&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;addAttributes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;att name=&quot;units&quot;&gt;degrees\_F&lt;/att&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/addAttributes&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/dataVariable&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="hard-flag">Hard Flag<a href="#hard-flag" class="hash-link" aria-label="Direct link to Hard Flag" title="Direct link to Hard Flag">​</a></h6>
<p>If you change the expression or script defined in a sourceName, you must set a <a href="/docs/server-admin/additional-information#hard-flag">hard flag</a> for the dataset so the ERDDAP™ deletes all of the cached information for the dataset and re-reads every data file (using the new expression or script) the next time it loads the dataset. Alternatively, you can use <a href="#dasdds">DasDds</a> which does the equivalent of setting a hard flag.</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="percent-encode">Percent Encode<a href="#percent-encode" class="hash-link" aria-label="Direct link to Percent Encode" title="Direct link to Percent Encode">​</a></h6>
<p>This is only rarely relevant: Because the expressions and scripts are written in datasets.xml, which is an XML document, you must percent encode any &lt;, &gt;, and &amp; characters in the expressions and scripts as &lt;, &gt;, and &amp; .</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="common-problems">Common Problems<a href="#common-problems" class="hash-link" aria-label="Direct link to Common Problems" title="Direct link to Common Problems">​</a></h6>
<p>A common problem is that you create a variable with sourceName=<em>expression</em> but the resulting column of data just has missing values. Alternatively, some rows of the new column have missing values and you think they shouldn&#x27;t. The underlying problem is that something is wrong with the expression and ERDDAP is converting that error into a missing value. To solve the problem,</p>
<ul>
<li>Look at the expression to see what the problem might be.</li>
<li>Look in <a href="/docs/server-admin/additional-information#log">log.txt</a>, which will show the first error message generated during the creation of each new column.</li>
</ul>
<p>Common causes are:</p>
<ul>
<li>You used the wrong case. Expressions and scripts are case sensitive.</li>
<li>You omitted the name of the class. For example, you must use Math.abs(), not just abs().</li>
<li>You didn&#x27;t do type conversions. For example, if a parameter value&#x27;s data type is String and you have a double value, you need to convert a double into a String via &quot;&quot;+d.</li>
<li>The column name in the expression doesn&#x27;t exactly match the column name in the file (or the name might be different in some files).</li>
<li>There is a syntax error in the expression (e.g., a missing or extra &#x27;)&#x27;).</li>
</ul>
<p>If you get stuck or need help,<br>
<!-- -->please include the details and see our <a href="/docs/intro#support">section on getting additional support</a>.</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="destinationname-1">&lt;destinationName&gt;<a href="#destinationname-1" class="hash-link" aria-label="Direct link to &lt;destinationName&gt;" title="Direct link to &lt;destinationName&gt;">​</a></h6>
<ul>
<li><a href="#destinationname">&lt;destinationName&gt;</a> -- the name for the variable that will be shown to and used by ERDDAP™ users.<!-- -->
<ul>
<li>This is OPTIONAL. If absent, the <a href="#sourcename">sourceName</a> is used.</li>
<li>This is useful because it allows you to change a cryptic or odd sourceName.</li>
<li>destinationName is case sensitive.</li>
<li>destinationNames MUST start with a letter (A-Z, a-z) and MUST be followed by 0 or more characters (A-Z, a-z, 0-9, and _). (&#x27;-&#x27; was allowed before ERDDAP™ version 1.10.) This restriction allows data variable names to be the same in ERDDAP™, in the response files, and in all the software where those files will be used, including programming languages (like Python, Matlab, and JavaScript) where there are similar restrictions on variable names.</li>
<li>In EDDTable datasets, <a href="#destinationname">longitude, latitude, altitude (or depth), and time</a> data variables are special.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="datatype">&lt;dataType&gt;<a href="#datatype" class="hash-link" aria-label="Direct link to &lt;dataType&gt;" title="Direct link to &lt;dataType&gt;">​</a></h6>
<ul>
<li><a href="#datatype">&lt;dataType&gt;</a> -- specifies the data type coming from the source. (In some cases, for example, when reading data from ASCII files, it specifies how the data coming from the source should be stored.)<!-- -->
<ul>
<li>This is REQUIRED by some dataset types and IGNORED by others. Dataset types that require this for their dataVariables are: EDDGridFromXxxFiles, EDDTableFromXxxFiles, EDDTableFromMWFS, EDDTableFromNOS, EDDTableFromSOS. Other dataset types ignore this tag because they get the information from the source.<br>
<!-- --> </li>
<li>Valid values are any of the standard <a href="#data-types">ERDDAP™ data types</a> plus boolean (see below). The dataType names are case-sensitive.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="boolean-data">boolean data<a href="#boolean-data" class="hash-link" aria-label="Direct link to boolean data" title="Direct link to boolean data">​</a></h6>
<ul>
<li><a href="#boolean-data">&quot;boolean&quot;</a> is a special case.<!-- -->
<ul>
<li>Internally, ERDDAP™ doesn&#x27;t support a boolean type because booleans can&#x27;t store missing values and most file types don&#x27;t support booleans. Also, DAP doesn&#x27;t support booleans, so there would be no standard way to query boolean variables.</li>
<li>Specifying &quot;boolean&quot; for the dataType in datasets.xml will cause boolean values to be stored and represented as bytes: 0=false, 1=true, 127=missing_value.</li>
<li>Users can specify constraints by using the numeric values (for example, &quot;isAlive=1&quot;).</li>
<li>ERDDAP™ administrators sometimes need to use the &quot;boolean&quot; dataType in datasets.xml to tell ERDDAP™ how to interact with the data source (e.g., to read boolean values from a relational database and convert them to 0, 1, or 127).<br>
<!-- --> </li>
</ul>
</li>
<li>If you want to change a data variable from the dataType in the source files (for example, short) into some other dataType in the dataset (for example, int), don&#x27;t use &lt;dataType&gt; to specify what you want. (It works for some types of datasets, but not others.) Instead:<!-- -->
<ul>
<li>Use &lt;dataType&gt; to specify what is in the files (for example, short).</li>
<li>In the &lt;addAttributes&gt; for the variable, add a <a href="#scale_factor">scale_factor</a> attribute with the new dataType (for example, int) and a value of 1, for example,</li>
</ul>
</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;att name=&quot;scale\_factor&quot; type=&quot;int&quot;&gt;1&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="datavariable-addattributes">dataVariable &lt;addAttributes&gt;<a href="#datavariable-addattributes" class="hash-link" aria-label="Direct link to dataVariable &lt;addAttributes&gt;" title="Direct link to dataVariable &lt;addAttributes&gt;">​</a></h6>
<ul>
<li><a href="#variable-addattributes">&lt;addAttributes&gt;</a> -- defines a set of attributes (<em>name</em> = <em>value</em>) which are added to the source&#x27;s attributes for a variable, to make the combined attributes for a variable. This is OPTIONAL.<br>
<!-- -->If the variable&#x27;s <a href="#variable-addattributes">sourceAttributes</a> or &lt;addAttributes&gt; include <a href="#scale_factor">scale_factor and/or add_offset</a> attributes, their values will be used to unpack the data from the source before distribution to the client. The unpacked variable will be of the same data type (for example, float) as the scale_factor and add_offset values.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="variable-addattributes">Variable &lt;addAttributes&gt;<a href="#variable-addattributes" class="hash-link" aria-label="Direct link to Variable &lt;addAttributes&gt;" title="Direct link to Variable &lt;addAttributes&gt;">​</a></h6>
<ul>
<li>
<p><a href="#variable-addattributes"><strong>Variable Attributes / Variable &lt;addAttributes&gt;</strong></a> -- &lt;addAttributes&gt; is an OPTIONAL tag within an &lt;axisVariable&gt; or &lt;dataVariable&gt; tag which is used to change the variable&#x27;s attributes.</p>
<ul>
<li><strong>Use a variable&#x27;s &lt;addAttributes&gt; to change the variable&#x27;s attributes.</strong> ERDDAP™ combines a variable&#x27;s attributes from the dataset&#x27;s source (<strong>sourceAttributes</strong>) and the variable&#x27;s <strong>addAttributes</strong> which you define in datasets.xml (which have priority) to make the variable&#x27;s &quot;<strong>combinedAttributes</strong>&quot;, which are what ERDDAP™ users see. Thus, you can use addAttributes to redefine the values of sourceAttributes, add new attributes, or remove attributes.</li>
<li>See the <a href="#addattributes"><strong>&lt;addAttributes&gt;</strong> information</a> which applies to global and variable <strong>&lt;addAttributes&gt;</strong>.</li>
<li>ERDDAP™ looks for and uses many of these attributes in various ways. For example, the colorBar values are required to make a variable available via WMS, so that maps can be made with consistent colorBars.</li>
<li><a href="#destinationname">The longitude, latitude, altitude (or depth), and time variables</a> get lots of appropriate metadata automatically (for example, <a href="#units">units</a>).</li>
<li>A sample &lt;addAttributes&gt; for a data variable is:</li>
</ul>
<blockquote>
<p>    &lt;addAttributes&gt;<br>
<!-- -->          &lt;att name=&quot;actual_range&quot; type=&quot;doubleList&quot;&gt;10.34 23.91&lt;/att&gt;<br>
<!-- -->          &lt;att name=&quot;colorBarMinimum&quot; type=&quot;double&quot;&gt;0&lt;/att&gt;<br>
<!-- -->          &lt;att name=&quot;colorBarMaximum&quot; type=&quot;double&quot;&gt;32&lt;/att&gt;<br>
<!-- -->          &lt;att name=&quot;<a href="#ioos_category">ioos_category</a>&quot;&gt;Temperature&lt;/att&gt;<br>
<!-- -->          &lt;att name=&quot;<a href="#long_name">long_name</a>&quot;&gt;Sea Surface Temperature&lt;/att&gt;<br>
<!-- -->          &lt;att name=&quot;numberOfObservations&quot; /&gt;<br>
<!-- -->          &lt;att name=&quot;<a href="#units">units</a>&quot;&gt;degree_C&lt;/att&gt;<br>
<!-- -->    &lt;/addAttributes&gt;</p>
</blockquote>
<p>The empty numberOfObservations attribute causes the source numberOfObservations attribute (if any) to be removed from the final, combined list of attributes.</p>
<ul>
<li>Supplying this information helps ERDDAP™ do a better job and helps users understand the datasets.<br>
<!-- -->Good metadata makes a dataset usable.<br>
<!-- -->Insufficient metadata makes a dataset useless.<br>
<!-- -->Please take the time to do a good job with metadata attributes.</li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="comments-about-variable-attributes-that-are-special-in-erddap">Comments about variable attributes that are special in ERDDAP:<a href="#comments-about-variable-attributes-that-are-special-in-erddap" class="hash-link" aria-label="Direct link to Comments about variable attributes that are special in ERDDAP:" title="Direct link to Comments about variable attributes that are special in ERDDAP:">​</a></h6>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="actual_range">actual_range<a href="#actual_range" class="hash-link" aria-label="Direct link to actual_range" title="Direct link to actual_range">​</a></h6>
<ul>
<li><a href="#actual_range"><strong>actual_range</strong></a> is a RECOMMENDED variable attribute. For example,</li>
</ul>
<blockquote>
<p>&lt;att name=&quot;actual_range&quot; <a href="#attributetype">type=&quot;floatList&quot;</a>&gt;0.17 23.58&lt;/att&gt;</p>
</blockquote>
<ul>
<li>This attribute is from the <a href="https://ferret.pmel.noaa.gov/noaa_coop/coop_cdf_profile.html" target="_blank" rel="noopener noreferrer">CDC COARDS</a> and <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF 1.7+</a> metadata standards.</li>
<li>If present, it MUST be an array of two values of the same data type as the destination data type of the variable, specifying the actual (not the theoretical or the allowed) minimum and maximum values of the data for that variable.</li>
<li>If the data is packed with <a href="#scale_factor">scale_factor and/or add_offset</a>, actual_range must have unpacked values and be of the same data type as the unpacked values.</li>
<li>For some data sources (for example, all EDDTableFrom...Files datasets), ERDDAP™ determines the actual_range of each variable and sets the actual_range attribute. With other data sources (for example, relational databases, Cassandra, DAPPER, Hyrax), it might be troublesome or burdensome for the source to calculate the range, so ERDDAP™ doesn&#x27;t request it. In this case, it is best if you can set actual_range (especially for the longitude, latitude, altitude, depth, and time variables) by adding an actual_range attribute to each variable&#x27;s <a href="#addattributes">&lt;addAttributes&gt;</a> for this dataset in datasets.xml, for example,</li>
</ul>
<blockquote>
<p>&lt;att name=&quot;actual_range&quot; <a href="#attributetype">type=&quot;doubleList&quot;</a>&gt;-180 180&lt;/att&gt;</p>
</blockquote>
<ul>
<li>For numeric <a href="#time-units">time and timestamp variables</a>, the values specified should be the relevant source (not destination) numeric values. For example, if the source time values are stored as &quot;days since 1985-01-01&quot;, then the actual_range should be specified in &quot;days since 1985-01-01&quot;. And if you want to refer to NOW as the second value for near-real-time data that is periodically updated, you should use NaN . For example, to specify a data range of 1985-01-17 until NOW, use</li>
</ul>
<blockquote>
<p>&lt;att name=&quot;actual_range&quot; <a href="#attributetype">type=&quot;doubleList&quot;</a>&gt;16 NaN&lt;/att&gt;</p>
</blockquote>
<ul>
<li>If actual_range is known (either by ERDDAP™ calculating it or by you adding it via &lt;addAttributes&gt;), ERDDAP™ will display it to the user on the Data Access Form (<em>datasetID</em>.html) and Make A Graph web pages (<em>datasetID</em>.graph) for that dataset and use it when generating the FGDC and ISO 19115 metadata. Also, the last 7 days of time&#x27;s actual_range are used as the default time subset.</li>
<li>If actual_range is known, users can use the <a href="https://coastwatch.pfeg.noaa.gov/erddap/tabledap/documentation.html#min" target="_blank" rel="noopener noreferrer">min() and max() functions</a> in requests, which is often very useful.</li>
<li>For all EDDTable... datasets, if actual_range is known (either by you specifying it or by ERDDAP™ calculating it), ERDDAP™ will be able to quickly reject any requests for data outside that range. For example, if the dataset&#x27;s lowest time value corresponds to 1985-01-17, then a request for all data from 1985-01-01 through 1985-01-16 will be immediately rejected with the error message &quot;Your query produced no matching results.&quot; This makes actual_range a very important piece of metadata, as it can save ERDDAP™ a lot of effort and save the user a lot of time. And this highlights that the actual_range values must not be narrower than the data&#x27;s actual range; otherwise, ERDDAP™ may erroneously say &quot;There is no matching data&quot; when in fact there is relevant data.</li>
<li>When a user selects a subset of data and requests a file type that includes metadata (for example, .nc), ERDDAP™ modifies actual_range in the response file to reflect the subset&#x27;s range.</li>
<li>See also <a href="#data_min-and-data_max">data_min and data_max</a>, which are an alternative way to specify the actual_range. However, these are deprecated now that actual_range is defined by CF 1.7+.<br>
<!-- --> </li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="color-bar-attributes">Color Bar Attributes<a href="#color-bar-attributes" class="hash-link" aria-label="Direct link to Color Bar Attributes" title="Direct link to Color Bar Attributes">​</a></h6>
<p>There are several OPTIONAL variable attributes which specify the suggested default attributes for a color bar (used to convert data values into colors on images) for this variable.</p>
<ul>
<li>
<p>If present, this information is used as default information by griddap and tabledap whenever you request an image that uses a color bar.</p>
</li>
<li>
<p>For example, when latitude-longitude gridded data is plotted as a coverage on a map, the color bar specifies how the data values are converted to colors.</p>
</li>
<li>
<p>Having these values allows ERDDAP™ to create images which use a consistent color bar across different requests, even when the time or other dimension values vary.</p>
</li>
<li>
<p>These attribute names were created for use in ERDDAP. They are not from a metadata standard.</p>
</li>
<li>
<p>The attributes related to the color bar are:</p>
<ul>
<li><strong>colorBarMinimum</strong> specifies the minimum value on the colorBar. For example,</li>
</ul>
<blockquote>
<p>&lt;att name=&quot;colorBarMinimum&quot; <a href="#attributetype">type=&quot;double&quot;</a>&gt;-5&lt;/att&gt;</p>
</blockquote>
<ul>
<li>If the data is packed with <a href="#scale_factor">scale_factor and/or add_offset</a>, specify the colorBarMinimum as an unpacked value.</li>
<li>Data values lower than colorBarMinimum are represented by the same color as colorBarMinimum values.</li>
<li>The attribute should be of <a href="#attributetype">type=&quot;double&quot;</a>, regardless of the data variable&#x27;s type.</li>
<li>The value is usually a nice round number.</li>
<li>Best practices: We recommend a value slightly higher than the minimum data value.</li>
<li>There is no default value.</li>
</ul>
</li>
<li>
<p><strong>colorBarMaximum</strong> specifies the maximum value on the colorBar. For example,</p>
<blockquote>
<p>&lt;att name=&quot;colorBarMaximum&quot; <a href="#attributetype">type=&quot;double&quot;</a>&gt;5&lt;/att&gt;</p>
</blockquote>
<ul>
<li>If the data is packed with <a href="#scale_factor">scale_factor and/or add_offset</a>, specify the colorBarMinimum as an unpacked value.</li>
<li>Data values higher than colorBarMaximum are represented by the same color as colorBarMaximum values.</li>
<li>The attribute should be of <a href="#attributetype">type=&quot;double&quot;</a>, regardless of the data variable&#x27;s type.</li>
<li>The value is usually a nice round number.</li>
<li>Best practices: We recommend a value slightly lower than the maximum data value.</li>
<li>There is no default value.</li>
</ul>
</li>
<li>
<p><strong>colorBarPalette</strong> specifies the palette for the colorBar. For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;att name=&quot;colorBarPalette&quot;&gt;WhiteRedBlack&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>All ERDDAP™ installations support these standard palettes: BlackBlueWhite, BlackRedWhite, BlackWhite, BlueWhiteRed, LightRainbow, Ocean, OceanDepth, Rainbow, RedWhiteBlue, ReverseRainbow, Topography, TopographyDepth [added in v1.74], WhiteBlack, WhiteBlueBlack, and WhiteRedBlack.</li>
<li>If you have installed <a href="/docs/server-admin/additional-information#palettes">additional palettes</a>, you can refer to one of them.</li>
<li>If this attribute isn&#x27;t present, the default is BlueWhiteRed if -1*colorBarMinimum = colorBarMaximum; otherwise the default is Rainbow.</li>
</ul>
</li>
<li>
<p><strong>colorBarScale</strong> specifies the scale for the colorBar. For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;att name=&quot;colorBarScale&quot;&gt;Log&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Valid values are Linear and Log.</li>
<li>If the value is Log, colorBarMinimum must be greater than 0.</li>
<li>If this attribute isn&#x27;t present, the default is Linear.</li>
</ul>
</li>
<li>
<p><strong>colorBarContinuous</strong> specifies whether the colorBar has a continuous palette of colors, or whether the colorBar has a few discrete colors. For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;att name=&quot;colorBarContinuous&quot;&gt;false&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Valid values are the strings true and false.</li>
<li>If this attribute isn&#x27;t present, the default is true.</li>
</ul>
</li>
<li>
<p><strong>colorBarNSections</strong> specifies the default number of sections on the colorBar. For example,</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;att name=&quot;colorBarNSections&quot; type=&quot;int&quot;&gt;6&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Valid values are positive integers.</li>
<li>If this attribute isn&#x27;t present, the default is -1, which tells ERDDAP™ to pick the number of sections based on the range of the colorBar.</li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="wms">WMS<a href="#wms" class="hash-link" aria-label="Direct link to WMS" title="Direct link to WMS">​</a></h6>
<p>The main requirements for a variable to be accessible via ERDDAP&#x27;s WMS server are:</p>
<ul>
<li>The dataset must be an EDDGrid... dataset.</li>
<li>The data variable MUST be a gridded variable.</li>
<li>The data variable MUST have longitude and latitude axis variables. (Other axis variables are OPTIONAL.)</li>
<li>There MUST be some longitude values between -180 and 180.</li>
<li>The colorBarMinimum and colorBarMaximum attributes MUST be specified. (Other color bar attributes are OPTIONAL.)</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="data_min-and-data_max">data_min and data_max<a href="#data_min-and-data_max" class="hash-link" aria-label="Direct link to data_min and data_max" title="Direct link to data_min and data_max">​</a></h6>
<ul>
<li>
<p><a href="#data_min-and-data_max"><strong>data_min</strong> and <strong>data_max</strong></a> -- These are deprecated variable attributes defined in the World Ocean Circulation Experiment (WOCE) metadata description. For example,</p>
<blockquote>
<p>&lt;att name=&quot;data_min&quot; <a href="#attributetype">type=&quot;float&quot;</a>&gt;0.17&lt;/att&gt;<br>
<!-- -->&lt;att name=&quot;data_max&quot; <a href="#attributetype">type=&quot;float&quot;</a>&gt;23.58&lt;/att&gt;</p>
</blockquote>
<ul>
<li>We recommend that you use <a href="#actual_range">actual_range</a>, instead of data_min and data_max, because actual_range is now defined by the CF specification.</li>
<li>If present, they must be of the same data type as the destination data type of the variable, and specify the actual (not the theoretical or the allowed) minimum and maximum values of the data for that variable.</li>
<li>If the data is packed with <a href="#scale_factor">scale_factor and/or add_offset</a>, data_min and data_max must be unpacked values using the unpacked data type.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="variable-drawlandmask">variable drawLandMask<a href="#variable-drawlandmask" class="hash-link" aria-label="Direct link to variable drawLandMask" title="Direct link to variable drawLandMask">​</a></h6>
<ul>
<li><a href="#variable-drawlandmask"><strong>drawLandMask</strong></a> -- This is an OPTIONAL variable attribute used by ERDDAP™ (and no metadata standards) which specifies the default value for the &quot;Draw Land Mask&quot; option on the dataset&#x27;s Make A Graph form (<em>datasetID</em>.graph) and for the &amp;.land parameter in a URL requesting a map of the data. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;drawLandMask&quot;&gt;under&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->See the <a href="#drawlandmask">drawLandMask overview</a>.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="encoding">Encoding<a href="#encoding" class="hash-link" aria-label="Direct link to Encoding" title="Direct link to Encoding">​</a></h6>
<ul>
<li><a href="#encoding"><strong>_Encoding</strong></a>
<ul>
<li>This attribute may only be used with String variables .</li>
<li>This attribute is strongly recommended.</li>
<li>This attribute is from the <a href="https://docs.unidata.ucar.edu/netcdf-java/current/userguide/index.html" target="_blank" rel="noopener noreferrer">NetCDF User&#x27;s Guide (NUG)</a>.</li>
<li>Internally in ERDDAP™, Strings are a sequence of 2-byte characters that use the <a href="https://en.wikipedia.org/wiki/UTF-16" target="_blank" rel="noopener noreferrer">Unicode UCS-2 character set</a>.</li>
<li>Many file types only support 1-byte characters in Strings and thus need this attribute to identify an associated<br>
<a href="https://en.wikipedia.org/wiki/Code_page" target="_blank" rel="noopener noreferrer">charset (AKA code page)</a> which defines how to map the 256 possible values to a set of 256 characters drawn from the UCS-2 character set and/or the encoding system, e.g., <a href="https://en.wikipedia.org/wiki/UTF-8" target="_blank" rel="noopener noreferrer">UTF-8</a> (which requires between 1 and 4 bytes per character).</li>
<li>Values for _Encoding are case-insensitive.</li>
<li>In theory, ERDDAP™ could support _Encoding identifiers from <a href="https://www.iana.org/assignments/character-sets/character-sets.xhtml" target="_blank" rel="noopener noreferrer">this IANA list</a>, but in practice, ERDDAP™ currently just supports<!-- -->
<ul>
<li>ISO-8859-1 (note that it has dashes, not underscores), which has the advantage that it is identical to the first 256 characters of Unicode, and</li>
<li>UTF-8.</li>
</ul>
</li>
<li>When reading source files, the default value is ISO-8859-1, except for netcdf-4 files, where the default is UTF-8.</li>
<li>This is an ongoing troublesome issue because many source files use charsets or encodings that are different from ISO-8859-1, but don&#x27;t identify the charset or encoding. For example, many source data files have some metadata copied and pasted from Microsoft Word on Windows and thus have fancy hyphens and apostrophes from a Windows-specific charset instead of ASCII hyphens and apostrophes. These characters then show up as odd characters or &#x27;?&#x27; in ERDDAP.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="fileaccessbaseurl">fileAccessBaseUrl<a href="#fileaccessbaseurl" class="hash-link" aria-label="Direct link to fileAccessBaseUrl" title="Direct link to fileAccessBaseUrl">​</a></h6>
<ul>
<li><strong><a href="#fileaccessbaseurl">fileAccessBaseUrl</a> and fileAccessSuffix</strong> are very rarely used attributes that are not from any standard. If an EDDTable column has filenames of web accessible files (e.g., image, video, or audio files), you can add</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;fileAccessBaseUrl&quot;&gt;*someBaseURL*&lt;/a&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>to specify the base URL (ending with / ) needed to make the filenames into complete URLs. In unusual cases, such as when a column has references to .png files but the values lack &quot;.png&quot;, you can add</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;fileAccessSuffix&quot;&gt;*someSuffix*&lt;/a&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>(for example, &lt;att name=&quot;fileAccessSuffix&quot;&gt;.png&lt;/a&gt;)<br>
<!-- -->to specify a suffix to be added to make the filenames into complete URLs. Then for .htmlTable responses, ERDDAP™ will show the filename as a link to the full URL (the baseUrl plus the filename plus the suffix).</p>
<p>If you want ERDDAP™ to serve the related files, make a separate <a href="#eddtablefromfilenames">EDDTableFromFileNames</a> dataset for those files (it may be a private dataset).</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="fileaccessarchiveurl">fileAccessArchiveUrl<a href="#fileaccessarchiveurl" class="hash-link" aria-label="Direct link to fileAccessArchiveUrl" title="Direct link to fileAccessArchiveUrl">​</a></h6>
<ul>
<li>
<p><a href="#fileaccessarchiveurl"><strong>fileAccessArchiveUrl</strong></a> is a very rarely used attribute that is not from any standard. If an EDDTable column has filenames of web accessible files (e.g., image, video, or audio files) which are accessible via an archive (e.g., .zip file) accessible via a URL, use &lt;att name=&quot;fileAccessArchiveUrl&quot;&gt;<em>theURL</em>&lt;/att&gt; to specify the URL for the archive.</p>
<p>If you want ERDDAP™ to serve the archive file, make a separate <a href="#eddtablefromfilenames">EDDTableFromFileNames</a> dataset for that file (it may be a private dataset).</p>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="ioos_category">ioos_category<a href="#ioos_category" class="hash-link" aria-label="Direct link to ioos_category" title="Direct link to ioos_category">​</a></h6>
<ul>
<li>
<p><a href="#ioos_category"><strong>ioos_category</strong></a> -- This is a REQUIRED variable attribute if &lt;variablesMustHaveIoosCategory&gt; is set to true (the default) in <a href="/docs/server-admin/deploy-install#setupxml">setup.xml</a>; otherwise, it is OPTIONAL.<br>
<!-- -->For example, &lt;att name=&quot;ioos_category&quot;&gt;Salinity&lt;/att&gt;<br>
<!-- -->The categories are from <a href="https://ioos.noaa.gov/" target="_blank" rel="noopener noreferrer">NOAA&#x27;s Integrated Ocean Observing System (IOOS)</a>.</p>
<ul>
<li>(As of writing this) we aren&#x27;t aware of formal definitions of these names.</li>
<li>The core names are from Zdenka Willis&#x27; .ppt &quot;Integrated Ocean Observing System (IOOS) NOAA&#x27;s Approach to Building an Initial Operating Capability&quot; and from the <a href="https://www.iooc.us/wp-content/uploads/2010/11/US-IOOS-Blueprint-for-Full-Capability-Version-1.0.pdf" target="_blank" rel="noopener noreferrer">US IOOS Blueprint</a> (page 1-5).</li>
<li>It is likely that this list will be revised in the future. If you have requests, please email Chris.John at noaa.gov.</li>
<li>ERDDAP™ supports a larger list of categories than IOOS does because Bob Simons added additional names (mostly based on the names of scientific fields, for example, Biology, Ecology, Meteorology, Statistics, Taxonomy) for other types of data.</li>
<li>The current valid values in ERDDAP™ are Bathymetry, Biology, Bottom Character, CO2, Colored Dissolved Organic Matter, Contaminants, Currents, Dissolved Nutrients, Dissolved O2, Ecology, Fish Abundance, Fish Species, Heat Flux, Hydrology, Ice Distribution, Identifier, Location, Meteorology, Ocean Color, Optical Properties, Other, Pathogens, Phytoplankton Species, Pressure, Productivity, Quality, Salinity, Sea Level, Statistics, Stream Flow, Surface Waves, Taxonomy, Temperature, Time, Total Suspended Matter, Unknown, Wind, Zooplankton Species, and Zooplankton Abundance.</li>
<li>There is some overlap and ambiguity between different terms -- do your best.</li>
<li>If you add ioos_category to the list of &lt;categoryAttributes&gt; in ERDDAP&#x27;s <a href="/docs/server-admin/deploy-install#setupxml">setup.xml</a> file, users can easily find datasets with similar data via ERDDAP&#x27;s &quot;Search for Datasets by Category&quot; on the home page.<br>
<a href="https://coastwatch.pfeg.noaa.gov/erddap/categorize/ioos_category/index.html?page=1&amp;itemsPerPage=1000" target="_blank" rel="noopener noreferrer">Try using ioos_category to search for datasets of interest.</a></li>
<li>There was <a href="https://groups.google.com/forum/#!topic/erddap/TnwbgzpSS0w" target="_blank" rel="noopener noreferrer">a discussion about ERDDAP™ and ioos_category in the ERDDAP™ Google Group.</a></li>
</ul>
<p>You may be tempted to set &lt;variablesMustHaveIoosCategory&gt; to false so that this attribute isn&#x27;t required. (&quot;Pfft! What&#x27;s it to me?&quot;) Some reasons to leave it set to true (the default) and use ioos_category are:</p>
<ul>
<li>If setup.xml&#x27;s &lt;variablesMustHaveIoosCategory&gt; is set to true, <a href="#generatedatasetsxml">GenerateDatasetsXml</a> always creates/suggests an ioos_category attribute for each variable in each new dataset. So why not just leave it in?</li>
<li>ERDDAP™ lets users search for datasets of interest by category. ioos_category is a very useful search category because the ioos_categories (for example, Temperature) are quite broad. This makes ioos_category much better for this purpose than, for example, the much finer-grained CF standard_names (which aren&#x27;t so good for this purpose because of all the synonyms and slight variations, for example, sea_surface_temperature versus sea_water_temperature).<br>
<!-- -->(Using ioos_category for this purpose is controlled by &lt;categoryAttributes&gt; in your setup.xml file.)<br>
<a href="https://coastwatch.pfeg.noaa.gov/erddap/categorize/ioos_category/index.html?page=1&amp;itemsPerPage=1000" target="_blank" rel="noopener noreferrer">Try using ioos_category to search for datasets of interest.</a></li>
<li>These categories are from <a href="https://ioos.noaa.gov/" target="_blank" rel="noopener noreferrer">NOAA&#x27;s Integrated Ocean Observing System (IOOS)</a>. These categories are fundamental to IOOS&#x27;s description of IOOS&#x27;s mission. If you are in NOAA, supporting ioos_category is a good One-NOAA thing to do. (Watch this <a href="https://www.youtube.com/watch?v=nBnCsMYm2yQ" target="_blank" rel="noopener noreferrer">One NOAA video</a> and be inspired!) If you are in some other U.S. or international agency, or work with governmental agencies, or work with some other Ocean Observing System, isn&#x27;t it a good idea to cooperate with the U.S. IOOS office?</li>
<li>Sooner or later, you may want some other ERDDAP™ to link to your datasets via <a href="#eddfromerddap">EDDGridFromErddap</a> and <a href="#eddfromerddap">EDDTableFromErddap</a>. If the other ERDDAP™ requires ioos_category, your datasets must have ioos_category in order for EDDGridFromErddap and EDDTableFromErddap to work.</li>
<li>It is psychologically much easier to include ioos_category when you create the dataset (it&#x27;s just another thing that ERDDAP™ requires to add the dataset to ERDDAP), than to add it after the fact (if you decided to use it in the future).<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="long_name">long_name<a href="#long_name" class="hash-link" aria-label="Direct link to long_name" title="Direct link to long_name">​</a></h6>
<ul>
<li><a href="#long_name"><strong>long_name</strong></a> (<a href="https://ferret.pmel.noaa.gov/noaa_coop/coop_cdf_profile.html" target="_blank" rel="noopener noreferrer">COARDS</a>, <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF</a> and <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standards) is a RECOMMENDED variable attribute in ERDDAP. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;long\_name&quot;&gt;Eastward Sea Water Velocity&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>ERDDAP™ uses the long_name for labeling axes on graphs.</li>
<li>Best practices: Capitalize the words in the long_name as if it were a title (capitalize the first word and all non-article words). Don&#x27;t include the units in the long_name. The long name shouldn&#x27;t be very long (usually &lt;20 characters), but should be more descriptive than the <a href="#destinationname">destinationName</a>, which is often very concise.</li>
<li>If &quot;long_name&quot; isn&#x27;t defined in the variable&#x27;s <a href="#variable-addattributes">sourceAttributes</a> or &lt;addAttributes&gt;, ERDDAP™ will generate it by cleaning up the <a href="#standard_name">standard_name</a> (if present) or the destinationName.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="missing_value">missing_value<a href="#missing_value" class="hash-link" aria-label="Direct link to missing_value" title="Direct link to missing_value">​</a></h6>
<ul>
<li><a href="#missing_value"><strong>missing_value</strong></a> and <strong>_FillValue</strong> (<a href="https://ferret.pmel.noaa.gov/noaa_coop/coop_cdf_profile.html" target="_blank" rel="noopener noreferrer">COARDS</a> and <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF</a>) are variable attributes which describe a number (for example, -9999) which is used to represent a missing value. For example,</li>
</ul>
<blockquote>
<p>&lt;att name=&quot;missing_value&quot; <a href="#attributetype">type=&quot;double&quot;</a>&gt;-9999&lt;/att&gt;</p>
</blockquote>
<p>For String variables, the default for both is &quot;&quot; (the empty string).<br>
<!-- -->For numeric variables, the default for both is NaN.</p>
<ul>
<li>ERDDAP™ supports both missing_value and _FillValue, since some data sources assign slightly different meanings to them.</li>
<li>If present, they should be of the same data type as the variable.</li>
<li>If the data is packed with <a href="#scale_factor">scale_factor and/or add_offset</a>, the missing_value and _FillValue values should be likewise packed. Similarly, for a column with String date/time values that use a local <a href="#time_zone">time_zone</a>, the missing_value and _FillValue values should use the local time zone.</li>
<li>If a variable uses these special values, the missing_value and/or _FillValue attributes are REQUIRED.</li>
<li>For <a href="#time-units">time and timestamp variables</a> (whether the source is strings or numeric), missing_values and _FillValues appear as &quot;&quot; (the empty string) when the time is written as a String and as NaN when the time is written as a double. The source values for missing_value and _FillValue will not appear in the variable&#x27;s metadata.</li>
<li>For String variables, ERDDAP™ always converts any missing_values or _FillValue data values into &quot;&quot; (the empty string). The source values for missing_value and _FillValue will not appear in the variable&#x27;s metadata.</li>
<li>For numeric variables:<br>
<!-- -->The missing_value and _FillValue will appear in the variable&#x27;s metadata.<br>
<!-- -->For some output data formats, ERDDAP™ will leave these special numbers intact, e.g., you will see -9999.<br>
<!-- -->For other output data formats (notably text-like formats like .csv and .htmlTable), ERDDAP™ will replace these special numbers with NaN or &quot;&quot;.</li>
<li>Some data types have inherent missing value markers that don&#x27;t need to be explicitly identified with missing_value or _FillValue attributes: float and double variables have NaN (Not a Number), String values use the empty string, and char values have character \uffff (character #65535, which is Unicode&#x27;s value for Not a Character). Integer data types do not have inherent missing value markers.</li>
<li>If an integer variable has a missing value (for example, an empty position in a .csv file), ERDDAP™ will interpret the value as the defined missing_value or _FillValue for that variable. If none is defined, ERDDAP™ will interpret the value as the default missing value for that data type, which is always the maximum value which can be held by that data type:<br>
<!-- -->127 for byte variables, 32767 for short, 2147483647 for int, 9223372036854775807 for long,<br>
<!-- -->255 for ubyte, 65535 for ushort, 4294967295 for uint, and 18446744073709551615 for ulong.</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="add-_fillvalue-attributes">ADD _FillValue ATTRIBUTES?<a href="#add-_fillvalue-attributes" class="hash-link" aria-label="Direct link to ADD _FillValue ATTRIBUTES?" title="Direct link to ADD _FillValue ATTRIBUTES?">​</a></h6>
<ul>
<li>
<p><a href="#add-_fillvalue-attributes">ADD _FillValue ATTRIBUTES?</a><br>
<!-- -->Each time ERDDAP™ loads a dataset, it checks if the variables with integer source data types have a defined missing_value or _FillValue attribute. If a variable doesn&#x27;t, then ERDDAP™ prints a message to the log file (starting with &quot;Add _FillValue Attribute?&quot;) recommending that the ERDDAP™ administrator add a _FillValue attribute for this variable in datasets.xml. It is very useful for every variable to have a _FillValue or missing_value because missing values are always possible, e.g., if a given file in a dataset doesn&#x27;t have a given variable, ERDDAP™ needs to be able to present that variable as having all missing values for that variable. If you decide a variable should not have a _FillValue attribute, you can add<br>
<!-- -->&lt;att names=&quot;_FillValue&quot;&gt;null&lt;/att&gt; instead, which will suppress the message for that datasetID+variable combination in the future.</p>
<p>Each time ERDDAP™ starts up, it collects all of those recommendations into a message which is written to the log file (starting with &quot;ADD _FillValue ATTRIBUTES?&quot;), emailed to the ERDDAP™ administrator, and written to a CSV data file in the [bigParentDirectory]/logs/ directory. If you wish to, you can use the GenerateDatasetsXml program (and the AddFillValueAttributes option) to apply all the suggestions in the CSV file to the datasets.xml file. For any of the datasetID/variable combinations in that file, if you decide there is no need to add the attributed, you can change the attribute to &lt;att names=&quot;_FillValue&quot;&gt;null&lt;/att&gt; to suppress the recommendation for that datasetID+variable combination in the future.</p>
<p>This is important!<br>
<!-- -->As Bob has often said: it would be bad (and embarrassing) if some of the evidence of global warming was caused by unidentified missing values in the data (e.g., temperatures values of 99 or 127 degree_C that should have been marked as missing values and thus skewed the mean and/or median statistics higher).</p>
</li>
<li>
<p>The _FillValue and missing_value values for a given variable in different source files must be consistent; otherwise, ERDDAP™ will accept files with one set of values and reject all of the other files as &quot;Bad Files&quot;. To solve the problem,</p>
<ul>
<li>If the files are gridded .nc files, you can use <a href="#eddgridfromncfilesunpacked">EDDGridFromNcFilesUnpacked</a>.</li>
<li>If the files are tabular data files, you can use EDDTableFrom...Files&#x27; <a href="#standardizewhat">standardizeWhat</a> to tell ERDDAP to standardize the source files as they are read into ERDDAP.</li>
<li>For harder problems, you can use <a href="#ncml-files">NcML</a> or <a href="#netcdf-operators-nco">NCO</a> to solve the problem.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="scale_factor">scale_factor<a href="#scale_factor" class="hash-link" aria-label="Direct link to scale_factor" title="Direct link to scale_factor">​</a></h6>
<ul>
<li>
<p><a href="#scale_factor"><strong>scale_factor</strong></a> (default = 1) and <strong>add_offset</strong> (default = 0) (<a href="https://ferret.pmel.noaa.gov/noaa_coop/coop_cdf_profile.html" target="_blank" rel="noopener noreferrer">COARDS</a> and <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF</a>) are OPTIONAL variable attributes which describe data which is packed in a simpler data type via a simple transformation.</p>
<ul>
<li>If present, their data type is different from the source data type and describes the data type of the destination values.<br>
<!-- -->For example, a data source might have stored float data values with one decimal digit packed as short ints (int16), using scale_factor = 0.1 and add_offset = 0. For example,</li>
</ul>
<blockquote>
<p>&lt;att name=&quot;scale_factor&quot; <a href="#attributetype">type=&quot;float&quot;</a>&gt;0.1&lt;/att&gt;<br>
<!-- -->&lt;att name=&quot;add_offset&quot; <a href="#attributetype">type=&quot;float&quot;</a>&gt;0&lt;/att&gt;</p>
</blockquote>
<p>In this example, ERDDAP™ would unpack the data and present it to the user as float data values.</p>
<ul>
<li>If present, ERDDAP™ will extract the values from these attributes, remove the attributes, and automatically unpack the data for the user:<br>
<!-- -->destinationValue = sourceValue * scale_factor + add_offset<br>
<!-- -->Or, stated another way:<br>
<!-- -->unpackedValue = packedValue * scale_factor + add_offset</li>
<li>The scale_factor and add_offset values for a given variable in different source files must be consistent; otherwise, ERDDAP™ will accept files with one set of values and reject all of the other files as &quot;Bad Files&quot;. To solve the problem,<!-- -->
<ul>
<li>If the files are gridded .nc files, you can use <a href="#eddgridfromncfilesunpacked">EDDGridFromNcFilesUnpacked</a>.</li>
<li>If the files are tabular data files, you can use EDDTableFrom...Files&#x27; <a href="#standardizewhat">standardizeWhat</a> to tell ERDDAP to standardize the source files as they are read into ERDDAP.</li>
<li>For harder problems, you can use <a href="#ncml-files">NcML</a> or <a href="#netcdf-operators-nco">NCO</a> to solve the problem.<br>
<!-- --> </li>
</ul>
</li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="standard_name">standard_name<a href="#standard_name" class="hash-link" aria-label="Direct link to standard_name" title="Direct link to standard_name">​</a></h6>
<ul>
<li><a href="#standard_name"><strong>standard_name</strong></a> (from the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF</a> metadata standard) is a RECOMMENDED variable attribute in ERDDAP. CF maintains the list of allowed <a href="https://cfconventions.org/Data/cf-standard-names/current/build/cf-standard-name-table.html" target="_blank" rel="noopener noreferrer">CF standard names</a>. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;standard\_name&quot;&gt;eastward\_sea\_water\_velocity&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>If you add standard_name to variables&#x27; attributes and add standard_name to the list of &lt;categoryAttributes&gt; in ERDDAP&#x27;s <a href="/docs/server-admin/deploy-install#setupxml">setup.xml</a> file, users can easily find datasets with similar data via ERDDAP&#x27;s &quot;Search for Datasets by Category&quot; on the home page.</li>
<li>If you specify a CF standard_name for a variable, the units attribute for the variable doesn&#x27;t have to be identical to the Canonical Units specified for the standard name in the CF Standard Name table, but the units MUST be convertible to the Canonical Units. For example, all temperature-related CF standard_names have &quot;K&quot; (Kelvin) as the Canonical Units. So a variable with a temperature-related standard_name MUST have units of K, degree_C, degree_F, or some UDUnits variant of those names, since they are all inter-convertible.</li>
<li>Best practices: Part of the power of <a href="https://en.wikipedia.org/wiki/Controlled_vocabulary" target="_blank" rel="noopener noreferrer">controlled vocabularies</a> comes from using only the terms in the list. So we recommend sticking to the terms defined in the controlled vocabulary, and we recommend against making up a term if there isn&#x27;t an appropriate one in the list. If you need additional terms, see if the standards committee will add them to the controlled vocabulary.</li>
<li>standard_name values are the only CF attribute values which are case sensitive. They are always all lowercase. Starting in ERDDAP™ v1.82, GenerateDatasets will convert uppercase letters to lowercase letters. And when a dataset is loaded in ERDDAP, uppercase letters are silently changed to lowercase letters.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="time_precision">time_precision<a href="#time_precision" class="hash-link" aria-label="Direct link to time_precision" title="Direct link to time_precision">​</a></h6>
<ul>
<li>time_precision is an OPTIONAL attribute used by ERDDAP™ (and no metadata standards) for <a href="#time-units">time and timestamp variables</a>, which may be in gridded datasets or tabular datasets, and in axisVariables or dataVariables. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;time\_precision&quot;&gt;1970-01-01&lt;/att&gt;  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<!-- -->time_precision specifies the precision to be used whenever ERDDAP™ formats the time values from that variable as strings on web pages, including .htmlTable responses. In file formats where ERDDAP™ formats times as strings (for example, .csv and .json), ERDDAP™ only uses the time_precision-specified format if it includes fractional seconds; otherwise, ERDDAP™ uses the 1970-01-01T00:00:00Z format.</li>
<li>Valid values are 1970-01, 1970-01-01, 1970-01-01T00Z, 1970-01-01T00:00Z, 1970-01-01T00:00:00Z (the default), 1970-01-01T00:00:00.0Z, 1970-01-01T00:00:00.00Z, 1970-01-01T00:00:00.000Z. [1970 is not an option because it is a single number, so ERDDAP™ can&#x27;t know if it is a formatted time string (a year) or if it is some number of seconds since 1970-01-01T00:00:00Z.]</li>
<li>If time_precision isn&#x27;t specified or the value isn&#x27;t matched, the default value will be used.</li>
<li>Here, as in other parts of ERDDAP™, any fields of the formatted time that are not displayed are assumed to have the minimum value. For example, 1985-07, 1985-07-01, 1985-07-01T00Z, 1985-07-01T00:00Z, and 1985-07-01T00:00:00Z are all considered equivalent, although with different levels of precision implied. This matches the <a href="https://www.iso.org/iso/date_and_time_format" target="_blank" rel="noopener noreferrer">ISO 8601:2004 &quot;extended&quot; Time Format Specification</a>.</li>
<li><strong>WARNING:</strong> You should only use a limited time_precision if <strong>all</strong> of the data values for the variable have only the minimum value for all of the fields that are hidden.<!-- -->
<ul>
<li>For example, you can use a time_precision of 1970-01-01 if all of the data values have hour=0, minute=0, and second=0 (for example 2005-03-04T00:00:00Z and 2005-03-05T00:00:00Z).</li>
<li>For example, don&#x27;t use a time_precision of 1970-01-01 if there are non-0 hour, minute, or seconds values, (for example 2005-03-05T12:00:00Z) because the non-default hour value wouldn&#x27;t be displayed. Otherwise, if a user asks for all data with time=2005-03-05, the request will fail unexpectedly.<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="time_zone">time_zone<a href="#time_zone" class="hash-link" aria-label="Direct link to time_zone" title="Direct link to time_zone">​</a></h6>
<ul>
<li><a href="#time_zone"><strong>time_zone</strong></a>
<ul>
<li>time_zone is an OPTIONAL attribute used by ERDDAP™ (and no metadata standards) for <a href="#time-units">time and timestamp variables</a>, which may be in gridded datasets or tabular datasets.</li>
<li>The default is &quot;Zulu&quot; (which is the modern time zone version of GMT).</li>
<li>Background information: &quot;time offsets&quot; (e.g., Pacific Standard Time, -08:00, GMT-8) are fixed, specific, offsets relative to Zulu (GMT). In contrast, &quot;time zones&quot; are the much more complex things that are affected by Daylight Saving (e.g., &quot;US/Pacific&quot;), which have had different rules in different places at different times. The time zones always have names since they can&#x27;t be summarized by a simple offset value (see the &quot;TZ database names&quot; column in the table at <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/List_of_tz_database_time_zones</a>). ERDDAP&#x27;s time_zone attribute helps you deal with local time data from some time zone (e.g., 1987-03-25T17:32:05 Pacific Time). If you have string or numeric time data with a (fixed) time offset, you should simply adjust the data to Zulu (which is what ERDDAP™ wants) by specifying a different base time in the units attribute (e.g., &quot;hours since 1970-01-01T08:00:00Z&quot;, note the T08 to specify the time offset), and always check the results to ensure you get the results you want.</li>
<li>For timestamp variables with source data from Strings, this attribute lets you specify a time zone which leads ERDDAP™ to convert the local-time-zone source times (some in Standard time, some in Daylight Saving time) into Zulu times (which are always in Standard time). The list of valid time zone names is probably identical to the list in the TZ column at <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/List_of_tz_database_time_zones</a>. Common US time zones are: US/Hawaii, US/Alaska, US/Pacific, US/Mountain, US/Arizona, US/Central, US/Eastern.</li>
<li>For timestamp variables with numeric source data, you can specify the &quot;time_zone&quot; attribute, but the value must be &quot;Zulu&quot; or &quot;UTC&quot;. If you need support for other time zones, please email Chris.John at noaa.gov .<br>
<!-- --> </li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="units">units<a href="#units" class="hash-link" aria-label="Direct link to units" title="Direct link to units">​</a></h6>
<ul>
<li><a href="#units"><strong>units</strong></a> (<a href="https://ferret.pmel.noaa.gov/noaa_coop/coop_cdf_profile.html" target="_blank" rel="noopener noreferrer">COARDS</a>, <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF</a> and <a href="https://wiki.esipfed.org/Attribute_Convention_for_Data_Discovery_1-3" target="_blank" rel="noopener noreferrer">ACDD</a> metadata standard) defines the units of the data values. For example,<!-- -->
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;att name=&quot;units&quot;&gt;degree\_C&lt;/att&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>&quot;units&quot; is REQUIRED as either a sourceAttribute or an addAttribute for &quot;time&quot; variables and is STRONGLY RECOMMENDED for other variables whenever appropriate (which is almost always).</p>
</li>
<li>
<p>In general, we recommend <a href="https://www.unidata.ucar.edu/software/udunits/" target="_blank" rel="noopener noreferrer">UDUnits</a>-compatible units which is required by the <a href="https://ferret.pmel.noaa.gov/noaa_coop/coop_cdf_profile.html" target="_blank" rel="noopener noreferrer">COARDS</a> and <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF</a> standards.</p>
</li>
<li>
<p>Another common standard is <a href="https://unitsofmeasure.org/ucum.html" target="_blank" rel="noopener noreferrer">UCUM</a> -- the Unified Code for Units of Measure. <a href="https://www.ogc.org/" target="_blank" rel="noopener noreferrer">OGC</a> services such as <a href="https://www.ogc.org/standards/sos" target="_blank" rel="noopener noreferrer">SOS</a>, <a href="https://www.ogc.org/standards/wcs" target="_blank" rel="noopener noreferrer">WCS</a>, and <a href="https://www.ogc.org/standards/wms" target="_blank" rel="noopener noreferrer">WMS</a> require UCUM and often refer to UCUM as UOM (Units Of Measure).</p>
</li>
<li>
<p>We recommend that you use one units standard for all datasets in your ERDDAP. You should tell ERDDAP™ which standard you are using with &lt;units_standard&gt;, in your <a href="/docs/server-admin/deploy-install#setupxml">setup.xml</a> file.</p>
</li>
<li>
<p>The units for a given variable in different source files must be consistent. If you have a collection of data files where one subset of the files uses different units values than one or more other subsets of the files (for example,<br>
<!-- -->&quot;days since 1985-01-01&quot; versus &quot;days since 2000-01-01&quot;,<br>
<!-- -->&quot;degree_Celsius&quot; versus &quot;deg_C&quot;, or<br>
<!-- -->&quot;knots&quot; versus &quot;m/s&quot;) you need to find a way to standardize the units values, otherwise, ERDDAP™ will only load one subset of the files. Think about it: if one file has windSpeed units=knots and another has windSpeed units=m/s, then the values from the two files shouldn&#x27;t be included in the same aggregated dataset.</p>
<ul>
<li>If the files are gridded .nc files, in many situations you can use <a href="#eddgridfromncfilesunpacked">EDDGridFromNcFilesUnpacked</a>.</li>
<li>If the files are tabular data files, in many situations you can use EDDTableFrom...Files&#x27; <a href="#standardizewhat">standardizeWhat</a> to tell ERDDAP to standardize the source files as they are read into ERDDAP.</li>
<li>For harder problems, you can use <a href="#ncml-files">NcML</a> or <a href="#netcdf-operators-nco">NCO</a> to solve the problem.</li>
</ul>
</li>
<li>
<p>The CF standard section 8.1 says that if a variable&#x27;s data is packed via <a href="#scale_factor">scale_factor and/or add_offset</a>, &quot;The units of a variable should be representative of the unpacked data.&quot;</p>
</li>
<li>
<p><a href="#time-units">For time and timestamp variables,</a> either the variable&#x27;s <a href="#variable-addattributes">sourceAttributes</a> or &lt;addAttributes&gt; (which takes precedence) MUST have <a href="#units">units</a> which is either</p>
<ul>
<li>For time axis variables or time data variables with numeric data: <a href="https://www.unidata.ucar.edu/software/udunits/" target="_blank" rel="noopener noreferrer">UDUnits</a>-compatible string (with the format <em>units</em> since <em>baseTime</em>) describing how to interpret source time values (for example, seconds since 1970-01-01T00:00:00Z).</li>
</ul>
<p><em>units</em> can be any one of:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ms, msec, msecs, millis, millisec, millisecs, millisecond, milliseconds,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s, sec, secs, second, seconds, m, min, mins, minute, minutes, h, hr, hrs, hour, hours,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    d, day, days, week, weeks, mon, mons, month, months, yr, yrs, year, or years.  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Technically, ERDDAP™ does NOT follow the UDUNITS standard when converting &quot;years since&quot; and &quot;months since&quot; time values to &quot;seconds since&quot;. The UDUNITS standard defines a year as a fixed, single value: 3.15569259747e7 seconds. And UDUNITS defines a month as year/12. Unfortunately, most/all datasets that we have seen that use &quot;years since&quot; or &quot;months since&quot; clearly intend the values to be calendar years or calendar months. For example, 3 &quot;months since 1970-01-01&quot; is usually intended to mean 1970-04-01. So, ERDDAP™ interprets &quot;years since&quot; and &quot;months since&quot; as calendar years and months, and does not strictly follow the UDUNITS standard.</p>
<p>The <em>baseTime</em> must be an ISO 8601:2004(E) formatted date time string (yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ssZ<!-- -->, for example, 1970-01-01T00:00:00Z), or some variation of that (for example, with parts missing at the end). ERDDAP™ tries to work with a wide range of variations of that ideal format, for example, &quot;1970-1-1 0:0:0&quot; is supported. If the time zone information is missing, it is assumed to be the Zulu time zone (AKA GMT). Even if another time offset is specified, ERDDAP™ never uses Daylight Saving Time. If the baseTime uses some other format, you must use &lt;addAttributes&gt; to specify a new units string which use a variation of the ISO 8601:2004(E) format (e.g., change days since Jan 1, 1985 into days since 1985-01-01.</p>
<p>You can test ERDDAP&#x27;s ability to deal with a specific <em>units</em> since <em>baseTime</em> with ERDDAP&#x27;s <a href="https://coastwatch.pfeg.noaa.gov/erddap/convert/time.html" target="_blank" rel="noopener noreferrer">Time Converter</a>. Hopefully, you can plug in a number (the first time value from the data source?) and a units string, click on Convert, and ERDDAP™ will be able to convert it into an ISO 8601:2004(E) formatted date time string. The converter will return an error message if the units string isn&#x27;t recognizable.</p>
</li>
</ul>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="string-time-units">String Time Units<a href="#string-time-units" class="hash-link" aria-label="Direct link to String Time Units" title="Direct link to String Time Units">​</a></h6>
<ul>
<li>
<p><a href="#string-time-units">For the units attribute for time or timestamp data variables with String data,</a> you must specify a <a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html" target="_blank" rel="noopener noreferrer">java.time.DateTimeFormatter</a> pattern (which is mostly compatible with java.text.SimpleDateFormat) which describes how to interpret the string times.</p>
<p>For the commonly used time formats that are variations of the ISO 8601:2004(E) standard format (for example, 2018-01-02T00:00:00Z), you can specify variations of yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ssZ<!-- -->, for example, use yyyy-MM-dd if the string time only has a date. For any format that starts with yyyy-M, ERDDAP uses a special parser that is very forgiving of minor variations in the format. The parser can handle time zones in the format &#x27;Z&#x27;, &quot;UTC&quot;, &quot;GMT&quot;, ±XX<!-- -->:XX<!-- -->, ±XXXX, and ±XX formats. If parts of the date time are not specified (for example, minutes and seconds), ERDDAP™ assumes the lowest value for that field (e.g., if seconds aren&#x27;t specified, seconds=0 is assumed).</p>
<p>For all other string time formats, you need to precisely specify a DateTimeFormatter-compatible time format string. Like yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ssZ<!-- -->, these format strings are built from characters which identify a specific type of information from the time string, e.g., m means minute-of-hour. If you repeat the format character some number of times, it further refines the meaning, e.g., m means that the value may be specified by any number of digits, mm means that the value must be specified by 2 digits. The Java documentation for DateTimeFormatter is a crude overview and does not make these details clear. So here is a list of format character variations and their meaning within ERDDAP™ (which is sometimes slightly different from Java&#x27;s DateTimeFormatter):</p>
<table><thead><tr><th>Characters</th><th>Examples</th><th>Meaning</th></tr></thead><tbody><tr><td>u, y, Y</td><td>-4712, 0, 1, 10, 100, 2018</td><td>a year number, any number of digits. ERDDAP™ treats y (year-of-era) and Y (week-based-year, because this is often mistakenly used instead of y) as u, the <a href="https://en.wikipedia.org/wiki/Astronomical_year_numbering" target="_blank" rel="noopener noreferrer">astronomical year number</a>. Astronomical years are positive or negative integers that don&#x27;t use the BCE (BC) or CE (AD) era designators: 2018=2018CE, ..., 2=2CE, 1=1CE, 0=1BCE, -1=2BCE, -2=3BCE, ...</td></tr><tr><td>uuuu, yyyy, YYYY</td><td>-4712, 0000, 0001, 0010, 0100, 2018</td><td>a 4 digit astronomical year number (ignoring any preceding &#x27;-&#x27;)</td></tr><tr><td>M</td><td>1, 01, 12</td><td>a month number, any number of digits (1=January)</td></tr><tr><td>MM</td><td>01, 12</td><td>a 2 digit (zero padded) month number</td></tr><tr><td>MMM</td><td>Jan, jan, JAN</td><td>a 3 letter English month name, case insensitive</td></tr><tr><td>MMMM</td><td>Jan, jan, JAN, January, january, JANUARY</td><td>a 3 letter or full English month name, case insensitive</td></tr><tr><td>d</td><td>1, 01, 31</td><td>a day-of-month number, any number of digits</td></tr><tr><td>dd</td><td>01, 31</td><td>a 2 digit (zero padded) day-of-month. The first &#x27;digit&#x27; may be a space.</td></tr><tr><td>D</td><td>1, 001, 366</td><td>day-of-year, any number of digits, 001=Jan 1</td></tr><tr><td>DDD</td><td>001, 366</td><td>day-of-year, 3 digits, 001=Jan 1</td></tr><tr><td>EEE</td><td>thu, THU, Thu</td><td>a 3 letter day-of-week, value is ignored when parsing</td></tr><tr><td>EEEE</td><td>thu, THU, Thu, thursday, THURSDAY, Thursday</td><td>a 3 letter or full English day-of-week, case insensitive, value is ignored when parsing</td></tr><tr><td>H</td><td>0, 00, 23</td><td>H hour-of-day (0-23), any number of digits</td></tr><tr><td>HH</td><td>00, 23</td><td>HH hour-of-day (00-23), 2 digits. The first &#x27;digit&#x27; may be a space.</td></tr><tr><td>a</td><td>am, AM, pm, PM</td><td>AM or PM, case-insensitive</td></tr><tr><td>h</td><td>12, 1, 01, 11</td><td>clock-hour-of-am-pm (12, 1, 2, ... 11), any number of digits</td></tr><tr><td>hh</td><td>12, 01, 11</td><td>clock-hour-of-am-pm (12, 1, 2, ... 11), 2 digits. The first &#x27;digit&#x27; may be a space.</td></tr><tr><td>K</td><td>0, 1, 11</td><td>hour-of-am-pm (0, 1, ...11), any number of digits</td></tr><tr><td>KK</td><td>00, 01, 11</td><td>hour-of-am-pm, 2 digits</td></tr><tr><td>m</td><td>0, 00, 59</td><td>minute-of-hour, any number of digits</td></tr><tr><td>mm</td><td>00, 59</td><td>minute-of-hour, 2 digits</td></tr><tr><td>s</td><td>0, 00, 59</td><td>second-of-minute, any number of digits</td></tr><tr><td>ss</td><td>00, 59</td><td>second-of-minute, 2 digits</td></tr><tr><td>S</td><td>0, 000, 9, 999</td><td>fraction-of-second, as if following a decimal point, any number of digits</td></tr><tr><td>SS</td><td>00, 99</td><td>hundredths of a second, 2 digits</td></tr><tr><td>SSS</td><td>000, 999</td><td>thousands of a second, 3 digits</td></tr><tr><td>A</td><td>0, 0000, 86399999</td><td>millisecond-of-day, any number of digits</td></tr><tr><td>AAAAAAAA</td><td>00000000, 86399999</td><td>millisecond-of-day, 8 digits</td></tr><tr><td>N</td><td>0, 00000000000000, 86399999999999</td><td>nanosecond-of-day, any number of digits. In ERDDAP™, this is truncated to nMillis.</td></tr><tr><td>NNNNNNNNNNNNNN</td><td>00000000000000, 86399999999999</td><td>nanosecond-of-day, 14 digits. In ERDDAP™ this is truncated to nMillis.</td></tr><tr><td>n</td><td>0, 00000000000, 59999999999</td><td>nanosecond-of-second, any number of digits. In ERDDAP™ this is truncated to nMillis.</td></tr><tr><td>nnnnnnnnnnn</td><td>00000000000, 59999999999</td><td>nanosecond-of-second, 11 digits. In ERDDAP™ this is truncated to nMillis.</td></tr><tr><td>XXX, ZZZ</td><td>Z, -08:00, +01:00</td><td>a time zone with the format &#x27;Z&#x27; or ±(2 digit hour offset):(2 digit minute offset). This treats <em>space</em> as + (non-standard). ZZZ supporting &#x27;Z&#x27; is non-standard but deals with a common user error.</td></tr><tr><td>XX, ZZ</td><td>Z -0800, +0100</td><td>a time zone with the format &#x27;Z&#x27; or ±(2 digit hour offset):(2 digit minute offset). This treats <em>space</em> as + (non-standard). ZZ supporting &#x27;Z&#x27; is non-standard but deals with a common user error.</td></tr><tr><td>X, Z</td><td>Z, -08, +01</td><td>a time zone with the format &#x27;Z&#x27; or ±(2 digit hour offset):(2 digit minute offset). This treats <em>space</em> as + (non-standard). Z supporting &#x27;Z&#x27; is non-standard but deals with a common user error.</td></tr><tr><td>xxx</td><td>-08:00, +01:00</td><td>a time zone with the format ±(2 digit hour offset):(2 digit minute offset). This treats <em>space</em> as + (non-standard).</td></tr><tr><td>xx</td><td>-0800, +0100</td><td>a time zone with the format ±(2 digit hour offset)(2 digit minute offset). This treats <em>space</em> as + (non-standard).</td></tr><tr><td>x</td><td>-08, +01</td><td>a time zone with the format ±(2 digit hour offset). This treats <em>space</em> as + (non-standard).</td></tr><tr><td>&#x27;</td><td>&#x27;T&#x27;, &#x27;Z&#x27;, &#x27;GMT&#x27;</td><td>start and end of a series of literal characters</td></tr><tr><td>&#x27;&#x27; (two single quotes)</td><td>&#x27;&#x27;</td><td>two single quotes denotes a literal single quote</td></tr><tr><td>[]</td><td>[ ]</td><td>the start (&quot;[&quot;) and end (&quot;]&quot;) of an optional section. This notation is only supported for literal characters and at the end of the format string.</td></tr><tr><td>#, {, }</td><td>#, {, }</td><td>reserved for future use</td></tr><tr><td>G,L,Q,e,c,V,z,O,p</td><td></td><td>These formatting characters are supported by Java&#x27;s DateTimeFormatter, but currently not supported by ERDDAP. If you need support for them, email Chris.John at noaa.gov .</td></tr></tbody></table>
<p>Notes:</p>
<ul>
<li>In a date time with punctuation, numeric values may have a variable number of digits (e.g., in the US slash date format &quot;1/2/1985&quot;, the month and the date may be 1 or 2 digits) so the format must use 1-letter tokens, e.g., M/d/yyyy, which accept any number of digits for month and date.</li>
<li>If the number of digits for an item is constant, e.g., 01/02/1985, then specify the number of digits in the format, e.g., MM/dd/yyyy for 2-digit month, 2-digit date, and 4 digit year.</li>
<li>These formats are tricky to work with. A given format may work for most, but not all, time strings for a given variable. Always check that the format you specify is working as expected in ERDDAP for all of a variable&#x27;s time strings.</li>
<li>When possible, GenerateDatasetXml will suggest time format strings.</li>
<li>If you need help generating a format string, please email Chris.John at noaa.gov .</li>
</ul>
</li>
</ul>
<p>The main time data variable (for tabular datasets) and the main time axis variable (for gridded datasets) are recognized by the <a href="#destinationname">destinationName</a> time. Their units metadata must be a UDUnits-compatible units string for numeric time values, e.g., &quot;days since 1970-01-01&quot; (for tabular or gridded datasets), or <a href="#string-time-units">units suitable for string times</a>, e.g., &quot;M/d/yyyy&quot; (for tabular datasets).</p>
<p>Different Time Units in Different Gridded .nc Files - If you have a collection of gridded .nc files where, for the time variable, one subset of the files uses different time units than one or more other subsets of the files, you can use <a href="#eddgridfromncfilesunpacked">EDDGridFromNcFilesUnpacked</a>. It converts time values to &quot;seconds since 1970-01-01T00:00:00Z&quot; at a lower level, thereby hiding the differences, so that you can make one dataset from the collection of heterogeneous files.</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="timestamp-variables">TimeStamp Variables<a href="#timestamp-variables" class="hash-link" aria-label="Direct link to TimeStamp Variables" title="Direct link to TimeStamp Variables">​</a></h6>
<p><a href="#timestamp-variables">TimeStamp Variables</a> -- Any other variable (axisVariable or dataVariable, in an EDDGrid or EDDTable dataset) can be a timeStamp variable. Timestamp variables are variables that have time-related units and time data, but have a &lt;destinationName&gt; other than time. TimeStamp variables behave like the main time variable in that they convert the source&#x27;s time format into &quot;seconds since 1970-01-01T00:00:00Z&quot; and/or ISO 8601:2004(E) format). ERDDAP™ recognizes timeStamp variables by their time-related &quot;<a href="#units">units</a>&quot; metadata, which must match this regular expression &quot;[a-zA-Z]+ +since +[0-9].+&quot; (for numeric dateTimes, for example, &quot;seconds since 1970-01-01T00:00:00Z&quot;) or be a dateTime format string containing &quot;uuuu&quot;, &quot;yyyy&quot; or &quot;YYYY&quot; (for example, &quot;yyyy-MM-dd&#x27;T&#x27;HH:mm<!-- -->:ssZ<!-- -->&quot;). But please still use the destinationName &quot;time&quot; for the main dateTime variable.</p>
<p><strong>Always check your work to be sure that the time data that shows up in ERDDAP™ is the correct time data.</strong> Working with time data is always tricky and error prone.</p>
<p>See <a href="#destinationname">more information about time variables</a>.<br>
<!-- -->ERDDAP™ has a utility to <a href="https://coastwatch.pfeg.noaa.gov/erddap/convert/time.html" target="_blank" rel="noopener noreferrer">Convert a Numeric Time to/from a String Time</a>.<br>
<!-- -->See <a href="https://coastwatch.pfeg.noaa.gov/erddap/convert/time.html#erddap" target="_blank" rel="noopener noreferrer">How ERDDAP™ Deals with Time</a>.<br>
<!-- --> </p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="valid_range">valid_range<a href="#valid_range" class="hash-link" aria-label="Direct link to valid_range" title="Direct link to valid_range">​</a></h6>
<ul>
<li>
<p><a href="#valid_range"><strong>valid_range</strong>, or <strong>valid_min</strong> and <strong>valid_max</strong></a> -- These are OPTIONAL variable attributes defined in the <a href="https://cfconventions.org/Data/cf-conventions/cf-conventions-1.8/cf-conventions.html" target="_blank" rel="noopener noreferrer">CF</a> metadata conventions. For example,</p>
<blockquote>
<p>&lt;att name=&quot;valid_range&quot; <a href="#attributetype">type=&quot;floatList&quot;</a>&gt;0.0 40.0&lt;/att&gt;</p>
</blockquote>
<p>or</p>
<blockquote>
<p>&lt;att name=&quot;valid_min&quot; <a href="#attributetype">type=&quot;float&quot;</a>&gt;0.0&lt;/att&gt;<br>
<!-- -->&lt;att name=&quot;valid_max&quot; <a href="#attributetype">type=&quot;float&quot;</a>&gt;40.0&lt;/att&gt;</p>
</blockquote>
<ul>
<li>If present, they should be of the same data type as the variable, and specify the valid minimum and maximum values of the data for that variable. Users should consider values outside this range to be invalid.</li>
<li>ERDDAP™ does not apply the valid_range. Said another way: ERDDAP™ does not convert data values outside the valid_range to the _FillValue or missing_value. ERDDAP™ just passes on this metadata and leaves the application up to you.<br>
<!-- -->Why? That&#x27;s what this metadata is for. If the data provider had wanted to, the data provider could have converted the data values outside of the valid_range to be _FillValues. ERDDAP™ doesn&#x27;t second guess the data provider. This approach is safer: if it is later shown that the valid_range was too narrow or otherwise incorrect, ERDDAP™ won&#x27;t have obliterated the data.</li>
<li>If the data is packed with <a href="#scale_factor">scale_factor and/or add_offset</a>, valid_range, valid_min and valid_max should be the packed data type and values. Since ERDDAP™ applies scale_factor and add_offset when it loads the dataset, ERDDAP™ will unpack the valid_range, valid_min and valid_max values so that the destination metadata (shown to users) will indicate the unpacked data type and range.<br>
<!-- -->Or, if an unpacked_valid_range attribute is present, it will be renamed valid_range when ERDDAP™ loads the dataset.</li>
</ul>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="removemvrows">&lt;removeMVRows&gt;<a href="#removemvrows" class="hash-link" aria-label="Direct link to &lt;removeMVRows&gt;" title="Direct link to &lt;removeMVRows&gt;">​</a></h5>
<ul>
<li><a href="#removemvrows"><strong>&lt;removeMVRows&gt;</strong></a> is an OPTIONAL tag within a tag in datasets.xml for EDDTableFromFiles (including all subclasses) datasets, though it is only used for EDDTableFromMultidimNcFiles. It can have a value of true or false. For example, true<br>
<!-- -->This removes any block of rows at the end of a group where all the values are missing_value, _FillValue, or the CoHort ...Array native missing value (or char=#32 for CharArrays). This is for the CF DSG Multidimensional Array file type and similar files. If true, this does the proper test and so always loads all the max dim variables, so it may take extra time.<br>
<!-- -->The default value of is false.<br>
<!-- -->Recommendation -- If possible for your dataset, we recommend setting removeMVRows to false. Setting removeMVRows to true can significantly slow down requests, though may be needed for some datasets. </li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/datasets.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/server-admin/deploy-update"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Update</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/server-admin/additional-information"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">additional-information</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a><ul><li><a href="#some-assembly-required" class="table-of-contents__link toc-highlight">Some Assembly Required</a></li><li><a href="#data-provider-form" class="table-of-contents__link toc-highlight">Data Provider Form</a></li><li><a href="#tools" class="table-of-contents__link toc-highlight">Tools</a></li><li><a href="#generatedatasetsxml" class="table-of-contents__link toc-highlight">GenerateDatasetsXml</a></li><li><a href="#dasdds" class="table-of-contents__link toc-highlight">DasDds</a></li><li><a href="#bonus-third-party-tool-erddap-lint" class="table-of-contents__link toc-highlight">Bonus Third-Party Tool: ERDDAP-lint</a></li></ul></li><li><a href="#the-basic-structure-of-the-datasetsxml-file" class="table-of-contents__link toc-highlight">The Basic Structure of the datasets.xml File</a><ul><li><a href="#xinclude" class="table-of-contents__link toc-highlight">XInclude</a></li></ul></li><li><a href="#notes" class="table-of-contents__link toc-highlight">Notes</a><ul><li><a href="#choosing-the-dataset-type" class="table-of-contents__link toc-highlight">Choosing the Dataset Type</a></li><li><a href="#serving-the-data-as-is" class="table-of-contents__link toc-highlight">Serving the Data As Is</a></li><li><a href="#hint" class="table-of-contents__link toc-highlight">Hint</a></li><li><a href="#encoding-special-characters" class="table-of-contents__link toc-highlight">Encoding Special Characters</a></li><li><a href="#xml-doesnt-tolerate-syntax-errors" class="table-of-contents__link toc-highlight">XML doesn&#39;t tolerate syntax errors</a></li><li><a href="#troubleshooting-tips" class="table-of-contents__link toc-highlight">Troubleshooting Tips</a></li><li><a href="#special-variables" class="table-of-contents__link toc-highlight">Special variables</a></li><li><a href="#why-just-two-basic-data-structures" class="table-of-contents__link toc-highlight">Why just two basic data structures?</a></li><li><a href="#dimensions" class="table-of-contents__link toc-highlight">Dimensions</a></li><li><a href="#projected-gridded-data" class="table-of-contents__link toc-highlight">Projected Gridded Data</a></li><li><a href="#data-types" class="table-of-contents__link toc-highlight">Data Types</a></li><li><a href="#data-type-limitations" class="table-of-contents__link toc-highlight">Data Type Limitations</a></li><li><a href="#data-type-comments" class="table-of-contents__link toc-highlight">Data Type Comments</a></li><li><a href="#media-files" class="table-of-contents__link toc-highlight">Media Files</a></li><li><a href="#working-with-aws-s3-files" class="table-of-contents__link toc-highlight">Working with AWS S3 Files</a></li><li><a href="#ncml-files" class="table-of-contents__link toc-highlight">NcML files</a></li><li><a href="#netcdf-operators-nco" class="table-of-contents__link toc-highlight">NetCDF Operators (NCO)</a></li><li><a href="#limits-to-the-size-of-a-dataset" class="table-of-contents__link toc-highlight">Limits to the Size of a Dataset</a></li><li><a href="#switch-to-acdd-13" class="table-of-contents__link toc-highlight">Switch to ACDD-1.3</a></li><li><a href="#zarr" class="table-of-contents__link toc-highlight">Zarr</a></li></ul></li><li><a href="#list-of-types-datasets" class="table-of-contents__link toc-highlight">List of Types Datasets</a><ul><li><a href="#eddgrid" class="table-of-contents__link toc-highlight">EDDGrid</a></li><li><a href="#eddtable" class="table-of-contents__link toc-highlight">EDDTable</a></li></ul></li><li><a href="#detailed-descriptions-of-dataset-types" class="table-of-contents__link toc-highlight">Detailed Descriptions of Dataset Types</a><ul><li><a href="#eddgridfromdap" class="table-of-contents__link toc-highlight">EDDGridFromDap</a></li><li><a href="#eddgridfromeddtable" class="table-of-contents__link toc-highlight">EDDGridFromEDDTable</a></li><li><a href="#eddfromerddap" class="table-of-contents__link toc-highlight">EDD*FromERDDAP</a></li><li><a href="#eddgridfrometopo" class="table-of-contents__link toc-highlight">EDDGridFromEtopo</a></li><li><a href="#eddgridfromfiles" class="table-of-contents__link toc-highlight">EDDGridFromFiles</a></li><li><a href="#eddfromaudiofiles" class="table-of-contents__link toc-highlight">EDD*FromAudioFiles</a></li><li><a href="#eddgridfrommergeirfiles" class="table-of-contents__link toc-highlight">EDDGridFromMergeIRFiles</a></li><li><a href="#eddgridfromncfiles" class="table-of-contents__link toc-highlight">EDDGridFromNcFiles</a></li><li><a href="#eddgridfromncfilesunpacked" class="table-of-contents__link toc-highlight">EDDGridFromNcFilesUnpacked</a></li><li><a href="#eddgridlonpm180" class="table-of-contents__link toc-highlight">EDDGridLonPM180</a></li><li><a href="#eddgridlon0360" class="table-of-contents__link toc-highlight">EDDGridLon0360</a></li><li><a href="#eddgridsidebyside" class="table-of-contents__link toc-highlight">EDDGridSideBySide</a></li><li><a href="#eddgridaggregateexistingdimension" class="table-of-contents__link toc-highlight">EDDGridAggregateExistingDimension</a></li><li><a href="#eddgridcopy" class="table-of-contents__link toc-highlight">EDDGridCopy</a></li><li><a href="#eddtablefromcassandra" class="table-of-contents__link toc-highlight">EDDTableFromCassandra</a></li><li><a href="#eddtablefromdapsequence" class="table-of-contents__link toc-highlight">EDDTableFromDapSequence</a></li><li><a href="#eddtablefromdatabase" class="table-of-contents__link toc-highlight">EDDTableFromDatabase</a></li><li><a href="#eddtablefromeddgrid" class="table-of-contents__link toc-highlight">EDDTableFromEDDGrid</a></li><li><a href="#eddtablefromfilenames" class="table-of-contents__link toc-highlight">EDDTableFromFileNames</a></li><li><a href="#eddtablefromfiles" class="table-of-contents__link toc-highlight">EDDTableFromFiles</a></li><li><a href="#eddtablefromasciiservice" class="table-of-contents__link toc-highlight">EDDTableFromAsciiService</a></li><li><a href="#eddtablefromasciiservicenos" class="table-of-contents__link toc-highlight">EDDTableFromAsciiServiceNOS</a></li><li><a href="#eddtablefromalldatasets" class="table-of-contents__link toc-highlight">EDDTableFromAllDatasets</a></li><li><a href="#eddtablefromasciifiles" class="table-of-contents__link toc-highlight">EDDTableFromAsciiFiles</a></li><li><a href="#eddtablefromawsxmlfiles" class="table-of-contents__link toc-highlight">EDDTableFromAwsXmlFiles</a></li><li><a href="#eddtablefromcolumnarasciifiles" class="table-of-contents__link toc-highlight">EDDTableFromColumnarAsciiFiles</a></li><li><a href="#eddtablefromhttpget" class="table-of-contents__link toc-highlight">EDDTableFromHttpGet</a></li><li><a href="#eddtablefromhyraxfiles" class="table-of-contents__link toc-highlight">EDDTableFromHyraxFiles</a></li><li><a href="#eddtablefrominvalidcrafiles" class="table-of-contents__link toc-highlight">EDDTableFromInvalidCRAFiles</a></li><li><a href="#eddtablefromjsonlcsvfiles" class="table-of-contents__link toc-highlight">EDDTableFromJsonlCSVFiles</a></li><li><a href="#eddtablefrommultidimncfiles" class="table-of-contents__link toc-highlight">EDDTableFromMultidimNcFiles</a></li><li><a href="#eddtablefromncfiles" class="table-of-contents__link toc-highlight">EDDTableFromNcFiles</a></li><li><a href="#eddtablefromnccffiles" class="table-of-contents__link toc-highlight">EDDTableFromNcCFFiles</a></li><li><a href="#eddtablefromnccsvfiles" class="table-of-contents__link toc-highlight">EDDTableFromNccsvFiles</a></li><li><a href="#eddtablefromnos" class="table-of-contents__link toc-highlight">EDDTableFromNOS</a></li><li><a href="#eddtablefromobis" class="table-of-contents__link toc-highlight">EDDTableFromOBIS</a></li><li><a href="#eddtablefromparquetfiles" class="table-of-contents__link toc-highlight">EDDTableFromParquetFiles</a></li><li><a href="#eddtablefromsos" class="table-of-contents__link toc-highlight">EDDTableFromSOS</a></li><li><a href="#eddtablefromthreddsfiles" class="table-of-contents__link toc-highlight">EDDTableFromThreddsFiles</a></li><li><a href="#eddtablefromwfsfiles" class="table-of-contents__link toc-highlight">EDDTableFromWFSFiles</a></li><li><a href="#eddtableaggregaterows" class="table-of-contents__link toc-highlight">EDDTableAggregateRows</a></li><li><a href="#eddtablecopy" class="table-of-contents__link toc-highlight">EDDTableCopy</a></li></ul></li><li><a href="#details-1" class="table-of-contents__link toc-highlight">Details</a><ul><li><a href="#angulardegreeunits" class="table-of-contents__link toc-highlight">&lt;angularDegreeUnits&gt;</a></li><li><a href="#angulardegreetrueunits" class="table-of-contents__link toc-highlight">&lt;angularDegreeTrueUnits&gt;</a></li><li><a href="#commonstandardnames" class="table-of-contents__link toc-highlight">&lt;commonStandardNames&gt;</a></li><li><a href="#cacheminutes" class="table-of-contents__link toc-highlight">&lt;cacheMinutes&gt;</a></li><li><a href="#convertinterpolaterequestcsvexample" class="table-of-contents__link toc-highlight">&lt;convertInterpolateRequestCSVExample&gt;</a></li><li><a href="#convertinterpolatedatasetidvariablelist" class="table-of-contents__link toc-highlight">&lt;convertInterpolateDatasetIDVariableList&gt;</a></li><li><a href="#converttopublicsourceurl" class="table-of-contents__link toc-highlight">&lt;convertToPublicSourceUrl&gt;</a></li><li><a href="#dataimagepngbase64" class="table-of-contents__link toc-highlight">data/png;base64,</a></li><li><a href="#drawlandmask" class="table-of-contents__link toc-highlight">drawLandMask</a></li><li><a href="#emaildiagnosticstoerddata" class="table-of-contents__link toc-highlight">&lt;emailDiagnosticsToErdData&gt;</a></li><li><a href="#graphbackgroundcolor" class="table-of-contents__link toc-highlight">&lt;graphBackgroundColor&gt;</a></li><li><a href="#ipaddressmaxrequests" class="table-of-contents__link toc-highlight">&lt;ipAddressMaxRequests&gt;</a></li><li><a href="#ipaddressmaxrequestsactive" class="table-of-contents__link toc-highlight">&lt;ipAddressMaxRequestsActive&gt;</a></li><li><a href="#ipaddressunlimited" class="table-of-contents__link toc-highlight">&lt;ipAddressUnlimited&gt;</a></li><li><a href="#loaddatasetsminminutes" class="table-of-contents__link toc-highlight">&lt;loadDatasetsMinMinutes&gt;</a></li><li><a href="#loaddatasetsmaxminutes" class="table-of-contents__link toc-highlight">&lt;loadDatasetsMaxMinutes&gt;</a></li><li><a href="#loglevel" class="table-of-contents__link toc-highlight">&lt;logLevel&gt;</a></li><li><a href="#partialrequestmaxbytes-and-partialrequestmaxcells" class="table-of-contents__link toc-highlight">&lt;partialRequestMaxBytes&gt; and &lt;partialRequestMaxCells&gt;</a></li><li><a href="#requestblacklist" class="table-of-contents__link toc-highlight">&lt;requestBlacklist&gt;</a></li><li><a href="#slowdowntroublemillis" class="table-of-contents__link toc-highlight">&lt;slowDownTroubleMillis&gt;</a></li><li><a href="#subscriptionemailblacklist" class="table-of-contents__link toc-highlight">&lt;subscriptionEmailBlacklist&gt;</a></li><li><a href="#standard-text" class="table-of-contents__link toc-highlight">Standard Text</a></li><li><a href="#unusualactivity" class="table-of-contents__link toc-highlight">&lt;unusualActivity&gt;</a></li><li><a href="#updatemaxevents" class="table-of-contents__link toc-highlight">&lt;updateMaxEvents&gt;</a></li><li><a href="#user" class="table-of-contents__link toc-highlight">&lt;user&gt;</a></li><li><a href="#pathregex" class="table-of-contents__link toc-highlight">&lt;pathRegex&gt;</a></li><li><a href="#dataset" class="table-of-contents__link toc-highlight">&lt;dataset&gt;</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/contributing">Contributing</a></li><li class="footer__item"><a class="footer__link-item" href="/license">License</a></li><li class="footer__item"><a class="footer__link-item" href="/changes">Changes</a></li><li class="footer__item"><a class="footer__link-item" href="/cloud">Cloud</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/governance">Governance</a></li><li class="footer__item"><a class="footer__link-item" href="/technical-board">Technical Board</a></li><li class="footer__item"><a href="https://groups.google.com/g/erddap" target="_blank" rel="noopener noreferrer" class="footer__link-item">ERDDAP™ User Group<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://groups.google.com/g/erddap-announce" target="_blank" rel="noopener noreferrer" class="footer__link-item">ERDDAP™ Announce<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/ERDDAP/erddap/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/credits">Credits</a></li><li class="footer__item"><a class="footer__link-item" href="/acknowledgements">Acknowledgements</a></li></ul></div><div class="col footer__col"><div class="footer__title">Brought to you by</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.noaa.gov" target="_blank" rel="noopener noreferrer" class="footer__link-item">NOAA<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.fisheries.noaa.gov" target="_blank" rel="noopener noreferrer" class="footer__link-item">NMFS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.fisheries.noaa.gov/about/southwest-fisheries-science-center" target="_blank" rel="noopener noreferrer" class="footer__link-item">SWFSC<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.fisheries.noaa.gov/about/environmental-research-division-southwest-fisheries-science-center" target="_blank" rel="noopener noreferrer" class="footer__link-item">ERD<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">ERDDAP™, Version 2.25. Copyright © 2024 ERDDAP™. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>