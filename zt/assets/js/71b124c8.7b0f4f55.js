"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[8907],{28453(e,t,s){s.d(t,{R:()=>r,x:()=>i});var o=s(96540);const n={},c=o.createContext(n);function r(e){const t=o.useContext(c);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),o.createElement(c.Provider,{value:t},e.children)}},74390(e,t,s){s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"user/AccessToPrivateDatasets","title":"Access to Private Datasets","description":"\u5f88\u591a ERDDAP\u2122 \u8a2d\u5099\u6c92\u6709\u555f\u7528\u8a8d\u8b49\u529f\u80fd, \u56e0\u6b64\u4e0d\u63d0\u4f9b\u4f7f\u7528\u8005\u767b\u5165\u7684\u4efb\u4f55\u65b9\u5f0f, \u4e5f\u6c92\u6709\u4efb\u4f55\u79c1\u5bc6\u7684\u8cc7\u6599\u96c6 \u3002","source":"@site/i18n/zt/docusaurus-plugin-content-docs/current/user/AccessToPrivateDatasets.md","sourceDirName":"user","slug":"/user/AccessToPrivateDatasets","permalink":"/zt/docs/user/AccessToPrivateDatasets","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/user/AccessToPrivateDatasets.md","tags":[],"version":"current","frontMatter":{"title":"Access to Private Datasets"},"sidebar":"docSidebar","previous":{"title":"accessing_private_datasets","permalink":"/zt/docs/user/user-tips/accessing_private_datasets"},"next":{"title":"NCCSV 1.00","permalink":"/zt/docs/user/nccsv-1.00"}}');var n=s(74848),c=s(28453);const r={title:"Access to Private Datasets"},i="\u5b58\u53d6\u79c1\u4eba\u6578\u64da\u96c6 ERDDAP\u2122",l={},a=[{value:"\u66f4\u65b0\u6307\u4ee4",id:"updated-instructions",level:2},{value:"\u6709\u700f\u89bd\u5668\u7684\u4eba\u985e",id:"humans-with-browsers",level:2},{value:"\u6587\u7a3f",id:"scripts",level:2}];function d(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"\u5b58\u53d6\u79c1\u4eba\u6578\u64da\u96c6-erddap",children:"\u5b58\u53d6\u79c1\u4eba\u6578\u64da\u96c6 ERDDAP\u2122"})}),"\n",(0,n.jsx)(t.p,{children:"\u5f88\u591a ERDDAP\u2122 \u8a2d\u5099\u6c92\u6709\u555f\u7528\u8a8d\u8b49\u529f\u80fd, \u56e0\u6b64\u4e0d\u63d0\u4f9b\u4f7f\u7528\u8005\u767b\u5165\u7684\u4efb\u4f55\u65b9\u5f0f, \u4e5f\u6c92\u6709\u4efb\u4f55\u79c1\u5bc6\u7684\u8cc7\u6599\u96c6 \u3002"}),"\n",(0,n.jsx)(t.p,{children:"\u6709\u4e9b ERDDAP\u2122 \u88dd\u7f6e\u5df2\u555f\u7528\u8a8d\u8b49 \u3002 \u76ee\u524d, ERDDAP\u2122 \u53ea\u652f\u63f4\u900f\u904e Google \u7ba1\u7406\u7684\u96fb\u5b50\u90f5\u4ef6\u5e33\u6236\u7684\u8a8d\u8b49, \u5176\u4e2d\u5305\u62ec\u96fb\u5b50\u90f5\u4ef6\u5e33\u6236 : NOAA \u548c\u5f88\u591a\u5927\u5b78\u3002 \u5982\u679c ERDDAP\u2122 \u5df2\u555f\u7528\u8a8d\u8b49, \u4efb\u4f55\u4f7f\u7528 Google \u7ba1\u7406\u7684\u96fb\u5b50\u90f5\u4ef6\u5e33\u6236\u7684\u4eba\u90fd\u53ef\u4ee5\u767b\u5165, \u4f46\u4ed6\u5011\u53ea\u80fd\u5b58\u53d6\u79c1\u4eba\u7684\u6578\u64da\u96c6 \u3002 ERDDAP\u2122 \u884c\u653f\u5b98\u5df2\u660e\u786e\u6388\u6b0a\u4ed6\u5011\u5b58\u53d6 \u3002"}),"\n",(0,n.jsx)(t.h2,{id:"updated-instructions",children:"\u66f4\u65b0\u6307\u4ee4"}),"\n",(0,n.jsxs)(t.p,{children:["\u4ee5\u4e0b\u90e8\u5206\u4fe1\u606f\u5df2\u8fc7\u65f6. \u5728\u66f4\u65b0\u4e4b\u524d, \u60a8\u53ef\u4ee5\u4f7f\u7528 ",(0,n.jsx)(t.a,{href:"https://shospital.github.io/blog/posts/blog-post/erddap_private_dataset.html",children:"\u6b64\u90e8\u843d\u683c\u6587\u7ae0"})," \u4ee5\u53d6\u5f97\u6709\u6587\u7a3f\u7684\u79c1\u4eba\u6570\u636e\u96c6\u7684\u8cc7\u6599\u3002"]}),"\n",(0,n.jsx)(t.h2,{id:"humans-with-browsers",children:"\u6709\u700f\u89bd\u5668\u7684\u4eba\u985e"}),"\n",(0,n.jsx)(t.p,{children:"\u4eba\u985e\u4f7f\u7528\u8005 ERDDAP\u2122 \u53ef\u4ee5\u767b\u5165 ERDDAP\u2122 \u5728\u700f\u89bd\u5668\u4e2d\u4ee5\u53d6\u5f97\u4ed6\u5011\u88ab\u6388\u6b0a\u5b58\u53d6\u7684\u79c1\u4eba\u6578\u64da\u96c6\u3002"}),"\n",(0,n.jsx)(t.p,{children:"\u8981\u767b\u5165 :"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"\u5728\u4efb\u610f\u5de6\u4e0a\u65b9\u7684\u9023\u7d50\u4e2d\u9ede\u64ca\u7d00\u9304 ERDDAP\u2122 \u7f51\u9875\u3002\n\u5982\u679c\u6c92\u6709\u9023\u7d50 \u3002 ERDDAP\u2122 \u5b89\u88dd\u6c92\u6709\u958b\u555f\u8a8d\u8b49\u529f\u80fd, \u6c92\u6709\u79c1\u4eba\u7684\u6578\u64da\u96c6 \u3002\n\xa0"}),"\n",(0,n.jsx)(t.li,{children:"\u6309\u4e0b\u6309\u9215\u4e2d\u7684\u7c3d\u540d\u4f86\u7c3d\u7f72\u5230\u60a8\u7684 Google \u5e33\u6236 \u3002\n\u6309\u9375\u7684\u6587\u5b57\u61c9\u8a72\u8b8a\u66f4\u70ba\u300c \u7c3d\u7f72\u300d \u3002\n\xa0"}),"\n",(0,n.jsxs)(t.li,{children:["\u9ede\u64ca\u65e5\u5fd7\u9032\u5165 ERDDAP \u6309\u94ae\u3002\n\u7db2\u9801\u61c9\u8a72\u6539\u8b8a\u70ba\u8aaa \u60a8\u5df2\u767b\u5165 ",(0,n.jsx)(t.em,{children:"\u60a8 \u96fb\u5b50\u90f5\u4ef6\u5730\u5740"})," .\n\u5982\u679c\u6c92\u6709, \u8acb\u7b49\u5f85 5 \u79d2, \u6309\u4e0b\u65e5\u5fd7 ERDDAP \u53c8\u6309\u9215\u3002\n\u5728\u6975\u7aef\u60c5\u6cc1\u4e0b,\u4f60\u53ef\u80fd\u9700\u8981\u7b49\u5f85,\u7136\u540e\u518d\u8a66\u4e00\u6b21\u3002\n\xa0"]}),"\n",(0,n.jsx)(t.li,{children:'\u4e0d\u8981\u7528\u700f\u89bd\u5668\u7684\u5f8c\u9375 \u3002 \u4f7f\u7528 " ERDDAP " \u4ee5\u4e0a\u6700\u4e0a\u9762\u7684\u9023\u7d50,\u7136\u540e\u4f7f\u7528\u5176\u4ed6\u9023\u7d50\u53bb ERDDAP\u2122 \u60a8\u6240\u8208\u8da3\u7684\u9801\u9762 \u3002 \u5982\u679c\u5feb\u53d6\u7684\u7db2\u9801\u8aaa\u4f60\u6c92\u6709\u767b\u5165 \u91cd\u65b0\u8f09\u5165\u9801\u9762\n\xa0'}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"scripts",children:"\u6587\u7a3f"}),"\n",(0,n.jsx)(t.p,{children:"\\[ \u7531Lynn DeWitt\u63d0\u4f9b, \u7433\u6069,\u8b1d\u8b1d\u4f60!\n\u82e5\u60a8\u6709\u66f4\u6b63\u6216\u5efa\u8b70, \u8acb\u767c\u9001 Erd. data@ noaa.gov \u3002 \\]"}),"\n",(0,n.jsx)(t.p,{children:"\u4e5f\u53ef\u4ee5\u767b\u5165\u5230 ERDDAP\u2122 \u4e26\u900f\u904e\u6587\u7a3f\u5b58\u53d6\u79c1\u4eba\u6578\u64da\u96c6\u3002 \u9019\u662f\u4e00\u500b\u4f7f\u7528 curl :"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"\u9019\u4e9b\u6307\u4ee4\u5047\u8a2d\u60a8\u4f7f\u7528\u7684\u662f gmail \u4f4d\u5740, \u5176\u4e2d 2 \u56e0\u7d20\u8a8d\u8b49\u6c92\u6709\u958b\u555f \u3002 \u5982\u679c\u60a8\u7684\u4e3b\u8981 gmail \u4f4d\u5740\u5df2\u958b\u555f 2 \u500b\u56e0\u5b50\u8a8d\u8b49, \u8acb\u8003\u616e\u5efa\u7acb\u53e6\u4e00\u500b gmail \u4f4d\u5740, \u95dc\u9589 2 \u500b\u56e0\u5b50\u8a8d\u8b49 \u3002\n\xa0"}),"\n",(0,n.jsx)(t.li,{children:"\u767b\u5165\u5230 ERDDAP\u2122 \u624b\u52d5\u4f7f\u7528\u60a8\u8981\u4f7f\u7528\u7684 gmail \u4f4d\u5740 \u3002\n\xa0"}),"\n",(0,n.jsx)(t.li,{children:"\u958b\u555f\u700f\u89bd\u5668\u958b\u767c\u5de5\u5177, \u524d\u5f80\u7db2\u8def\u5206\u9801 \u3002\n\xa0"}),"\n",(0,n.jsx)(t.li,{children:"\u9ede\u64ca ERDDAP\u2122 \u300c \u767b\u5165\u300d \u9023\u7d50, \u7136\u5f8c\u662f\u300c \u7c3d\u7f72\u65bc\u300d \u6309\u9215, \u5982\u679c\u88ab\u555f\u52d5, \u8acb\u9078\u64c7\u76f8\u7576\u7684\u96fb\u5b50\u90f5\u4ef6\u4f4d\u5740 \u3002\n\xa0"}),"\n",(0,n.jsx)(t.li,{children:"\u5728\u300c \u7c3d\u7f72\u300d \u6309\u9215\u8b8a\u66f4\u70ba\u300c \u7c3d\u7f72\u65bc\u5167\u300d \u4e4b\u5f8c, \u958b\u767c\u8005\u5de5\u5177\u7db2\u8def\u5206\u9801\u6703\u986f\u793a\u5169\u500b\u9805\u76ee, \u770b\u8d77\u4f86\u50cf\u4ee5\u4e0b (Firefox \u793a\u4f8b) :"}),"\n"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"    iframerpc?action=issueToken&response loginGoogle.html  \n"})}),"\n",(0,n.jsx)(t.p,{children:'\u7528\u6ed1\u9f20\u53f3\u64ca\u7684\u4e0a\u4e0b\u6587\u9078\u55ae\u4f86\u300c \u590d\u5236\u70ba cURL \u300d \u9019\u5169\u500b urls \u5e76\u8cbc\u5165\u7d14\u6587\u5b57\u7de8\u8f2f\u5668\n\xa0\n6. \u9ede\u64ca"Log into" ERDDAP "\u6309\u9215\u548c"\u526f\u672c\u70bacURL"\u7684\u9023\u7d50\u770b\u8d77\u4f86\u50cf:'}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"    login.html  \n"})}),"\n",(0,n.jsxs)(t.p,{children:["\u8cbc\u4e0a\u9019\u7b2c\u4e09\u5f35 curl \u547d\u4ee4\u3002\n\xa0\n7. \u5728\u6587\u5b57\u6a94\u4e2d, \u60a8\u73fe\u5728\u6703\u67093\u884c, \u5982\u4ee5\u4e0b, \u60a8\u5df2\u767b\u5165\u5176\u4e2d ERDDAP\u2122 \u4f3a\u670d\u5668\u4f4d\u65bc ' ",(0,n.jsx)(t.em,{children:(0,n.jsx)(t.a,{href:"https://host.somewhere.com/erddap",children:"https://host.somewhere.com/erddap"})})," '\". \u7b2c\u4e00\u6b21 curl \u547d\u4ee4\u6703\u5728\u300cloginQint\u300d\u4e2d\u53d6\u5f97\u60a8\u7684\u4f7f\u7528\u8005\u63cf\u8ff0\u6a94, \u4e26\u7522\u751f\u300c idQToken \u300d \u3002 \u7b2c\u4e8c\u500b\u4f7f\u7528 id\\_token \u767b\u5165 Google, \u7b2c\u4e09\u500b\u518d\u767b\u5165 ERDDAP ."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"    curl 'https://accounts.google.com/o/oauth2/iframerpc?action=issueToken&response\\\\_type=token%20id\\\\_token&scope=openid%20profile%20email&client\\\\_id=ABCDEFG.apps.googleusercontent.com&login\\\\_hint=XXXXXXXXXX&ss\\\\_domain=https%3A%2F%2Fhost.somewhere.com&origin=https%3A%2F%2Fhost.somewhere.com' --2.0 -H 'Host: accounts.google.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://accounts.google.com/o/oauth2/iframe' -H 'Cookie: lotsofcookiestuff' -H 'Connection: keep-alive' curl 'https://host.somewhere.com/erddap/loginGoogle.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' --data 'idtoken=HUGELONGIDTOKEN' curl 'https://host.somewhere.com/erddap/login.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1'\n"})}),"\n",(0,n.jsxs)(t.ol,{start:"8",children:["\n",(0,n.jsx)(t.li,{children:"\u4ee5\u4e0a 3 \u884c, \u4f9d\u6b21\u5f9e\u547d\u4ee4\u884c\u57f7\u884c\u6642, \u5c07\u60a8\u767b\u5165 ERDDAP . \u8981\u5728\u6587\u7a3f\u4e2d\u4f7f\u7528, \u60a8\u9700\u8981\u5f9e\u7b2c\u4e00\u884c\u6293\u53d6 id\\_token , \u5c07\u5b83\u8f38\u5165\u7b2c\u4e8c\u884c, \u4e26\u5beb\u51fa\u4e00\u500b cookie , \u4ee5\u4fbf\u7531\u4e4b\u5f8c\u7684\u884c\u8b80\u53d6 \u3002\n\xa0"}),"\n",(0,n.jsxs)(t.li,{children:["\u8981\u767c\u5c55\u5287\u672c, \u57f7\u884c\u7b2c\u4e00\u500b (' '",(0,n.jsx)(t.a,{href:"https://accounts.google.com",children:"https://accounts.google.com"}),")   curl \u76f4\u7dda\u8207\u5f9e\u958b\u767c\u5de5\u5177\u590d\u5236\u7684\u5b8c\u5168\u4e00\u6a23,\u4e26\u6293\u53d6\u56de\u61c9 (\u4f60\u53ef\u4ee5\u5f97\u5230 curl \u65d7\u5b50\u300c -2.0 \u300d \u7684\u932f\u8aa4) . \u5728php\u4e2d,\u5b83\u770b\u8d77\u4f86\u50cf\u5982\u4e0b:"]}),"\n"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"    $gcurlstuff=\"curl 'https://accounts.google.com/o/oauth2/iframerpc?action=issueToken&response\\\\_type=token%20id\\\\_token&scope=openid%20profile%20email&client\\\\_id=ABCDEFG.apps.googleusercontent.com&login\\\\_hint=XXXXXXXXXX&ss\\\\_domain=https%3A%2F%2Fhost.somewhere.com&origin=https%3A%2F%2Fhost.somewhere.com' -H 'Host: accounts.google.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://accounts.google.com/o/oauth2/iframe' -H 'Cookie: lotsofcookiestuff' -H 'Connection: keep-alive'\"; //execute the curl command: exec($gcurlstuff,$output,$status); //the response is a json array in $output $response=json\\\\_decode($output\\\\[0\\\\],true); //the part you need is in \"id\\\\_token\": $id\\\\_token=$response\\\\[\"id\\\\_token\"\\\\];\n"})}),"\n",(0,n.jsx)(t.p,{children:"\u4f7f\u7528 $id\\_token \u57f7\u884c\u7b2c\u4e8c\u884c\u767b\u5165 Google, \u9996\u5148\u79fb\u9664\u300c - H\u2019 Cookie: stuff \u300d \u53c3\u6578, \u800c\u662f\u544a\u8a34 curl \u5beb\u4f5c\u66f2\u5947:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"    $glcurlstuff=\"curl 'https://host.somewhere.com/erddap/loginGoogle.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: \\\\*/\\\\*' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Cookie: cookiestuff' -H 'Connection: keep-alive' --data 'idtoken=\".$id\\\\_token.\"' -b cookies.txt -c cookies.txt\" exec($glcurlstuff,$output1,$status);\n"})}),"\n",(0,n.jsx)(t.p,{children:"\u767b\u5165\u5230 ERDDAP\u2122 ,\u518d\u6b21\u79fb\u9664\u201c-H'Cookie: stuff\u201d\u53c3\u6578,\u5e76\u4f7f\u7528\u5148\u524d\u5beb\u597d\u7684 cookie :"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"    $ecurlstuff=\"curl 'https://host.somewhere.com/erddap/login.html' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Referer: https://host.somewhere.com/erddap/login.html' -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1 -b cookies.txt\"' exec($ecurlstuff,$output2,$status);\n"})}),"\n",(0,n.jsx)(t.p,{children:"\u60a8\u73fe\u5728\u61c9\u8a72\u53ef\u4ee5\u7528\u540c\u6a23\u7684\u66f2\u5947\u53d6\u5f97\u4f3a\u670d\u5668\u7684\u8cc7\u6599 :"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"    $curlstuff=\"curl -s 'https://host.somewhere.com/erddap/tabledap/datasetid.csv?variablelist' -H 'Host: host.somewhere.com' -H 'User-Agent: useragentstuff' -H 'Accept: typeacceptstuff' -H 'Accept-Language: en-US,en;q=0.5' --compressed -H 'Connection: keep-alive' -H 'Upgrade-Insecure-Requests: 1' -b cookies.txt\"; exec($curlstuff,$output3,$status); //$output3 will be data in csv!\n"})})]})}function p(e={}){const{wrapper:t}={...(0,c.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}}}]);