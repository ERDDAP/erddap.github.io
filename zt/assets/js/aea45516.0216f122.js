"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[6649],{28453:(e,d,n)=>{n.d(d,{R:()=>s,x:()=>t});var r=n(96540);const i={},l=r.createContext(i);function s(e){const d=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(d):{...d,...e}},[d,e])}function t(e){let d;return d=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(l.Provider,{value:d},e.children)}},79639:(e,d,n)=>{n.r(d),n.d(d,{assets:()=>h,contentTitle:()=>t,default:()=>o,frontMatter:()=>s,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"server-admin/prometheus","title":"\u666e\u7f85\u7c73\u4fee\u65af","description":"\u666e\u7f85\u7c73\u4fee\u65af\u5ea6\u91cf\u8861 \u4ee5/erddap/\u5ea6\u91cf\u8861\u63d0\u4f9b\u3002 JVM\u6838\u5fc3\u5ea6\u91cf\u8861\u57282.25\u4e2d\u52a0\u5165\u5f88\u591a ERDDAP\u2122 2.26\u7248\u672c\u4e2d\u6dfb\u52a0\u7684\u5ea6\u91cf\u8861\u3002 \u82e5\u60a8\u8981\u4f7f\u7528\u6e2c\u91cf, \u8acb\u78ba\u8a8d\u60a8\u81f3\u5c11\u662f2. 26 \u7248 \u3002 \u5b83\u5011\u9ed8\u8ba4\u555f\u7528, \u60a8\u53ef\u4ee5\u65b0\u589e\u4ee5\u95dc\u9589\u5b83\u5011","source":"@site/i18n/zt/docusaurus-plugin-content-docs/current/server-admin/prometheus.md","sourceDirName":"server-admin","slug":"/server-admin/prometheus","permalink":"/zt/docs/server-admin/prometheus","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/prometheus.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"docSidebar","previous":{"title":"\u672c\u5730\u5316\u5143\u6570\u636e","permalink":"/zt/docs/server-admin/localized-metadata"},"next":{"title":"\u7279\u6027\u65d7\u865f","permalink":"/zt/docs/server-admin/feature-flags"}}');var i=n(74848),l=n(28453);const s={sidebar_position:9},t="\u666e\u7f85\u7c73\u4fee\u65af",h={},a=[{value:"\u57f7\u884c Prometheus \u4f3a\u670d\u5668",id:"\u57f7\u884c-prometheus-\u4f3a\u670d\u5668",level:2},{value:"ERDDAP\u2122 \u516c\u5c3a",id:"erddap-\u516c\u5c3a",level:2},{value:"JVM( \u65e5\u6587)",id:"jvm-\u65e5\u6587",level:3},{value:"ERDDAP\u2122 \u7279\u5b9a",id:"erddap-\u7279\u5b9a",level:3},{value:"ERDDAP \u5efa\u7f6e(_F)",id:"erddap-\u5efa\u7f6e_f",level:4},{value:"\u7279\u6027\u65d7(_F)",id:"\u7279\u6027\u65d7_f",level:4},{value:"\u5df2\u7f13\u51b2 \u5f71\u50cf",id:"\u5df2\u7f13\u51b2-\u5f71\u50cf",level:4},{value:"http \u8981\u6c42(_D)",id:"http-\u8981\u6c42_d",level:4},{value:"\u89f8\u6478(_thread_\u9577\u5ea6_\u79d2",id:"\u89f8\u6478_thread_\u9577\u5ea6_\u79d2",level:4},{value:"\u5de5\u4f5c(_thread_dult_\u79d2",id:"\u5de5\u4f5c_thread_dult_\u79d2",level:4},{value:"\u8f09\u5165_datas\u96c6_\u671f\u9650_\u79d2",id:"\u8f09\u5165_datas\u96c6_\u671f\u9650_\u79d2",level:4},{value:"\u96fb\u5b50\u90f5\u4ef6(_thread_dult_\u79d2",id:"\u96fb\u5b50\u90f5\u4ef6_thread_dult_\u79d2",level:4},{value:"\u96fb\u5b50\u90f5\u4ef6(_C)",id:"\u96fb\u5b50\u90f5\u4ef6_c",level:4},{value:"\u6578\u64da\u96c6(_C)",id:"\u6578\u64da\u96c6_c",level:4},{value:"\u6578\u64da\u96c6(_F):",id:"\u6578\u64da\u96c6_f",level:4},{value:"\u5168\u90e8",id:"\u5168\u90e8",level:4},{value:"\u5371\u96aa(_M)",id:"\u5371\u96aa_m",level:4},{value:"\u5371\u96aa(<em>M) _ \u5931\u6557</em> \u5b8c\u5168",id:"\u5371\u96aam-_-\u5931\u6557-\u5b8c\u5168",level:4},{value:"topo \u8981\u6c42(_A)",id:"topo-\u8981\u6c42_a",level:4},{value:"\u908a\u754c\u8861\u5b50",id:"\u908a\u754c\u8861\u5b50",level:4}];function c(e){const d={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.header,{children:(0,i.jsx)(d.h1,{id:"\u666e\u7f85\u7c73\u4fee\u65af",children:"\u666e\u7f85\u7c73\u4fee\u65af"})}),"\n",(0,i.jsxs)(d.p,{children:[(0,i.jsx)(d.a,{href:"https://prometheus.io/",children:"\u666e\u7f85\u7c73\u4fee\u65af\u5ea6\u91cf\u8861"})," \u4ee5/erddap/\u5ea6\u91cf\u8861\u63d0\u4f9b\u3002 JVM\u6838\u5fc3\u5ea6\u91cf\u8861\u57282.25\u4e2d\u52a0\u5165\u5f88\u591a ERDDAP\u2122 2.26\u7248\u672c\u4e2d\u6dfb\u52a0\u7684\u5ea6\u91cf\u8861\u3002 \u82e5\u60a8\u8981\u4f7f\u7528\u6e2c\u91cf, \u8acb\u78ba\u8a8d\u60a8\u81f3\u5c11\u662f2. 26 \u7248 \u3002 \u5b83\u5011\u9ed8\u8ba4\u555f\u7528, \u60a8\u53ef\u4ee5\u65b0\u589e\u4ee5\u95dc\u9589\u5b83\u5011"]}),"\n",(0,i.jsx)(d.pre,{children:(0,i.jsx)(d.code,{className:"language-xml",children:"<usePrometheusMetrics>false</usePrometheusMetrics>\n"})}),"\n",(0,i.jsx)(d.p,{children:"\u5230\u60a8\u7684\u8a2d\u5b9a\u503c. xml \u3002"}),"\n",(0,i.jsx)(d.p,{children:"\u9019\u4e9b\u5ea6\u91cf\u8861\u88ab\u8a2d\u8a08\u70ba\u673a\u5668\u53ef\u8b80\u6027. \u60a8\u53ef\u4ee5\u624b\u52d5\u6aa2\u67e5\u6e2c\u91cf\u5668\u9801\u9762, \u56e0\u70ba\u5728\u6df1\u5ea6\u76e3\u63a7\u4e2d\u5efa\u8b70\u4f7f\u7528 Prometheus \u4f3a\u670d\u5668 \u3002 Prometheus \u4f3a\u670d\u5668\u6703\u5132\u5b58\u6b77\u53f2\u6e2c\u91cf, \u4ee5\u8b93\u5b83\u66f4\u6df1\u5165\u5730\u76e3\u63a7 (\u50cf\u662f\u7387\u548c\u5f9e\u904e\u53bb\u6578\u503c\u7684\u8b8a\u5316) ,\u800c\u4e14\u5e38\u5e38\u4f7f\u7528 Grafana \u4f3a\u670d\u5668\u3002 \u6211\u5011\u63d0\u4f9b\u4e00\u4e9b\u9810\u8a2d\u7684\u5100\u8868\u76e4 \u7ba1\u7406\u8005\u5011\u53ef\u80fd\u6703\u767c\u73fe\u9019\u4e9b\u5100\u8868\u677f \u6709\u52a9\u4e8e\u958b\u59cb\u76e3\u63a7\u4ed6\u5011\u7684\u4f3a\u670d\u5668"}),"\n",(0,i.jsx)(d.h2,{id:"\u57f7\u884c-prometheus-\u4f3a\u670d\u5668",children:"\u57f7\u884c Prometheus \u4f3a\u670d\u5668"}),"\n",(0,i.jsxs)(d.p,{children:["\u7ba1\u7406\u76e3\u63a7\u5806\u6808\u7684\u6700\u4f73\u6587\u4ef6 (\u666e\u7f85\u7c73\u4fee\u65af + Grafana) \u5728\u666e\u7f85\u7c73\u4fee\u65af ",(0,i.jsx)(d.a,{href:"https://github.com/ERDDAP/erddap/blob/main/docker/prometheus/README.md",children:"\u8b80\u53d6\u6211"})," ."]}),"\n",(0,i.jsx)(d.h2,{id:"erddap-\u516c\u5c3a",children:"ERDDAP\u2122 \u516c\u5c3a"}),"\n",(0,i.jsx)(d.h3,{id:"jvm-\u65e5\u6587",children:"JVM( \u65e5\u6587)"}),"\n",(0,i.jsxs)(d.p,{children:["ERDDAP\u2122 \u532f\u51fa\u60a8\u53ef\u80fd\u767c\u73fe\u6709\u7528\u7684\u4e00\u4e9b\u516c\u5c3a (\u8d77\u59cb\u4e8e ERDDAP\u2122 2.25) . \u6211\u5011\u7528\u666e\u7f85\u7c73\u4fee\u65af\u5ba2\u6236\u6536\u96c6\u7684\u91cf\u8868\u4f86\u76e3\u63a7JVM\u7684\u5065\u5eb7 \u5305\u62ec\u5783\u573e\u6536\u96c6\u3001\u8a18\u61b6\u9ad4\u4f7f\u7528\u3001\u7dda\u7d22\u7b49\u6578\u64da\u3002 \u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605 ",(0,i.jsx)(d.a,{href:"https://prometheus.github.io/client_java/instrumentation/jvm/",children:"\u666e\u7f85\u7c73\u4fee\u65af Java \u5ba2\u6236\u7aef JVM \u6587\u4ef6"})," ."]}),"\n",(0,i.jsx)(d.h3,{id:"erddap-\u7279\u5b9a",children:"ERDDAP\u2122 \u7279\u5b9a"}),"\n",(0,i.jsxs)(d.p,{children:["\u6211\u5011\u4e5f\u532f\u51fa\u4e00\u4e9b ERDDAP\u2122 \u7279\u5b9a\u5c3a\u5ea6 (\u8d77\u59cb\u4e8e ERDDAP\u2122 2.26) . \u5982\u679c\u4f60\u60f3\u6316\u6398\u5bc6\u78bc,\u53ef\u4ee5\u627e\u5230\u6536\u96c6\u7684\u516c\u5236 ",(0,i.jsx)(d.a,{href:"https://github.com/ERDDAP/erddap/blob/main/WEB-INF/classes/gov/noaa/pfel/erddap/util/Metrics.java",children:"Metrics.java (\u65e5\u6587)"})," ."]}),"\n",(0,i.jsx)(d.h4,{id:"erddap-\u5efa\u7f6e_f",children:"ERDDAP \u5efa\u7f6e(_F)"}),"\n",(0,i.jsx)(d.p,{children:"\u9019\u662f\u5efa\u7bc9\u8cc7\u8a0a ERDDAP\u2122 \u4f3a\u670d\u5668\u3002 \u5305\u542b\u7248\u672c (\u4e3b\u8981. \u5c0f\u4e8e) \u5b8c\u6574\u7248\u672c (\u5c11\u6821. minor.patch) \u548c\u90e8\u7f72_ info (\u7528\u4e8e\u6307\u793a\u4f3a\u670d\u5668\u7684\u90e8\u7f72\u65b9\u5f0f, \u5982 'Docker' ' ') ."}),"\n",(0,i.jsx)(d.h4,{id:"\u7279\u6027\u65d7_f",children:"\u7279\u6027\u65d7(_F)"}),"\n",(0,i.jsx)(d.p,{children:"\u9019\u662f\u4e00\u500b\u986f\u793a\u76ee\u524d\u7279\u5f81\u65d7\u7684\u8cc7\u8a0a\u6e2c\u91cf \u3002 \u5927\u90e8\u5206\u5e03\u6797\u8a2d\u5b9a\u65b9\u6848\u90fd\u8996\u70ba\u7279\u5f81\u65d7\u865f \u3002"}),"\n",(0,i.jsx)(d.h4,{id:"\u5df2\u7f13\u51b2-\u5f71\u50cf",children:"\u5df2\u7f13\u51b2 \u5f71\u50cf"}),"\n",(0,i.jsx)(d.p,{children:"\u9019\u662f\u4e00\u500b\u8cc7\u8a0a\u6e2c\u91cf, \u6307\u793a\u5716\u50cf\u662f\u5426\u53ef\u4f7f\u7528\u52a0\u901f \u3002"}),"\n",(0,i.jsx)(d.h4,{id:"http-\u8981\u6c42_d",children:"http \u8981\u6c42(_D)"}),"\n",(0,i.jsx)(d.p,{children:"\u9019\u662f\u8981\u6c42\u56de\u61c9\u7684\u76f4\u65b9\u5716 \u3002 \u6a19\u7c64\u70ba\u8981\u6c42\u578b\u614b (\u4f8b\u5982,\u7f51\u683cdap, tabledap ,\u6587\u4ef6, wms) , \u6570\u636e\u96c6_ id (\u5982\u679c\u9002\u7528,\u5426\u5219\u91cd\u590d\u8981\u6c42\u578b\u614b) ,\u6a94\u6848\u578b\u614b (\u8981\u6c42\u7684\u8f38\u51fa\u683c\u5f0f \u4f8b\u5982 '.html', '.csv', '.iso19115' ' ') \u5b57\u5143 (\u8981\u6c42\u7684\u8a9e\u8a00, \u6216\u7f3a\u7701\u6642\u7684\u7a7a\u5b57\u4e32) \u72c0\u614b(_C) ( http \u8981\u6c42\u7684\u72c0\u614b\u4ee3\u78bc, \u4f8b\u5982 200, 302, 404) ."}),"\n",(0,i.jsx)(d.p,{children:"\u9019\u53ef\u4ee5\u7528\u65bc\u8ffd\u8e64\u7528\u6578\u64da\u96c6 id \u4f86\u6c7a\u5b9a\u4f3a\u670d\u5668\u7684\u6d41\u884c\u6578\u64da\u96c6 \u3002 \u5b83\u4e5f\u53ef\u4ee5\u5e6b\u52a9\u8fa8\u8b58\u60a8\u7684\u4f3a\u670d\u5668\u662f\u5426\u6709\u7279\u6b8a\u985e\u578b\u7684\u6162\u8981\u6c42 \u3002"}),"\n",(0,i.jsx)(d.h4,{id:"\u89f8\u6478_thread_\u9577\u5ea6_\u79d2",children:"\u89f8\u6478(_thread_\u9577\u5ea6_\u79d2"}),"\n",(0,i.jsx)(d.p,{children:"\u89f8\u6478\u7dda\u7684\u76f4\u65b9\u5716 \u3002 \u4ed6\u5011\u7684\u6a19\u7c64\u5f88\u6210\u529f (\u771f/\u5047) ."}),"\n",(0,i.jsx)(d.h4,{id:"\u5de5\u4f5c_thread_dult_\u79d2",children:"\u5de5\u4f5c(_thread_dult_\u79d2"}),"\n",(0,i.jsx)(d.p,{children:"\u5de5\u4f5c\u7dda\u7a0b\u7684\u76f4\u65b9\u5716 \u3002 \u4ed6\u5011\u7684\u6a19\u7c64\u5f88\u6210\u529f (\u771f/\u5047) \u548c\u5de5\u4f5c(_T) (\u6574\u6578) ."}),"\n",(0,i.jsx)(d.h4,{id:"\u8f09\u5165_datas\u96c6_\u671f\u9650_\u79d2",children:"\u8f09\u5165_datas\u96c6_\u671f\u9650_\u79d2"}),"\n",(0,i.jsx)(d.p,{children:"\u52a0\u8f09\u6578\u64da\u96c6\u5de5\u4f5c\u7684\u76f4\u65b9\u5716 \u3002 \u4ed6\u5011\u7684\u6a19\u7c64\u662f\u4e3b\u8981 (\u771f/\u5047) ."}),"\n",(0,i.jsx)(d.h4,{id:"\u96fb\u5b50\u90f5\u4ef6_thread_dult_\u79d2",children:"\u96fb\u5b50\u90f5\u4ef6(_thread_dult_\u79d2"}),"\n",(0,i.jsx)(d.p,{children:"\u96fb\u5b50\u90f5\u4ef6\u7dda\u7a0b\u7684\u76f4\u65b9\u5716 \u3002 \u4ed6\u5011\u7684\u6a19\u7c64\u5f88\u6210\u529f (\u771f/\u5047) ."}),"\n",(0,i.jsx)(d.h4,{id:"\u96fb\u5b50\u90f5\u4ef6_c",children:"\u96fb\u5b50\u90f5\u4ef6(_C)"}),"\n",(0,i.jsx)(d.p,{children:"\u6bcf\u9805\u5de5\u4f5c\u7684\u96fb\u5b50\u90f5\u4ef6\u76f4\u65b9\u5716 \u3002"}),"\n",(0,i.jsx)(d.h4,{id:"\u6578\u64da\u96c6_c",children:"\u6578\u64da\u96c6(_C)"}),"\n",(0,i.jsx)(d.p,{children:"\u6578\u64da\u96c6\u7684\u6e2c\u91cf\u5668, \u5728\u6bcf\u4e00\u500b\u8f09\u5165\u6578\u64da\u96c6\u547c\u53eb\u5f8c\u8a2d\u5b9a \u3002 \u6b64\u6a19\u7c64\u70ba\u5206\u985e (\u7f51\u683c,\u8868) ."}),"\n",(0,i.jsx)(d.h4,{id:"\u6578\u64da\u96c6_f",children:"\u6578\u64da\u96c6(_F):"}),"\n",(0,i.jsx)(d.p,{children:"\u7121\u6cd5\u8f09\u5165\u7684\u6578\u64da\u96c6\u7684\u6e2c\u91cf\u5668, \u5728\u6bcf\u6b21\u8f09\u5165\u6578\u64da\u96c6\u547c\u53eb\u5f8c\u8a2d\u5b9a \u3002"}),"\n",(0,i.jsx)(d.h4,{id:"\u5168\u90e8",children:"\u5168\u90e8"}),"\n",(0,i.jsx)(d.p,{children:"\u89e3\u7b54\u88ab\u89e3\u812b\u7684\u8bf7\u6c42 \u7576\u4f3a\u670d\u5668\u76f8\u4fe1\u4f3a\u670d\u5668\u5167\u5b58\u4e0d\u8db3\u6642, \u4f3a\u670d\u5668\u6703\u653e\u51fa\u8981\u6c42 (\u5185\u5b58) \u8981\u6c42\u6703\u9020\u6210\u554f\u984c \u9019\u4e0d\u5305\u62ec\u56e0\u8655\u7406\u8981\u6c42\u6642 RAM \u6216\u78c1\u789f\u7a7a\u9593\u5c11\u800c\u63d0\u51fa\u7684\u932f\u8aa4\u8981\u6c42 \u3002"}),"\n",(0,i.jsx)(d.h4,{id:"\u5371\u96aa_m",children:"\u5371\u96aa(_M)"}),"\n",(0,i.jsx)(d.p,{children:"\u4f3a\u670d\u5668\u8a66\u5716\u5411\u7ba1\u7406\u54e1\u767c\u9001\u90f5\u4ef6,"}),"\n",(0,i.jsxs)(d.h4,{id:"\u5371\u96aam-_-\u5931\u6557-\u5b8c\u5168",children:["\u5371\u96aa(",(0,i.jsx)(d.em,{children:"M) _ \u5931\u6557"})," \u5b8c\u5168"]}),"\n",(0,i.jsx)(d.p,{children:"\u56e0\u6a5f\u5668\u5167\u5b58\u8017\u76e1\u800c\u5931\u6557\u7684\u8981\u6c42\u7684\u5c0d\u6578 \u3002 \u56e0\u70ba\u6a5f\u5668\u6536\u5230\u5f88\u591a\u8cb4\u91cd\u7684\u8acb\u6c42,"}),"\n",(0,i.jsx)(d.h4,{id:"topo-\u8981\u6c42_a",children:"topo \u8981\u6c42(_A)"}),"\n",(0,i.jsx)(d.p,{children:"\u6258\u6ce2\u6578\u64da\u8981\u6c42\u7684\u5c0d\u6578 \u9019\u662f\u6a19\u7c64\u5feb\u53d6 (\u5df2\u7f13\u5b58/ \u672a\u5132\u5b58(_C)) ."}),"\n",(0,i.jsx)(d.h4,{id:"\u908a\u754c\u8861\u5b50",children:"\u908a\u754c\u8861\u5b50"}),"\n",(0,i.jsx)(d.p,{children:"\u4ea6\u6709\u6578\u4f4d\u8a08\u6578\u5668,"}),"\n",(0,i.jsxs)(d.ul,{children:["\n",(0,i.jsxs)(d.li,{children:["\u570b\u5bb6(",(0,i.jsx)(d.em,{children:"B)"})," request_ total"]}),"\n",(0,i.jsxs)(d.li,{children:["\u72c0\u614b(",(0,i.jsx)(d.em,{children:"B)"})," request_ total"]}),"\n",(0,i.jsx)(d.li,{children:"\u6cb3\u6d41 _ \u8fb9\u754c_ \u8981\u6c42_ \u7e3d\u6578"}),"\n",(0,i.jsx)(d.li,{children:"gshhs_ request_\u7e3d\u548c"}),"\n"]}),"\n",(0,i.jsx)(d.p,{children:"\u9019\u4e9b\u6a19\u7c64\u6709\u72c0\u614b (\u7c97\u7cd9,\u6210\u529f,\u6254) ."})]})}function o(e={}){const{wrapper:d}={...(0,l.R)(),...e.components};return d?(0,i.jsx)(d,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);