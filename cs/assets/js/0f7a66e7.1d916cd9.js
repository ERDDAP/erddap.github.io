"use strict";(globalThis.webpackChunkdocumentation=globalThis.webpackChunkdocumentation||[]).push([[297],{24863:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"server-admin/mqtt-integration","title":"ERDDAP Integrace MQTT","description":"ERDDAP nyn\xed zahrnuje podporu protokolu MQTT pro usnadn\u011bn\xed po\u017eit\xed a oznamov\xe1n\xed \xfadaj\u016f v re\xe1ln\xe9m \u010dase. Tato funkce je nap\xe1jena otev\u0159en\xfdm zdrojem  HiveMQ MQTT klient  a  HiveMQ Community Edition  knihovny makl\xe9\u0159\u016f.","source":"@site/i18n/cs/docusaurus-plugin-content-docs/current/server-admin/mqtt-integration.md","sourceDirName":"server-admin","slug":"/server-admin/mqtt-integration","permalink":"/cs/docs/server-admin/mqtt-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/erddap/erddap.github.io/tree/main/docs/server-admin/mqtt-integration.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docSidebar","previous":{"title":"Vlajky funkc\xed","permalink":"/cs/docs/server-admin/feature-flags"},"next":{"title":"Contributing","permalink":"/cs/docs/category/contributing"}}');var r=t(74848),d=t(28453);const s={},a="ERDDAP Integrace MQTT",i={},l=[{value:"ERDDAP jako MQTT klient",id:"erddap-jako-mqtt-klient",level:2},{value:"Nastaven\xed: <code>EDDTableFromMqtt</code>",id:"nastaven\xed-eddtablefrommqtt",level:2},{value:"ERDDAP jako MQTT makl\xe9\u0159",id:"erddap-jako-mqtt-makl\xe9\u0159",level:2},{value:"Umo\u017en\u011bn\xed vlo\u017een\xe9mu makl\xe9\u0159i",id:"umo\u017en\u011bn\xed-vlo\u017een\xe9mu-makl\xe9\u0159i",level:2},{value:"Konfigurace a datov\xe9 adres\xe1\u0159e makl\xe9\u0159e",id:"konfigurace-a-datov\xe9-adres\xe1\u0159e-makl\xe9\u0159e",level:2},{value:"Pou\u017e\xedt p\u0159\xedpad 1: po\u017eit\xed dat od MQTT klient\u016f",id:"pou\u017e\xedt-p\u0159\xedpad-1-po\u017eit\xed-dat-od-mqtt-klient\u016f",level:2},{value:"Pou\u017e\xedt p\u0159\xedpad 2: Publishing Dataset Zm\u011bna ozn\xe1men\xed",id:"pou\u017e\xedt-p\u0159\xedpad-2-publishing-dataset-zm\u011bna-ozn\xe1men\xed",level:2},{value:"Prost\u0159ed\xed Prom\u011bnn\xe1 Anal\xfdza v <code>datasets.xml</code>",id:"prost\u0159ed\xed-prom\u011bnn\xe1-anal\xfdza-v-datasetsxml",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"erddap-integrace-mqtt",children:"ERDDAP Integrace MQTT"})}),"\n",(0,r.jsxs)(n.p,{children:["ERDDAP nyn\xed zahrnuje podporu protokolu MQTT pro usnadn\u011bn\xed po\u017eit\xed a oznamov\xe1n\xed \xfadaj\u016f v re\xe1ln\xe9m \u010dase. Tato funkce je nap\xe1jena otev\u0159en\xfdm zdrojem ",(0,r.jsxs)(n.a,{href:"https://github.com/hivemq/hivemq-mqtt-client",children:[" ",(0,r.jsx)(n.strong,{children:"HiveMQ MQTT klient"})," "]})," a ",(0,r.jsxs)(n.a,{href:"https://github.com/hivemq/hivemq-community-edition",children:[" ",(0,r.jsx)(n.strong,{children:"HiveMQ Community Edition"})," "]})," knihovny makl\xe9\u0159\u016f."]}),"\n",(0,r.jsx)(n.p,{children:"ERDDAP m\u016f\u017ee vyu\u017e\xedt MQTT dv\u011bma prim\xe1rn\xedmi zp\u016fsoby:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Jako klient MQTT:"}),"    ERDDAP m\u016f\u017ee p\u0159ihl\xe1sit k t\xe9mat\u016fm existuj\xedc\xedho makl\xe9\u0159e MQTT data a vytv\xe1\u0159et data v re\xe1ln\xe9m \u010dase."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Jako MQTT Broker:"}),"    ERDDAP m\u016f\u017ee hostit vlastn\xedho vlo\u017een\xe9ho makl\xe9\u0159e MQTT, kter\xfd umo\u017e\u0148uje extern\xedm klient\u016fm zve\u0159ej\u0148ovat data p\u0159\xedmo k n\u011bmu."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"erddap-jako-mqtt-klient",children:"ERDDAP jako MQTT klient"}),"\n",(0,r.jsxs)(n.p,{children:["ERDDAP m\u016f\u017ee p\u016fsobit jako MQTT klient, aby se p\u0159ihl\xe1sil k t\xe9mat\u016fm na extern\xed nebo vlastn\xed zabudovan\xfd MQTT broker. Toho je dosa\u017eeno pomoc\xed nov\xe9ho ",(0,r.jsx)(n.code,{children:"EDDTableFromMqtt"})," Typ datov\xe9ho souboru, kter\xfd funguje podobn\u011b jako st\xe1vaj\xedc\xed ",(0,r.jsxs)(n.a,{href:"/docs/server-admin/datasets#eddtablefromhttpget",children:[" ",(0,r.jsx)(n.code,{children:"EDDTableFromHttpGet"})," "]})," Soubor dat."]}),"\n",(0,r.jsxs)(n.p,{children:["V sou\u010dasn\xe9 dob\u011b klientsk\xe1 implementace podporuje pouze ",(0,r.jsx)(n.strong,{children:"P\u0159ihl\xe1\u0161en\xed"})," na t\xe9mata."]}),"\n",(0,r.jsxs)(n.h2,{id:"nastaven\xed-eddtablefrommqtt",children:["Nastaven\xed: ",(0,r.jsx)(n.code,{children:"EDDTableFromMqtt"})]}),"\n",(0,r.jsxs)(n.p,{children:["Konfigurace datov\xe9ho souboru pro p\u0159ihl\xe1\u0161en\xed k makl\xe9\u0159i MQTT, definovat datov\xfd soubor typu ",(0,r.jsx)(n.code,{children:"EDDTableFromMqtt"})," ve Va\u0161em ",(0,r.jsx)(n.code,{children:"datasets.xml"})," Slo\u017eka. N\xe1sleduj\xedc\xed konfigura\u010dn\xed zna\u010dky jsou dostupn\xe9 v r\xe1mci ",(0,r.jsx)(n.code,{children:"<dataset>"})," blok:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\x3c!-- Example configuration for an EDDTableFromMqtt dataset in datasets.xml --\x3e\n<dataset type=\"EDDTableFromMqtt\" datasetID=\"mqtt_realtime_data\" active=\"true\">\n\n    \x3c!-- The hostname or IP address of the MQTT broker. --\x3e\n    <serverHost>broker.example.com</serverHost>\n\n    \x3c!-- The port number of the MQTT broker. --\x3e\n    <serverPort>1883</serverPort>\n\n    \x3c!-- A unique identifier for this MQTT client. --\x3e\n    <clientId>erddap-subscriber-1</clientId>\n\n    \x3c!-- The username for broker authentication (optional). --\x3e\n    <username>user</username>\n\n    \x3c!-- The password for broker authentication (optional). --\x3e\n    <password>secret</password>\n\n    \x3c!-- A comma-separated list of MQTT topics to subscribe to. --\x3e\n    <topics>sensor/+/data, another/topic</topics>\n\n    \x3c!-- Set to 'true' to use a secure SSL/TLS connection. Default is 'false'. --\x3e\n    <useSsl>false</useSsl>\n\n    \x3c!-- The session expiry interval in seconds. --\x3e\n    <sessionExpiryInterval>3600</sessionExpiryInterval>\n\n    \x3c!-- The connection timeout in seconds. --\x3e\n    <connectionTimeout>10</connectionTimeout>\n\n    \x3c!-- Set to 'true' to enable automatic reconnection. Default is 'true'. --\x3e\n    <automaticReconnect>true</automaticReconnect>\n\n</dataset>\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"erddap-jako-mqtt-makl\xe9\u0159",children:"ERDDAP jako MQTT makl\xe9\u0159"}),"\n",(0,r.jsx)(n.p,{children:"ERDDAP m\u016f\u017ee provozovat vlo\u017een\xfd makl\xe9\u0159 MQTT, kter\xfd slou\u017e\xed dv\u011bma hlavn\xedm \xfa\u010del\u016fm:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Po\u017eit\xed dat:"})," Z\xedsk\xe1n\xed dat zve\u0159ejn\u011bn\xfdch extern\xedmi klienty MQTT pro vytv\xe1\u0159en\xed dat v re\xe1ln\xe9m \u010dase."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Ozn\xe1men\xed:"})," Zve\u0159ejnit ozn\xe1men\xed o zm\u011bn\xe1ch datov\xe9ho souboru."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"umo\u017en\u011bn\xed-vlo\u017een\xe9mu-makl\xe9\u0159i",children:"Umo\u017en\u011bn\xed vlo\u017een\xe9mu makl\xe9\u0159i"}),"\n",(0,r.jsxs)(n.p,{children:["Vlo\u017een\xfd makl\xe9\u0159 MQTT je defaultn\u011b zak\xe1z\xe1n. K tomu p\u0159idejte n\xe1sleduj\xedc\xed vlajku ",(0,r.jsx)(n.code,{children:"setup.xml"})," :"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"\x3c!-- Enables the embedded HiveMQ broker. Default is 'false'. --\x3e   <enableMqttBroker> pravda </enableMqttBroker>"})}),"\n",(0,r.jsx)(n.h2,{id:"konfigurace-a-datov\xe9-adres\xe1\u0159e-makl\xe9\u0159e",children:"Konfigurace a datov\xe9 adres\xe1\u0159e makl\xe9\u0159e"}),"\n",(0,r.jsxs)(n.p,{children:["M\u016f\u017eete zadat vlastn\xed adres\xe1\u0159e pro konfiguraci makl\xe9\u0159e a datov\xe9 soubory v ",(0,r.jsx)(n.code,{children:"setup.xml"})," . Pokud jsou tyto zna\u010dky pr\xe1zdn\xe9, ERDDAP pou\u017eije v\xfdchoz\xed adres\xe1\u0159e ur\u010den\xe9 knihovnou HiveMQ. Pro pokro\u010dilej\u0161\xed \xfadaje o konfiguraci, v\u010detn\u011b logov\xe1n\xed a roz\u0161\xed\u0159en\xed, se pros\xedm obra\u0165te na \xfa\u0159edn\xedka ",(0,r.jsxs)(n.a,{href:"https://github.com/hivemq/hivemq-community-edition/wiki",children:[" ",(0,r.jsx)(n.strong,{children:"HiveMQ Community Edition Wiki"})," "]})," ."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\x3c!-- The parent directory for all MQTT-related files. --\x3e\n<bigParentDirectory>/opt/erddap/mqtt/</bigParentDirectory>\n\n\x3c!-- The path to the embedded MQTT broker's configuration folder. --\x3e\n<mqttConfigFolder>/opt/erddap/mqtt/conf/</mqttConfigFolder>\n\n\x3c!-- The path to the embedded MQTT broker's data folder. --\x3e\n<mqttDataFolder>/opt/erddap/mqtt/data/</mqttDataFolder>\n"})}),"\n",(0,r.jsx)(n.h2,{id:"pou\u017e\xedt-p\u0159\xedpad-1-po\u017eit\xed-dat-od-mqtt-klient\u016f",children:"Pou\u017e\xedt p\u0159\xedpad 1: po\u017eit\xed dat od MQTT klient\u016f"}),"\n",(0,r.jsxs)(n.p,{children:["Pro sestaven\xed souboru v re\xe1ln\xe9m \u010dase pomoc\xed vlo\u017een\xe9ho brokera m\u016f\u017eete nakonfigurovat ",(0,r.jsx)(n.code,{children:"EDDTableFromMqtt"})," Soubor \xfadaj\u016f (jak je pops\xe1no v\xfd\u0161e) v r\xe1mci ",(0,r.jsx)(n.em,{children:"zame"})," ERDDAP instance pro p\u0159ipojen\xed k vlastn\xedmu m\xedstn\xedmu makl\xe9\u0159i . Extern\xed klienti MQTT pak mohou zve\u0159ejnit data k tomuto ERDDAP makl\xe9\u0159, kter\xfd ",(0,r.jsx)(n.code,{children:"EDDTableFromMqtt"})," Datab\xe1ze se p\u0159ihl\xe1s\xed a poz\u0159e."]}),"\n",(0,r.jsx)(n.h2,{id:"pou\u017e\xedt-p\u0159\xedpad-2-publishing-dataset-zm\u011bna-ozn\xe1men\xed",children:"Pou\u017e\xedt p\u0159\xedpad 2: Publishing Dataset Zm\u011bna ozn\xe1men\xed"}),"\n",(0,r.jsxs)(n.p,{children:["ERDDAP lze nakonfigurovat pro zve\u0159ejn\u011bn\xed ozn\xe1men\xed o zm\u011bn\xe1ch datov\xe9ho souboru (nap\u0159. aktualizace nebo op\u011btovn\xe9 na\u010d\xedt\xe1n\xed) na t\xe9ma MQTT makl\xe9\u0159e. Za prv\xe9, zajistit, \u017ee makl\xe9\u0159 je povolen nebo extern\xed je k dispozici. Pot\xe9 povolte oznamovac\xed funkci v ",(0,r.jsx)(n.code,{children:"setup.xml"})," :"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"\x3c!-- Set to 'true' to publish dataset change notifications via MQTT. Default is 'false'. --\x3e   <publishMqttNotif> pravda </publishMqttNotif>"})}),"\n",(0,r.jsxs)(n.p,{children:["Kdy\u017e je tato funkce povolena, ERDDAP ke zve\u0159ejn\u011bn\xed zpr\xe1v pou\u017e\xedv\xe1 intern\xed MQTT klient. Nastaven\xed p\u0159ipojen\xed pro tohoto klienta lze p\u0159izp\u016fsobit v ",(0,r.jsx)(n.code,{children:"setup.xml"})," . N\xed\u017ee uveden\xe1 tabulka uv\xe1d\xed dostupn\xe1 nastaven\xed a jejich v\xfdchoz\xed hodnoty."]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Zna\u010dka"}),(0,r.jsx)(n.th,{children:"Typ"}),(0,r.jsx)(n.th,{children:"V\xfdchoz\xed hodnota"}),(0,r.jsx)(n.th,{children:"Popis zbo\u017e\xed"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<mqttServerHost>"})}),(0,r.jsx)(n.td,{children:"\u0159et\u011bzec"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"localhost"})}),(0,r.jsx)(n.td,{children:"Hostitel makl\xe9\u0159e zve\u0159ejn\xed ozn\xe1men\xed."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<mqttServerPort>"})}),(0,r.jsx)(n.td,{children:"int"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"1883"})}),(0,r.jsx)(n.td,{children:"P\u0159\xedstav oznamovac\xedho makl\xe9\u0159e."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<mqttClientId>"})}),(0,r.jsx)(n.td,{children:"\u0159et\u011bzec"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"erddap- klient"})}),(0,r.jsx)(n.td,{children:"ID klienta pro vydavatele ozn\xe1men\xed."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<mqttUserName>"})}),(0,r.jsx)(n.td,{children:"\u0159et\u011bzec"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"erddap-username"})}),(0,r.jsx)(n.td,{children:"U\u017eivatelsk\xe9 jm\xe9no vydavatele ozn\xe1men\xed."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<mqttPassword>"})}),(0,r.jsx)(n.td,{children:"\u0159et\u011bzec"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"erddap- password"})}),(0,r.jsx)(n.td,{children:"Heslo pro vydavatele ozn\xe1men\xed."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<mqttSsl>"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"false"})}),(0,r.jsx)(n.td,{children:"Pro oznamovac\xed spojen\xed pou\u017eijte SSL/TLS."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<mqttKeepAlive>"})}),(0,r.jsx)(n.td,{children:"int"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"60"})}),(0,r.jsx)(n.td,{children:"Udr\u017eujte interval v sekund\xe1ch."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<mqttCleanStart>"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"false"})}),(0,r.jsx)(n.td,{children:"Za\u010d\xedt s \u010dist\xfdm sezen\xedm (\u017e\xe1dn\xfd trval\xfd stav relace) ."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<mqttSessionExpiry>"})}),(0,r.jsx)(n.td,{children:"int"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"10"})}),(0,r.jsx)(n.td,{children:"\u010cas ukon\u010den\xed session v sekund\xe1ch."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<mqttConnectionTimeout>"})}),(0,r.jsx)(n.td,{children:"int"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"10"})}),(0,r.jsx)(n.td,{children:"Timeout spojen\xed za sekundy."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"<mqttAutomaticReconnect>"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"pravda"})}),(0,r.jsx)(n.td,{children:"Automaticky se znovu p\u0159ipojit, pokud je spojen\xed ztraceno."})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"prost\u0159ed\xed-prom\u011bnn\xe1-anal\xfdza-v-datasetsxml",children:["Prost\u0159ed\xed Prom\u011bnn\xe1 Anal\xfdza v ",(0,r.jsx)(n.code,{children:"datasets.xml"})]}),"\n",(0,r.jsxs)(n.p,{children:["Byla zavedena nov\xe1 funkce, kter\xe1 umo\u017e\u0148uje pou\u017e\xedv\xe1n\xed prom\u011bnn\xfdch prost\u0159ed\xed v r\xe1mci ",(0,r.jsx)(n.code,{children:"datasets.xml"})," . Tohle je ",(0,r.jsx)(n.strong,{children:"standardn\u011b zapnuto"})," ."]}),"\n",(0,r.jsxs)(n.p,{children:["Pro vypnut\xed t\xe9to funkce p\u0159idejte n\xe1sleduj\xedc\xed vlajku ",(0,r.jsx)(n.code,{children:"setup.xml"})," :"]}),"\n",(0,r.jsx)(n.p,{children:"xml"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"<enableEnvParsing> false </enableEnvParsing>"})})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var o=t(96540);const r={},d=o.createContext(r);function s(e){const n=o.useContext(d);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(d.Provider,{value:n},e.children)}}}]);